import{s as e,r as t,$ as s,E as r,S as o,a,b as i,t as p}from"./aa091c9b.js";
/**
 * Copyright 2022 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class n extends e{static get tag(){return"promise-progress-lite"}constructor(){super(),this.list=[],this.value=0,this.max=100,this.showCount=!1,this.canLoad=!1}static get styles(){let e=[];return super.styles&&(e=super.styles),[...e,t`:host{display:block;position:relative}`]}static get properties(){return{...super.properties,max:{type:Number},value:{type:Number,reflect:!0},list:{type:Array},showCount:{type:Boolean,attribute:"show-count"},canLoad:{type:Boolean}}}render(){return s` <progress part="progress" max="${this.max}" value="${this.value}"></progress> ${this.list&&this.showCount?s`${this.value} / ${this.max}`:""} <slot></slot> `}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.loadingBar=this.shadowRoot.querySelector("progress")}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{["value","max"].includes(t)&&this.shadowRoot&&this.dispatchEvent(new CustomEvent(`${t}-changed`,{detail:{value:this[t]}})),"list"==t&&this[t]&&this[t].length>0&&this.max!==this.value&&(this.canLoad=!0)}))}async process(){const e=this.list;if(this.canLoad){var t=0;const s=await e.map((async e=>await e().then((e=>{t+=1,this.value=Math.round(t/this.list.length*100),this.loadingBar.textContent=`Loading ${this.value} of ${this.max}`,resolve(e)})).catch((e=>{reject(e)}))));await Promise.allSettled(s).then((()=>{this.loadingBar.textContent="Loading Finished",this.value=this.max,setTimeout((()=>{this.dispatchEvent(new CustomEvent("promise-progress-finished",{detail:{value:!0}}))}),100)}))}}}customElements.define(n.tag,n);
/**
 * Copyright 2022 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class l extends(r(n)){constructor(){super()}static get tag(){return"promise-progress"}render(){return s` <progress part="progress" max="${this.max}" value="${this.value}"></progress> ${this.list&&this.showCount?s`${this.value} / ${this.max}`:""} <slot></slot> `}}customElements.define(l.tag,l);class d extends o{static get tag(){return"app-hax-hat-progress"}constructor(){super(),this.promises=[],this.max=100,a((()=>{this.promises=p(i.newSitePromiseList)})),a((()=>{this.dark=p(i.darkMode)}))}static get properties(){return{...super.properties,promises:{type:Array}}}process(){this.shadowRoot.querySelector("#progress2").process()}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.dispatchEvent(new CustomEvent("progress-ready",{detail:!0})),setTimeout((()=>{this.shadowRoot.querySelector("#progress2").addEventListener("value-changed",(e=>{this.shadowRoot.querySelector("#value").textContent=e.detail.value})),this.shadowRoot.querySelector("#progress2").addEventListener("max-changed",(e=>{this.max=e.detail.value})),this.shadowRoot.querySelector("#progress2").addEventListener("promise-progress-finished",(e=>{if(e.detail.value){this.dispatchEvent(new CustomEvent("promise-progress-finished",{detail:!0}));const e=document.createElement("button");this.shadowRoot.querySelector("#value").textContent=this.max,e.textContent="Let's go!",e.classList.add("game"),e.addEventListener("click",(()=>{alert("go do something")})),this.shadowRoot.querySelector("#progress2").parentNode.appendChild(e),i.toast("W00t!")}}))}),0)}static get styles(){return[...super.styles,t`:host{display:block;height:400px;width:400px}img{width:400px;height:400px;pointer-events:none}.progress{margin:-148px 0 0 10px;z-index:-1}.progress::part(progress){height:100px;width:338px;margin-top:-1px 0 0 -4px}.progress::part(progress)::-moz-progress-bar{background-color:red;height:50px;margin:24px 0 0 0;border:none}.count{color:var(--simple-colors-default-theme-grey-1,#fff);font-family:'Press Start 2P',sans-serif;width:350px;text-align:center;position:relative;display:block;font-size:30px;margin-top:-250px;margin-left:30px}.game{font-family:'Press Start 2P',sans-serif;font-size:28px;font-weight:700;text-align:center;width:310px;background-color:var(--simple-colors-default-theme-red-7,red);color:var(--simple-colors-default-theme-grey-1,#fff);border:0;height:54px;display:block;position:relative;margin:138px 0 0 52px;padding:0;box-sizing:border-box}.game:focus,.game:hover{cursor:pointer;background-color:var(--simple-colors-default-theme-red-8);color:var(--simple-colors-default-theme-grey-2)}.game:active{cursor:progress;background-color:var(--simple-colors-default-theme-red-10);color:var(--simple-colors-default-theme-grey-5)}`]}render(){return s` <img src="${new URL(new URL("16f881fc.svg",import.meta.url).href,import.meta.url).href}" alt=""> <promise-progress id="progress2" accent-color="red" ?dark="${this.dark}" class="progress" .list="${this.promises}"></promise-progress> <div class="count"><span id="value">0</span>%</div> `}}customElements.define(d.tag,d);export{d as AppHaxHatProgress};
