import{w as t,d as i,s as o,r as a,$ as n,x as s,S as r,h as l,e as d,g as c,f as h,i as u,j as p,k as m,m as g,n as b,p as f,q as v,u as y,o as _,z as x,B as w,C as A,D as E,E as S,F as C,v as N}from"./2ae1595f.js";import{i as T,t as k,e as O}from"./92722af5.js";import{S as P,a as L,A as B,b as M,c as H,d as D,e as R,f as z}from"./3c262d28.js";import{S as I}from"./ad3c8620.js";import{I18NMixin as $,I18NManagerStore as j}from"./5c68dd7f.js";import"./cf769d61.js";import"./e45430bf.js";import"./745aa4ed.js";import{SimpleModalCssVars as F}from"./120aa880.js";
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class V extends T{constructor(e){if(super(e),this.it=t,e.type!==k.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===t||null==e)return this.ft=void 0,this.it=e;if(e===i)return e;if("string"!=typeof e)throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this.ft;this.it=e;const o=[e];return o.raw=o,this.ft={_$litType$:this.constructor.resultType,strings:o,values:[]}}}V.directiveName="unsafeHTML",V.resultType=1;const U=O(V);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */class q extends(P(o)){static get tag(){return"simple-toolbar-more-button"}static get styles(){return[...super.styles,a`:host([hidden]){display:none!important}`]}constructor(){super(),this.icon="more-vert",this.toggled=!1,this.toggles=!0,this.label="More buttons",this.labelToggled="Fewer buttons",this.tooltipDirection="left",this.disabled=!1}_handleShortcutKeys(t,e){this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,cancelable:!0,composed:!0,detail:{...t.detail,button:this,shortcutKey:this}}))}}window.customElements.define(q.tag,q);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
class G extends(P(o)){static get tag(){return"simple-toolbar-field"}static get styles(){return[...super.styles,a`:host([full-display]){min-width:100px;display:block;padding-right:3px;overflow:visible}[part=button]{height:auto;width:auto;align-self:stretch;flex:1 1 auto}[part=button]:hover{opacity:1}[part=button]:hover>:not([part=field]){opacity:var(--simple-toolbar-button-hover-opacity,.8)}:host([full-display]) [part=button]{border-width:0}:host(:focus-within) [part=button]{color:var(--simple-toolbar-button-hover-color);background-color:var(--simple-toolbar-button-hover-bg);border-color:var(--simple-toolbar-button-hover-border-color);opacity:var(--simple-toolbar-button-hover-opacity,.8)}[part=field]{width:0;height:0;flex:0 0 0px;display:flex;align-items:center;overflow:visible}:host([icon-position=bottom]) [part=field],:host([icon-position=top]) [part=field]{flex-direction:column}:host([align-horizontal=left]) [part=field]{align-items:flex-start}:host([align-horizontal=right]) [part=field]{align-items:flex-end}::slotted(*){width:10px;flex:1 1 auto}:host(:not([full-display])) ::slotted(*){flex:0 0 auto;width:0;opacity:0;padding:0;transition:width ease-in-out .5s,opacity .5s ease-in-out 0s}:host([is-current-item]:not([full-display])) ::slotted(:focus){width:100px;opacity:1;padding:unset;transition:width ease-in-out .5s}`]}constructor(){super(),this.fullDisplay=!1,this.addEventListener("click",this.toggleFocus),this.observer.observe(this,{childList:!0,subtree:!0})}static get properties(){return{...super.properties,fullDisplay:{type:Boolean,attribute:"full-display",reflect:!0}}}get buttonTemplate(){return this.fullDisplay?n` <div id="button" class="simple-toolbar-button" ?disabled="${this.disabled}" part="button"> ${this.buttonInnerTemplate} <slot></slot> </div> ${this.tooltipFullDisplayTemplate}`:n` <div id="button" class="simple-toolbar-button" ?disabled="${this.disabled}" part="button"> ${this.buttonInnerTemplate} <span part="field"> <slot></slot> </span> </div> ${this.tooltipTemplate}`}get tooltipFullDisplayTemplate(){return this.tooltipVisible?n`<simple-tooltip id="tooltip" for="${this.hasIcon?"icon":"label"}" offset="5" position="right" part="tooltip" fit-to-visible-bounds>${this.currentTooltip||this.currentLabel}</simple-tooltip>`:""}get focusableElement(){return this.querySelector("*:not([disabled]):not([hidden])")}toggleFocus(t){this.focusableElement.clientWidth>10?this.focusableElement.blur():this.focus()}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"isCurrentItem"===e&&this.focusableElement&&this.focusableElement.setAttribute("tabindex",this.isCurrentItem?0:-1)}))}get observer(){return new MutationObserver((t=>this._watchChildren(t)))}_watchChildren(t){this.focusableElement&&this.focusableElement.setAttribute("tabindex",this.isCurrentItem?0:-1)}}window.customElements.define(G.tag,G);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
class W extends(function(t){return class extends t{render(){return""}static get properties(){return{...super.properties,itemData:{type:Array},selection:{type:String,attribute:"selection"}}}constructor(){super(),this.addEventListener(this.__selectEvent,this._handleSelectItem)}connectedCallback(){super.connectedCallback(),this.__observer.observe(this,{attributes:!0,childList:!0,subtree:!0})}disconnectedCallback(){this.__observer&&this.__observer.disconnect&&this.__observer.disconnect(),this.removeEventListener(this.__selectEvent,this._handleSelectItem),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.selectItem(this.selection)}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"selection"===e&&this.selection!==t&&this.selectItem(this.selection)}))}get selectedIndex(){let t=this.itemData.filter((t=>t.id===this.selection));return t&&t[0]?t[0].index:0}get __observer(){return new MutationObserver(((t,e)=>this._handleItemChange(t,e)))}get __allowNull(){return!1}get __query(){return"> item"}get __selected(){return"selected"}get __selectEvent(){return"select-item"}selectItem(t){t="string"==typeof t&&t.trim().length>0?this._getItemById(t):"integer"==typeof t?this._getItemByIndex(t):t,this.__allowNull||t&&!t.disabled||(t=this.selection&&this._getItemByQuery(`#${this.selection}`)?this._getItemByQuery(`#${this.selection}`):this.__selected&&this._getItemByQuery(`[${this.__selected}]`)?this._getItemByQuery(`[${this.__selected}]`):this._getItemByQuery()),t&&!this._isItemSelected(t)?(t.id=t.id||this._generateUUID(),this.selection=t.id,this._handleSelectionChange()):!t&&this.__allowNull&&this.selection&&(this.selection=void 0,this._handleSelectionChange()),this._updateItemData()}_getDataFromItems(){let t=this.querySelectorAll(`${this.__query}`);return Object.keys(t||{}).map((e=>this._getDataFromItem(t[e],e,this.__selected)))}_getDataFromItem(t,e,i){return(!t.id||t.id.trim().length<1)&&(t.id=this._generateUUID()),{id:t.id,index:parseInt(e),node:t,innerHTML:t.innerHTML,selected:t.getAttribute(i)}}_generateUUID(){return"item-ss-s-s-s-sss".replace(/s/g,Math.floor(65536*(1+Math.random())).toString(16).substring(1))}_getItemById(t){return this._getItemByQuery(`#${t}`)}_getItemByIndex(t){let e=this.querySelectorAll(this.__query);return e&&e[t]&&!e[t].disabled?e[t]:void 0}_getItemByQuery(t=""){let e=this.querySelector(`${this.__query}${t}`);return e&&!e.disabled?e:void 0}_handleItemChange(t,e){let i=!1;t.forEach((t=>{let e="childList"===t.type&&t.addedNodes.length>0,o="childList"===t.type&&t.removedNodes.length>0&&Object.keys(t.removedNodes||{}).filter((e=>t.removedNodes[e].id===this.selection)).length>0,a="attributes"===t.type&&"id"===t.attributeName;i=i||e||o||a})),i&&(this.querySelectorAll(`${this.__query}`).forEach((t=>{t.id||(t.id=this._generateUUID())})),this.selectItem(this.selection)),this._updateItemData()}_handleSelectItem(t){t.stopPropagation&&t.stopPropagation(),this.selectItem(t.detail.controls)}_handleSelectionChange(){this.querySelectorAll(`${this.__query}`).forEach((t=>this._setItemSelected(t))),this.dispatchEvent(new CustomEvent("selection-changed",{bubbles:!1,cancelable:!0,composed:!0,detail:this}))}_isItemSelected(t){return t&&(t.id&&t.id===this.selection||t.hasAttribute(this.__selected))}_setItemSelected(t){t.id!==this.selection?t.removeAttribute(this.__selected):t.setAttribute(this.__selected,!0)}_updateItemData(){this.itemData=this._getDataFromItems(),this.render&&this.render()}}}(o)){static get tag(){return"simple-toolbar-button-group"}static get properties(){return{...super.properties,required:{type:Boolean,attribute:"required",reflect:!0}}}constructor(){super(),this.setAttribute("role","radiogroup"),this.classList.add("group"),this.addEventListener("button-toggled",this._handleToggle)}connectedCallback(){super.connectedCallback(),this.querySelectorAll(`${this.__query}`).forEach((t=>{t.id||(t.id=this._generateUUID())})),this.selectItem(this.selection),this._updateItemData()}render(){return n`<slot></slot>`}get __allowNull(){return!this.required}get __query(){return"*[radio]:not([hidden])"}get __selected(){return"toggled"}_handleToggle(t){this.selectItem(t.detail.isToggled?t.detail.id:void 0)}}window.customElements.define(W.tag,W);
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const X=function(t){return class extends t{tag(){return"simple-toolbar"}static get stickyStyles(){return[a`:host([sticky]){position:sticky;top:0}`]}static get baseStyles(){return[a`:host{position:relative;display:flex;align-items:flex-start;opacity:1;z-index:2;margin:0;justify-content:space-between;background-color:var(--simple-toolbar-bg);font-size:inherit;margin:0;padding:0;transition:all .5s;transition:z-index 0s}:host([hidden]){z-index:-1;visibility:hidden;opacity:0;height:0}:host([disabled]){opacity:.6;pointer-events:none}:host(:focus-within){border:1px solid var(--simple-toolbar-hover-border-color,var(--simple-toolbar-button-hover-border-color))}#buttons{flex-wrap:wrap;display:flex;justify-content:flex-start;flex:1 1 auto;overflow-y:visible}#morebutton{flex:0 0 auto}::slotted(.group){display:flex;flex-wrap:wrap;justify-content:space-evenly;align-items:stretch;margin:0;flex:0 1 auto;overflow-y:visible;border-width:0;border-style:solid;padding:var(--simple-toolbar-group-padding,0 3px);border-color:var(--simple-toolbar-border-color,var(--simple-toolbar-group-border-color,transparent))}::slotted(.group:not(:last-child)){border-right-width:var(--simple-toolbar-group-border-width,var(--simple-toolbar-border-width,1px))}::slotted(:focus-wthin),::slotted(:hover){z-index:var(--simple-toolbar-focus-z-index,100);transition:z-index 0s}:host([collapsed]:not([always-expanded])) ::slotted([collapse-hide]){display:none!important}`]}static get styles(){return[...this.baseStyles,...this.stickyStyles]}static get properties(){return{...L,alwaysExpanded:{name:"alwaysExpanded",type:Boolean,attribute:"always-expanded",reflect:!0},ariaControls:{name:"ariaControls",type:String,attribute:"aria-controls",reflect:!0},ariaLabel:{name:"ariaLabel",type:String,attribute:"aria-label",reflect:!0},collapsed:{name:"collapsed",type:Boolean,attribute:"collapsed",reflect:!0},config:{name:"config",type:Array,attribute:"config"},id:{name:"id",type:String,attribute:"id",reflect:!0},moreShortcuts:{name:"moreShortcuts",attribute:"more-shortcuts",type:Object},shortcutKeys:{name:"shortcutKeys",attribute:"shortcut-keys",type:Object},sticky:{name:"sticky",type:Boolean,attribute:"sticky",reflect:!0},__buttons:{name:"__buttons",type:Array},collapseDisabled:{type:Boolean,attribute:"collapse-disabled",reflect:!0},__focused:{name:"__focused",type:Boolean},__hovered:{name:"__hovered",type:Boolean}}}render(){return this.toolbarTemplate}get buttons(){return this.__buttons}get focused(){return this.__focused}get hovered(){return this.__hovered}get moreButton(){return n` <simple-toolbar-more-button id="morebutton" .align-horizontal="${this.alignHorizontal}" .align-vertical="${this.alignVertical}" aria-controls="buttons" class="button" @click="${t=>this.collapsed=!this.collapsed}" ?disabled="${this.collapseDisabled}" @toggle="${t=>this.collapsed=!this.collapsed}" ?hidden="${this.collapseDisabled}" .icon="${this.icon}" .icon-position="${this.iconPosition}" .label="${this.label}" .shortcut="${this.shortcut}" ?show-text-label="${this.showTextLabel}" ?toggled="${!this.collapsed}" .toggled-icon="${this.toggledIcon}" .toggled-label="${this.toggledLabel}" .toggled-tooltip="${this.toggledTooltip}" .tooltip-direction="${this.tooltipDirection}" part="morebutton"> </simple-toolbar-more-button>`}get toolbarTemplate(){return n` <div id="buttons" class="${!this.alwaysExpanded&&this.collapsed?"collapsed":""}" part="buttons"> <slot></slot> </div> ${this.alwaysExpanded?"":this.moreButton} `}constructor(){super(),this.collapsed=!0,this.collapseDisabled=!1,this.config=[],this.__buttons=[],this.__focused=!1,this.__hovered=!1,this.icon="more-vert",this.label="More Buttons",this.toggledLabel="Fewer Buttons",this.showTextLabel=!1,this.shortcut="ctrl+shift+;",this.sticky=!1,this.shortcutKeys={},this.addEventListener("register-button",this._handleButtonRegister),this.addEventListener("deregister-button",this._handleButtonDeregister),this.addEventListener("update-button-registry",this._handleButtonUpdate),this.addEventListener("toggle-toolbar",this._handleToggleToolbar)}connectedCallback(){super.connectedCallback(),this.collapsed&&window.addEventListener("resize",this._handleResize.bind(this)),this.addEventListener("keypress",this._handleShortcutKeys)}disconnectedCallback(){this.collapsed&&window.removeEventListener("resize",this._handleResize.bind(this)),super.disconnectedCallback(),this.addEventListener("keypress",this._handleShortcutKeys)}firstUpdated(t){this.setAttribute("aria-live","polite"),this.setAttribute("role","toolbar"),this.onfocus=t=>this.__focused=!0,this.onblur=t=>this.__focused=!1,this.onmouseover=t=>this.__hovered=!0,this.onmouseout=t=>this.__hovered=!1,this.addEventListener("keydown",this._handleKeydown),super.firstUpdated&&super.firstUpdated(t)}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"config"===e&&this.updateToolbar(),"collapsed"===e&&(this.collapsed?(this.resizeToolbar(),window.addEventListener("resize",this._handleResize.bind(this))):window.removeEventListener("resize",this._handleResize.bind(this))),"hidden"===e&&this.setAttribute("aria-hidden",this.hidden?"true":"false")})),!this.currentItem&&this.buttons&&this.setCurrentItem(this.buttons[0]),this.resizeToolbar()}addButton(t,e){let i=this._renderButton(t);return(e=e||this).appendChild(i),i}addButtonGroup(t={},e){if(!t.buttons||t.buttons.length<1)return;let i=this._renderButtonGroup(t);return(e||this).appendChild(i),this._addConfigItems(t.buttons,i),i}clearToolbar(){this.innerHTML="",this.__buttons=[],this.shortcutKeys={},this.shortcutKeys[this.shortcut]=this.shadowRoot?this.shadowRoot.querySelector("#morebutton"):void 0}deregisterButton(t){this.__buttons=this.__buttons.filter((e=>e!==t)),(t.shortcutKeys||"").split(" ").forEach((t=>delete this.shortcutKeys[t])),t.removeEventListener("blur",(e=>this._handleFocusChange(t))),t.removeEventListener("focus",(e=>this._handleFocusChange(t)))}registerButton(t){this.__buttons.push(t),this.__buttons=[...new Set(this.__buttons)],(t.shortcutKeys||"").split(" ").forEach((e=>this.shortcutKeys[e]=t)),"menuitem"!==t.role&&(t.isCurrentItem=!1),t.addEventListener("blur",(e=>this._handleFocusChange(t))),t.addEventListener("focus",(e=>this._handleFocusChange(t))),this.currentItem||this.setCurrentItem(t)}resizeToolbar(){if(this.alwaysExpanded)return;if(!this.collapsed)return;let t=[...this.children||[]],e=!0;t.forEach((t=>{t.removeAttribute&&t.removeAttribute("collapse-hide"),t.offsetTop&&t.offsetTop>0?(t.setAttribute("collapse-hide",!0),e=!1):e||t.setAttribute("collapse-hide",!0)})),this.collapseDisabled=!!e,this.currentItem||this.setCurrentItem(this.firstItem)}get firstItem(){return this.mainItems?this.mainItems[0]:void 0}get nextItem(){return this.getItem()}get previousItem(){return this.getItem(-1)}get lastItem(){return this.buttons?this.mainItems[this.mainItems.length-1]:void 0}get mainItems(){return this.buttons.filter((t=>"menuitem"!==t.role))}getItemIndex(t=this.currentItem){let e=-1;return this.mainItems.forEach(((i,o)=>{i===t&&(e=o)})),e}getItem(t=1){let e=this.getItemIndex(this.currentItem)+t;return!this.mainItems||e<0||this.mainItems.length<=e?void 0:this.mainItems[e]}setCurrentItem(t){this.currentItem&&(this.currentItem.isCurrentItem=!1),t&&t.closest("[collapse-hide=true]")&&(this.collapsed=!1),this.currentItem=t,this.currentItem&&(this.currentItem.isCurrentItem=!0)}focusOn(t){let e=t&&t.closest("[collapse-hide=true]");this.currentItem.close&&this.currentItem.close(!0),this.setCurrentItem(t),e?setTimeout((()=>this.currentItem.focus()),300):this.currentItem.focus()}updateButton(t){t&&this.deregisterButton(t),t&&this.registerButton(t)}updateToolbar(t=this.config){this&&this.config&&0!=this.config.length&&(this.clearToolbar(),typeof this.config!=typeof[]&&(this.config=JSON.parse(t)),this._addConfigItems(this.config),this.resizeToolbar())}_addConfigItems(t=this.config,e=this){(t||[]).forEach((t=>{"button-group"===t.type||"simple-toolbar-button-group"===t.type?this.addButtonGroup(t,e):this.addButton(t,e)}))}get keyCode(){return{TAB:9,ENTER:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}}_handleKeydown(t){let e=!1;if(!this._shortcutKeysMatch(t)){switch(t.keyCode){case this.keyCode.RIGHT:this.focusOn(this.nextItem||this.firstItem),e=!0;break;case this.keyCode.LEFT:this.focusOn(this.previousItem||this.lastItem),e=!0;break;case this.keyCode.HOME:this.focusOn(this.firstItem),e=!0;break;case this.keyCode.END:this.focusOn(this.lastItem),e=!0;break;case this.keyCode.UP:this.focusOn(this.previousItem||this.lastItem),e=!0;break;case this.keyCode.DOWN:this.focusOn(this.nextItem||this.firstItem),e=!0}e&&(t.stopPropagation(),t.preventDefault())}}_handleFocusChange(){this.__focused=this.contains(document.activeElement)}_handleButtonRegister(t){t.stopPropagation(),this.registerButton(t.detail),this.resizeToolbar()}_handleButtonDeregister(t){t.stopPropagation(),this.deregisterButton(t.detail),this.resizeToolbar()}_handleButtonUpdate(t){t.stopPropagation(),this.updateButton(t.detail)}_handleResize(t){this.resizeToolbar()}_handleShortcutKeys(t){let e=this._shortcutKeysMatch(t);e&&(t.preventDefault(),this.shortcutKeys[e]._handleShortcutKeys(t,e),this.dispatchEvent(new CustomEvent("shortcut-key-pressed",{bubbles:!0,cancelable:!0,composed:!0,detail:{...t.detail,button:this,shortcutKey:this}})))}_handleToggleToolbar(t){this.collapsed=t.detail&&void 0!==t.detail?t.detail:!this.collapsed}_renderButton(t){let e=document.createElement(t.type);return Object.keys(t).forEach((i=>e[i]=t[i])),e.addEventListener("button-command",this._handleButton),e}_renderButtonGroup(t){let e=t.type&&"simpletoolbar-button-group"===t.type?t.type:"div",i=document.createElement(e);return i.setAttribute("class","group"),Object.keys(t).forEach((e=>i[e]=t[e])),i}_shortcutKeysMatch(t){let i=!1;return Object.keys(this.shortcutKeys||{}).forEach((o=>{let a=(o||"").toLowerCase().split("+"),n=a.includes("alt"),s=a.includes("ctrl"),r=a.includes("meta")||a.includes("cmd"),l=a.includes("shift"),d=t.shiftKey&&t.code>65&&t.code<91,c=a.filter((t=>1==t.length)).map((t=>d?t.toUpperCase():t)),h=c[0];n===t.altKey&&(s===t.ctrlKey||s===window.navigator.platform==="MacIntel"&&e.metaKey)&&r===t.metaKey&&l===t.shiftKey&&(t.key?t.key===h:!h)&&(i=o)})),i}}};class Y extends(X(o)){}customElements.define("simple-toolbar",Y);
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class K extends B{static get styles(){return[...super.styles,a`:host([hidden]){display:none}:host>div{display:flex;flex-direction:column-reverse;justify-content:stretch;z-index:1}:host([position=left])>div{justify-content:flex-start;flex-direction:row}:host([position=right])>div{justify-content:flex-end;flex-direction:row-reverse}:host([position=top])>div{flex-direction:column}:host>div>*{width:100%}:host([position=left])>div>*,:host([position=right])>div>*{width:unset}:host{pointer-events:none}#content{margin:0;pointer-events:all;padding:var(--simple-popover-padding,10px);color:var(--simple-popover-color,#222);background-color:var(--simple-popover-background-color,#fff);border:var(--simple-popover-border,1px solid var(--simple-popover-border-color,#bbb));border-radius:var(--simple-popover-border-radius,3px);box-shadow:var(--simple-popover-box-shadow,rgba(60,64,67,.3) 0 4px 8px 3px);min-height:var(--simple-popover-min-height,20px);max-height:var(--simple-popover-max-height,200px);overflow:auto;scroll-behavior:smooth}#pointer-outer{margin:-1px}#pointer{width:20px;height:20px;position:relative;overflow:hidden;flex:0 0 20px}#pointer:after{content:"";position:absolute;width:10px;height:10px;background-color:var(--simple-popover-background-color,#fff);border:1px solid var(--simple-popover-border-color,#bbb);transform:rotate(45deg);top:15px;left:5px}:host([position=top]) #pointer:after{top:-5px;left:5px}:host([position=right]) #pointer:after{top:5px;left:15px}:host([position=left]) #pointer:after{top:5px;left:-5px}`]}render(){return n` <div> <div id="content" role="alertdialog"> <slot></slot> </div> <div id="pointer-outer"> <div id="pointer" .style="${this._getMargins(this.__positions)}"></div> </div> </div>`}static get haxProperties(){return{canScale:!0,canPosition:!0,canEditSource:!0,gizmo:{title:"Simple popover",description:"A popover alertdialog that is positioned next to a target element",icon:"icons:android",color:"green",groups:["Popover"],handles:[{type:"todo:read-the-docs-for-usage"}],meta:{author:"nikkimk",owner:"The Pennsylvania State University"}},settings:{configure:[{property:"title",description:"",inputMethod:"textfield",required:!1,icon:"icons:android"}],advanced:[]}}}static get properties(){return{...super.properties}}constructor(){super(),this.offset=-10,this.fitToVisibleBounds=!0}static get tag(){return"simple-popover"}_getMargins(t){if(t&&t.target){let e=this.getBoundingClientRect(),i="bottom"===this.position||"top"===this.position,o=i?e.width:e.height,a=i?e.left:e.top,n=(i?t.target.left:t.target.top)+(i?t.target.width/2:t.target.height/2)-10,s=Math.min(o-20,Math.max(0,n-a));return i?`margin: 0 0 0 ${s}px;`:`margin: ${s}px 0 0 0;`}return""}}window.customElements.define(K.tag,K);customElements.define("simple-popover-manager",class extends o{constructor(){super(),this.popover=null,this.opened=!1,this.context=null,this.orientation="tb",this.position="bottom",this.__ignore=!1}static get styles(){return[a`simple-popover{font-family:var(--simple-tour-font-family,unset);font-size:var(--simple-tour-font-size,14px);max-width:var(--simple-popover-manager-max-width,200px);min-width:var(--simple-popover-manager-min-width,200px);display:flex;--simple-popover-padding:0;--simple-icon-button-border:1px solid var(--simple-tour-border-color, #ddd);--simple-icon-button-border-radius:3px}simple-popover[hidden]{display:none!important}.heading{font-size:var(--simple-tour-titlebar-font-size,14px);flex:0 0 auto;background-color:var(--simple-tour-titlebar-background-color,#f0f4f8);border-bottom:1px solid var(--simple-tour-border-color,#ddd);line-height:130%;padding:var(--simple-tour-padding-sm,2px) var(--simple-tour-padding-sm,2px) var(--simple-tour-padding-sm,2px) var(--simple-tour-padding-lg,10px);display:flex;align-items:center;justify-content:space-between;position:sticky;top:0}.body{flex:1 1 auto;padding:var(--simple-tour-padding-sm,2px) var(--simple-tour-padding-lg,10px);background-color:var(--simple-tour-background-color,#fff)}.nav{flex:0 0 auto;margin:0;padding:0;display:flex;align-items:center;justify-content:space-between;position:sticky;bottom:0;background-color:var(--simple-tour-background-color,#fff)}::slotted(.title){font-size:var(--simple-tour-titlebar-font-size,14px);margin:0 calc(2 * var(--simple-tour-padding-sm,2px)) 0 0;line-height:100%}::slotted(.subheading){font-size:var(--simple-tour-subheading-font-size,16px)}::slotted([slot=body]){margin:var(--simple-tour-padding-sm,2px) 0}::slotted(simple-icon-button-lite){flex:1 1 auto;background-color:var(--simple-tour-background-color,#fff)}::slotted(simple-icon-button-lite[slot=heading]){flex:0 0 auto}::slotted(simple-icon-button-lite:focus-within),::slotted(simple-icon-button-lite:hover){--simple-icon-button-border:1px solid #000}`]}render(){return n` <simple-popover auto part="simple-popover" ?hidden="${!this.opened}" position="${this.position}"> <div class="heading" part="simple-popover-heading"> <slot name="heading"></slot> </div> <div class="body" part="simple-popover-body"> <slot name="body"></slot> </div> <div class="nav" part="simple-popover-nav"> <slot name="nav"></slot> </div> </simple-popover> `}static get properties(){return{position:{type:String},opened:{type:Boolean},orientation:{type:String}}}updated(t){t.forEach(((t,e)=>{["opened","position","orientation"].includes(e)&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this.popover.updatePosition()}),0))}))}setPopover(t,e,i=null,o="tb",a){if(this.__ignore)this.__ignore=!1,setTimeout((()=>{this.popover.updatePosition()}),100);else{let n;e!==this.popover.target&&(this.context&&this.context.managerReset&&t!==this.context&&(this.context.managerReset(),this.__ignore=!0),this.context=t,this.setAttribute("mode",a||""),this.popover.target=null,this.popover.target=e);let s=e.getBoundingClientRect();n="tb"==o?s.y>window.innerHeight/2?"top":"bottom":s.x>window.innerWidth/2?"left":"right",this.orientation=o,this.position=n,null!=i&&(this.opened=i)}}firstUpdated(){this.popover=this.shadowRoot.querySelector("simple-popover")}}),window.SimplePopoverManager=window.SimplePopoverManager||{},window.SimplePopoverManager.requestAvailability=()=>(window.SimplePopoverManager.instance||(window.SimplePopoverManager.instance=document.createElement("simple-popover-manager"),document.body.appendChild(window.SimplePopoverManager.instance)),window.SimplePopoverManager.instance),window.SimplePopoverManager.requestAvailability();class J{constructor(){this.target=null,this.title="Title",this.description="<p>Description</p>"}}customElements.define("simple-tour",class extends o{constructor(){super(),this.stacks={},this.orientation="lr",this.active=null,this.tourInfo={},this.activeElementDelay=500,this.stop=-1,window.addEventListener("simple-tour-register",this.registerNewTourEvent.bind(this)),window.addEventListener("simple-tour-create-tour-stop",this.createTourStopEvent.bind(this))}registerNewTourEvent(t){this.registerNewTour(t.detail)}registerNewTour(t){return this.stacks[t.key]||(this.stacks[t.key]=[]),this.tourInfo[t.key]||(this.tourInfo[t.key]=t),this.stacks[t.key]}createTourStopEvent(t){this.createTourStop(t.detail.name,t.detail.target,t.detail.title,t.detail.description,t.detail.mode)}createTourStop(t,e,i,o,a){let n=new J;return n.target=e,n.title=i,n.description=o,n.mode=a,this.addStops(t,[n]),n}removeTarget(t,e){let i=[];this.stacks[t].forEach(((t,o)=>{t.target===e&&i.push(o)})),i.forEach((e=>{this.stacks[t].splice(e,1)}))}addStops(t,e){this.stacks[t]||(this.stacks[t]=[]),this.stacks[t]=this.stacks[t].concat(e)}hasNext(){return this.stop<this.stacks[this.active].length-1}hasPrev(){return this.stop>0}nextStop(t){this.stop<this.stacks[this.active].length-1&&(this.stop+=1)}prevStop(t){this.stop>0&&(this.stop-=1)}startTour(t){this.active=t,this.dispatchEvent(new CustomEvent("tour-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}stopTour(t){window.SimplePopoverManager.requestAvailability().setPopover(this,this,!1,this.orientation),this.stop=-1,this.active=null,this.dispatchEvent(new CustomEvent("tour-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}tourButtons(){return n`<h1 class="title" slot="heading"> ${this.tourInfo[this.active].name}, <span class="xofy">${this.stop+1}/${this.stacks[this.active].length}</span> </h1> <simple-icon-button-lite id="close" slot="heading" @click="${this.stopTour.bind(this)}" label="Stop Tour" icon="close"> </simple-icon-button-lite> <simple-icon-button-lite id="prev" slot="nav" @click="${this.prevStop.bind(this)}" ?disabled="${!this.hasPrev()}" label="Prev" icon="arrow-back" show-text-label> </simple-icon-button-lite> <simple-tooltip for="prev" position="top" slot="nav"> Previous Item </simple-tooltip> <simple-icon-button-lite id="next" slot="nav" @click="${this.nextStop.bind(this)}" ?disabled="${!this.hasNext()}" label="Next" icon="arrow-forward" show-text-label> </simple-icon-button-lite> <simple-tooltip for="close" slot="body"> Stop Tour </simple-tooltip> <simple-tooltip for="next" position="top" slot="nav"> Next Item </simple-tooltip>`}scrollHere(t){"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!0):t.scrollIntoView({behavior:"smooth",inline:"center"})}managerReset(){this.stopTour()}updated(t){t.forEach(((t,e)=>{if("active"==e&&this.active&&(this.stop=0),"stop"==e&&-1!=this.stop||"active"==e&&this.active){s(document.createElement("div"),window.SimplePopoverManager.requestAvailability());let t=this.stacks[this.active][this.stop].title,e=this.stacks[this.active][this.stop].description;if("live"==this.stacks[this.active][this.stop].mode){let i=this.stacks[this.active][this.stop].target;i.getAttribute("data-stop-title")&&i.getAttribute(i.getAttribute("data-stop-title"))?t=i.getAttribute(i.getAttribute("data-stop-title")):i.querySelector("[data-stop-title]")&&(t=i.querySelector("[data-stop-title]").innerHTML),e=i.querySelector("[data-stop-content]").innerHTML?i.querySelector("[data-stop-content]").innerHTML:""}let i=n`${this.tourButtons()} <h2 class="subheading" slot="body"> ${U("<span>"+t+"</span>")} </h2> ${U('<p slot="body">'+e+"</p>")}${this.tourInfo[this.active].style?U("<style>"+this.tourInfo[this.active].style+"</style>"):""}`;s(i,window.SimplePopoverManager.requestAvailability()),window.SimplePopoverManager.requestAvailability().setPopover(this,this.stacks[this.active][this.stop].target,!0,this.orientation,this.active),this.scrollHere(this.stacks[this.active][this.stop].target);let o=this.stacks[this.active][this.stop].target,a=this.stacks[this.active][this.stop].target.getAttribute("part");o.setAttribute("part","simple-tour-active"),setTimeout((()=>{null==a||"simple-tour-active"==a?o.removeAttribute("part"):o.setAttribute("part",a)}),this.activeElementDelay)}}))}static get properties(){return{stop:{type:Number},active:{type:String},stacks:{type:Object},activeElementDelay:{type:Number}}}}),window.SimpleTourManager=window.SimpleTourManager||{},window.SimpleTourManager.requestAvailability=()=>(window.SimpleTourManager.instance||(window.SimpleTourManager.instance=document.createElement("simple-tour"),document.body.appendChild(window.SimpleTourManager.instance)),window.SimpleTourManager.instance);const Q=window.SimpleTourManager.requestAvailability();var Z="production"!==process.env.NODE_ENV?{0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(t,e){return"Cannot apply '"+t+"' to '"+e.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",16:"Modification exception: the internal structure of an observable array was changed.",17:function(t,e){return"[mobx.array] Index out of bounds, "+t+" is larger than "+e},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(t){return"Cannot initialize from classes that inherit from Map: "+t.constructor.name},20:function(t){return"Cannot initialize map from "+t},21:function(t){return"Cannot convert to map from '"+t+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(t){return"Cannot obtain administration from "+t},25:function(t,e){return"the entry '"+t+"' does not exist in the observable map '"+e+"'"},26:"please specify a property",27:function(t,e){return"no observable property '"+t.toString()+"' found on the observable object '"+e+"'"},28:function(t){return"Cannot obtain atom from "+t},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(t,e){return"Cycle detected in computation "+t+": "+e},33:function(t){return"The setter of computed value '"+t+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(t){return"[ComputedValue '"+t+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(t){return"[mobx] `observableArray."+t+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+t+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"}:{};function tt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];if("production"!==process.env.NODE_ENV){var a="string"==typeof t?t:Z[t];throw"function"==typeof a&&(a=a.apply(null,i)),new Error("[MobX] "+a)}throw new Error("number"==typeof t?"[MobX] minified error nr: "+t+(i.length?" "+i.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+t)}var et={};function it(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:et}var ot=Object.assign,at=Object.getOwnPropertyDescriptor,nt=Object.defineProperty,st=Object.prototype,rt=[];Object.freeze(rt);var lt={};Object.freeze(lt);var dt="undefined"!=typeof Proxy,ct=Object.toString();function ht(){dt||tt("production"!==process.env.NODE_ENV?"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`":"Proxy not available")}function ut(t){"production"!==process.env.NODE_ENV&&ri.verifyProxies&&tt("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to "+t)}function pt(){return++ri.mobxGuid}function mt(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}var gt=function(){};function bt(t){return"function"==typeof t}function ft(t){switch(typeof t){case"string":case"symbol":case"number":return!0}return!1}function vt(t){return null!==t&&"object"==typeof t}function yt(t){if(!vt(t))return!1;var e=Object.getPrototypeOf(t);if(null==e)return!0;var i=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i.toString()===ct}function _t(t){var e=null==t?void 0:t.constructor;return!!e&&("GeneratorFunction"===e.name||"GeneratorFunction"===e.displayName)}function xt(t,e,i){nt(t,e,{enumerable:!1,writable:!0,configurable:!0,value:i})}function wt(t,e,i){nt(t,e,{enumerable:!1,writable:!1,configurable:!0,value:i})}function At(t,e){var i="isMobX"+t;return e.prototype[i]=!0,function(t){return vt(t)&&!0===t[i]}}function Et(t){return t instanceof Map}function St(t){return t instanceof Set}var Ct=void 0!==Object.getOwnPropertySymbols;var Nt="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:Ct?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames;function Tt(t){return"string"==typeof t?t:"symbol"==typeof t?t.toString():new String(t).toString()}function kt(t){return null===t?null:"object"==typeof t?""+t:t}function Ot(t,e){return st.hasOwnProperty.call(t,e)}var Pt=Object.getOwnPropertyDescriptors||function(t){var e={};return Nt(t).forEach((function(i){e[i]=at(t,i)})),e};function Lt(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function Bt(t,e,i){return e&&Lt(t.prototype,e),i&&Lt(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mt(){return Mt=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},Mt.apply(this,arguments)}function Ht(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Dt(t,e)}function Dt(t,e){return Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Dt(t,e)}function Rt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function It(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,e){if(t){if("string"==typeof t)return zt(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?zt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var $t=Symbol("mobx-stored-annotations");function jt(t){return Object.assign((function(e,i){Ft(e,i,t)}),t)}function Ft(t,e,i){(Ot(t,$t)||xt(t,$t,Mt({},t[$t])),"production"!==process.env.NODE_ENV&&Kt(i)&&!Ot(t[$t],e))&&tt("'"+(t.constructor.name+".prototype."+e.toString())+"' is decorated with 'override', but no such decorated member was found on prototype.");!function(t,e,i){if("production"!==process.env.NODE_ENV&&!Kt(e)&&Ot(t[$t],i)){var o=t.constructor.name+".prototype."+i.toString(),a=t[$t][i].annotationType_;tt("Cannot apply '@"+e.annotationType_+"' to '"+o+"':\nThe field is already decorated with '@"+a+"'.\nRe-decorating fields is not allowed.\nUse '@override' decorator for methods overriden by subclass.")}}(t,i,e),Kt(i)||(t[$t][e]=i)}var Vt=Symbol("mobx administration"),Ut=function(){function t(t){void 0===t&&(t="production"!==process.env.NODE_ENV?"Atom@"+pt():"Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=$e.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=t}var e=t.prototype;return e.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},e.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},e.reportObserved=function(){return pi(this)},e.reportChanged=function(){hi(),mi(this),ui()},e.toString=function(){return this.name_},t}(),qt=At("Atom",Ut);function Gt(t,e,i){void 0===e&&(e=gt),void 0===i&&(i=gt);var o,a=new Ut(t);return e!==gt&&Ii("onBO",a,e,o),i!==gt&&zi(a,i),a}var Wt={identity:function(t,e){return t===e},structural:function(t,e){return Wo(t,e)},default:function(t,e){return Object.is?Object.is(t,e):t===e?0!==t||1/t==1/e:t!=t&&e!=e},shallow:function(t,e){return Wo(t,e,1)}};function Xt(t,e,i){return Yi(t)?t:Array.isArray(t)?Ne.array(t,{name:i}):yt(t)?Ne.object(t,void 0,{name:i}):Et(t)?Ne.map(t,{name:i}):St(t)?Ne.set(t,{name:i}):"function"!=typeof t||Hi(t)||Wi(t)?t:_t(t)?qi(t):Mi(i,t)}function Yt(t){return t}function Kt(t){return"override"===t.annotationType_}function Jt(t,e){return{annotationType_:t,options_:e,make_:Qt,extend_:Zt}}function Qt(t,e,i,o){var a;if(null!=(a=this.options_)&&a.bound)return null===this.extend_(t,e,i,!1)?0:1;if(o===t.target_)return null===this.extend_(t,e,i,!1)?0:2;if(Hi(i.value))return 1;var n=te(t,this,e,i,!1);return nt(o,e,n),2}function Zt(t,e,i,o){var a=te(t,this,e,i);return t.defineProperty_(e,a,o)}function te(t,e,i,o,a){var n,s,r,l,d,c,h;void 0===a&&(a=ri.safeDescriptors),function(t,e,i,o){var a=e.annotationType_,n=o.value;"production"===process.env.NODE_ENV||bt(n)||tt("Cannot apply '"+a+"' to '"+t.name_+"."+i.toString()+"':\n'"+a+"' can only be used on properties with a function value.")}(t,e,i,o);var u,p=o.value;null!=(n=e.options_)&&n.bound&&(p=p.bind(null!=(u=t.proxy_)?u:t.target_));return{value:De(null!=(s=null==(r=e.options_)?void 0:r.name)?s:i.toString(),p,null!=(l=null==(d=e.options_)?void 0:d.autoAction)&&l,null!=(c=e.options_)&&c.bound?null!=(h=t.proxy_)?h:t.target_:void 0),configurable:!a||t.isPlainObject_,enumerable:!1,writable:!a}}function ee(t,e){return{annotationType_:t,options_:e,make_:ie,extend_:oe}}function ie(t,e,i,o){var a;if(o===t.target_)return null===this.extend_(t,e,i,!1)?0:2;if(null!=(a=this.options_)&&a.bound&&(!Ot(t.target_,e)||!Wi(t.target_[e]))&&null===this.extend_(t,e,i,!1))return 0;if(Wi(i.value))return 1;var n=ae(t,this,e,i,!1,!1);return nt(o,e,n),2}function oe(t,e,i,o){var a,n=ae(t,this,e,i,null==(a=this.options_)?void 0:a.bound);return t.defineProperty_(e,n,o)}function ae(t,e,i,o,a,n){void 0===n&&(n=ri.safeDescriptors),function(t,e,i,o){var a=e.annotationType_,n=o.value;"production"===process.env.NODE_ENV||bt(n)||tt("Cannot apply '"+a+"' to '"+t.name_+"."+i.toString()+"':\n'"+a+"' can only be used on properties with a generator function value.")}(t,e,i,o);var s,r=o.value;(Wi(r)||(r=qi(r)),a)&&((r=r.bind(null!=(s=t.proxy_)?s:t.target_)).isMobXFlow=!0);return{value:r,configurable:!n||t.isPlainObject_,enumerable:!1,writable:!n}}function ne(t,e){return{annotationType_:t,options_:e,make_:se,extend_:re}}function se(t,e,i){return null===this.extend_(t,e,i,!1)?0:1}function re(t,e,i,o){return function(t,e,i,o){var a=e.annotationType_,n=o.get;"production"===process.env.NODE_ENV||n||tt("Cannot apply '"+a+"' to '"+t.name_+"."+i.toString()+"':\n'"+a+"' can only be used on getter(+setter) properties.")}(t,this,e,i),t.defineComputedProperty_(e,Mt({},this.options_,{get:i.get,set:i.set}),o)}function le(t,e){return{annotationType_:t,options_:e,make_:de,extend_:ce}}function de(t,e,i){return null===this.extend_(t,e,i,!1)?0:1}function ce(t,e,i,o){var a,n;return function(t,e,i,o){var a=e.annotationType_;"production"===process.env.NODE_ENV||"value"in o||tt("Cannot apply '"+a+"' to '"+t.name_+"."+i.toString()+"':\n'"+a+"' cannot be used on getter/setter properties")}(t,this,e,i),t.defineObservableProperty_(e,i.value,null!=(a=null==(n=this.options_)?void 0:n.enhancer)?a:Xt,o)}var he=ue();function ue(t){return{annotationType_:"true",options_:t,make_:pe,extend_:me}}function pe(t,e,i,o){var a,n,s,r;if(i.get)return Oe.make_(t,e,i,o);if(i.set){var l=De(e.toString(),i.set);return o===t.target_?null===t.defineProperty_(e,{configurable:!ri.safeDescriptors||t.isPlainObject_,set:l})?0:2:(nt(o,e,{configurable:!0,set:l}),2)}if(o!==t.target_&&"function"==typeof i.value)return _t(i.value)?(null!=(r=this.options_)&&r.autoBind?qi.bound:qi).make_(t,e,i,o):(null!=(s=this.options_)&&s.autoBind?Mi.bound:Mi).make_(t,e,i,o);var d,c=!1===(null==(a=this.options_)?void 0:a.deep)?Ne.ref:Ne;"function"==typeof i.value&&null!=(n=this.options_)&&n.autoBind&&(i.value=i.value.bind(null!=(d=t.proxy_)?d:t.target_));return c.make_(t,e,i,o)}function me(t,e,i,o){var a,n,s;if(i.get)return Oe.extend_(t,e,i,o);if(i.set)return t.defineProperty_(e,{configurable:!ri.safeDescriptors||t.isPlainObject_,set:De(e.toString(),i.set)},o);"function"==typeof i.value&&null!=(a=this.options_)&&a.autoBind&&(i.value=i.value.bind(null!=(s=t.proxy_)?s:t.target_));return(!1===(null==(n=this.options_)?void 0:n.deep)?Ne.ref:Ne).extend_(t,e,i,o)}var ge={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function be(t){return t||ge}Object.freeze(ge);var fe=le("observable"),ve=le("observable.ref",{enhancer:Yt}),ye=le("observable.shallow",{enhancer:function(t,e,i){return null==t||Mo(t)||xo(t)||So(t)||To(t)?t:Array.isArray(t)?Ne.array(t,{name:i,deep:!1}):yt(t)?Ne.object(t,void 0,{name:i,deep:!1}):Et(t)?Ne.map(t,{name:i,deep:!1}):St(t)?Ne.set(t,{name:i,deep:!1}):void("production"!==process.env.NODE_ENV&&tt("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets"))}}),_e=le("observable.struct",{enhancer:function(t,e){return"production"!==process.env.NODE_ENV&&Yi(t)&&tt("observable.struct should not be used with observable values"),Wo(t,e)?e:t}}),xe=jt(fe);function we(t){return!0===t.deep?Xt:!1===t.deep?Yt:(e=t.defaultDecorator)&&null!=(i=null==(o=e.options_)?void 0:o.enhancer)?i:Xt;var e,i,o}function Ae(t,e,i){if(!ft(e))return Yi(t)?t:yt(t)?Ne.object(t,e,i):Array.isArray(t)?Ne.array(t,e):Et(t)?Ne.map(t,e):St(t)?Ne.set(t,e):"object"==typeof t&&null!==t?t:Ne.box(t,e);Ft(t,e,fe)}Object.assign(Ae,xe);var Ee,Se,Ce={box:function(t,e){var i=be(e);return new Fe(t,we(i),i.name,!0,i.equals)},array:function(t,e){var i=be(e);return(!1===ri.useProxies||!1===i.proxy?Fo:mo)(t,we(i),i.name)},map:function(t,e){var i=be(e);return new Eo(t,we(i),i.name)},set:function(t,e){var i=be(e);return new No(t,we(i),i.name)},object:function(t,e,i){return function(t,e,i,o){"production"!==process.env.NODE_ENV&&(arguments.length>4&&tt("'extendObservable' expected 2-4 arguments"),"object"!=typeof t&&tt("'extendObservable' expects an object as first argument"),So(t)&&tt("'extendObservable' should not be used on maps, use map.merge instead"),yt(e)||tt("'extendObservable' only accepts plain objects as second argument"),(Yi(e)||Yi(i))&&tt("Extending an object with another observable (object) is not supported"));var a=Pt(e),n=Po(t,o)[Vt];hi();try{Nt(a).forEach((function(t){n.extend_(t,a[t],!i||(!(t in i)||i[t]))}))}finally{ui()}return t}(!1===ri.useProxies||!1===(null==i?void 0:i.proxy)?Po({},i):function(t,e){var i,o;return ht(),t=Po(t,e),null!=(o=(i=t[Vt]).proxy_)?o:i.proxy_=new Proxy(t,io)}({},i),t,e)},ref:jt(ve),shallow:jt(ye),deep:xe,struct:jt(_e)},Ne=ot(Ae,Ce),Te=ne("computed"),ke=ne("computed.struct",{equals:Wt.structural}),Oe=function(t,e){if(ft(e))return Ft(t,e,Te);if(yt(t))return jt(ne("computed",t));"production"!==process.env.NODE_ENV&&(bt(t)||tt("First argument to `computed` should be an expression."),bt(e)&&tt("A setter as second argument is no longer supported, use `{ set: fn }` option instead"));var i=yt(e)?e:{};return i.get=t,i.name||(i.name=t.name||""),new Ue(i)};Object.assign(Oe,Te),Oe.struct=jt(ke);var Pe,Le=0,Be=1,Me=null!=(Ee=null==(Se=at((function(){}),"name"))?void 0:Se.configurable)&&Ee,He={value:"action",configurable:!0,writable:!1,enumerable:!1};function De(t,e,i,o){function a(){return Re(t,i,e,o||this,arguments)}return void 0===i&&(i=!1),"production"!==process.env.NODE_ENV&&(bt(e)||tt("`action` can only be invoked on functions"),"string"==typeof t&&t||tt("actions should have valid names, got: '"+t+"'")),a.isMobxAction=!0,Me&&(He.value=t,Object.defineProperty(a,"name",He)),a}function Re(t,e,i,o,a){var n=function(t,e,i,o){var a="production"!==process.env.NODE_ENV&&wi()&&!!t,n=0;if("production"!==process.env.NODE_ENV&&a){n=Date.now();var s=o?Array.from(o):rt;Ei({type:Ni,name:t,object:i,arguments:s})}var r=ri.trackingDerivation,l=!e||!r;hi();var d=ri.allowStateChanges;l&&(Ze(),d=ze(!0));var c=ei(!0),h={runAsAction_:l,prevDerivation_:r,prevAllowStateChanges_:d,prevAllowStateReads_:c,notifySpy_:a,startTime_:n,actionId_:Be++,parentActionId_:Le};return Le=h.actionId_,h}(t,e,o,a);try{return i.apply(o,a)}catch(t){throw n.error_=t,t}finally{!function(t){Le!==t.actionId_&&tt(30);Le=t.parentActionId_,void 0!==t.error_&&(ri.suppressReactionErrors=!0);Ie(t.prevAllowStateChanges_),ii(t.prevAllowStateReads_),ui(),t.runAsAction_&&ti(t.prevDerivation_);"production"!==process.env.NODE_ENV&&t.notifySpy_&&Ci({time:Date.now()-t.startTime_});ri.suppressReactionErrors=!1}(n)}}function ze(t){var e=ri.allowStateChanges;return ri.allowStateChanges=t,e}function Ie(t){ri.allowStateChanges=t}Pe=Symbol.toPrimitive;var $e,je,Fe=function(t,e){function i(e,i,o,a,n){var s;return void 0===o&&(o="production"!==process.env.NODE_ENV?"ObservableValue@"+pt():"ObservableValue"),void 0===a&&(a=!0),void 0===n&&(n=Wt.default),(s=t.call(this,o)||this).enhancer=void 0,s.name_=void 0,s.equals=void 0,s.hasUnreportedChange_=!1,s.interceptors_=void 0,s.changeListeners_=void 0,s.value_=void 0,s.dehancer=void 0,s.enhancer=i,s.name_=o,s.equals=n,s.value_=i(e,void 0,o),"production"!==process.env.NODE_ENV&&a&&wi()&&Ai({type:"create",object:Rt(s),observableKind:"value",debugObjectName:s.name_,newValue:""+s.value_}),s}Ht(i,t);var o=i.prototype;return o.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},o.set=function(t){var e=this.value_;if((t=this.prepareNewValue_(t))!==ri.UNCHANGED){var i=wi();"production"!==process.env.NODE_ENV&&i&&Ei({type:ho,object:this,observableKind:"value",debugObjectName:this.name_,newValue:t,oldValue:e}),this.setNewValue_(t),"production"!==process.env.NODE_ENV&&i&&Ci()}},o.prepareNewValue_=function(t){if(Ye(this),oo(this)){var e=no(this,{object:this,type:ho,newValue:t});if(!e)return ri.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value_,this.name_),this.equals(this.value_,t)?ri.UNCHANGED:t},o.setNewValue_=function(t){var e=this.value_;this.value_=t,this.reportChanged(),so(this)&&lo(this,{type:ho,object:this,newValue:t,oldValue:e})},o.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},o.intercept_=function(t){return ao(this,t)},o.observe_=function(t,e){return e&&t({observableKind:"value",debugObjectName:this.name_,object:this,type:ho,newValue:this.value_,oldValue:void 0}),ro(this,t)},o.raw=function(){return this.value_},o.toJSON=function(){return this.get()},o.toString=function(){return this.name_+"["+this.value_+"]"},o.valueOf=function(){return kt(this.get())},o[e]=function(){return this.valueOf()},i}(Ut,Pe),Ve=At("ObservableValue",Fe),Ue=function(t){function e(t){this.dependenciesState_=$e.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=$e.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Ge(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=je.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||tt(31),this.derivation=t.get,this.name_=t.name||("production"!==process.env.NODE_ENV?"ComputedValue@"+pt():"ComputedValue"),t.set&&(this.setter_=De("production"!==process.env.NODE_ENV?this.name_+"-setter":"ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?Wt.structural:Wt.default),this.scope_=t.context,this.requiresReaction_=t.requiresReaction,this.keepAlive_=!!t.keepAlive}var i=e.prototype;return i.onBecomeStale_=function(){!function(t){if(t.lowestObserverState_!==$e.UP_TO_DATE_)return;t.lowestObserverState_=$e.POSSIBLY_STALE_,t.observers_.forEach((function(t){t.dependenciesState_===$e.UP_TO_DATE_&&(t.dependenciesState_=$e.POSSIBLY_STALE_,t.onBecomeStale_())}))}(this)},i.onBO=function(){this.onBOL&&this.onBOL.forEach((function(t){return t()}))},i.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(t){return t()}))},i.get=function(){if(this.isComputing_&&tt(32,this.name_,this.derivation),0!==ri.inBatch||0!==this.observers_.size||this.keepAlive_){if(pi(this),Xe(this)){var t=ri.trackingContext;this.keepAlive_&&!t&&(ri.trackingContext=this),this.trackAndCompute()&&function(t){if(t.lowestObserverState_===$e.STALE_)return;t.lowestObserverState_=$e.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===$e.POSSIBLY_STALE_?(e.dependenciesState_=$e.STALE_,"production"!==process.env.NODE_ENV&&e.isTracing_!==je.NONE&&gi(e,t)):e.dependenciesState_===$e.UP_TO_DATE_&&(t.lowestObserverState_=$e.UP_TO_DATE_)}))}(this),ri.trackingContext=t}}else Xe(this)&&(this.warnAboutUntrackedRead_(),hi(),this.value_=this.computeValue_(!1),ui());var e=this.value_;if(We(e))throw e.cause;return e},i.set=function(t){if(this.setter_){this.isRunningSetter_&&tt(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter_=!1}}else tt(34,this.name_)},i.trackAndCompute=function(){var t=this.value_,e=this.dependenciesState_===$e.NOT_TRACKING_,i=this.computeValue_(!0),o=e||We(t)||We(i)||!this.equals_(t,i);return o&&(this.value_=i,"production"!==process.env.NODE_ENV&&wi()&&Ai({observableKind:"computed",debugObjectName:this.name_,object:this.scope_,type:"update",oldValue:t,newValue:i})),o},i.computeValue_=function(t){this.isComputing_=!0;var e,i=ze(!1);if(t)e=Ke(this,this.derivation,this.scope_);else if(!0===ri.disableErrorBoundaries)e=this.derivation.call(this.scope_);else try{e=this.derivation.call(this.scope_)}catch(t){e=new Ge(t)}return Ie(i),this.isComputing_=!1,e},i.suspend_=function(){this.keepAlive_||(Je(this),this.value_=void 0,"production"!==process.env.NODE_ENV&&this.isTracing_!==je.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' was suspended and it will recompute on the next access."))},i.observe_=function(t,e){var i=this,o=!0,a=void 0;return Di((function(){var n=i.get();if(!o||e){var s=Ze();t({observableKind:"computed",debugObjectName:i.name_,type:ho,object:i,newValue:n,oldValue:a}),ti(s)}o=!1,a=n}))},i.warnAboutUntrackedRead_=function(){"production"!==process.env.NODE_ENV&&(this.isTracing_!==je.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."),("boolean"==typeof this.requiresReaction_?this.requiresReaction_:ri.computedRequiresReaction)&&console.warn("[mobx] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."))},i.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},i.valueOf=function(){return kt(this.get())},i[t]=function(){return this.valueOf()},e}(Symbol.toPrimitive),qe=At("ComputedValue",Ue);!function(t){t[t.NOT_TRACKING_=-1]="NOT_TRACKING_",t[t.UP_TO_DATE_=0]="UP_TO_DATE_",t[t.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",t[t.STALE_=2]="STALE_"}($e||($e={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(je||(je={}));var Ge=function(t){this.cause=void 0,this.cause=t};function We(t){return t instanceof Ge}function Xe(t){switch(t.dependenciesState_){case $e.UP_TO_DATE_:return!1;case $e.NOT_TRACKING_:case $e.STALE_:return!0;case $e.POSSIBLY_STALE_:for(var e=ei(!0),i=Ze(),o=t.observing_,a=o.length,n=0;n<a;n++){var s=o[n];if(qe(s)){if(ri.disableErrorBoundaries)s.get();else try{s.get()}catch(t){return ti(i),ii(e),!0}if(t.dependenciesState_===$e.STALE_)return ti(i),ii(e),!0}}return oi(t),ti(i),ii(e),!1}}function Ye(t){if("production"!==process.env.NODE_ENV){var e=t.observers_.size>0;ri.allowStateChanges||!e&&"always"!==ri.enforceActions||console.warn("[MobX] "+(ri.enforceActions?"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ")+t.name_)}}function Ke(t,e,i){var o=ei(!0);oi(t),t.newObserving_=new Array(t.observing_.length+100),t.unboundDepsCount_=0,t.runId_=++ri.runId;var a,n=ri.trackingDerivation;if(ri.trackingDerivation=t,ri.inBatch++,!0===ri.disableErrorBoundaries)a=e.call(i);else try{a=e.call(i)}catch(t){a=new Ge(t)}return ri.inBatch--,ri.trackingDerivation=n,function(t){for(var e=t.observing_,i=t.observing_=t.newObserving_,o=$e.UP_TO_DATE_,a=0,n=t.unboundDepsCount_,s=0;s<n;s++){var r=i[s];0===r.diffValue_&&(r.diffValue_=1,a!==s&&(i[a]=r),a++),r.dependenciesState_>o&&(o=r.dependenciesState_)}i.length=a,t.newObserving_=null,n=e.length;for(;n--;){var l=e[n];0===l.diffValue_&&di(l,t),l.diffValue_=0}for(;a--;){var d=i[a];1===d.diffValue_&&(d.diffValue_=0,li(d,t))}o!==$e.UP_TO_DATE_&&(t.dependenciesState_=o,t.onBecomeStale_())}(t),function(t){if("production"===process.env.NODE_ENV)return;if(0!==t.observing_.length)return;(ri.reactionRequiresObservable||t.requiresObservable_)&&console.warn("[mobx] Derivation '"+t.name_+"' is created/updated without reading any observable value.")}(t),ii(o),a}function Je(t){var e=t.observing_;t.observing_=[];for(var i=e.length;i--;)di(e[i],t);t.dependenciesState_=$e.NOT_TRACKING_}function Qe(t){var e=Ze();try{return t()}finally{ti(e)}}function Ze(){var t=ri.trackingDerivation;return ri.trackingDerivation=null,t}function ti(t){ri.trackingDerivation=t}function ei(t){var e=ri.allowStateReads;return ri.allowStateReads=t,e}function ii(t){ri.allowStateReads=t}function oi(t){if(t.dependenciesState_!==$e.UP_TO_DATE_){t.dependenciesState_=$e.UP_TO_DATE_;for(var e=t.observing_,i=e.length;i--;)e[i].lowestObserverState_=$e.UP_TO_DATE_}}var ai=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},ni=!0,si=!1,ri=function(){var t=it();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(ni=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new ai).version&&(ni=!1),ni?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new ai):(setTimeout((function(){si||tt(35)}),1),new ai)}();function li(t,e){t.observers_.add(e),t.lowestObserverState_>e.dependenciesState_&&(t.lowestObserverState_=e.dependenciesState_)}function di(t,e){t.observers_.delete(e),0===t.observers_.size&&ci(t)}function ci(t){!1===t.isPendingUnobservation_&&(t.isPendingUnobservation_=!0,ri.pendingUnobservations.push(t))}function hi(){ri.inBatch++}function ui(){if(0==--ri.inBatch){yi();for(var t=ri.pendingUnobservations,e=0;e<t.length;e++){var i=t[e];i.isPendingUnobservation_=!1,0===i.observers_.size&&(i.isBeingObserved_&&(i.isBeingObserved_=!1,i.onBUO()),i instanceof Ue&&i.suspend_())}ri.pendingUnobservations=[]}}function pi(t){!function(t){"production"!==process.env.NODE_ENV&&!ri.allowStateReads&&ri.observableRequiresReaction&&console.warn("[mobx] Observable '"+t.name_+"' being read outside a reactive context.")}(t);var e=ri.trackingDerivation;return null!==e?(e.runId_!==t.lastAccessedBy_&&(t.lastAccessedBy_=e.runId_,e.newObserving_[e.unboundDepsCount_++]=t,!t.isBeingObserved_&&ri.trackingContext&&(t.isBeingObserved_=!0,t.onBO())),!0):(0===t.observers_.size&&ri.inBatch>0&&ci(t),!1)}function mi(t){t.lowestObserverState_!==$e.STALE_&&(t.lowestObserverState_=$e.STALE_,t.observers_.forEach((function(e){e.dependenciesState_===$e.UP_TO_DATE_&&("production"!==process.env.NODE_ENV&&e.isTracing_!==je.NONE&&gi(e,t),e.onBecomeStale_()),e.dependenciesState_=$e.STALE_})))}function gi(t,e){if(console.log("[mobx.trace] '"+t.name_+"' is invalidated due to a change in: '"+e.name_+"'"),t.isTracing_===je.BREAK){var i=[];bi($i(Vo(t,o)),i,1),new Function("debugger;\n/*\nTracing '"+t.name_+"'\n\nYou are entering this break point because derivation '"+t.name_+"' is being traced and '"+e.name_+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof Ue?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+i.join("\n")+"\n*/\n    ")()}var o}function bi(t,e,i){e.length>=1e3?e.push("(and many more)"):(e.push(""+"\t".repeat(i-1)+t.name),t.dependencies&&t.dependencies.forEach((function(t){return bi(t,e,i+1)})))}var fi=function(){function t(t,e,i,o){void 0===t&&(t="production"!==process.env.NODE_ENV?"Reaction@"+pt():"Reaction"),void 0===o&&(o=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=$e.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=je.NONE,this.name_=t,this.onInvalidate_=e,this.errorHandler_=i,this.requiresObservable_=o}var e=t.prototype;return e.onBecomeStale_=function(){this.schedule_()},e.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,ri.pendingReactions.push(this),yi())},e.isScheduled=function(){return this.isScheduled_},e.runReaction_=function(){if(!this.isDisposed_){hi(),this.isScheduled_=!1;var t=ri.trackingContext;if(ri.trackingContext=this,Xe(this)){this.isTrackPending_=!0;try{this.onInvalidate_(),"production"!==process.env.NODE_ENV&&this.isTrackPending_&&wi()&&Ai({name:this.name_,type:"scheduled-reaction"})}catch(t){this.reportExceptionInDerivation_(t)}}ri.trackingContext=t,ui()}},e.track=function(t){if(!this.isDisposed_){hi();var e,i=wi();"production"!==process.env.NODE_ENV&&i&&(e=Date.now(),Ei({name:this.name_,type:"reaction"})),this.isRunning_=!0;var o=ri.trackingContext;ri.trackingContext=this;var a=Ke(this,t,void 0);ri.trackingContext=o,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&Je(this),We(a)&&this.reportExceptionInDerivation_(a.cause),"production"!==process.env.NODE_ENV&&i&&Ci({time:Date.now()-e}),ui()}},e.reportExceptionInDerivation_=function(t){var e=this;if(this.errorHandler_)this.errorHandler_(t,this);else{if(ri.disableErrorBoundaries)throw t;var i="production"!==process.env.NODE_ENV?"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'":"[mobx] uncaught error in '"+this+"'";ri.suppressReactionErrors?"production"!==process.env.NODE_ENV&&console.warn("[mobx] (error in reaction '"+this.name_+"' suppressed, fix error of causing action below)"):console.error(i,t),"production"!==process.env.NODE_ENV&&wi()&&Ai({type:"error",name:this.name_,message:i,error:""+t}),ri.globalReactionErrorHandlers.forEach((function(i){return i(t,e)}))}},e.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(hi(),Je(this),ui()))},e.getDisposer_=function(){var t=this.dispose.bind(this);return t[Vt]=this,t},e.toString=function(){return"Reaction["+this.name_+"]"},e.trace=function(t){void 0===t&&(t=!1),function(){"production"===process.env.NODE_ENV&&tt("trace() is not available in production builds");for(var t=!1,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];"boolean"==typeof i[i.length-1]&&(t=i.pop());var a=Zi(i);if(!a)return tt("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");a.isTracing_===je.NONE&&console.log("[mobx.trace] '"+a.name_+"' tracing enabled");a.isTracing_=t?je.BREAK:je.LOG}(this,t)},t}(),vi=function(t){return t()};function yi(){ri.inBatch>0||ri.isRunningReactions||vi(_i)}function _i(){ri.isRunningReactions=!0;for(var t=ri.pendingReactions,e=0;t.length>0;){100==++e&&(console.error("production"!==process.env.NODE_ENV?"Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+t[0]:"[mobx] cycle in reaction: "+t[0]),t.splice(0));for(var i=t.splice(0),o=0,a=i.length;o<a;o++)i[o].runReaction_()}ri.isRunningReactions=!1}var xi=At("Reaction",fi);function wi(){return"production"!==process.env.NODE_ENV&&!!ri.spyListeners.length}function Ai(t){if("production"!==process.env.NODE_ENV&&ri.spyListeners.length)for(var e=ri.spyListeners,i=0,o=e.length;i<o;i++)e[i](t)}function Ei(t){"production"!==process.env.NODE_ENV&&Ai(Mt({},t,{spyReportStart:!0}))}var Si={type:"report-end",spyReportEnd:!0};function Ci(t){"production"!==process.env.NODE_ENV&&Ai(t?Mt({},t,{type:"report-end",spyReportEnd:!0}):Si)}var Ni="action",Ti=Jt(Ni),ki=Jt("action.bound",{bound:!0}),Oi=Jt("autoAction",{autoAction:!0}),Pi=Jt("autoAction.bound",{autoAction:!0,bound:!0});function Li(t){return function(e,i){return bt(e)?De(e.name||"<unnamed action>",e,t):bt(i)?De(e,i,t):ft(i)?Ft(e,i,t?Oi:Ti):ft(e)?jt(Jt(t?"autoAction":Ni,{name:e,autoAction:t})):void("production"!==process.env.NODE_ENV&&tt("Invalid arguments for `action`"))}}var Bi=Li(!1);Object.assign(Bi,Ti);var Mi=Li(!0);function Hi(t){return bt(t)&&!0===t.isMobxAction}function Di(t,e){var i,o;void 0===e&&(e=lt),"production"!==process.env.NODE_ENV&&(bt(t)||tt("Autorun expects a function as first argument"),Hi(t)&&tt("Autorun does not accept actions since actions are untrackable"));var a,n=null!=(i=null==(o=e)?void 0:o.name)?i:"production"!==process.env.NODE_ENV?t.name||"Autorun@"+pt():"Autorun";if(!e.scheduler&&!e.delay)a=new fi(n,(function(){this.track(l)}),e.onError,e.requiresObservable);else{var s=function(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Ri}(e),r=!1;a=new fi(n,(function(){r||(r=!0,s((function(){r=!1,a.isDisposed_||a.track(l)})))}),e.onError,e.requiresObservable)}function l(){t(a)}return a.schedule_(),a.getDisposer_()}Object.assign(Mi,Oi),Bi.bound=jt(ki),Mi.bound=jt(Pi);var Ri=function(t){return t()};function zi(t,e,i){return Ii("onBUO",t,e,i)}function Ii(t,e,i,o){var a="function"==typeof o?Vo(e,i):Vo(e),n=bt(o)?o:i,s=t+"L";return a[s]?a[s].add(n):a[s]=new Set([n]),function(){var t=a[s];t&&(t.delete(n),0===t.size&&delete a[s])}}function $i(t){var e,i={name:t.name_};return t.observing_&&t.observing_.length>0&&(i.dependencies=(e=t.observing_,Array.from(new Set(e))).map($i)),i}var ji=0;function Fi(){this.message="FLOW_CANCELLED"}Fi.prototype=Object.create(Error.prototype);var Vi=ee("flow"),Ui=ee("flow.bound",{bound:!0}),qi=Object.assign((function(t,e){if(ft(e))return Ft(t,e,Vi);"production"!==process.env.NODE_ENV&&1!==arguments.length&&tt("Flow expects single argument with generator function");var i=t,o=i.name||"<unnamed flow>",a=function(){var t,e=this,a=arguments,n=++ji,s=Bi(o+" - runid: "+n+" - init",i).apply(e,a),r=void 0,l=new Promise((function(e,i){var a=0;function l(t){var e;r=void 0;try{e=Bi(o+" - runid: "+n+" - yield "+a++,s.next).call(s,t)}catch(t){return i(t)}c(e)}function d(t){var e;r=void 0;try{e=Bi(o+" - runid: "+n+" - yield "+a++,s.throw).call(s,t)}catch(t){return i(t)}c(e)}function c(t){if(!bt(null==t?void 0:t.then))return t.done?e(t.value):(r=Promise.resolve(t.value)).then(l,d);t.then(c,i)}t=i,l(void 0)}));return l.cancel=Bi(o+" - runid: "+n+" - cancel",(function(){try{r&&Gi(r);var e=s.return(void 0),i=Promise.resolve(e.value);i.then(gt,gt),Gi(i),t(new Fi)}catch(e){t(e)}})),l};return a.isMobXFlow=!0,a}),Vi);function Gi(t){bt(t.cancel)&&t.cancel()}function Wi(t){return!0===(null==t?void 0:t.isMobXFlow)}function Xi(t,e){return!!t&&(void 0!==e?"production"!==process.env.NODE_ENV&&(So(t)||xo(t))?tt("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead."):!!Mo(t)&&t[Vt].values_.has(e):Mo(t)||!!t[Vt]||qt(t)||xi(t)||qe(t))}function Yi(t){return"production"!==process.env.NODE_ENV&&1!==arguments.length&&tt("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),Xi(t)}function Ki(t,e,i){return t.set(e,i),i}function Ji(t,e){if(null==t||"object"!=typeof t||t instanceof Date||!Yi(t))return t;if(Ve(t)||qe(t))return Ji(t.get(),e);if(e.has(t))return e.get(t);if(xo(t)){var i=Ki(e,t,new Array(t.length));return t.forEach((function(t,o){i[o]=Ji(t,e)})),i}if(To(t)){var o=Ki(e,t,new Set);return t.forEach((function(t){o.add(Ji(t,e))})),o}if(So(t)){var a=Ki(e,t,new Map);return t.forEach((function(t,i){a.set(i,Ji(t,e))})),a}var n=Ki(e,t,{});return function(t){if(Mo(t))return t[Vt].ownKeys_();tt(38)}(t).forEach((function(i){st.propertyIsEnumerable.call(t,i)&&(n[i]=Ji(t[i],e))})),n}function Qi(t,e){return"production"!==process.env.NODE_ENV&&e&&tt("toJS no longer supports options"),Ji(t,new Map)}function Zi(t){switch(t.length){case 0:return ri.trackingDerivation;case 1:return Vo(t[0]);case 2:return Vo(t[0],t[1])}}function to(t,e){void 0===e&&(e=void 0),hi();try{return t.apply(e)}finally{ui()}}function eo(t){return t[Vt]}qi.bound=jt(Ui);var io={has:function(t,e){return"production"!==process.env.NODE_ENV&&ri.trackingDerivation&&ut("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."),eo(t).has_(e)},get:function(t,e){return eo(t).get_(e)},set:function(t,e,i){var o;return!!ft(e)&&("production"===process.env.NODE_ENV||eo(t).values_.has(e)||ut("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."),null==(o=eo(t).set_(e,i,!0))||o)},deleteProperty:function(t,e){var i;return"production"!==process.env.NODE_ENV&&ut("delete properties from an observable object. Use 'remove' from 'mobx' instead."),!!ft(e)&&(null==(i=eo(t).delete_(e,!0))||i)},defineProperty:function(t,e,i){var o;return"production"!==process.env.NODE_ENV&&ut("define property on an observable object. Use 'defineProperty' from 'mobx' instead."),null==(o=eo(t).defineProperty_(e,i))||o},ownKeys:function(t){return"production"!==process.env.NODE_ENV&&ri.trackingDerivation&&ut("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."),eo(t).ownKeys_()},preventExtensions:function(t){tt(13)}};function oo(t){return void 0!==t.interceptors_&&t.interceptors_.length>0}function ao(t,e){var i=t.interceptors_||(t.interceptors_=[]);return i.push(e),mt((function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}))}function no(t,e){var i=Ze();try{for(var o=[].concat(t.interceptors_||[]),a=0,n=o.length;a<n&&((e=o[a](e))&&!e.type&&tt(14),e);a++);return e}finally{ti(i)}}function so(t){return void 0!==t.changeListeners_&&t.changeListeners_.length>0}function ro(t,e){var i=t.changeListeners_||(t.changeListeners_=[]);return i.push(e),mt((function(){var t=i.indexOf(e);-1!==t&&i.splice(t,1)}))}function lo(t,e){var i=Ze(),o=t.changeListeners_;if(o){for(var a=0,n=(o=o.slice()).length;a<n;a++)o[a](e);ti(i)}}function co(t,e,i){var o=Po(t,i)[Vt];hi();try{"production"!==process.env.NODE_ENV&&e&&t[$t]&&tt("makeObservable second arg must be nullish when using decorators. Mixing @decorator syntax with annotations is not supported."),null!=e||(e=function(t){return Ot(t,$t)||("production"===process.env.NODE_ENV||t[$t]||tt("No annotations were passed to makeObservable, but no decorated members have been found either"),xt(t,$t,Mt({},t[$t]))),t[$t]}(t)),Nt(e).forEach((function(t){return o.make_(t,e[t])}))}finally{ui()}return t}var ho="update",uo={get:function(t,e){var i=t[Vt];return e===Vt?i:"length"===e?i.getArrayLength_():"string"!=typeof e||isNaN(e)?Ot(go,e)?go[e]:t[e]:i.get_(parseInt(e))},set:function(t,e,i){var o=t[Vt];return"length"===e&&o.setArrayLength_(i),"symbol"==typeof e||isNaN(e)?t[e]=i:o.set_(parseInt(e),i),!0},preventExtensions:function(){tt(15)}},po=function(){function t(t,e,i,o){void 0===t&&(t="production"!==process.env.NODE_ENV?"ObservableArray@"+pt():"ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new Ut(t),this.enhancer_=function(i,o){return e(i,o,"production"!==process.env.NODE_ENV?t+"[..]":"ObservableArray[..]")}}var e=t.prototype;return e.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.dehanceValues_=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},e.intercept_=function(t){return ao(this,t)},e.observe_=function(t,e){return void 0===e&&(e=!1),e&&t({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),ro(this,t)},e.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},e.setArrayLength_=function(t){("number"!=typeof t||isNaN(t)||t<0)&&tt("Out of range: "+t);var e=this.values_.length;if(t!==e)if(t>e){for(var i=new Array(t-e),o=0;o<t-e;o++)i[o]=void 0;this.spliceWithArray_(e,0,i)}else this.spliceWithArray_(t,e-t)},e.updateArrayLength_=function(t,e){t!==this.lastKnownLength_&&tt(16),this.lastKnownLength_+=e,this.legacyMode_&&e>0&&jo(t+e+1)},e.spliceWithArray_=function(t,e,i){var o=this;Ye(this.atom_);var a=this.values_.length;if(void 0===t?t=0:t>a?t=a:t<0&&(t=Math.max(0,a+t)),e=1===arguments.length?a-t:null==e?0:Math.max(0,Math.min(e,a-t)),void 0===i&&(i=rt),oo(this)){var n=no(this,{object:this.proxy_,type:"splice",index:t,removedCount:e,added:i});if(!n)return rt;e=n.removedCount,i=n.added}if(i=0===i.length?i:i.map((function(t){return o.enhancer_(t,void 0)})),this.legacyMode_||"production"!==process.env.NODE_ENV){var s=i.length-e;this.updateArrayLength_(a,s)}var r=this.spliceItemsIntoValues_(t,e,i);return 0===e&&0===i.length||this.notifyArraySplice_(t,i,r),this.dehanceValues_(r)},e.spliceItemsIntoValues_=function(t,e,i){var o;if(i.length<1e4)return(o=this.values_).splice.apply(o,[t,e].concat(i));var a=this.values_.slice(t,t+e),n=this.values_.slice(t+e);this.values_.length+=i.length-e;for(var s=0;s<i.length;s++)this.values_[t+s]=i[s];for(var r=0;r<n.length;r++)this.values_[t+i.length+r]=n[r];return a},e.notifyArrayChildUpdate_=function(t,e,i){var o=!this.owned_&&wi(),a=so(this),n=a||o?{observableKind:"array",object:this.proxy_,type:ho,debugObjectName:this.atom_.name_,index:t,newValue:e,oldValue:i}:null;"production"!==process.env.NODE_ENV&&o&&Ei(n),this.atom_.reportChanged(),a&&lo(this,n),"production"!==process.env.NODE_ENV&&o&&Ci()},e.notifyArraySplice_=function(t,e,i){var o=!this.owned_&&wi(),a=so(this),n=a||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:t,removed:i,added:e,removedCount:i.length,addedCount:e.length}:null;"production"!==process.env.NODE_ENV&&o&&Ei(n),this.atom_.reportChanged(),a&&lo(this,n),"production"!==process.env.NODE_ENV&&o&&Ci()},e.get_=function(t){if(t<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[t]);console.warn("production"!==process.env.NODE_ENV?"[mobx] Out of bounds read: "+t:"[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},e.set_=function(t,e){var i=this.values_;if(t<i.length){Ye(this.atom_);var o=i[t];if(oo(this)){var a=no(this,{type:ho,object:this.proxy_,index:t,newValue:e});if(!a)return;e=a.newValue}(e=this.enhancer_(e,o))!==o&&(i[t]=e,this.notifyArrayChildUpdate_(t,e,o))}else t===i.length?this.spliceWithArray_(t,0,[e]):tt(17,t,i.length)},t}();function mo(t,e,i,o){void 0===i&&(i="production"!==process.env.NODE_ENV?"ObservableArray@"+pt():"ObservableArray"),void 0===o&&(o=!1),ht();var a=new po(i,e,o,!1);wt(a.values_,Vt,a);var n=new Proxy(a.values_,uo);if(a.proxy_=n,t&&t.length){var s=ze(!0);a.spliceWithArray_(0,0,t),Ie(s)}return n}var go={clear:function(){return this.splice(0)},replace:function(t){var e=this[Vt];return e.spliceWithArray_(0,e.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,e){for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];var n=this[Vt];switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(t);case 2:return n.spliceWithArray_(t,e)}return n.spliceWithArray_(t,e,o)},spliceWithArray:function(t,e,i){return this[Vt].spliceWithArray_(t,e,i)},push:function(){for(var t=this[Vt],e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return t.spliceWithArray_(t.values_.length,0,i),t.values_.length},pop:function(){return this.splice(Math.max(this[Vt].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Vt],e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return t.spliceWithArray_(0,0,i),t.values_.length},reverse:function(){return ri.trackingDerivation&&tt(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){ri.trackingDerivation&&tt(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var e=this[Vt],i=e.dehanceValues_(e.values_).indexOf(t);return i>-1&&(this.splice(i,1),!0)}};function bo(t,e){"function"==typeof Array.prototype[t]&&(go[t]=e(t))}function fo(t){return function(){var e=this[Vt];e.atom_.reportObserved();var i=e.dehanceValues_(e.values_);return i[t].apply(i,arguments)}}function vo(t){return function(e,i){var o=this,a=this[Vt];return a.atom_.reportObserved(),a.dehanceValues_(a.values_)[t]((function(t,a){return e.call(i,t,a,o)}))}}function yo(t){return function(){var e=this,i=this[Vt];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_),a=arguments[0];return arguments[0]=function(t,i,o){return a(t,i,o,e)},o[t].apply(o,arguments)}}bo("concat",fo),bo("flat",fo),bo("includes",fo),bo("indexOf",fo),bo("join",fo),bo("lastIndexOf",fo),bo("slice",fo),bo("toString",fo),bo("toLocaleString",fo),bo("every",vo),bo("filter",vo),bo("find",vo),bo("findIndex",vo),bo("flatMap",vo),bo("forEach",vo),bo("map",vo),bo("some",vo),bo("reduce",yo),bo("reduceRight",yo);var _o=At("ObservableArrayAdministration",po);function xo(t){return vt(t)&&_o(t[Vt])}var wo={},Ao="add",Eo=function(t,e){function i(t,e,i){var o=this;void 0===e&&(e=Xt),void 0===i&&(i="production"!==process.env.NODE_ENV?"ObservableMap@"+pt():"ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Vt]=wo,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=e,this.name_=i,bt(Map)||tt(18),this.keysAtom_=Gt("production"!==process.env.NODE_ENV?this.name_+".keys()":"ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(t,e){var i=ze(t);try{e()}finally{Ie(i)}}(!0,(function(){o.merge(t)}))}var o=i.prototype;return o.has_=function(t){return this.data_.has(t)},o.has=function(t){var e=this;if(!ri.trackingDerivation)return this.has_(t);var i=this.hasMap_.get(t);if(!i){var o=i=new Fe(this.has_(t),Yt,"production"!==process.env.NODE_ENV?this.name_+"."+Tt(t)+"?":"ObservableMap.key?",!1);this.hasMap_.set(t,o),zi(o,(function(){return e.hasMap_.delete(t)}))}return i.get()},o.set=function(t,e){var i=this.has_(t);if(oo(this)){var o=no(this,{type:i?ho:Ao,object:this,newValue:e,name:t});if(!o)return this;e=o.newValue}return i?this.updateValue_(t,e):this.addValue_(t,e),this},o.delete=function(t){var e=this;if((Ye(this.keysAtom_),oo(this))&&!no(this,{type:"delete",object:this,name:t}))return!1;if(this.has_(t)){var i=wi(),o=so(this),a=o||i?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(t).value_,name:t}:null;return"production"!==process.env.NODE_ENV&&i&&Ei(a),to((function(){var i;e.keysAtom_.reportChanged(),null==(i=e.hasMap_.get(t))||i.setNewValue_(!1),e.data_.get(t).setNewValue_(void 0),e.data_.delete(t)})),o&&lo(this,a),"production"!==process.env.NODE_ENV&&i&&Ci(),!0}return!1},o.updateValue_=function(t,e){var i=this.data_.get(t);if((e=i.prepareNewValue_(e))!==ri.UNCHANGED){var o=wi(),a=so(this),n=a||o?{observableKind:"map",debugObjectName:this.name_,type:ho,object:this,oldValue:i.value_,name:t,newValue:e}:null;"production"!==process.env.NODE_ENV&&o&&Ei(n),i.setNewValue_(e),a&&lo(this,n),"production"!==process.env.NODE_ENV&&o&&Ci()}},o.addValue_=function(t,e){var i=this;Ye(this.keysAtom_),to((function(){var o,a=new Fe(e,i.enhancer_,"production"!==process.env.NODE_ENV?i.name_+"."+Tt(t):"ObservableMap.key",!1);i.data_.set(t,a),e=a.value_,null==(o=i.hasMap_.get(t))||o.setNewValue_(!0),i.keysAtom_.reportChanged()}));var o=wi(),a=so(this),n=a||o?{observableKind:"map",debugObjectName:this.name_,type:Ao,object:this,name:t,newValue:e}:null;"production"!==process.env.NODE_ENV&&o&&Ei(n),a&&lo(this,n),"production"!==process.env.NODE_ENV&&o&&Ci()},o.get=function(t){return this.has(t)?this.dehanceValue_(this.data_.get(t).get()):this.dehanceValue_(void 0)},o.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},o.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},o.values=function(){var t=this,e=this.keys();return Ko({next:function(){var i=e.next(),o=i.done,a=i.value;return{done:o,value:o?void 0:t.get(a)}}})},o.entries=function(){var t=this,e=this.keys();return Ko({next:function(){var i=e.next(),o=i.done,a=i.value;return{done:o,value:o?void 0:[a,t.get(a)]}}})},o[t]=function(){return this.entries()},o.forEach=function(t,e){for(var i,o=It(this);!(i=o()).done;){var a=i.value,n=a[0],s=a[1];t.call(e,s,n,this)}},o.merge=function(t){var e=this;return So(t)&&(t=new Map(t)),to((function(){yt(t)?function(t){var e=Object.keys(t);if(!Ct)return e;var i=Object.getOwnPropertySymbols(t);return i.length?[].concat(e,i.filter((function(e){return st.propertyIsEnumerable.call(t,e)}))):e}(t).forEach((function(i){return e.set(i,t[i])})):Array.isArray(t)?t.forEach((function(t){var i=t[0],o=t[1];return e.set(i,o)})):Et(t)?(t.constructor!==Map&&tt(19,t),t.forEach((function(t,i){return e.set(i,t)}))):null!=t&&tt(20,t)})),this},o.clear=function(){var t=this;to((function(){Qe((function(){for(var e,i=It(t.keys());!(e=i()).done;){var o=e.value;t.delete(o)}}))}))},o.replace=function(t){var e=this;return to((function(){for(var i,o=function(t){if(Et(t)||So(t))return t;if(Array.isArray(t))return new Map(t);if(yt(t)){var e=new Map;for(var i in t)e.set(i,t[i]);return e}return tt(21,t)}(t),a=new Map,n=!1,s=It(e.data_.keys());!(i=s()).done;){var r=i.value;if(!o.has(r))if(e.delete(r))n=!0;else{var l=e.data_.get(r);a.set(r,l)}}for(var d,c=It(o.entries());!(d=c()).done;){var h=d.value,u=h[0],p=h[1],m=e.data_.has(u);if(e.set(u,p),e.data_.has(u)){var g=e.data_.get(u);a.set(u,g),m||(n=!0)}}if(!n)if(e.data_.size!==a.size)e.keysAtom_.reportChanged();else for(var b=e.data_.keys(),f=a.keys(),v=b.next(),y=f.next();!v.done;){if(v.value!==y.value){e.keysAtom_.reportChanged();break}v=b.next(),y=f.next()}e.data_=a})),this},o.toString=function(){return"[object ObservableMap]"},o.toJSON=function(){return Array.from(this)},o.observe_=function(t,e){return"production"!==process.env.NODE_ENV&&!0===e&&tt("`observe` doesn't support fireImmediately=true in combination with maps."),ro(this,t)},o.intercept_=function(t){return ao(this,t)},Bt(i,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:e,get:function(){return"Map"}}]),i}(Symbol.iterator,Symbol.toStringTag),So=At("ObservableMap",Eo);var Co={},No=function(t,e){function i(t,e,i){void 0===e&&(e=Xt),void 0===i&&(i="production"!==process.env.NODE_ENV?"ObservableSet@"+pt():"ObservableSet"),this.name_=void 0,this[Vt]=Co,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,bt(Set)||tt(22),this.atom_=Gt(this.name_),this.enhancer_=function(t,o){return e(t,o,i)},t&&this.replace(t)}var o=i.prototype;return o.dehanceValue_=function(t){return void 0!==this.dehancer?this.dehancer(t):t},o.clear=function(){var t=this;to((function(){Qe((function(){for(var e,i=It(t.data_.values());!(e=i()).done;){var o=e.value;t.delete(o)}}))}))},o.forEach=function(t,e){for(var i,o=It(this);!(i=o()).done;){var a=i.value;t.call(e,a,a,this)}},o.add=function(t){var e=this;if((Ye(this.atom_),oo(this))&&!no(this,{type:Ao,object:this,newValue:t}))return this;if(!this.has(t)){to((function(){e.data_.add(e.enhancer_(t,void 0)),e.atom_.reportChanged()}));var i="production"!==process.env.NODE_ENV&&wi(),o=so(this),a=o||i?{observableKind:"set",debugObjectName:this.name_,type:Ao,object:this,newValue:t}:null;i&&"production"!==process.env.NODE_ENV&&Ei(a),o&&lo(this,a),i&&"production"!==process.env.NODE_ENV&&Ci()}return this},o.delete=function(t){var e=this;if(oo(this)&&!no(this,{type:"delete",object:this,oldValue:t}))return!1;if(this.has(t)){var i="production"!==process.env.NODE_ENV&&wi(),o=so(this),a=o||i?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:t}:null;return i&&"production"!==process.env.NODE_ENV&&Ei(a),to((function(){e.atom_.reportChanged(),e.data_.delete(t)})),o&&lo(this,a),i&&"production"!==process.env.NODE_ENV&&Ci(),!0}return!1},o.has=function(t){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(t))},o.entries=function(){var t=0,e=Array.from(this.keys()),i=Array.from(this.values());return Ko({next:function(){var o=t;return t+=1,o<i.length?{value:[e[o],i[o]],done:!1}:{done:!0}}})},o.keys=function(){return this.values()},o.values=function(){this.atom_.reportObserved();var t=this,e=0,i=Array.from(this.data_.values());return Ko({next:function(){return e<i.length?{value:t.dehanceValue_(i[e++]),done:!1}:{done:!0}}})},o.replace=function(t){var e=this;return To(t)&&(t=new Set(t)),to((function(){Array.isArray(t)||St(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&tt("Cannot initialize set from "+t)})),this},o.observe_=function(t,e){return"production"!==process.env.NODE_ENV&&!0===e&&tt("`observe` doesn't support fireImmediately=true in combination with sets."),ro(this,t)},o.intercept_=function(t){return ao(this,t)},o.toJSON=function(){return Array.from(this)},o.toString=function(){return"[object ObservableSet]"},o[t]=function(){return this.values()},Bt(i,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:e,get:function(){return"Set"}}]),i}(Symbol.iterator,Symbol.toStringTag),To=At("ObservableSet",No),ko=Object.create(null),Oo=function(){function t(t,e,i,o){void 0===e&&(e=new Map),void 0===o&&(o=he),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=t,this.values_=e,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new Ut("production"!==process.env.NODE_ENV?this.name_+".keys":"ObservableObject.keys"),this.isPlainObject_=yt(this.target_),"production"===process.env.NODE_ENV||Qo(this.defaultAnnotation_)||tt("defaultAnnotation must be valid annotation"),"production"!==process.env.NODE_ENV&&(this.appliedAnnotations_={})}var e=t.prototype;return e.getObservablePropValue_=function(t){return this.values_.get(t).get()},e.setObservablePropValue_=function(t,e){var i=this.values_.get(t);if(i instanceof Ue)return i.set(e),!0;if(oo(this)){var o=no(this,{type:ho,object:this.proxy_||this.target_,name:t,newValue:e});if(!o)return null;e=o.newValue}if((e=i.prepareNewValue_(e))!==ri.UNCHANGED){var a=so(this),n="production"!==process.env.NODE_ENV&&wi(),s=a||n?{type:ho,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:i.value_,name:t,newValue:e}:null;"production"!==process.env.NODE_ENV&&n&&Ei(s),i.setNewValue_(e),a&&lo(this,s),"production"!==process.env.NODE_ENV&&n&&Ci()}return!0},e.get_=function(t){return ri.trackingDerivation&&!Ot(this.target_,t)&&this.has_(t),this.target_[t]},e.set_=function(t,e,i){return void 0===i&&(i=!1),Ot(this.target_,t)?this.values_.has(t)?this.setObservablePropValue_(t,e):i?Reflect.set(this.target_,t,e):(this.target_[t]=e,!0):this.extend_(t,{value:e,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,i)},e.has_=function(t){if(!ri.trackingDerivation)return t in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var e=this.pendingKeys_.get(t);return e||(e=new Fe(t in this.target_,Yt,"production"!==process.env.NODE_ENV?this.name_+"."+Tt(t)+"?":"ObservableObject.key?",!1),this.pendingKeys_.set(t,e)),e.get()},e.make_=function(t,e){if(!0===e&&(e=this.defaultAnnotation_),!1!==e){if(Do(this,e,t),!(t in this.target_)){var i;if(null!=(i=this.target_[$t])&&i[t])return;tt(1,e.annotationType_,this.name_+"."+t.toString())}for(var o=this.target_;o&&o!==st;){var a=at(o,t);if(a){var n=e.make_(this,t,a,o);if(0===n)return;if(1===n)break}o=Object.getPrototypeOf(o)}Ho(this,e,t)}},e.extend_=function(t,e,i,o){if(void 0===o&&(o=!1),!0===i&&(i=this.defaultAnnotation_),!1===i)return this.defineProperty_(t,e,o);Do(this,i,t);var a=i.extend_(this,t,e,o);return a&&Ho(this,i,t),a},e.defineProperty_=function(t,e,i){void 0===i&&(i=!1);try{hi();var o=this.delete_(t);if(!o)return o;if(oo(this)){var a=no(this,{object:this.proxy_||this.target_,name:t,type:Ao,newValue:e.value});if(!a)return null;var n=a.newValue;e.value!==n&&(e=Mt({},e,{value:n}))}if(i){if(!Reflect.defineProperty(this.target_,t,e))return!1}else nt(this.target_,t,e);this.notifyPropertyAddition_(t,e.value)}finally{ui()}return!0},e.defineObservableProperty_=function(t,e,i,o){void 0===o&&(o=!1);try{hi();var a=this.delete_(t);if(!a)return a;if(oo(this)){var n=no(this,{object:this.proxy_||this.target_,name:t,type:Ao,newValue:e});if(!n)return null;e=n.newValue}var s=Bo(t),r={configurable:!ri.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(o){if(!Reflect.defineProperty(this.target_,t,r))return!1}else nt(this.target_,t,r);var l=new Fe(e,i,"production"!==process.env.NODE_ENV?this.name_+"."+t.toString():"ObservableObject.key",!1);this.values_.set(t,l),this.notifyPropertyAddition_(t,l.value_)}finally{ui()}return!0},e.defineComputedProperty_=function(t,e,i){void 0===i&&(i=!1);try{hi();var o=this.delete_(t);if(!o)return o;if(oo(this))if(!no(this,{object:this.proxy_||this.target_,name:t,type:Ao,newValue:void 0}))return null;e.name||(e.name="production"!==process.env.NODE_ENV?this.name_+"."+t.toString():"ObservableObject.key"),e.context=this.proxy_||this.target_;var a=Bo(t),n={configurable:!ri.safeDescriptors||this.isPlainObject_,enumerable:!1,get:a.get,set:a.set};if(i){if(!Reflect.defineProperty(this.target_,t,n))return!1}else nt(this.target_,t,n);this.values_.set(t,new Ue(e)),this.notifyPropertyAddition_(t,void 0)}finally{ui()}return!0},e.delete_=function(t,e){if(void 0===e&&(e=!1),!Ot(this.target_,t))return!0;if(oo(this)&&!no(this,{object:this.proxy_||this.target_,name:t,type:"remove"}))return null;try{var i,o;hi();var a,n=so(this),s="production"!==process.env.NODE_ENV&&wi(),r=this.values_.get(t),l=void 0;if(!r&&(n||s))l=null==(a=at(this.target_,t))?void 0:a.value;if(e){if(!Reflect.deleteProperty(this.target_,t))return!1}else delete this.target_[t];if("production"!==process.env.NODE_ENV&&delete this.appliedAnnotations_[t],r&&(this.values_.delete(t),r instanceof Fe&&(l=r.value_),mi(r)),this.keysAtom_.reportChanged(),null==(i=this.pendingKeys_)||null==(o=i.get(t))||o.set(t in this.target_),n||s){var d={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:l,name:t};"production"!==process.env.NODE_ENV&&s&&Ei(d),n&&lo(this,d),"production"!==process.env.NODE_ENV&&s&&Ci()}}finally{ui()}return!0},e.observe_=function(t,e){return"production"!==process.env.NODE_ENV&&!0===e&&tt("`observe` doesn't support the fire immediately property for observable objects."),ro(this,t)},e.intercept_=function(t){return ao(this,t)},e.notifyPropertyAddition_=function(t,e){var i,o,a=so(this),n="production"!==process.env.NODE_ENV&&wi();if(a||n){var s=a||n?{type:Ao,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:t,newValue:e}:null;"production"!==process.env.NODE_ENV&&n&&Ei(s),a&&lo(this,s),"production"!==process.env.NODE_ENV&&n&&Ci()}null==(i=this.pendingKeys_)||null==(o=i.get(t))||o.set(!0),this.keysAtom_.reportChanged()},e.ownKeys_=function(){return this.keysAtom_.reportObserved(),Nt(this.target_)},e.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function Po(t,e){var i;if("production"!==process.env.NODE_ENV&&e&&Mo(t)&&tt("Options can't be provided for already observable objects."),Ot(t,Vt))return"production"===process.env.NODE_ENV||Uo(t)instanceof Oo||tt("Cannot convert '"+qo(t)+"' into observable object:\nThe target is already observable of different type.\nExtending builtins is not supported."),t;"production"===process.env.NODE_ENV||Object.isExtensible(t)||tt("Cannot make the designated object observable; it is not extensible");var o=null!=(i=null==e?void 0:e.name)?i:"production"!==process.env.NODE_ENV?(yt(t)?"ObservableObject":t.constructor.name)+"@"+pt():"ObservableObject",a=new Oo(t,new Map,String(o),function(t){var e;return t?null!=(e=t.defaultDecorator)?e:ue(t):void 0}(e));return xt(t,Vt,a),t}var Lo=At("ObservableObjectAdministration",Oo);function Bo(t){return ko[t]||(ko[t]={get:function(){return this[Vt].getObservablePropValue_(t)},set:function(e){return this[Vt].setObservablePropValue_(t,e)}})}function Mo(t){return!!vt(t)&&Lo(t[Vt])}function Ho(t,e,i){var o;"production"!==process.env.NODE_ENV&&(t.appliedAnnotations_[i]=e),null==(o=t.target_[$t])||delete o[i]}function Do(t,e,i){if("production"===process.env.NODE_ENV||Qo(e)||tt("Cannot annotate '"+t.name_+"."+i.toString()+"': Invalid annotation."),"production"!==process.env.NODE_ENV&&!Kt(e)&&Ot(t.appliedAnnotations_,i)){var o=t.name_+"."+i.toString(),a=t.appliedAnnotations_[i].annotationType_;tt("Cannot apply '"+e.annotationType_+"' to '"+o+"':\nThe field is already annotated with '"+a+"'.\nRe-annotating fields is not allowed.\nUse 'override' annotation for methods overriden by subclass.")}}var Ro=0,zo=function(){};!function(t,e){Object.setPrototypeOf?Object.setPrototypeOf(t.prototype,e):void 0!==t.prototype.__proto__?t.prototype.__proto__=e:t.prototype=e}(zo,Array.prototype);var Io=function(t,e,i){function o(e,i,o,a){var n;void 0===o&&(o="production"!==process.env.NODE_ENV?"ObservableArray@"+pt():"ObservableArray"),void 0===a&&(a=!1),n=t.call(this)||this;var s=new po(o,i,a,!0);if(s.proxy_=Rt(n),wt(Rt(n),Vt,s),e&&e.length){var r=ze(!0);n.spliceWithArray(0,0,e),Ie(r)}return n}Ht(o,t);var a=o.prototype;return a.concat=function(){this[Vt].atom_.reportObserved();for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Array.prototype.concat.apply(this.slice(),e.map((function(t){return xo(t)?t.slice():t})))},a[i]=function(){var t=this,e=0;return Ko({next:function(){return e<t.length?{value:t[e++],done:!1}:{done:!0,value:void 0}}})},Bt(o,[{key:"length",get:function(){return this[Vt].getArrayLength_()},set:function(t){this[Vt].setArrayLength_(t)}},{key:e,get:function(){return"Array"}}]),o}(zo,Symbol.toStringTag,Symbol.iterator);function $o(t){nt(Io.prototype,""+t,function(t){return{enumerable:!1,configurable:!0,get:function(){return this[Vt].get_(t)},set:function(e){this[Vt].set_(t,e)}}}(t))}function jo(t){if(t>Ro){for(var e=Ro;e<t+100;e++)$o(e);Ro=t}}function Fo(t,e,i){return new Io(t,e,i)}function Vo(t,e){if("object"==typeof t&&null!==t){if(xo(t))return void 0!==e&&tt(23),t[Vt].atom_;if(To(t))return t[Vt];if(So(t)){if(void 0===e)return t.keysAtom_;var i=t.data_.get(e)||t.hasMap_.get(e);return i||tt(25,e,qo(t)),i}if(Mo(t)){if(!e)return tt(26);var o=t[Vt].values_.get(e);return o||tt(27,e,qo(t)),o}if(qt(t)||qe(t)||xi(t))return t}else if(bt(t)&&xi(t[Vt]))return t[Vt];tt(28)}function Uo(t,e){return t||tt(29),void 0!==e?Uo(Vo(t,e)):qt(t)||qe(t)||xi(t)||So(t)||To(t)?t:t[Vt]?t[Vt]:void tt(24,t)}function qo(t,e){var i;if(void 0!==e)i=Vo(t,e);else{if(Hi(t))return t.name;i=Mo(t)||So(t)||To(t)?Uo(t):Vo(t)}return i.name_}Object.entries(go).forEach((function(t){var e=t[0],i=t[1];"concat"!==e&&xt(Io.prototype,e,i)})),jo(1e3);var Go=st.toString;function Wo(t,e,i){return void 0===i&&(i=-1),Xo(t,e,i)}function Xo(t,e,i,o,a){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var n=typeof t;if("function"!==n&&"object"!==n&&"object"!=typeof e)return!1;var s=Go.call(t);if(s!==Go.call(e))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(t)===Symbol.valueOf.call(e);case"[object Map]":case"[object Set]":i>=0&&i++}t=Yo(t),e=Yo(e);var r="[object Array]"===s;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var l=t.constructor,d=e.constructor;if(l!==d&&!(bt(l)&&l instanceof l&&bt(d)&&d instanceof d)&&"constructor"in t&&"constructor"in e)return!1}if(0===i)return!1;i<0&&(i=-1),a=a||[];for(var c=(o=o||[]).length;c--;)if(o[c]===t)return a[c]===e;if(o.push(t),a.push(e),r){if((c=t.length)!==e.length)return!1;for(;c--;)if(!Xo(t[c],e[c],i-1,o,a))return!1}else{var h,u=Object.keys(t);if(c=u.length,Object.keys(e).length!==c)return!1;for(;c--;)if(!Ot(e,h=u[c])||!Xo(t[h],e[h],i-1,o,a))return!1}return o.pop(),a.pop(),!0}function Yo(t){return xo(t)?t.slice():Et(t)||So(t)||St(t)||To(t)?Array.from(t.entries()):t}function Ko(t){return t[Symbol.iterator]=Jo,t}function Jo(){return this}function Qo(t){return t instanceof Object&&"string"==typeof t.annotationType_&&bt(t.make_)&&bt(t.extend_)}["Symbol","Map","Set"].forEach((function(t){void 0===it()[t]&&tt("MobX requires global '"+t+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(t){return"production"===process.env.NODE_ENV?(console.warn("[mobx.spy] Is a no-op in production builds"),function(){}):(ri.spyListeners.push(t),mt((function(){ri.spyListeners=ri.spyListeners.filter((function(e){return e!==t}))})))},extras:{getDebugName:qo},$mobx:Vt});const Zo={defaultSettings:{type:"string"},format:{"simple-fields":{defaultSettings:{type:"object",format:"simple-fields"}}},inputMethod:{alt:{defaultSettings:{type:"string",format:"alt"}},array:{defaultSettings:{type:"array"},properties:{label:"itemLabel"}},boolean:{defaultSettings:{type:"boolean"}},code:{defaultSettings:{type:"markup"}},"code-editor":{defaultSettings:{type:"markup"}},color:{defaultSettings:{type:"string",format:"color"}},colorpicker:{defaultSettings:{type:"string",format:"colorpicker"}},"date-time":{defaultSettings:{type:"string",format:"date-time"}},datepicker:{defaultSettings:{type:"string",format:"date"}},fieldset:{defaultSettings:{type:"object"}},fileupload:{defaultSettings:{type:"string",format:"fileupload"}},haxupload:{defaultSettings:{type:"string",format:"fileupload"}},iconpicker:{defaultSettings:{type:"string",format:"iconpicker"}},markup:{defaultSettings:{type:"markup"}},"md-block":{defaultSettings:{type:"markup",format:"md-block"}},monthpicker:{defaultSettings:{type:"string",format:"month"}},number:{defaultSettings:{type:"number"}},object:{defaultSettings:{type:"object"}},select:{defaultSettings:{type:"string",format:"select"}},slider:{defaultSettings:{type:"number",format:"slider"}},tabs:{defaultSettings:{type:"object",format:"tabs"}},textarea:{defaultSettings:{type:"string",format:"textarea"}},timepicker:{defaultSettings:{type:"string",format:"time"}},weekpicker:{defaultSettings:{type:"string",format:"week"}}}},ta={defaultSettings:{element:"simple-fields-field",errorProperty:"errorMessage",invalidProperty:"invalid",noWrap:!0,attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},format:{radio:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"radio"},properties:{options:"options"},child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},select:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"select"},properties:{options:"options",items:"itemsList"}}},"simple-picker":{defaultSettings:{element:"simple-picker",attributes:{autofocus:!0},properties:{options:"options"}}}},type:{array:{defaultSettings:{element:"simple-fields-array",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},boolean:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"checkbox",value:!1}}},file:{defaultSettings:{import:"@lrnwebcomponents/hax-body/lib/hax-upload-field.js",element:"hax-upload-field",noWrap:!0,attributes:{autofocus:!0,type:"file"},properties:{accepts:"accepts"}}},integer:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},markup:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-code.js",element:"simple-fields-code",setValueProperty:"editorValue",noWrap:!0},format:{"md-block":{defaultSettings:{element:"md-block",setValueProperty:"source",noWrap:!0}}}},number:{defaultSettings:{element:"simple-fields-field",noWrap:!0,type:"number",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0},format:{cardlist:{defaultSettings:{element:"hax-element-card-list",noWrap:!0}},tabs:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tabs.js",element:"simple-fields-tabs",noWrap:!0,child:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tab.js",element:"simple-fields-tab",noWrap:!0,labelSlot:"label",descriptionSlot:""},properties:{layoutBreakpoint:"layoutBreakpoint",iconBreakpoint:"iconBreakpoint",sticky:"sticky"}}},fields:{defaultSettings:{element:"simple-fields",noWrap:!0,descriptionProperty:"description",properties:{schema:"schema"}}}}},string:{format:{alt:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,required:!0}}},color:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"color"}}},colorpicker:{defaultSettings:{import:"@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js",element:"simple-colors-picker",attributes:{autofocus:!0}}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},"date-time":{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"datetime-local"}}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},email:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"email"}}},fileupload:{defaultSettings:{import:"@lrnwebcomponents/hax-body/lib/hax-upload-field.js",element:"hax-upload-field",noWrap:!0,attributes:{autofocus:!0},properties:{accepts:"accepts"}}},iconpicker:{defaultSettings:{import:"@lrnwebcomponents/simple-icon-picker/simple-icon-picker.js",element:"simple-icon-picker",attributes:{autofocus:!0}}},month:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"month"}}},textarea:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"textarea"}}},time:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"time"}}},uri:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"},properties:{accepts:"accepts"}}}}}}};
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class ea{constructor(){this.haxProperties={type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,settings:{configure:[],advanced:[]},wipeSlot:{}},this.setup=(t,e="",i=this)=>(void 0!==this.tagName&&(e=this.tagName.toLowerCase()),window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),void 0!==window.HaxStore&&null!=window.HaxStore.instance&&window.HaxStore.instance.ready?this.setHaxProperties(t,e,i,!0):this.setHaxProperties(t,e,i,!1)),this._haxStoreReady=t=>{if(t.detail&&void 0!==this.tagName&&void 0!==this.haxProperties){let t=this.tagName,e=this.haxProperties,i=this;if(""!=t&&void 0===window.HaxStore){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:t.toLowerCase(),properties:e}});i.dispatchEvent(o)}else if(""!=t&&void 0===window.HaxStore.instance.elementList[t.toLowerCase()]){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:t.toLowerCase(),properties:e}});i.dispatchEvent(o)}else if(void 0!==this.tagName&&void 0===window.HaxStore.instance.elementList[this.tagName.toLowerCase()]){const t=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:this.tagName.toLowerCase(),properties:e}});i.dispatchEvent(t)}}},this.setHaxProperties=async(t={},e="",i=document,o=!1)=>{if("string"==typeof t&&(t=await fetch(t).then((t=>!(!t||!t.json)&&t.json()))),void 0===t.api&&(t.api="1"),"1"==t.api){var a;if(void 0===t.type&&(t.type="element"),void 0===t.editingElement&&(t.editingElement="core"),void 0===t.canPosition&&(t.canPosition=!0),void 0===t.canScale&&(t.canScale=!0),void 0===t.canEditSource&&(t.canEditSource=!1),void 0===t.contentEditable&&(t.contentEditable=!1),void 0===t.gizmo)t.gizmo=!1;else if(void 0!==t.gizmo.iconLib)a=window.WCGlobalBasePath?window.WCGlobalBasePath:new URL("./../../../",import.meta.url).href,import(`${a}${t.gizmo.iconLib}`);if(void 0!==t.settings){void 0===t.settings.configure&&(t.settings.configure=[]);for(let e=0;e<t.settings.configure.length;e++)t.settings.configure[e]=this.validateSetting(t.settings.configure[e]),t.settings.configure[e]||t.settings.configure.splice(e,1);void 0===t.settings.advanced&&(t.settings.advanced=[]);for(let e=0;e<t.settings.advanced.length;e++)t.settings.advanced[e]=this.validateSetting(t.settings.advanced[e]),t.settings.advanced[e]||t.settings.advanced.splice(e,1);t=this.standardAdvancedProps(t)}void 0===t.saveOptions&&(t.saveOptions={wipeSlot:!1}),void 0===t.demoSchema&&(t.demoSchema=[]),o&&this.readyToFireHAXSchema(e,t,i),""===e&&("function"==typeof this._setHaxProperties?this._setHaxProperties(t):this.haxProperties=t)}else console.warn("This is't a valid usage of hax API. See hax-body-behaviors/lib/HAXWiring.js for more details on how to implement the API. https://haxtheweb.org/hax-schema for details but we will try and guess the wiring")},this.readyToFireHAXSchema=(t,e,i)=>{if(""!=t&&void 0===window.HaxStore){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:t.toLowerCase(),properties:e}});i.dispatchEvent(o)}else if(""!=t){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:t.toLowerCase(),properties:e}});i.dispatchEvent(o)}else if(void 0!==this.tagName){const t=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:this.tagName.toLowerCase(),properties:e}});i.dispatchEvent(t)}else if(void 0!==i.tagName){const t=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:i.tagName.toLowerCase(),properties:e}});i.dispatchEvent(t)}else console.warn(i),console.warn(`${t} missed our checks and has an issue in implementation with HAX`)},this.standardAdvancedProps=t=>(t.settings.advanced.push({attribute:"data-hax-lock",title:"Lock editing",description:"Prevent changes to this element and all its content",inputMethod:"boolean"}),t.settings.advanced.push({attribute:"class",title:"Classes",description:"CSS classes applied manually to the element",inputMethod:"textfield"}),t.settings.advanced.push({attribute:"style",title:"Styles",description:"Custom CSS styles as applied to the element",inputMethod:"textfield"}),t.settings.advanced.push({attribute:"prefix",title:"Schema: prefix",description:"Schema prefixes",inputMethod:"textfield"}),t.settings.advanced.push({attribute:"typeof",title:"Schema: TypeOf",description:"typeof definition for Schema usage",inputMethod:"textfield"}),t.settings.advanced.push({attribute:"property",title:"Schema: Property",description:"typeof definition for Schema usage",inputMethod:"textfield"}),t.settings.advanced.push({attribute:"resource",title:"Schema: Resource ID",description:"Schema resource identifier",inputMethod:"textfield"}),t.settings.advanced.push({attribute:"id",title:"ID",description:"element ID, only set this if you know why",inputMethod:"textfield"}),t.settings.advanced.push({attribute:"slot",title:"slot",description:"DOM slot area",inputMethod:"textfield"}),t),this.validateSetting=t=>(void 0!==t.property||void 0!==t.slot||void 0!==t.attribute)&&(void 0===t.title&&(void 0===t.attribute?t.title=t.property:t.title=t.attribute),void 0===t.description&&(t.description=""),void 0===t.inputMethod&&(t.inputMethod="textfield"),void 0===t.type&&(t.type="settings"),void 0===t.icon&&(t.icon="android"),void 0===t.options&&(t.options={}),void 0===t.required&&(t.required=!1),void 0===t.disabled&&(t.disabled=!1),void 0===t.validation&&(t.validation=".*"),void 0===t.validationType&&(t.validationType=""),void 0!==t.slot&&(void 0===t.slotWrapper&&(t.slotWrapper="span"),void 0===t.slotAttributes&&(t.slotAttributes={})),t),this.getHaxProperties=()=>this.haxProperties,this.getHaxJSONSchema=(t,e,i=this)=>{void 0===t&&(t="configure"),void 0===e&&(e=i.haxProperties);let o=e.settings[t];var a={$schema:"http://json-schema.org/schema#",title:"HAX "+t+" form schema",type:"object",properties:{}};if(a.properties=(new M).fieldsToSchema(o),e.gizmo&&e.gizmo.tag&&window.customElements.get(e.gizmo.tag)){let t=document.createElement(e.gizmo.tag);a="function"==typeof t.postProcessgetHaxJSONSchema?t.postProcessgetHaxJSONSchema(a):i.postProcessgetHaxJSONSchema(a)}else a=i.postProcessgetHaxJSONSchema(a);return a},this.postProcessgetHaxJSONSchema=t=>t,this._getHaxJSONSchemaProperty=t=>(new M).fieldsToSchema(t),this.getHaxJSONSchemaType=t=>{var e=(new M).fieldsConversion.inputMethod[t]||(new M).fieldsConversion;return e&&e.defaultSettings&&e.defaultSettings.type?e.defaultSettings.type:"string"},this.validHAXPropertyInputMethod=()=>Object.keys((new M).fieldsConversion.inputMethod),this.prototypeHaxProperties=()=>({api:"1",canScale:!0,canPosition:!0,canEditSource:!0,contentEditable:!1,gizmo:{title:"Tag name",description:"",icon:"icons:android",color:"purple",groups:["Content"],handles:[{type:"data",type_exclusive:!1,url:"src"}],meta:{author:"auto"},requiresChildren:!1,requiresParent:!1},settings:{configure:[{slot:"",title:"Inner content",description:"The slotted content that lives inside the tag",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{slot:"button",title:"Button content",description:"The content that can override the button",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"title",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"primaryColor",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!1,validation:".*",validationType:"text"}],advanced:[{property:"secondaryColor",title:"Secondary color",description:"An optional secondary color used in certain edge cases.",inputMethod:"colorpicker",icon:"color"},{property:"endPoint",title:"API endpoint",description:"An optional endpoint to hit and load in more data dymaically.",inputMethod:"textfield",icon:"android",validation:"[a-z0-9]",validationType:"url"}]},saveOptions:{wipeSlot:!1,unsetAttributes:["end-point","secondary-color"]},demoSchema:[{tag:"my-tag",content:"<p>inner html</p>",properties:{endPoint:"https://cdn2.thecatapi.com/images/9j5.jpg",primaryColor:"yellow",title:"A cat"}}]})}}const ia=function(t){return class extends t{constructor(){super(),this.HAXWiring=new ea}static get properties(){return{...super.properties,haxProperties:window.HAXWiring.haxProperties}}setHaxProperties(t,e="",i=this){return""==e&&void 0!==this.tagName&&(e=this.tagName.toLowerCase()),window.HaxStore&&null!=window.HaxStore.instance&&window.HaxStore.instance.ready?this.HAXWiring.setHaxProperties(t,e,i,!0):(window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),this.HAXWiring.setHaxProperties(t,e,i,!1))}disconnectedCallback(){window.removeEventListener("hax-store-ready",this._haxStoreReady.bind(this)),super.disconnectedCallback&&super.disconnectedCallback()}setup(t,e="",i=this){return this.HAXWiring.setup(t,"",this)}_haxStoreReady(t){return this.HAXWiring._haxStoreReady(t)}validateSetting(t){return this.HAXWiring.validateSetting(t)}getHaxProperties(){return this.haxProperties}getHaxJSONSchema(t,e,i=this){return this.HAXWiring.getHaxJSONSchema(t,e,i)}postProcessgetHaxJSONSchema(t){return this.HAXWiring.postProcessgetHaxJSONSchema(t)}_getHaxJSONSchemaProperty(t){return(new M).fieldsToSchema(t)}getHaxJSONSchemaType(t){return this.HAXWiring.getHaxJSONSchemaType(t)}validHAXPropertyInputMethod(){return this.HAXWiring.validHAXPropertyInputMethod()}prototypeHaxProperties(){return this.HAXWiring.prototypeHaxProperties()}}};window.HAXWiring=new ea,window.HAXBehaviors=window.HAXBehaviors||{},window.HAXBehaviors.PropertiesBehaviors={properties:{haxProperties:window.HAXWiring.haxProperties},setHaxProperties:function(t,e="",i=this){return""==e&&void 0!==this.tagName&&(e=this.tagName.toLowerCase()),window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),void 0!==window.HaxStore&&null!=window.HaxStore.instance&&window.HaxStore.instance.ready?window.HAXWiring.setHaxProperties(t,e,i,!0):window.HAXWiring.setHaxProperties(t,e,i,!1)},_haxStoreReady:function(t){return window.HAXWiring._haxStoreReady(t)},validateSetting:function(t){return window.HAXWiring.validateSetting(t)},getHaxProperties:function(){return this.haxProperties},getHaxJSONSchema:function(t,e,i=this){return window.HAXWiring.getHaxJSONSchema(t,e,i)},postProcessgetHaxJSONSchema:function(t){return window.HAXWiring.postProcessgetHaxJSONSchema(t)},_getHaxJSONSchemaProperty:function(t){return(new M).fieldsToSchema(t)},getHaxJSONSchemaType:function(t){return window.HAXWiring.getHaxJSONSchemaType(t)},validHAXPropertyInputMethod:function(){return window.HAXWiring.validHAXPropertyInputMethod()},prototypeHaxProperties:function(){return window.HAXWiring.prototypeHaxProperties()}},window.MediaBehaviors=window.MediaBehaviors||{},window.MediaBehaviors.Video={_sourceIsIframe(t){return"local"!=this.getVideoType(t)},cleanVideoSource(t,e){if("local"!=e&&"string"==typeof t){var i=t.split("?"),o="";if(t=i[0],2==i.length){let t=i[1].split("&"),e=t[0].split("="),a=Array.isArray(t.shift())?t.shift().join(""):t.shift();if("v"==e[0]){let t=void 0!==a&&""!==a?"?"+a:"";o=e[1]+t}}if(-1==t.indexOf("player.vimeo.com")&&-1!=t.indexOf("vimeo.com"))return-1!=t.indexOf("/videos/")&&(t=t.replace("/videos/","/")),t.replace("vimeo.com/","player.vimeo.com/video/");if(-1!=t.indexOf("youtube.com/watch"))return t.replace("youtube.com/watch","youtube.com/embed/")+o;if(-1!=t.indexOf("youtube-no-cookie.com/"))return t.replace("youtube-no-cookie.com/","youtube.com/")+o;if(-1!=t.indexOf("youtu.be"))return t.replace("youtu.be/","www.youtube.com/embed/")+o;if(-1!=t.indexOf("sketchfab.com")&&-1==t.indexOf("/embed"))return t+"/embed";if(-1!=t.indexOf("dailymotion.com")&&-1==t.indexOf("/embed"))return t.replace("/video/","/embed/video/")}return t},getVideoType(t){let e=["aac","flac","mov","mp3","mp4","oga","ogg","ogv","wav","webm"],i=!1;if(-1!=t.indexOf("vimeo"))return"vimeo";if(-1!=t.indexOf("youtube")||-1!=t.indexOf("youtu.be"))return"youtube";if(-1!=t.indexOf("sketchfab.com"))return"sketchfab";if(-1!=t.indexOf("dailymotion.com"))return"dailymotion";for(let o=0;o<e.length;o++)!i&&t.toLowerCase().indexOf("."+e[o])>-1&&(i=!0);return i?"local":"external"}},
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
window.SimpleToast=window.SimpleToast||{},window.SimpleToast.requestAvailability=()=>(window.SimpleToast.instance||(window.SimpleToast.instance=document.createElement("simple-toast"),document.body.appendChild(window.SimpleToast.instance)),window.SimpleToast.instance),window.SimpleToast.requestAvailability();class oa extends r{static get styles(){return[...super.styles,a`:host{display:block}:host([hidden]){display:none}simple-toast-el{box-shadow:0 2px 5px 0 rgba(0,0,0,.26);width:var(--simple-toast-width,auto);color:var(--simple-toast-color,var(--simple-colors-default-theme-accent-1,#fff));background-color:var(--simple-toast-bg,var(--simple-colors-default-theme-accent-12,#000));top:var(--simple-toast-top);margin:var(--simple-toast-margin,8px);padding:var(--simple-toast-padding,16px);left:var(--simple-toast-left,36px);bottom:var(--simple-toast-bottom,36px);right:var(--simple-toast-right);border:var(--simple-toast-border);z-index:var(--simple-toast-z-index,1000);font-size:var(--simple-toast-font-size)}button{margin-left:8px}`]}render(){return n` <simple-toast-el id="toast" accent-color="${this.accentColor}" ?dark="${this.dark}" text="${this.text}" duration="${this.duration}" ?opened="${this.opened}" @opened-changed="${this.openedChanged}" .class="${this.classStyle}"> <slot></slot> <button .hidden="${!this.closeButton}" @click="${this.hide}">${this.closeText}</button> </simple-toast-el>`}static get properties(){return{...super.properties,opened:{type:Boolean,reflect:!0},text:{type:String},classStyle:{type:String,attribute:"class-style"},closeText:{type:String,attribute:"close-text"},duration:{type:Number},eventCallback:{type:String,attribute:"event-callback"},closeButton:{type:Boolean,reflect:!0,attribute:"close-button"}}}static get tag(){return"simple-toast"}constructor(){super(),this.setDefaultToast()}connectedCallback(){super.connectedCallback(),window.addEventListener("simple-toast-hide",this.hideSimpleToast.bind(this)),window.addEventListener("simple-toast-show",this.showSimpleToast.bind(this))}disconnectedCallback(){window.removeEventListener("simple-toast-hide",this.hideSimpleToast.bind(this)),window.removeEventListener("simple-toast-show",this.showSimpleToast.bind(this)),super.disconnectedCallback()}hideSimpleToast(t){this.hide()}openedChanged(t){this.opened=t.detail.value}setDefaultToast(){for(this.opened=!1,this.text="Saved",this.classStyle="",this.closeText="Close",this.duration=3e3,this.accentColor="grey",this.dark=!1,this.eventCallback=null,this.closeButton=!0;null!==this.firstChild;)this.removeChild(this.firstChild)}showSimpleToast(t){this.setDefaultToast(),t.detail.duration&&(this.duration=t.detail.duration),t.detail.text&&(this.text=t.detail.text),t.detail.classStyle&&(this.classStyle=t.detail.classStyle),t.detail.closeText&&(this.closeText=t.detail.closeText),t.detail.closeButton&&(this.closeButton=t.detail.closeButton),t.detail.eventCallback&&(this.eventCallback=t.detail.eventCallback),t.detail.slot&&this.appendChild(t.detail.slot),t.detail.accentColor&&(this.accentColor=t.detail.accentColor),t.detail.dark&&(this.dark=t.detail.dark),this.show()}show(t){this.opened=!0}hide(t){if(this.eventCallback){const t=new CustomEvent(this.eventCallback,{bubbles:!0,cancelable:!0,detail:!0,composed:!0});this.dispatchEvent(t)}this.opened=!1}}window.customElements.define(oa.tag,oa);class aa extends HTMLElement{constructor(){super(),this.eventName="hax-register-app"}static get tag(){return"hax-app"}connectedCallback(){void 0!==this.data&&("string"==typeof this.data&&(this.data=JSON.parse(this.data)),this.dispatchEvent(new CustomEvent(this.eventName,{bubbles:!0,composed:!0,cancelable:!1,detail:this.data})))}}window.customElements.define(aa.tag,aa);class na extends aa{constructor(){super(),this.eventName="hax-register-stax"}static get tag(){return"hax-stax"}}window.customElements.define(na.tag,na),function(t){!0===t.isolateGlobalState&&function(){if((ri.pendingReactions.length||ri.inBatch||ri.isRunningReactions)&&tt(36),si=!0,ni){var t=it();0==--t.__mobxInstanceCount&&(t.__mobxGlobals=void 0),ri=new ai}}();var e,i,o=t.useProxies,a=t.enforceActions;if(void 0!==o&&(ri.useProxies="always"===o||"never"!==o&&"undefined"!=typeof Proxy),"ifavailable"===o&&(ri.verifyProxies=!0),void 0!==a){var n="always"===a?"always":"observed"===a;ri.enforceActions=n,ri.allowStateChanges=!0!==n&&"always"!==n}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(e){e in t&&(ri[e]=!!t[e])})),ri.allowStateReads=!ri.observableRequiresReaction,"production"!==process.env.NODE_ENV&&!0===ri.disableErrorBoundaries&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),t.reactionScheduler&&(e=t.reactionScheduler,i=vi,vi=function(t){return e((function(){return i(t)}))})}({enforceActions:!1,useProxies:"ifavailable"});function sa(t){try{return localStorage.getItem(t)}catch(t){return!1}}function ra(t,e){try{return localStorage.setItem(t,e)}catch(t){return!1}}function la(t){try{return sessionStorage.getItem(t)}catch(t){return!1}}function da(t,e){try{return sessionStorage.setItem(t,e)}catch(t){return!1}}const ca={attribute:"data-style-decoration",title:"Decoration",description:"Some built in styles to offset the material",inputMethod:"select",options:{"":"","highlight red":"Highlight (red)","highlight blue":"Highlight (blue)","highlight green":"Highlight (green)","highlight orange":"Highlight (orange)","highlight purple":"Highlight (purple)"}};class ha extends($(d(ia(o)))){testHook(t,e){return t&&"function"==typeof t.haxHooks&&t.haxHooks()[e]}async runHook(t,e,i=[]){return!!this.testHook(t,e)&&await t[t.haxHooks()[e]](...i)}getSelection(){if(this.activeHaxBody&&this.activeHaxBody.parentNode){if(this.activeHaxBody.parentNode.getSelection)return this.activeHaxBody.parentNode.getSelection();try{if(c(this.activeHaxBody.parentNode))return c(this.activeHaxBody.parentNode)}catch(t){}}return window.getSelection()}getRange(){let t=this.getSelection();return t.getRangeAt&&t.rangeCount?t.getRangeAt(0):t||void 0}guessGizmo(t,e,i=!1,o=!1){var a=[],n=[];if(void 0!==t&&this.validGizmoTypes.includes(t))for(var s in this.gizmoList){let d=this.gizmoList[s],c=e.innerHTML?{innerHTML:e.innerHTML}:{},h=!1;if(d&&d.handles)for(var r=0;r<d.handles.length;r++)if(t===d.handles[r].type||"*"===t&&!h){for(var l in d.handles[r])"type"!==l&&void 0!==e[l]&&("inline"!==t&&d.meta&&(!d.meta||d.meta.inlineOnly||d.meta.hidden)||(h=!0,c[d.handles[r][l]]=e[l]));if(h||i){if(o&&d.handles[r].type_exclusive)return[this.haxElementPrototype(d,c,"")];{let t={};[...d.handles].forEach((e=>{e&&e.type&&""!=e.type&&(t[e.type.toLowerCase()]=!0)})),[...d.groups].forEach((e=>{e&&""!=e&&(t[e.toLowerCase()]=!0)})),d.keywords=Object.keys(t),n.includes(d.tag)||(a.push(this.haxElementPrototype(d,c,"")),n.push(d.tag))}}}}return a}insertLogicFromValues(t,e,i=!1,o=!1){let a=this.guessGizmoType(t),n=a,s=!0;if("*"==a){if(i)return!1;s=!1,n="link"}let r=this.guessGizmo(a,t,!1,s);return r.length>0?(1===r.length||o?1===r.length&&void 0!==r[0].tag?e.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:r[0]})):o&&e.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:r.find((t=>"a"==t.tag))})):this.haxAppPicker.presentOptions(r,a,"Pick how to present this "+n,"gizmo"),!0):(this.toast("Sorry, HAX doesn't know how to handle that type of link yet."),!1)}write(t,e,i){i&&i.dispatchEvent(new CustomEvent("hax-store-write",{composed:!0,bubbles:!0,cancelable:!1,detail:{property:t,value:e,owner:i}}))}mimeTypeToGizmoType(t){let e=t.split("/");switch(e[0]){case"audio":return"audio";case"image":return"svg+xml"==e[1]?"svg":"image";case"video":return"video";case"text":return["csv","html","markdown"].includes(e[1])?e[1]:"document";case"application":return"pdf"==e[1]?"pdf":["zip","gzip","x-tar"].includes(e[1])?"archive":"document"}}guessGizmoType(t){if(void 0!==t.source){const e=t.source.toLowerCase();if(-1!=e.indexOf(".mp3")||-1!=e.indexOf(".midi")||-1!=e.indexOf(".mid"))return"audio";if(-1!=e.indexOf(".png")||-1!=e.indexOf(".jpg")||-1!=e.indexOf(".jpeg")||-1!=e.indexOf(".gif"))return"image";if(-1!=e.indexOf(".pdf"))return"pdf";if(-1!=e.indexOf(".svg"))return"svg";if(-1!=e.indexOf(".csv"))return"csv";if(-1!=e.indexOf(".md"))return"markdown";if(-1!=e.indexOf(".html")||-1!=e.indexOf(".htm"))return"html";if(-1!=e.indexOf(".txt")||-1!=e.indexOf(".doc")||-1!=e.indexOf(".docx")||-1!=e.indexOf(".xls")||-1!=e.indexOf(".xlsx")||-1!=e.indexOf(".vtt")||-1!=e.indexOf(".ppt"))return"document";if(-1!=e.indexOf(".zip")||-1!=e.indexOf(".tar.gz")||-1!=e.indexOf(".tar"))return"archive";if("external"!=window.MediaBehaviors.Video.getVideoType(e))return"video"}return"*"}render(){return n` <slot></slot> `}static get tag(){return"hax-store"}toast(t,e=2e3,i="capsule",o=this.t.close,a=null){window.dispatchEvent(new CustomEvent("simple-toast-show",{bubbles:!0,composed:!0,cancelable:!0,detail:{text:t,duration:e,classStyle:i,closeText:o,eventCallback:a}}))}static get properties(){return{...super.properties,voiceDebug:{type:Boolean,attribute:"voice-debug"},voiceRespondsTo:{type:String,attribute:"voice-responses-to"},skipHAXConfirmation:{type:Boolean,reflect:!0,attribute:"skip-hax-confirmation"},storageData:{type:Object},haxTray:{type:Object},haxCancel:{type:Object},haxAutoloader:{type:Object},haxBodies:{type:Array},activePlaceHolder:{type:Object},appStore:{type:Object},sessionObject:{type:Object},skipExitTrap:{type:Boolean},elementList:{type:Object},staxList:{type:Array},validTagList:{type:Array},validGridTagList:{type:Array},validGizmoTypes:{type:Array},_isSandboxed:{type:Boolean},__appStoreData:{type:Object},ready:{type:Boolean},connectionRewrites:{type:Object}}}_storageDataChanged(t){t&&this.ready&&this.__storageDataProcessed&&(sa("haxConfirm")?ra("haxUserData",JSON.stringify(t)):la("haxConfirm")&&da("haxUserData",JSON.stringify(t)))}isSingleSlotElement(t){let e=Object.keys(this.slotsSchemaFromNode(t));return 1==e.length&&0===e[0].length}isTextElement(t){let e;return null!=t&&t.tagName?e=t.tagName.toLowerCase():null!=t&&t.tag&&(e=t.tag.toLowerCase()),!!(e&&this.validTagList.includes(e)&&["p","ol","ul","li","a","h1","h2","h3","h4","h5","h6","strike","u","b","sub","sup","span","i","bold","em","strong","blockquote","code","figure"].includes(e))}isGridPlateElement(t){let e;return t&&t.tagName?e=t.tagName.toLowerCase():t&&t.tag&&(e=t.tag.toLowerCase()),!(!e||!this.validGridTagList.includes(e))}isLayoutElement(t){let e=t&&t.tagName&&this.haxSchemaFromTag(t.tagName)||{};return e.type&&"grid"===e.type}isLayoutSlot(t){return!(!t||!t.parentNode)&&this.isLayoutElement(t.parentNode)}isOriginalGridPlate(t){return!!t&&"GRID-PLATE"===t.tagName}activeSchema(){return this.activeNode?this.haxSchemaFromTag(this.activeNode.tagName):void 0}activeParentSchema(){return this.activeNode&&this.activeNode.parentNode?this.haxSchemaFromTag(this.activeNode.parentNode.tagName):void 0}slottedContentByNode(t){let e={...this.slotsSchemaFromNode(t)||{}};return t?([...t.children||[]].forEach((t=>{t.slot&&""!==t.slot&&e[t.slot]?(e[t.slot].items=e[t.slot].items||[],e[t.slot].items.push(t)):t.slot&&""!==t.slot||!e[""]||(e[""].items=e[""].items||[],e[""].items.push(t))})),e):e}slotsSchemaFromNode(t){if(!t||!t.tagName)return{};let e={},i=this.haxSchemaFromTag(t.tagName||{}),o=this.slotsFromSchema(i);if(this.isOriginalGridPlate(t)){(t.layout||"1-1-1-1").split("-").map(((t,e)=>{o.push({slot:`col-${e+1}`,title:`Column ${e+1}`,excludedSlotWrappers:["grid-plate"]})}))}return o.forEach((o=>{o.items=void 0,o.label=o.title||o.slot,o.editMode={...i.editMode,...o.editMode},o.grid=t,(o.slot||""===o.slot)&&(e[o.slot]=o)})),e}schemaBySlotId(t,e){return(this.slotsSchemaFromNode(t)||{})[e]}_appStoreChanged(t,e){t&&e&&(t.url&&!t.apps&&this.shadowRoot?this.loadAppStoreFromRemote():this.__appStoreData=t)}async _loadAppStoreData(t){if(null!=t){var e={};if(void 0!==t.autoloader)for(var i in t.autoloader=Object.assign({},t.autoloader),t.autoloader){let o=i,a=t.autoloader[i];isNaN(o)||(o=t.autoloader[i],a=`@lrnwebcomponents/${o}/${o}.js`),"string"!=typeof a&&(a.haxProperties&&this.setHaxProperties(t.autoloader[i].haxProperties,o),a=t.autoloader[i].import),this.validTagList.push(o),e[o]=a}if(void 0!==t.apps){var o=t.apps;for(i=0;i<o.length;i++){let t=document.createElement("hax-app");t.data=o[i],this.appendChild(t)}}if(void 0!==t.stax){var a=t.stax;for(i=0;i<a.length;i++){let t=document.createElement("hax-stax");t.data=a[i],this.appendChild(t)}}this.dispatchEvent(new CustomEvent("hax-store-app-store-loaded",{bubbles:!0,cancelable:!0,composed:!0,detail:!0})),await this._handleDynamicImports(e,this.haxAutoloader),this.appStoreLoaded=!0}}async _handleDynamicImports(t,e){let i=new URL("./../../../",import.meta.url).href;for(var o in window.WCGlobalBasePath&&(i=window.WCGlobalBasePath),t)if(window.customElements.get(o))if(window.customElements.get(o).haxProperties)this.setHaxProperties(window.customElements.get(o).haxProperties,o);else try{let t=document.createElement(o);e.appendChild(t)}catch(t){}else{let a=`${i}${t[o]}`;this.isExternalURLImport(t[o])&&(a=t[o]),await import(a).then((t=>{window.customElements.get(o)&&window.customElements.get(o).haxProperties?this.setHaxProperties(window.customElements.get(o).haxProperties,o):e.appendChild(document.createElement(o))})).catch((t=>{console.warn(t),e.appendChild(document.createElement(o))}))}}isExternalURLImport(t){let e;try{e=new URL(t)}catch(t){return!1}return new URL(e).origin!==location.origin}_editModeChanged(t){this.__hal&&(t&&this.globalPreferences.haxVoiceCommands?this.__hal.auto=!0:this.__hal.auto=!1),t&&!this.appStoreLoaded&&this.__appStoreData&&this.haxAutoloader&&(clearTimeout(this.__readyToProcessAppStoreData),this._loadAppStoreData(this.__appStoreData))}async _globalPreferencesChanged(t){if(this.__storageDataProcessed&&t&&void 0!==t.haxVoiceCommands&&this.ready){let e=this.storageData;e.globalPreferences=t,this.storageData=e,this._storageDataChanged(this.storageData),t.haxVoiceCommands&&!this.__hal&&import("./ce0a5c66.js").then((t=>{this._initVoiceCommands(),this.__hal=document.createElement("hal-9000"),this.__hal.respondsTo=this.voiceRespondsTo,this.__hal.debug=this.voiceDebug,this.__hal.auto=!0,this.shadowRoot.appendChild(this.__hal),this.__hal.commands={...this.voiceCommands}})),this.__hal&&(t.haxVoiceCommands&&this.editMode?this.__hal.auto=!0:this.__hal.auto=!1),t.haxLang&&ua.editMode&&(clearTimeout(this._debounceLang),this._debounceLang=setTimeout((async()=>{for(var t in this.elementList){let e=this.elementList[t];e=await this.attemptGizmoTranslation(t,e),this.elementList[t]=e}this.gizmoList.forEach((t=>{this.elementList[t.tag].gizmo.title&&(t.title=this.elementList[t.tag].gizmo.title),this.elementList[t.tag].gizmo.description&&(t.description=this.elementList[t.tag].gizmo.description)}))}),100))}}_haxContextOperation(t){let e=t.detail;if(this.activeNode){let t=!1;switch(e.eventName){case"hax-align-left":this.activeNode.style.float=null,this.activeNode.style.margin=null,this.activeNode.style.display=null,t=!0;break;case"hax-align-center":this.activeNode.style.float=null,this.activeNode.style.margin="0 auto",this.activeNode.style.display="block",t=!0;break;case"hax-align-right":this.activeNode.style.float="right",this.activeNode.style.margin="0 auto",this.activeNode.style.display="block",t=!0;break;case"hax-size-change":100==e.value?this.activeNode.style.width=null:this.activeNode.style.width=e.value+"%",t=!0}t&&(clearTimeout(this.__repositionMenu),this.__repositionMenu=setTimeout((()=>{this.activeHaxBody.positionContextMenus()}),0))}}_haxConsentTap(t){ra("haxConfirm",!0),ra("haxUserData",JSON.stringify(this.storageData))}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"appStore"==e&&this[e]&&this._appStoreChanged(this[e],t),["ready","__appStoreData","haxAutoloader"].includes(e)&&this.ready&&this.__appStoreData&&this.haxAutoloader&&(clearTimeout(this.__readyToProcessAppStoreData),this.__readyToProcessAppStoreData=setTimeout((()=>{this._loadAppStoreData(this.__appStoreData)}),0)),["haxAutoloader","haxTray","haxCancel"].includes(e)&&(clearTimeout(this.__storeReady),this.__storeReady=setTimeout((()=>{this._storePiecesAllHere(this.haxAutoloader,this.activeHaxBody,this.haxTray,this.haxCancel)}),0))}))}_calculateActiveGizmo(t){if(null==t||!t.tagName)return null;for(var e in this.gizmoList){var i=this.gizmoList[e];if(i.tag===t.tagName.toLowerCase())return i}}loadAppStoreFromRemote(){const t=new URLSearchParams(this.appStore.params);let e=this.appStore.url;t&&(e+=`?${t}`),fetch(e,{method:this.method}).then((t=>{if(t.ok)return t.json()})).then((t=>{this.__appStoreData=t}))}firstUpdated(t){if(super.firstUpdated&&super.firstUpdated(t),this.skipHAXConfirmation&&(da("haxConfirm",!0),ra("haxConfirm",!0)),la("haxConfirm")||sa("haxConfirm"))if(la("haxConfirm")&&!sa("haxConfirm"))try{let t=la("haxUserData")?JSON.parse(la("haxUserData")):{};this.storageData=t,this._storageDataChanged(this.storageData)}catch(t){}else try{let t=sa("haxUserData")?JSON.parse(sa("haxUserData")):{};this.storageData=t,this._storageDataChanged(this.storageData)}catch(t){}else{da("haxConfirm",!0);let t="\n    The HAX content editor keeps preferences in order to improve your experience.\n    This data is stored in your browser and is never sent anywhere.\n    Click to accept.\n    ";this.toast(t,"-1","fit-bottom","I Accept","hax-consent-tap")}setTimeout((()=>{this.__storageDataProcessed=!0,this.storageData.globalPreferences&&this.write("globalPreferences",this.storageData.globalPreferences,this)}),0)}_storePiecesAllHere(t,e,i,o){!this.ready&&e&&t&&i&&o&&(this.dispatchEvent(new CustomEvent("hax-store-ready",{bubbles:!0,cancelable:!1,composed:!0,detail:!0})),i.shadowRoot.querySelector("#haxcancelbutton")&&(o.shadowRoot.querySelector("#dialog").associateEvents(i.shadowRoot.querySelector("#haxcancelbutton")),o.shadowRoot.querySelector("#dialog")&&window.addEventListener("simple-modal-confirmed",this._handleConfirmCancel.bind(this))),this.ready=!0,this._buildPrimitiveDefinitions())}_handleConfirmCancel(t){t.detail.invokedBy===this.haxTray.shadowRoot.querySelector("#haxcancelbutton")&&(this.editMode=!1,this.dispatchEvent(new CustomEvent("hax-cancel",{bubbles:!0,composed:!0,cancelable:!1,detail:t.detail})))}_initVoiceCommands(){this.__voiceInit=!0,this.voiceCommands[`scroll up ${this.voiceRespondsTo}`]=()=>{window.scrollBy({top:-.5*window.innerHeight,left:0,behavior:"smooth"})},this.voiceCommands[`scroll (down) ${this.voiceRespondsTo}`]=()=>{window.scrollBy({top:.5*window.innerHeight,left:0,behavior:"smooth"})},this.voiceCommands[`scroll to bottom ${this.voiceRespondsTo}`]=()=>{window.scrollTo(0,document.body.scrollHeight)},this.voiceCommands[`scroll to top ${this.voiceRespondsTo}`]=()=>{window.scrollTo(0,0)},this.voiceCommands[`${this.voiceRespondsTo} (show)(focus) active (element)(content)`]=()=>{try{this._positionCursorInNode(this.activeNode)}catch(t){}},this.voiceCommands[`${this.voiceRespondsTo} (focus) previous (element)(content)`]=()=>{this.activeNode.previousElementSibling?(this.activeNode=this.activeNode.previousElementSibling,this.write("activeNode",this.activeNode,this),this._positionCursorInNode(this.activeNode)):this.speak("You are at the top of the document")},this.voiceCommands[`${this.voiceRespondsTo} (focus) next (element)(content)`]=()=>{this.activeNode.nextElementSibling?(this.activeNode=this.activeNode.nextElementSibling,this.write("activeNode",this.activeNode,this),this._positionCursorInNode(this.activeNode)):this.speak("You are at the bottom of the document")},this.voiceCommands[`${this.voiceRespondsTo} type *mycontent`]=t=>{if(this.isTextElement(this.activeNode))try{let e=this._positionCursorInNode(this.activeNode),i=document.createTextNode(t);e.deleteContents(),e.insertNode(i)}catch(t){this.speak("That didn't work"),console.warn(t)}else this.speak("I'm sorry but I can only type in text areas. Try saying Insert Paragraph and try again.")},this.voiceCommands[`hey ${this.voiceRespondsTo}`]=()=>{this.speak("Yeah what do you want")},this.voiceCommands[`${this.voiceRespondsTo} now your name is *splat`]=t=>{const e=this.voiceRespondsTo;this.speak(`I used to be named ${e} but you can call me ${t} now.`),this.voiceRespondsTo=`(${t})`}}speak(t){this.__hal&&this.__hal.speak&&this.__hal.speak(t),this.toast(`${this.voiceRespondsTo}: ${t}`)}addVoiceCommand(t,e,i){e&&(t=t.replace(":name:",this.voiceRespondsTo).toLowerCase(),this.voiceCommands[t]=e[i].bind(e),this.__voiceInit&&(this.__hal.commands={...this.voiceCommands}))}_addVoiceCommand(t){let e=t.detail.context;e||(e=t.target),this.addVoiceCommand(t.detail.command,e,t.detail.callback)}_positionCursorInNode(t,e=0){this.activeHaxBody.positionContextMenus();var i=document.createRange(),o=this.getSelection();return i.setStart(t,e),i.collapse(!0),o.removeAllRanges(),o.addRange(i),i}_onBeforeUnload(t){if(!this.skipExitTrap&&this.editMode)return"Are you sure you want to leave? Your work will not be saved!"}isBase64(t){try{return btoa(atob(t))==t}catch(t){return!1}}retrieveImageFromClipboardAsBlob(t,e){if(0==t.clipboardData&&"function"==typeof e)return e(void 0);var i=t.clipboardData.items;if(null==i&&"function"==typeof e)return e(void 0);for(var o=0;o<i.length;o++)if(-1!=i[o].type.indexOf("image")){var a=i[o].getAsFile();if("function"==typeof e)return e(a)}}async _onPaste(t){if(this.editMode&&"HAX-TRAY"!==document.activeElement.tagName&&"BODY"!==document.activeElement.tagName&&"SIMPLE-MODAL"!==document.activeElement.tagName){this.isTextElement(this.activeNode)||(this.activeNode=this.activeHaxBody.haxInsert("p","",{}));let n="",s="";if(t.clipboardData||t.originalEvent.clipboardData?(n=(t.originalEvent||t).clipboardData.getData("text/html"),""==n&&(n=(t.originalEvent||t).clipboardData.getData("text"))):window.clipboardData&&(n=window.clipboardData.getData("Text")),s=n,this.isBase64(s))return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.retrieveImageFromClipboardAsBlob(t,(e=>{if(e){var i=window.URL||window.webkitURL;let a=document.createElement("img");for(var o in a.src=i.createObjectURL(e),this.activeNode.parentNode.insertBefore(a,this.activeNode.nextElementSibling),t.clipboardData.items)!t.clipboardData.items[o].name&&t.clipboardData.items[o].type&&(t.clipboardData.items[o].name="image-"+Math.floor(Date.now()/1e3)+t.clipboardData.items[o].type.replace("image/","."));return t.dataTransfer=t.clipboardData,t.placeHolderElement=a,this.dispatchEvent(new CustomEvent("place-holder-file-drop",{bubbles:!0,cancelable:!0,composed:!0,detail:t})),a}return!1}));if(t.clipboardData.files.length>0){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let i=this.activeHaxBody.haxInsert("p","",{});for(var e in t.dataTransfer=t.clipboardData,t.clipboardData.files)!t.clipboardData.files[e].name&&t.clipboardData.files[e].type&&(t.clipboardData.files[e].name="image-"+Math.floor(Date.now()/1e3)+t.clipboardData.files[e].type.replace("image/","."));t.placeHolderElement=i,this.dispatchEvent(new CustomEvent("place-holder-file-drop",{bubbles:!0,cancelable:!0,composed:!0,detail:t}))}let r=!1,d="";n=n.replace(/<span>\s*?<\/span>/g," "),n=n.replace(/(?:style="(\S+:\s*[^;"]+;\s*)*)(\S+:\s*var\(--hax[^;"]+(?:[;"]\s*))+/g,""),n=n.replace(/<div/g,"<p"),n=n.replace(/<\/div>/g,"</p>"),n=h(n),n=n.replace(/<h1>/g,"<h2>"),n=n.replace(/<\/h1>/g,"</h2>"),n=n.replace(/<img src=\"file:(.*?)\/>/g,(function(t,e){return`<place-holder type="image" text="file:${e.split('"')[0]}"></place-holder>`}));let c=await this.htmlToHaxElements(n);if(1!==c.length||this.__validGridTags().includes(c[0].tag)||(c=await this.htmlToHaxElements(c[0].content)),0===c.length&&u(n)){""!=this.activeNode.innerText.trim()&&(r=!0);let t={source:n,title:n};if(!r&&!this.insertLogicFromValues(t,this,!1,!0))return!1}else if(0===c.length){if(r=!0,s==n)return!1;d=n}else if(1===c.length&&"p"===c[0].tag)d=n,r=!0;else if(1===c.length&&"a"===c[0].tag&&c[0].properties.href)if(""!=this.activeNode.innerText.trim())d=c[0].properties.href,r=!0;else{let t={source:c[0].properties.href,title:c[0].content};if(!this.insertLogicFromValues(t,this))return!1}else{if(!this.isGridPlateElement(c[0]))return!1;for(var e in c){"p"==c[e].tag&&["li","ol","ul"].includes(this.activeNode.tagName.toLowerCase())&&(c[e].tag="li"),delete c[e].properties.style,delete c[e].properties.start,delete c[e].properties.align;let t=l({tag:c[e].tag,content:c[e].content.replace(/<span>&nbsp;<\/span>/g," ").trim(),properties:c[e].properties});d+=await this.nodeToContent(t)}}t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();try{let t=this.getRange(),s=this.getSelection(),l=document.createElement("div");if(l.innerHTML=d,t&&s){for(var e in l.children)l.children[e].tagName&&this.isTextElement(l.children[e])&&""===l.children[e].innerHTML&&l.children[e].remove();if(r){let e;if(u(n))e=document.createElement("a"),e.setAttribute("href",n),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e.innerText=n;else if(l.children&&l.children.length>0){for(;l.childNodes.length>1;)t.insertNode(Array.from(l.childNodes).pop());e=Array.from(l.childNodes).pop()}else e=document.createTextNode(l.innerHTML);t.insertNode(e),setTimeout((()=>{this._positionCursorInNode(e,e.length)}),0)}else{var i,o,a;for(""!=this.activeNode.innerText.trim()&&t.endOffset!=this.activeNode.innerText.length&&(i=!0,document.execCommand("insertParagraph")),t.commonAncestorContainer&&t.commonAncestorContainer.parentNode&&(a||this.activeNode==t.commonAncestorContainer||(a=t.commonAncestorContainer.parentNode)||(a=t.commonAncestorContainer));l.firstElementChild;)o=l.firstElementChild,a?(a.getAttribute&&a.getAttribute("slot")&&o.setAttribute("slot",a.getAttribute("slot")),i?(this.activeHaxBody.haxReplaceNode(a.previousElementSibling,o),i=!1):a.parentNode.insertBefore(o,a.nextElementSibling)):this.activeNode?(this.activeNode.getAttribute("slot")&&o.setAttribute("slot",this.activeNode.getAttribute("slot")),""==this.activeNode.innerText.trim()?this.activeHaxBody.haxReplaceNode(this.activeNode,o):this.activeNode.parentNode.insertBefore(o,this.activeNode.nextElementSibling)):this.activeHaxBody.appendChild(o),a=o;setTimeout((()=>{o&&o.childNodes&&o.childNodes[0]&&(this._positionCursorInNode(o.childNodes[0],o.childNodes[0].length),o=null,a=null)}),0)}}}catch(t){console.warn(t)}}}__validGridTags(){return["p","ol","ul","li","div","h1","h2","h3","h4","h5","h6","blockquote","code","figure"]}__validTags(){return["p","div","span","table","caption","sup","sub","u","strike","tr","th","td","ol","ul","li","a","strong","kbd","tt","em","i","b","hr","h1","h2","h3","h4","h5","h6","blockquote","code","figure","figcaption","img","iframe","video","audio","section","template","webview"]}__validGizmoTypes(){return["data","video","audio","text","link","file","pdf","image","csv","doc","archive","markdown","html","content","text","inline","*"]}constructor(){super(),this.t={close:"Close"},this.__dragTarget=null,this.registerLocalization({context:this,namespace:"hax",basePath:import.meta.url+"/../../",locales:["es"]}),this.method="GET",this.haxSelectedText="",this.__winEvents={"hax-register-properties":"_haxStoreRegisterProperties","hax-consent-tap":"_haxConsentTap","hax-context-item-selected":"_haxContextOperation",onbeforeunload:"_onBeforeUnload",paste:"_onPaste","hax-register-app":"_haxStoreRegisterApp","hax-register-stax":"_haxStoreRegisterStax","hax-store-write":"_writeHaxStore","hax-register-core-piece":"_haxStorePieceRegistrationManager","hax-register-body":"_haxStoreRegisterBody","hax-insert-content":"_haxStoreInsertContent","hax-insert-content-array":"_haxStoreInsertMultiple","hax-add-voice-command":"_addVoiceCommand","hax-refresh-tray-form":"refreshActiveNodeForm"},window.onbeforeunload=t=>{if(!this.skipExitTrap&&this.editMode){var e="Are you sure you want to leave? Your work will not be saved!";return t.returnValue=e,e}},Q.registerNewTour({key:"hax",name:"Let's learn HAX",style:"\n      simple-popover-manager::part(simple-popover) {\n        max-width: 250px;\n      }\n      simple-popover-manager button {\n        font-size: 12px;\n        margin: 0px 2px;\n      }\n      simple-popover-manager p {\n        --hax-base-styles-p-font-size: 14px;\n        padding: 0;\n        margin: 0;\n        font-size: 14px;\n        line-height: 20px;\n      }\n      simple-popover-manager h3 {\n        --hax-base-styles-h3-font-size: 18px;\n        margin: 8px 2px;\n      }"}),this.voiceRespondsTo="(worker)",this.voiceCommands={},this.skipHAXConfirmation=!1,this.storageData={},this.appStore={url:"",params:{}},this.activeNode=null,this.activeEditingElement=null,this.haxBodies=[],this.activePlaceHolder=null,this.sessionObject={},this.editMode=!1,this.skipExitTrap=!1,this.appStoreLoaded=!1,this.elementList={},this.elementAlign=sa("hax-tray-elementAlign"),this.elementAlign&&null!=this.elementAlign||(this.elementAlign="right"),this.trayStatus="collapsed",this.trayDetail="content-edit",this.appList=[],this.gizmoList=[],this.haxAutoloader=null,this.activeHaxBody=null,this.haxTray=null,this.haxCancel=null,this.staxList=[],this.globalPreferences={},this.activeApp={},this.connectionRewrites={},this.voiceDebug=!1,this.keyboardShortcuts={"#":{tag:"h2",content:""},"##":{tag:"h3",content:""},"###":{tag:"h4",content:""},"####":{tag:"h5",content:""},"#####":{tag:"h6",content:""},"-":{tag:"ul",content:"<li></li>"},"1.":{tag:"ol",content:"<li></li>"},"---":{tag:"hr"},"```":{tag:"code",content:""},">":{tag:"blockquote",content:""}},this.validTagList=this.__validTags(),this.validGridTagList=this.__validGridTags(),this.validGizmoTypes=this.__validGizmoTypes();let t=document.createElement("webview");this._isSandboxed="function"==typeof t.reload,window.SimpleToast.requestAvailability(),document.body.style.setProperty("--hax-ui-headings","#d4ff77"),co(this,{gizmoList:Ne,activeNode:Ne,globalPreferences:Ne,activeGizmo:Oe,activeNodeIndex:Oe,editMode:Ne,elementAlign:Ne,trayStatus:Ne,trayDetail:Ne,appList:Ne,activeApp:Ne,haxSelectedText:Ne,activeEditingElement:Ne,activeHaxBody:Ne,appStoreLoaded:Ne}),Di((()=>{this._globalPreferencesChanged(Qi(this.globalPreferences))})),Di((()=>{this._editModeChanged(Qi(this.editMode))}))}_buildPrimitiveDefinitions(){if(this._isSandboxed){let t={type:"element",editingElement:"core",canScale:!0,canPosition:!0,canEditSource:!0,settings:{configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],advanced:[]}};this.setHaxProperties(t,"webview")}this.setHaxProperties({type:"element",editingElement:"core",canScale:!0,canPosition:!0,canEditSource:!0,gizmo:{title:"Basic iframe",description:"A basic iframe",icon:"icons:fullscreen",color:"blue-grey",groups:["Content"],handles:[{type:"link",source:"src",height:"height",width:"width"},{type:"pdf",source:"src",height:"height",width:"width"},{type:"document",source:"src",height:"height",width:"width"},{type:"html",source:"src",height:"height",width:"width"}],meta:{author:"W3C"}},settings:{configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],advanced:[{attribute:"loading",title:"Loading method",description:"Whether or not to lazy load this",inputMethod:"select",options:{lazy:"Load when visible",auto:"Automatic"}}]},demoSchema:[{tag:"iframe",content:"",properties:{src:"https://haxtheweb.org/",loading:"lazy",style:"height:50vh;width:75%;margin: 0px auto; display: block;"}}]},"iframe");this.setHaxProperties({canScale:{min:10,step:5},type:"element",editingElement:"core",canPosition:!0,canEditSource:!0,gizmo:{title:"Image",description:"A basic img tag",icon:"image:image",color:"blue-grey",groups:["Image","Media"],handles:[{type:"link",source:"src"},{type:"image",type_exclusive:!0,source:"src",height:"height",width:"width"}],meta:{author:"W3C"}},settings:{configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"haxupload",icon:"link",required:!0,validationType:"url"},{attribute:"alt",title:"Alt text",description:"Useful for screen readers and improved SEO.",inputMethod:"alt",icon:"accessibility"},{attribute:"height",title:"Height",description:"height in pixels of the item. Leave blank to respond to the natural resolution",inputMethod:"textfield",icon:"icons:swap-vert"}],advanced:[{attribute:"aria-describedby",title:"Aria-describedby",description:"Space-separated list of IDs for elements that describe the image.",inputMethod:"textfield",icon:"accessibility"},{attribute:"loading",title:"Loading method",description:"Whether or not to lazy load this",inputMethod:"select",options:{lazy:"Load when visible",auto:"Automatic"}}]},demoSchema:[{tag:"img",content:"",properties:{src:"https://cdn2.thecatapi.com/images/9j5.jpg",loading:"lazy"}}]},"img");let t={canScale:{min:10,step:5},type:"grid",canPosition:!0,canEditSource:!0,gizmo:{title:"Figure",description:"A basic figure tag",icon:"hax:figure",color:"blue-grey",groups:["Image","Media","Layout"],requiresChildren:"figcaption",handles:[],meta:{author:"W3C"}},settings:{advanced:[ca]},demoSchema:[{tag:"figure",properties:{},content:'<img src="https://dummyimage.com/300x200/000/fff" alt="image other media here">\n<figcaption><p>Image Caption Here</p></figcaption>'}]};this.setHaxProperties(t,"figure");let e={canScale:{min:10,step:5},type:"grid",editingElement:"core",canPosition:!0,canEditSource:!0,gizmo:{title:"Figure caption",description:"Used inside of a figure tag",icon:"image:image",color:"blue-grey",groups:["Image","Media"],handles:[],requiresParent:"figure",meta:{author:"W3C"}},settings:{configure:[{slot:"",title:"Figure Caption",description:"Caption for the figure",inputMethod:"code-editor"},ca]},demoSchema:[{tag:"figcaption",properties:{},content:"Image Caption Here"}]};this.setHaxProperties(e,"figcaption");let i={type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,contentEditable:!0,gizmo:{title:"Basic link",description:"A basic a tag",icon:"icons:link",color:"blue-grey",groups:["Link"],handles:[],meta:{author:"W3C"}},settings:{configure:[{attribute:"innerText",title:"Text",description:"Text of the link",inputMethod:"textfield",required:!0},{attribute:"href",title:"Link",description:"The URL for this video.",inputMethod:"haxupload",required:!0,validationType:"url"},{attribute:"target",title:"Target",description:"Where to place the link.",inputMethod:"select",options:{"":"Same window",_blank:"New window - _blank",_top:"Top window - _top",_parent:"Parent window - _parent"}},{attribute:"title",title:"Title text",description:"Useful for screen readers and improved SEO.",inputMethod:"textfield"},ca],advanced:[{attribute:"rel",title:"rel",description:"Specifies the relationship between this document and the opened document. Change as part of security or SEO policy.",inputMethod:"select",options:{noopener:"noopener","noopener noreferrer":"noopener noreferrer","nofollow ":"nofollow","noopener noreferrer nofollow":"noopener noreferrer nofollow",opener:"opener"}}]}};this.validGizmoTypes.forEach((t=>{i.gizmo.handles.push({type:t,source:"href",title:"innerText",alt:"title"})})),this.setHaxProperties(i,"a");let o={type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,contentEditable:!0,gizmo:{title:"Paragraph",description:"A basic text area",icon:"hax:paragraph",color:"blue-grey",groups:["Content"],handles:[{type:"content",source:"",title:"innerHTML",alt:"title"}],meta:{author:"W3C"}},settings:{configure:[],advanced:[ca]},demoSchema:[{tag:"p",content:"Paragraph",properties:{}}]};this.setHaxProperties(o,"p");let a={caption:{title:"Caption",icon:"av:call-to-action"},video:{title:"Video",icon:"av:play-circle-filled"},audio:{title:"Audio",icon:"image:music-note"},section:{title:"Section",icon:"image:crop-landscape"},ol:{title:"Numbered list",icon:"editor:format-list-numbered"},ul:{title:"Bulleted list",icon:"editor:format-list-bulleted"},li:{title:"List item",icon:"editor:format-list-bulleted"},h1:{title:"Heading",icon:"hax:h1"},h2:{title:"Heading",icon:"hax:h2"},h3:{title:"Heading",icon:"hax:h3"},h4:{title:"Heading",icon:"hax:h4"},h5:{title:"Heading",icon:"hax:h5"},h6:{title:"Heading",icon:"hax:h6"},strike:{title:"Cross out",icon:"editor:format-strikethrough"},u:{title:"Underline",icon:"editor:format-underlined"},sub:{title:"Subscript",icon:"mdextra:subscript"},sup:{title:"Superscript",icon:"mdextra:superscript"},div:{title:"DIV",icon:"image:crop-landscape"},span:{title:"SPAN",icon:"editor:short-text",handles:[{type:"inline",text:"text"}]},i:{title:"Italic",icon:"editor:format-italic"},em:{title:"Emphasis",icon:"editor:format-italic"},strong:{title:"Bold",icon:"editor:format-bold"},b:{title:"Bold",icon:"editor:format-bold"},blockquote:{title:"Block quote",icon:"editor:format-quote"},code:{title:"Code",icon:"icons:code"},embed:{title:"Embedded object",icon:"icons:fullscreen"}};for(var n in a)this.setHaxProperties({type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,contentEditable:!0,gizmo:{title:a[n].title,icon:a[n].icon,meta:{hidden:"h2"!=n},groups:["Content"],handles:a[n].handles||[],meta:{author:"ELMS:LN",inlineOnly:!0}},settings:{configure:[],advanced:[ca]},demoSchema:[{tag:n,content:"h2"==n?"Heading":"",properties:{}}]},n);let s={canScale:{min:25,step:25},type:"element",editingElement:"core",canPosition:!1,canEditSource:!1,contentEditable:!0,gizmo:{title:"Horizontal line",icon:"hax:hr",meta:{author:"W3C"}},settings:{configure:[],advanced:[ca]},demoSchema:[{tag:"hr",content:"",properties:{style:"width:50%;"}}]};this.setHaxProperties(s,"hr")}_haxStorePieceRegistrationManager(t){t.detail&&t.detail.piece&&t.detail.object&&(this[t.detail.piece]=t.detail.object)}setupAutocomplete(t){t.triggers={"!":t=>{let e=[];return this.gizmoList.forEach((t=>{e.push({groups:t.groups&&t.groups.length?t.groups.join(" "):"",icon:t.icon,label:t.title,value:t.tag})})),e}}}async _haxStoreInsertContent(t){if(t.detail){let i=t.detail;if(window.customElements.get(i.tag)){let t=document.createElement(i.tag);this.testHook(t,"preProcessInsertContent")&&(i=await this.runHook(t,"preProcessInsertContent",[i,this.activeNode]))}var e={};if(void 0!==i.properties&&(e=i.properties),e.innerHTML&&(""==i.content&&(i.content=e.innerHTML),delete e.innerHTML),e.innerText&&(""==i.content&&(i.content=e.innerText),delete e.innerText),void 0!==i.__type&&"inline"===i.__type){let t=l({tag:i.tag,content:i.content,properties:e});null!==this.activePlaceHolder&&(this.activePlaceHolder.deleteContents(),this.activePlaceHolder.insertNode(t)),this.activePlaceHolder=null}else if(i.replace||i.replacement||i.nextToActive){let t=l({tag:i.tag,content:i.content,properties:e});this.activePlaceHolder?(this.activeHaxBody.haxReplaceNode(this.activePlaceHolder,t),this.activePlaceHolder=null):i.nextToActive&&this.activeNode?this.activeHaxBody.__slot&&this.activeNode.haxLayoutContainer?this.activeNode.appendChild(t):this.activeNode.parentNode.insertBefore(t,this.activeNode):this.activeHaxBody.haxReplaceNode(this.activeNode,t)}else if(this.activeNode.parentNode&&"HAX-BODY"!=this.activeNode.parentNode.tagName){let t=l({tag:i.tag,content:i.content,properties:e});this.activeNode.parentNode.haxLayoutContainer?(null!=this.activeNode.getAttribute("slot")&&t.setAttribute("slot",this.activeNode.getAttribute("slot")),this.activeHaxBody.haxInsert(i.tag,i.content,e)):this.activeHaxBody.haxInsert(i.tag,i.content,e)}else this.activeHaxBody.haxInsert(i.tag,i.content,e)}}slotsFromSchema(t,e=!1){let i=t?t.settings:{},o=[];return Object.keys({...i||{}}).map((t=>(i[t]||[]).filter((t=>{let i=!e||!t.required;return!(!t.slot&&""!==t.slot||o.includes(t.slot)||!i)&&(o.push(t.slot),!0)})))).flat()}haxSchemaFromTag(t){return t=t.toLowerCase(),this.elementList&&this.elementList[t]?this.elementList[t]:{}}_haxStoreInsertMultiple(t){var e;if(t.detail)for(var i in t.detail)e={},void 0!==t.detail[i].properties&&(e=t.detail[i].properties),this.activeHaxBody.haxInsert(t.detail[i].tag,t.detail[i].content,e)}_haxStoreRegisterBody(t){t.detail&&(this.haxBodies.push(t.detail),this.activeHaxBody=t.detail,this.write("activeHaxBody",this.activeHaxBody,this),this.write("editMode",this.editMode,this),clearTimeout(this.__storeReady),this.__storeReady=setTimeout((()=>{this._storePiecesAllHere(this.haxAutoloader,this.activeHaxBody,this.haxTray,this.haxCancel)}),0))}computePolyfillSafe(){return!(!document.head.createShadowRoot&&!document.head.attachShadow)||(console.warn("Shadow DOM missing, certain operations hidden"),!1)}_writeHaxStore(t){t.detail&&void 0!==t.detail.value&&t.detail.property&&t.detail.owner&&(t.detail.owner!==this&&(null==t.detail.value?this[t.detail.property]=null:"object"==typeof t.detail.value&&(this[t.detail.property]={}),this[t.detail.property]=t.detail.value),this.dispatchEvent(new CustomEvent("hax-store-property-updated",{bubbles:!0,composed:!0,cancelable:!1,detail:{property:t.detail.property,value:t.detail.value,owner:t.detail.owner}})))}_haxStoreRegisterApp(t){if(t.detail){if(t.detail.index=this.appList.length,this.appList=[...this.appList,t.detail],this.write("appList",Qi(this.appList),this),t.detail.connection&&t.detail.connection.protocol&&t.detail.connection.url){let e=document.createElement("link");e.rel="preconnect",e.href=t.detail.connection.protocol+"://"+t.detail.connection.url,document.head.appendChild(e)}void 0!==t.target.parentElement&&"HAX-STORE"===t.target.parentElement.tagName&&t.target.parentElement.removeChild(t.target)}}_haxStoreRegisterStax(t){t.detail&&(t.detail.index=this.staxList.length,this.staxList=[...this.staxList,t.detail],this.write("staxList",this.staxList,this),void 0!==t.target.parentElement&&"HAX-STORE"===t.target.parentElement.tagName&&t.target.parentElement.removeChild(t.target))}dashToCamel(t){return t.replace(/-([a-z])/g,(function(t){return t[1].toUpperCase()}))}async htmlToHaxElements(t){let e=[];const i=this.validTagList;let o=document.createElement("div");o.innerHTML=t;const a=o.childNodes;for(var n=0;n<a.length;n++)void 0!==a[n].tagName&&i.includes(a[n].tagName.toLowerCase())&&e.push(await p(a[n],null));return e}async nodeToContent(t){this.testHook(t,"preProcessNodeToContent")&&(t=await this.runHook(t,"preProcessNodeToContent",[t]));let e=t.tagName.toLowerCase();this._isSandboxed&&"webview"===e&&(e="iframe");var i="";i+="<"+e;for(var o=this.elementList[e],a={},n=0,s=t.attributes.length;n<s;++n){var r=t.attributes.item(n).nodeName,l=t.attributes.item(n).value;"style"==r||typeof l!=typeof Object&&l.constructor!==Array?null!=l&&"null"!=l&&(!0===l||"true"===l?a[r]=!0:!1===l||("string"==typeof l&&""!==l?(l=l.replace(new RegExp('"',"g"),"&quot;"),a[r]=l):""===l?(""==l&&""!=t.attributes.item(n).value&&(l=t.attributes.item(n).value),a[r]=l):a[r]=l)):a[r]=JSON.stringify(l).replace(new RegExp('"',"g"),"&quot;")}let d;if(customElements.get(e)&&(d=customElements.get(e).properties),void 0===d&&(d=t.__data),void 0!==d)for(var n in d){r=m(n),l=null;void 0!==t[n]&&(l=t[n]),d[n].readOnly||d[n].computed||l===d[n].value||r.startsWith("__")||(null==l||"object"!=typeof l&&l.constructor!==Array?null!=l&&"null"!=l&&(!0===l||"true"===l?a[r]=!0:!1===l||("string"==typeof l&&""!==l?(l=l.replace(new RegExp('"',"g"),"&quot;"),a[r]=l):""===l?""==l&&""!=d[n].value?l=d[n].value:""===l&&d[n].value:a[r]=l)):(l.constructor===Array&&l!=[]||"object"==typeof l&&l!={})&&(a[r]=JSON.stringify(l).replace(new RegExp('"',"g"),"&quot;")))}if(void 0!==o&&void 0!==o.saveOptions.unsetAttributes)for(var c in o.saveOptions.unsetAttributes)delete a[o.saveOptions.unsetAttributes[c]];let h=["inner-text","inner-html","tabindex","guestinstance"];for(var u in h)void 0!==a[h[u]]&&delete a[h[u]];for(var c in void 0!==a.id&&""===a.id&&delete a.id,delete a.draggable,delete a.contenteditable,delete a["data-hax-ray"],delete a["data-hax-layout"],""!=a.class&&"hax-active"!=a.class||delete a.class,a)!0===a[c]?i+=" "+c:i+=" "+c+'="'+a[c]+'"';if(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].includes(e)?i+="/>":i+=">",void 0===o||!o.saveOptions.wipeSlot){let e=t.childNodes;if(e.length>0){n=0;for(var p=e.length;n<p;n++)void 0!==e[n].tagName?this.HTMLPrimativeTest(e[n].tagName)||"TEMPLATE"===e[n].tagName?(e[n].removeAttribute("data-hax-ray"),e[n].contentEditable=!1,i+=e[n].outerHTML):i+=await this.nodeToContent(e[n]):8===e[n].nodeType?i+="\x3c!-- "+e[n].textContent+" --\x3e":1!==e[n].nodeType&&void 0!==e[n].textContent&&"undefined"!==e[n].textContent&&(i+=g(e[n].textContent))}}return this.testHook(t,"progressiveEnhancement")&&(i+=await this.runHook(t,"progressiveEnhancement",[t])),"span"===e?i+="</"+e+">":"hr"===e||"br"===e||"img"===e||(i+="</"+e+">\n"),i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/&nbsp;/gm," ")).replace(/ data-hax-ray="(\s|.)*?"/gim,"")).replace(/ class=""/gim,"")).replace(/ class="hax-active"/gim,"")).replace(/ contenteditable="(\s|.)*?"/gim,"")).replace(/<span style="(.*?)">/gim,"<span>")).replace(/<span>\s*?<\/span>/g," ")).replace(/<span><br\/><\/span>/gm,"")).replace(/<strong style="(.*?)">/gim,"<strong>")).replace(/<b style="(.*?)">/gim,"<b>")).replace(/<strike style="(.*?)">/gim,"<strike>")).replace(/<em style="(.*?)">/gim,"<em>")).replace(/<i style="(.*?)">/gim,"<i>")).replace(/<p>(\s*)<\/p>/gm,"<p></p>")).replace(/<p>&nbsp;<\/p>/gm,"<p></p>")).replace(/<p><br\/><\/p>/gm,"<p></p>")).replace(/<p><br><\/p>/gm,"<p></p>")).replace(/<\/p>(\s*)<p>/gm,"</p><p>")).split("\n\r").join("\n").split("\r").join("\n").split("\n\n").join("\n").split("\n\n").join("\n").split("\n\n").join("\n"),this.testHook(t,"postProcessNodeToContent")&&(i=await this.runHook(t,"postProcessNodeToContent",[i])),i}HTMLPrimativeTest(t){return void 0!==t.tagName&&-1==t.tagName.indexOf("-")}getHaxAppStoreTargets(t){return Qi(this.appList).filter((e=>{if(void 0!==e.connection.operations.add){let i=e.connection.operations.add;if(void 0!==i.acceptsGizmoTypes&&i.acceptsGizmoTypes.includes(t))return!0}return!1}))}async refreshActiveNodeForm(){this.haxTray.activeHaxElement=await p(this.haxTray.activeNode,null),await this.haxTray._setupForm()}haxElementPrototype(t,e,i=""){return{tag:t.tag,properties:e,content:i,gizmo:t}}async getHAXSlot(t){if(this.isTextElement(t))return t.innerHTML;let e="";var i=t.childNodes;if(i.length>0)for(var o=0,a=i.length;o<a;o++){if(!i[o])return;void 0!==i[o].tagName?i[o].tagName.indexOf("-")>0?e+="  "+await this.nodeToContent(i[o])+"\n":e+="  "+i[o].outerHTML+"\n":8===i[o].nodeType?e+="\x3c!-- "+i[o].textContent+" --\x3e":1!==i[o].nodeType&&void 0!==i[o].textContent&&"undefined"!==i[o].textContent&&(e+=i[o].textContent)}return e}async _haxStoreRegisterProperties(t){if(t.detail&&t.detail.properties&&t.detail.tag){if(!this.elementList[t.detail.tag]){let e=t.detail;e.properties=await this.attemptGizmoTranslation(e.tag,e.properties);let i=e.properties.gizmo;if(i){i.tag=e.tag;let t=this.gizmoList;t.push(i),this.gizmoList=[...t],this.write("gizmoList",t,this)}this.elementList[e.tag]=e.properties,this.validTagList.find((t=>t===e.tag))||this.validTagList.push(e.tag),"grid"!=e.properties.type||this.validGridTagList.find((t=>t===e.tag))||this.validGridTagList.push(e.tag),window.customElements.get(t.detail.tag)&&this.testHook(document.createElement(t.detail.tag),"gizmoRegistration")&&await this.runHook(document.createElement(t.detail.tag),"gizmoRegistration",[this])}void 0!==t.target.parentElement&&"HAX-AUTOLOADER"===t.target.parentElement.tagName&&this.haxAutoloader.removeChild(t.target)}}get activeGizmo(){let t=Qi(this._calculateActiveGizmo(this.activeNode));return this.write("activeGizmo",t,this),t}get activeNodeIndex(){let t=null;return this.activeNode&&Array.from(Qi(this.activeHaxBody).children).map(((e,i)=>{Qi(this.activeNode)!==e&&Qi(this.activeNode).parentElement!==e||(t=i)})),t}async attemptGizmoTranslation(t,e){var i=await j.loadNamespaceFile(t+".haxProperties");if(!i&&"en"==this.globalPreferences.haxLang&&window.customElements.get(t)&&window.customElements.get(t).haxProperties&&"string"==typeof(i=window.customElements.get(t).haxProperties)&&(i=await fetch(i).then((t=>!(!t||!t.json)&&t.json()))),i){if(e.gizmo&&i.gizmo)for(var o in i.gizmo)e.gizmo[o]=i.gizmo[o];if(e.settings&&i.settings){let t={advanced:"advanced",configure:"configure"};for(var a in t)if(e.settings[a]&&i.settings[a])for(var o in i.settings[a])for(var n in i.settings[a][o])e.settings[a][o][n]=i.settings[a][o][n]}if(e.demoSchema&&i.demoSchema)for(var o in i.demoSchema)if(i.demoSchema[o].properties)for(var n in i.demoSchema[o].properties)e.demoSchema[o].properties[n]=i.demoSchema[o].properties[n]}return e}}window.customElements.define(ha.tag,ha),window.HaxStore=window.HaxStore||{},window.HaxStore.requestAvailability=function(){return window.HaxStore.instance||(window.HaxStore.instance=document.createElement("hax-store"),document.body.appendChild(window.HaxStore.instance)),window.HaxStore.instance};const ua=window.HaxStore.requestAvailability();window.Hax=window.Hax||{},window.Hax.add=function(t){if(ua.elementList[t]){let e,i=ua.haxSchemaFromTag(t);e=i.gizmo.tag&&i.demoSchema&&i.demoSchema[0]?l(i.demoSchema[0]):document.createElement(t),ua.activeHaxBody.haxReplaceNode(ua.activeNode,e),ua.activeHaxBody.__focusLogic(e)}else ua.toast(`${t} is not a valid tag`)},window.Hax.delete=function(){null!=ua.activeNode&&ua.activeHaxBody.haxDeleteNode(ua.activeNode)},window.Hax.duplicate=function(){ua.activeHaxBody.haxDuplicateNode(ua.activeNode)},window.Hax.move=function(t=!0){t?ua.activeHaxBody.haxMoveGridPlate("up",ua.activeNode):ua.activeHaxBody.haxMoveGridPlate("down",ua.activeNode)},window.Hax.grid=function(t=!0){ua.activeHaxBody.haxGridPlateOps(t)},window.Hax.set=function(t,e){ua.write(t,e,window)},window.Hax.get=function(t){return ua[t]},window.Hax.export=async function(){return await ua.activeHaxBody.haxToContent()},window.Hax.import=function(t="<p></p>"){return ua.activeHaxBody.importContent(t)};
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const pa=function(t){return class extends t{static get properties(){return{...super.properties,canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},undoStackObserverProps:{type:Object},target:{type:Object},stack:{type:Object}}}constructor(){super(),this.__StackDebounce,this.undoStackLimit=20,this.undoStackTimer=300,this.undoStackIgnore=!1,this.undoStackObserver=null,this.undoStackObserverProps={attributes:!0,attributeOldValue:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.undoStackInitialValue=this.innerHTML,this.undoStackPrevValue=this.undoStackInitialValue}connectedCallback(){this.undoStackObserver=new MutationObserver((t=>{clearTimeout(this.__StackDebounce),this.__StackDebounce=setTimeout((()=>{this.undoStackIgnore?this.undoStackIgnore=!1:this.undoManagerStackLogic(t)}),this.undoStackTimer)})),this.undoStackObserver.observe(this,this.undoStackObserverProps),this.undoManagerStackLogic({}),super.connectedCallback()}undoManagerStackLogic(t){const e=this.innerHTML;this.undoStack&&""!=e&&e!=this.undoStackPrevValue&&this.undoStackInitialValue!=e&&(this.undoStack.execute(new ba(this,this.undoStackPrevValue,e)),this.undoStackPrevValue=e,this.dispatchEvent(new CustomEvent("stack-changed",{detail:{value:this.undoStack},bubbles:!0,composed:!0})))}disconnectedCallback(){this.undoStackObserver&&this.undoStackObserver.disconnect(),super.disconnectedCallback()}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.undoStack=new ga,this.undoStack.undoStackLimit=this.undoStackLimit,this.undoStack.undoStackPosition=-1,this.undoStack.commands=[],this.undoStack.changed=t=>{this.canRedo=this.undoStack.canRedo(),this.canUndo=this.undoStack.canUndo()},this.undoStack.changed()}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"canUndo"==e&&this.dispatchEvent(new CustomEvent("can-undo-changed",{detail:{value:this[e]},bubbles:!0,composed:!0})),"canRedo"==e&&this.dispatchEvent(new CustomEvent("can-redo-changed",{detail:{value:this[e]},bubbles:!0,composed:!0}))}))}undo(){return this.undoStack.undo()}redo(){return this.undoStack.redo()}commands(){return this.undoStack.commands}}};class ma extends(pa(o)){static get tag(){return"undo-manager"}render(){return n`<slot></slot>`}}customElements.define("undo-manager",ma);class ga{constructor(){this.commands=[],this.undoStackPosition=-1,this.undoStackLimit=20}execute(t){this._clearRedo(),t.execute(),this.undoStackLimit==this.commands.length?this.commands.splice(Math.round(this.commands.length/3),1):this.undoStackPosition++,this.commands.push(t),this.changed()}undo(){this.commands[this.undoStackPosition]&&(this.commands[this.undoStackPosition].undo(),this.undoStackPosition--,this.changed())}canUndo(){return this.undoStackPosition>=0}redo(){this.commands[this.undoStackPosition+1]&&(this.undoStackPosition++,this.commands[this.undoStackPosition].redo(),this.changed())}canRedo(){return this.undoStackPosition<this.commands.length-1}_clearRedo(){this.commands=this.commands.slice(0,this.undoStackPosition+1)}changed(){}}class ba{constructor(t,e,i){this.el=t,this.oldValue=e,this.newValue=i}execute(){}undo(){this.el.undoStackIgnore=!0,this.el.undoStack.commands&&this.el.undoStack.commands[this.el.undoStack.undoStackPosition-1]?this.el.innerHTML=this.el.undoStack.commands[this.el.undoStack.undoStackPosition-1].newValue:this.el.undoStack.commands&&0===this.el.undoStack.undoStackPosition?this.el.innerHTML=this.el.undoStackInitialValue:this.el.innerHTML=this.oldValue}redo(){this.el.undoStackIgnore=!0,this.el.innerHTML=this.newValue}}
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class fa extends o{static get styles(){return[a`:host{outline:1px dotted currentColor}:host(:empty){outline:0;border-left:1px dotted currentColor;margin-right:-.2em}:host([hidden]){display:none!important}`]}static get properties(){return{hidden:{type:Boolean,reflect:!0},id:{type:String,reflect:!0},range:{type:Object}}}render(){return n`<slot></slot>`}static get tag(){return"rich-text-editor-highlight"}constructor(){super(),this.haxUIElement=!0;let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);this.id="rte-"+"ss-s-s-s-sss".replace(/s/g,t)}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t)}emptyContents(){[...this.childNodes].forEach((t=>{this.parentNode&&this.parentNode.insertBefore(t,this)})),document.body.append(this),this.hidden=!0,this.range=void 0}wrap(t){if(!t)return;this.hidden||t===this.range||this.emptyContents(),this.range=t;let e=t.extractContents();this.append(e);try{t.insertNode(this)}catch(t){}t.selectNodeContents(this),this.hidden=!1}unwrap(t){let e=[...this.childNodes].reverse();t&&t.setStartBefore(this),e.forEach(((e,i)=>{t&&t.insertNode(e)})),document.body.append(this),this.hidden=!0,this.range=t}}window.customElements.define(fa.tag,fa),window.RichTextEditorHighlight=window.RichTextEditorHighlight||{},window.RichTextEditorHighlight.requestAvailability=()=>(window.RichTextEditorHighlight.instance||(window.RichTextEditorHighlight.instance=document.createElement("rich-text-editor-highlight"),document.body.appendChild(window.RichTextEditorHighlight.instance)),window.RichTextEditorHighlight.instance);
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class va extends o{static get styles(){return[a`:host{display:none!important}textarea{position:absolute;left:-9999px;top:0;width:0;height:0;overflow:hidden}`]}static get properties(){return{__textarea:{type:Object}}}render(){return n`<textarea aria-hidden="true"></textarea>`}setClipboard(){this.__textarea=this.__textarea||this.shadowRoot.querySelector("textarea"),setTimeout((async()=>{this.__textarea.value=await navigator.clipboard.readText(),this.__textarea.focus(),this.__textarea.select(),document.execCommand("paste")}),1)}get value(){return this.__textarea=this.__textarea||this.shadowRoot.querySelector("textarea"),this.__textarea.value}static get tag(){return"rich-text-editor-clipboard"}constructor(){super(),this.haxUIElement=!0}}window.customElements.define(va.tag,va),window.RichTextEditorClipboard=window.RichTextEditorClipboard||{},window.RichTextEditorClipboard.requestAvailability=()=>(window.RichTextEditorClipboard.instance||(window.RichTextEditorClipboard.instance=document.createElement("rich-text-editor-clipboard"),document.body.appendChild(window.RichTextEditorClipboard.instance)),window.RichTextEditorClipboard.instance);
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class ya extends o{static get styles(){return[a`:host{display:block}:host([hidden]){display:none}:host([disabled]),:host([view-source]){outline:0!important}#container{display:flex;align-items:stretch;justify-content:space-between;width:100%}#source,#wysiwyg{margin:0;padding:0;min-height:var(--rich-text-editor-min-height,20px);cursor:pointer;outline:0;overflow:auto;resize:horizontal}#source{flex:1 1 auto;min-width:300px;padding-bottom:20px}#wysiwyg{flex:0 1 auto;display:block;margin-left:10px;max-height:70vh;overflow-x:hidden;resize:auto}#source:focus-within,#source:hover{outline:var(--rich-text-editor-border-width,1px) var(--rich-text-editor-focus-border-style,1px) var(--rich-text-editor-focus-color,#00f)}`]}render(){return n` <div id="container"> <div id="wysiwyg" part="wysiwyg"> <slot></slot> </div> <code-editor id="source" font-size="13" language="html" @value-changed="${this._handleSourceChange}" word-wrap part="source"> </code-editor> </div>`}static get properties(){return{...super.properties,id:{name:"id",type:String,reflect:!0,attribute:"id"},disabled:{name:"disabled",type:Boolean,attribute:"disabled",reflect:!0},hidden:{name:"hidden",type:Boolean,attribute:"hidden",reflect:!0},__target:{type:Object},__toolbar:{type:Object},__codeEditorValue:{type:String},__needsUpdate:{type:Boolean}}}static get tag(){return"rich-text-editor-source"}constructor(){if(super(),this.id="",import("./b5891f85.js"),!window.RichTextEditorSource.instance)return window.RichTextEditorSource.instance=this,this}firstUpdated(){super.firstUpdated&&super.firstUpdated(),this.toggle()}updated(t){super.updated(t),t.forEach(((t,e)=>{}))}toggle(t){let e=this.shadowRoot?this.shadowRoot.querySelector("#source"):void 0;!e||!t||!t.target||this.__toolbar&&this.__toolbar===t?([...document.querySelectorAll("[data-rich-text-editor-view-source-mode]")].forEach((t=>t.removeAttribute("data-rich-text-editor-view-source-mode"))),this.__target&&this.__target.focus(),this.hidden=!0,this.__toolbar=void 0,this.__target=void 0,this.disabled=!0,this.__codeEditorValue="",this.innerHTML=this.__codeEditorValue,document.body.append(this)):(this.__toolbar=t,this.__target=t.target,this.disabled=this.__target.disabled,this.__target.setAttribute("data-rich-text-editor-view-source-mode",!0),this.__target.parentNode.insertBefore(this,this.__target),this.__codeEditorValue=this.__toolbar.targetHTML,this.innerHTML=this.__codeEditorValue,e.editorValue=this.__codeEditorValue,this.hidden=!1,e.focus())}_handleSourceChange(t){if(this.__toolbar&&this.__target&&!this.__needsUpdate){this.__needsUpdate=!t.detail||!t.detail.value||this.__toolbar.htmlMatchesTarget(`${t.detail.value}`);let e=()=>{this.__needsUpdate=!1,this.__codeEditorValue=t.detail.value,this.innerHTML=t.detail.value,this.__target.innerHTML=t.detail.value};this.__needsUpdate&&setTimeout(e.bind(this),300)}}}window.customElements.define(ya.tag,ya),window.RichTextEditorSource=window.RichTextEditorSource||{},window.RichTextEditorSource.requestAvailability=()=>(window.RichTextEditorSource.instance||(window.RichTextEditorSource.instance=document.createElement("rich-text-editor-source"),window.RichTextEditorSource.stylesheet=document.createElement("style"),window.RichTextEditorSource.stylesheet.innerHTML="rich-text-editor-source + [data-rich-text-editor-view-source-mode] { display: none }",document.body.appendChild(window.RichTextEditorSource.instance),document.head.appendChild(window.RichTextEditorSource.stylesheet)),window.RichTextEditorSource.instance);
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const _a=function(t){return class extends t{static get properties(){return{range:{name:"range",type:Object},__toolbar:{name:toolbar,type:Object},__highlight:{type:Object},__clipboard:{type:Object},__source:{type:Object}}}constructor(){super(),this.haxUIElement=!0,this.__highlight=window.RichTextEditorHighlight.requestAvailability(),this.__clipboard=window.RichTextEditorClipboard.requestAvailability()}get commandIsToggled(){return this.commandToggledForRange(this.range)}get hasBreadcrumbs(){return!1}get toggledCommands(){return this.toggledCommandsForRange()}get validCommands(){return["backColor","bold","copy","createLink","cut","decreaseFontSize","defaultParagraphSeparator","delete","fontName","fontSize","foreColor","formatBlock","forwardDelete","hiliteColor","increaseFontSize","indent","insertBrOnReturn","insertHorizontalRule","insertHTML","insertImage","insertLineBreak","insertOrderedList","insertUnorderedList","insertParagraph","insertText","italic","justifyCenter","justifyFull","justifyLeft","justifyRight","outdent","paste","redo","removeFormat","selectAll","strikeThrough","styleWithCss","subscript","superscript","underline","undo","unlink","useCSS","wrapRange"]}closeToolbar(t=this.__toolbar,e=this.__toolbar.target){e&&t.disableEditing(e),t.target=void 0,document.body.append(t)}sanitizeHTML(t){return this.__toolbar.sanitizeHTML(t)}trimHTML(t){let e=t?t.innerHTML:void 0;return this.trimString(e)}trimString(t){return(t||"").replace(/<!--[^(-->)]*-->/g,"").replace(/[\s\t\r\n]/gim,"")}outdentHTML(t=""){let e=(t=(this.sanitizeHTML(t)||"").replace(/[\s]*$/,"").replace(/^[\n\r]*/,"").replace(/[\n\r]+/gm,"\n")).match(/^\s+/),i=!!e&&e[0],o=!!i&&new RegExp(`\\n${i}`,"gm");return t=t.replace(/^\s+/,""),t=o?t.replace(o,"\n "):t}pasteFromClipboard(t=this.range){this.__clipboard.setClipboard(),setTimeout((async()=>{this.paste(this.__clipboard.value,t,!0)}),100)}paste(t,e=this.range,i=!0){this.dispatchEvent(new CustomEvent("paste",{bubbles:!0,cancelable:!0,composed:!0,detail:this.target}));let o=this.__toolbar.target;if(o){let e=this.range,a=document.createElement("div");if(o=e.commonAncestorContainer.parentNode.closest("[contenteditable=true]:not([disabled]),input:not([disabled]),textarea:not([disabled])")){for(a.innerHTML=i?this.sanitizeHTML(t||this.__clipboard.value):t,e&&e.extractContents&&e.extractContents(),e.insertNode(a);a.firstChild;)a.parentNode.insertBefore(a.firstChild,a);a.parentNode.removeChild(a)}o.normalize()}}get highlighted(){return!!this.__highlight&&!this.__highlight.hidden}getRange(){let t=this.getSelection();return this.__toolbar?this.__toolbar.getRange():t.getRangeAt(0)}getSelection(){return this.__toolbar?this.__toolbar.getSelection():window.getSelection()}getRoot(t){return t&&t!==document?t.parentNode?this.getRoot(t.parentNode):t:document}debugRange(t=this.getRange()){let e=!(!t||t.collapsed||!t.cloneContents)&&t.cloneContents();return{range:t,contents:e,text:!!e&&e.textContent}}commandToggledForRange(t=this.range||this.getRange(),e=this.command,i=this.commandVal){let o=!(!t||!e)&&document.queryCommandState(this.command);return!!("underline"===e?!!this.rangeOrMatchingAncestor("u"):"wrapRange"===e?!!this.rangeOrMatchingAncestor(i):o)}toggledCommandsForRange(t=this.range||this.getRange()){return this.validCommands.filter((e=>{this.commandToggledForRange(t,e)}))}rangeOrMatchingAncestor(t=this.tagsList||"",e=this.range||this.getRange()){let i=this.rangeElementOrParentElement(e);return i&&""!=t?i.matches(t)?i:i.closest(t):void 0}rangeElementOrParentElement(t=this.range||this.getRange()){return this.rangeIsElement(t)?t.startContainer:this.rangeParentElement(t)}rangeNodeOrParentNode(t=this.range||this.getRange()){return this.rangeIsNode(t)?t.startContainer:this.rangeParentNode(t)}rangeBreadcrumbs(t=this.range||this.getRange()){let e=[];return e.push({nodeName:!1}),e.reverse()}rangeIsNode(t=this.range||this.getRange()){let e=t?t.startContainer:void 0,i=t?t.startOffset:void 0,o=t?t.endContainer:void 0,a=t?t.endOffset:void 0;return!!e&&e===o&&a-i==1}rangeIsElement(t=this.range||this.getRange()){return this.rangeIsNode(t)&&1==t.startContainer.nodeType}rangeParentElement(t=this.range||this.getRange()){let e=t?t.commonAncestorContainer:void 0;return e?1==e.nodeType?e:e.parentElement:void 0}rangeParentNode(t=this.range||this.getRange()){let e=t?t.commonAncestorContainer:void 0;return e?e.parentNode:void 0}rangeNodes(t=this.range||this.getRange()){let e=this.rangeFirstNode(t),i=[];for(;e;)i.push(e),e=e.nextSibling;return i}rangeFirstNode(t=this.range||this.getRange()){return t&&t.startContainer&&t.startContainer.childNodes?t.startContainer.childNodes[t.startOffset-1]:void 0}rangeLastNode(t=this.range||this.getRange()){return t&&t.endContainer&&t.endContainer.childNodes?t.endContainer.childNodes[t.endOffset-1]:void 0}selectNode(t,e=this.range){if(t&&t.parentNode){if(!e){let t=this.getSelection();e=document.createRange(),t.removeAllRanges(),t.addRange(e)}e&&(e.selectNode(t),this._rangeChanged(e))}}selectNodeContents(t,e=this.range){if(t){if(!e){let t=this.getSelection();e=document.createRange(),t.removeAllRanges(),t.addRange(e)}e&&(e.selectNodeContents(t),this._rangeChanged(e))}}highlightNode(t,e=this.range){(t||this.rangeOrMatchingAncestor())&&this.selectNode(t,e),this.__toolbar.updateRange(),this.__highlight.wrap(e)}selectRange(t=this.range,e=!0){if(t)if(e){let e=this.getSelection();e.removeAllRanges(),e.addRange(t)}else t.isCollapsed||t.collapse();return t}surroundRange(t,e=this.range){e&&e.surroundContents(t)}_rangeChanged(t){this.dispatchEvent(new CustomEvent("rangechange",{bubbles:!0,composed:!0,cancelable:!0,detail:{element:this,range:t}}))}initViewSource(){this.__source=this.__source||window.RichTextEditorSource.requestAvailability()}_handleCommand(t,e,i=this.getRange()){let o=this.__toolbar,a=o.target;if(this.validCommands.includes(t)){if(e=o&&e?o.sanitizeHTML(e):e,"wrapRange"==t&&e){let t=this.commandToggledForRange(i,"wrapRange",e),o=this.rangeOrMatchingAncestor(e);if(t){if(t){let t=o?[...o.childNodes].reverse():[];i&&i.setStartBefore(o),t.forEach((t=>{i&&i.insertNode(t)})),o&&o.parentElement.normalize(),o&&i.selectNodeContents(o),o&&o.remove()}}else{this.__highlight.wrap(i);let t=this.__highlight.innerHTML;this.__highlight.innerHTML=`<${e}>${t.trim()}</${e}>`,o=this.__highlight.querySelector(e),i.selectNode(o),this.__highlight.unwrap(i)}a.normalize()}this.__highlight.parentNode===document.body&&this.__highlight.wrap(i),this.__highlight.unwrap(i),i=i||this.__highlight.range||this.range,this.selectRange(i),"paste"!=t&&"wrapRange"!=t?(document.execCommand(t,!1,e),a.normalize()):navigator.clipboard&&"paste"==t&&this.pasteFromClipboard()}else"cancel"===t?(a&&a.revert(),o.close(a)):"close"===t?o.close(a):"viewSource"===t&&this.__source.toggle(o)}}},xa=[a`:host{--simple-toolbar-border-color:var(--rich-text-editor-border-color, #ddd);--simple-toolbar-border-width:var(--rich-text-editor-border-width, 1px);--simple-toolbar-button-bg:var(--rich-text-editor-bg, #ffffff);--simple-fields-focus-color:var(--rich-text-editor-focus-color, blue);--simple-fields-invalid-color:var(--rich-text-editor-error-color, #800)}`],wa=[...xa,a`:host{--simple-toolbar-border-color:var(--rich-text-editor-border-color, #ddd);--simple-toolbar-border-width:var(--rich-text-editor-border-width, 1px);--simple-toolbar-button-opacity:var(
        --rich-text-editor-button-opacity,
        1
      );--simple-toolbar-button-color:var(--rich-text-editor-button-color, #444);--simple-toolbar-button-bg:var(--rich-text-editor-button-bg, #ffffff);--simple-toolbar-button-border-color:var(
        --rich-text-editor-button-border-color,
        transparent
      );--simple-toolbar-button-toggled-opacity:var(
        --rich-text-editor-button-toggled-opacity,
        1
      );--simple-toolbar-button-toggled-color:var(
        --rich-text-editor-button-toggled-color,
        #222
      );--simple-toolbar-button-toggled-bg:var(
        --rich-text-editor-button-toggled-bg,
        #ddd
      );--simple-toolbar-button-toggled-border-color:var(
        --rich-text-editor-button-toggled-border-color,
        transparent
      );--simple-toolbar-button-hover-opacity:var(
        --rich-text-editor-button-hover-opacity,
        1
      );--simple-toolbar-button-hover-color:var(
        --rich-text-editor-button-hover-color,
        #000
      );--simple-toolbar-button-hover-bg:var(
        --rich-text-editor-button-hover-bg,
        #f0f0f0
      );--simple-toolbar-button-hover-border-color:var(
        --rich-text-editor-button-hover-border-color,
        unset
      );--simple-toolbar-button-disabled-opacity:var(
        --rich-text-editor-button-disabled-opacity,
        1
      );--simple-toolbar-button-disabled-color:var(
        --rich-text-editor-button-disabled-color,
        #666
      );--simple-toolbar-button-disabled-bg:var(
        --rich-text-editor-button-disabled-bg,
        transparent
      );--simple-toolbar-button-disabled-border-color:var(
        --rich-text-editor-button-disabled-border-color,
        transparent
      )}button[part=button]{border-radius:var(--rich-text-editor-button-disabled-border-radius,0)}`],Aa=function(t){return class extends(_a(P(t))){static get tag(){return"rich-text-editor-button"}static get styles(){return[...super.styles,...wa]}render(){return super.render()}static get properties(){return{...super.properties,disabled:{type:Boolean,reflect:!0,attribute:"disabled"},command:{type:String,reflect:!0,attribute:"command"},commandVal:{attribute:"command-val",type:Object},tagsList:{type:String},target:{type:Object},toggledCommand:{attribute:"toggled-command",type:String,reflect:!0},toggledCommandVal:{attribute:"toggled-command-val",type:Object},selectedNode:{type:Object},selectionAncestors:{type:Array}}}constructor(){super(),this.tagsList=""}get isToggled(){return this.commandIsToggled}get operationCommand(){return this.isToggled&&this.toggledCommand?this.toggledCommand:this.command}get operationCommandVal(){return this.isToggled&&this.toggledCommand?this.toggledCommandVal||"":this.commandVal}get tagsArray(){return(this.tagsList||"").replace(/\s*/g,"").toLowerCase().split(",")}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t)}updated(t){super.updated(t),t.forEach(((t,e)=>{"controls"===e&&this._editorChanged(this.controls,t),"range"===e&&this._rangeChanged(this.range,t),["shortcutKeys","tagsList","tagClickCallback"].includes(e)&&this.updateButtonRegistry()}))}connectedCallback(){super.connectedCallback()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}commandCallback(t,e,i){}wrapSelection(t){this.dispatchEvent(new CustomEvent("wrapselection",{bubbles:!0,composed:!0,cancelable:!0,detail:t}))}sendCommand(t){this._handleCommand(this.operationCommand,this.operationCommandVal,this.range),this.commandCallback&&this.commandCallback(this.target,this.__toolbar,this),this.dispatchEvent(new CustomEvent("command",{bubbles:!0,cancelable:!0,composed:!0,detail:{command:this.operationCommand,commandVal:this.operationCommandVal,range:this.range,button:this}}))}setRange(){if(!this.tagsList||""===this.tagsList)return;let t=this.rangeOrMatchingAncestor();t&&this.selectNode(t)}_handleClick(t){t.preventDefault(),this.sendCommand(t)}_editorChanged(t,e){}_getSelection(){return"formatBlock"===this.command?this.rangeOrMatchingAncestor():this._getSelectedHtml()}_getSelectedHtml(){if(this.range){let t,e=document.createElement("div"),i=this.range.cloneContents();return e.appendChild(i),t=e.innerHTML,e.remove(),t?t.trim():void 0}}_getSelectedTag(){let t=this.rangeOrMatchingAncestor();return!(!t||!t.tagName)&&t.tagName.toLowerCase()}_getSelectionType(){return"formatBlock"===this.command?this._getSelectedTag():this._getSelectedHtml()}_rangeChanged(t,e){}}};
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */class Ea extends(Aa(o)){}window.customElements.define(Ea.tag,Ea);
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Sa extends(_a(o)){static get styles(){return[...wa,a`#prompt{display:block;width:300px;max-width:300px;--simple-popover-padding:0px;z-index:2}#prompt[hidden]{display:none}#prompt #form{display:flex;flex-direction:column;align-items:center;justify-content:space-between;z-index:2}#formfields{width:calc(100% - 20px);padding:10px 10px 0;overflow:visible}#prompt simple-fields-field{padding:0}#cancel,#confirm{min-width:unset}#cancel{color:var(--rich-text-editor-button-color);background-color:var(--rich-text-editor-button-bg)}#cancel:focus,#cancel:hover{color:var(--rich-text-editor-button-hover-color);background-color:var(--rich-text-editor-button-hover-bg)}#confirm{color:var(--rich-text-editor-button-color);background-color:var(--rich-text-editor-button-bg)}#confirm:focus,#confirm:hover{color:var(--rich-text-editor-button-hover-color);background-color:var(--rich-text-editor-button-hover-bg)}.actions{width:calc(100% - 20px);padding:0 10px 3px;display:flex;align-items:center;justify-content:flex-end}.confirm-or-cancel{min-width:40px}`]}render(){return n` <simple-popover id="prompt" ?auto="${!this.hidden||!this.__highlight.hidden}" for="${this.__highlight?this.__highlight.id:""}" ?hidden="${this.hidden||this.__highlight.hidden}" position="bottom" position-align="center" .target="${this.__highlight}"> <form id="form" @blur="${this._handleBlur}" @focus="${this._handleFocus}"> <simple-fields id="formfields" hide-line-numbers .fields="${this.fields}" @fields-ready="${this._handleReady}" .value="${this.value}"></simple-fields> <div class="actions"> <simple-toolbar-button id="cancel" controls="${this.__highlight?this.__highlight.id:""}" label="Cancel" icon="clear" @click="${this._cancel}"> </simple-toolbar-button> <simple-toolbar-button id="confirm" controls="${this.__highlight?this.__highlight.id:""}" @click="${this._confirm}" icon="check" label="OK"> </simple-toolbar-button> </div> </form> </simple-popover> `}static get tag(){return"rich-text-editor-prompt"}static get properties(){return{fields:{type:Array},range:{type:Object},value:{type:Object},__focused:{type:Boolean},__hovered:{type:Boolean},__opened:{type:Boolean}}}constructor(){if(super(),window.addEventListener("rich-text-editor-prompt-open",this.open.bind(this)),!window.RichTextEditorPrompt.instance)return window.RichTextEditorPrompt.instance=this,this}get hidden(){return!this.__opened}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.__highlight.addEventListener("change",(t=>setTimeout(this._handleChange(t),300))),this.addEventListener("mousedown",(t=>this.__retainFocus=!0)),this.addEventListener("mouseup",(t=>this.__retainFocus=!1)),this.addEventListener("focusin",(t=>this.__retainFocusIn=!0)),this.addEventListener("focusout",(t=>this.__retainFocusIn=!1)),this.addEventListener("focus",this._handleFocus),this.addEventListener("blur",this._handleBlur)}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{["__focused","__hovered","__opened"].includes(e)&&setTimeout(this._handleChange.bind(this),300)}))}_handleReady(t){t.detail.focus()}_handleFocus(t){this.__focused=!0}_handleBlur(t){this.__retainFocus||this.__retainFocusIn||(this.__focused=!1)}_handleChange(t){setTimeout((()=>{!this.__opened||this.__focused||this.__hovered||this._cancel()}),500)}open(t){t&&t.detail&&(this.__opened=!0,this.__focused=!0,this.button=t.detail,this.fields=[...t.detail.fields],this.value={...t.detail.value},this.shadowRoot.querySelector("#formfields")&&this.shadowRoot.querySelector("#formfields").rebuildForm&&this.shadowRoot.querySelector("#formfields").rebuildForm(),this.shadowRoot.querySelector("#cancel")&&this.shadowRoot.querySelector("#cancel").focus())}close(){this.__opened=!1,this.__focused=!1,this.button=void 0,this.fields=[],this.value={}}_cancel(t){t&&t.preventDefault(),this.button&&this.button.cancel(),this.close()}_confirm(t){t.preventDefault(),this.button.confirm(this.value),this.close()}}window.customElements.define(Sa.tag,Sa),window.RichTextEditorPrompt=window.RichTextEditorPrompt||{},window.RichTextEditorPrompt.requestAvailability=()=>(window.RichTextEditorPrompt.instance||(window.RichTextEditorPrompt.instance=document.createElement("rich-text-editor-prompt"),document.body.appendChild(window.RichTextEditorPrompt.instance)),window.RichTextEditorPrompt.instance);const Ca="attachShadow"in Element.prototype&&"getRootNode"in Element.prototype,Na=!(!Ca||!document.createElement("div").attachShadow({mode:"open"}).getSelection),Ta=window.ShadyDOM&&window.ShadyDOM.inUse,ka=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Oa=!Ca||Ta||!Na&&!ka,Pa=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|script|source|style|template|track|wbr)$/,La=[Node.ELEMENT_NODE,Node.TEXT_NODE,Node.DOCUMENT_FRAGMENT_NODE];function Ba(t){return La.includes(t.nodeType)}function Ma(t,e,i){const o=e.childNodes||e.children;if(!o)return e;for(let e=0;e<o.length;++e){const a=o[i?e:o.length-1-e];if(Ba(a)&&t.containsNode(a,!0)){if(t.containsNode(a,!1))return a;if(!Pa.exec(a.localName||""))return Ma(t,a,i)}}return e}let Ha={node:null,offset:-1};function Da(t,e,i){const o=e;for(;(e=Ra(e,i))&&e.contains(o););return!!e&&(e instanceof Element&&t.containsNode(e,!0))}function Ra(t,e){if(!e)return t.previousSibling||t.parentNode||null;for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}return null}!function(){if(Na||Oa)return document.addEventListener("selectionchange",(t=>{document.dispatchEvent(new CustomEvent("-shadow-selectionchange"))})),()=>{};let t=!1;document.addEventListener("selectionchange",(e=>{if(t)return;t=!0;const i=window.getSelection();if("Caret"===i.type){const t=function(t,e){const i=[],o=t=>{for(let e=0;e<t.length;++e)t[e].shadowRoot&&i.push(t[e].shadowRoot)};for(e.shadowRoot&&i.push(e.shadowRoot),o(e.childNodes);i.length;){const e=i.shift();for(let i=0;i<e.childNodes.length;++i)if(t.containsNode(e.childNodes[i],!0))return e;o(e.querySelectorAll("*"))}return null}(i,i.anchorNode);if(t instanceof window.ShadowRoot){const e=Ia(t);if(e){const t=e.startContainer,i=e.startOffset;Ha={node:t,offset:i}}}}document.dispatchEvent(new CustomEvent("-shadow-selectionchange")),window.requestAnimationFrame((()=>{t=!1}))}))}();const za=new Map;function Ia(t){if(Oa){const e=document.getSelection();return e.containsNode(t,!0)?e.getRangeAt(0):null}if(Na){const e=t.getSelection();return e.rangeCount?e.getRangeAt(0):null}const e=za.get(t);if(e)return e;const i=function(t){const e=window.getSelection();if("None"===e.type)return{range:null,type:"none"};if("Caret"!==e.type&&"Range"!==e.type)throw new TypeError("unexpected type: "+e.type);const i=Ma(e,t,!0);if(i===t)return{range:null,mode:"none"};const o=document.createRange();let a,n=null;if("Range"===e.type&&(n=Ma(e,t,!1),a=function(t,e,i){if("Range"!==t.type)return;const o=()=>t.toString().length,a=o();let n;return t.modify("extend","forward","character"),n=o(),n>a||Da(t,i,!0)?(t.modify("extend","backward","character"),!0):n<a||!t.containsNode(e)?(t.modify("extend","backward","character"),!1):(t.modify("extend","backward","character"),n=o(),n>a||Da(t,e,!1)?(t.modify("extend","forward","character"),!1):n<a||!t.containsNode(i)?(t.modify("extend","forward","character"),!0):void 0)}(e,i,n),void 0===a))return o.setStart(i,0),o.setEnd(n,n.length),{range:o,mode:"all"};const s=e.toString().length;let r=0,l=0;if(null===n);else if(n.nodeType===Node.TEXT_NODE){const t=n.textContent,i=n.nextSibling;for(let i=t.length-1;i>=0;--i){n.splitText(i);if(e.toString().length!==s){l=i+1;break}}for(n.insertData(n.length,t.substr(n.length));n.nextSibling!==i;)n.nextSibling.remove()}if(i.nodeType===Node.TEXT_NODE){i!==n&&(i.appendData("?"),e.collapseToStart(),e.modify("extend","right","character"));const t=i.textContent,o=i.nextSibling;for(let o=i===n?l:t.length-1;o>=0;--o)if(i.splitText(o),""===e.toString()){r=o;break}for(i.insertData(i.length,t.substr(i.length));i.nextSibling!==o;)i.nextSibling.remove();i!==n&&i.deleteData(i.length-1,1),null===n&&(n=i,l=r)}else null===n&&(n=i);1===s&&Ha&&Ha.node===i&&Ha.offset>r&&a&&(a=!1);!0===a?(e.collapse(i,r),e.extend(n,l)):!1===a?(e.collapse(n,l),e.extend(i,r)):e.setPosition(i,r);return o.setStart(i,r),o.setEnd(n,l),{range:o,mode:"normal"}}
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */(t);return za.set(t,i.range),window.setTimeout((()=>{za.delete(t)}),0),i.range}window.RichTextEditorToolbars=window.RichTextEditorToolbars||[];const $a=function(t){return class extends(_a(X(t))){static get tag(){return"rich-text-editor-toolbar"}static get miniStyles(){return[a`:host{position:relative;height:0;margin:0 auto;padding:0;border:none;background-color:none}#container{display:flex;position:absolute;bottom:0;margin:0 auto;padding:0;border:var(--rich-text-editor-border-width,1px) solid var(--rich-text-editor-border-color,#ddd);background-color:var(--rich-text-editor-bg,var(--rich-text-editor-bg,#fff))}`]}static get baseStyles(){return[...super.baseStyles,...xa,a`:host{border:var(--rich-text-editor-border-width,1px) solid var(--rich-text-editor-border-color,#ddd);background-color:var(--rich-text-editor-bg,#fff)}#morebutton::part(button){border-radius:var(--rich-text-editor-button-disabled-border-radius,0)}`]}static get styles(){return[...this.baseStyles,...super.stickyStyles]}get undoButton(){return{command:"undo",icon:"undo",label:"Undo",shortcutKeys:"ctrl+z",type:"rich-text-editor-button"}}get redoButton(){return{command:"redo",icon:"redo",label:"Redo",shortcutKeys:"ctrl+shift+z",type:"rich-text-editor-button"}}get historyButtonGroup(){return{type:"button-group",subtype:"history-button-group",buttons:[this.undoButton,this.redoButton]}}get formatButton(){return{label:"Format",type:"rich-text-editor-heading-picker"}}get boldButton(){return{command:"bold",icon:"editor:format-bold",label:"Bold",shortcutKeys:"ctrl+b",toggles:!0,type:"rich-text-editor-button"}}get italicButton(){return{command:"italic",icon:"editor:format-italic",label:"Italics",shortcutKeys:"ctrl+i",toggles:!0,type:"rich-text-editor-button"}}get underlineButton(){return{type:"rich-text-editor-underline"}}get strikethroughButton(){return{command:"strikeThrough",icon:"editor:format-strikethrough",label:"Strike Through",type:"rich-text-editor-button"}}get removeFormatButton(){return{command:"removeFormat",icon:"editor:format-clear",label:"Erase Format",type:"rich-text-editor-button"}}get codeButton(){return{command:"wrapRange",commandVal:"CODE",toggles:!0,label:"Code",type:"rich-text-editor-button"}}get basicInlineButtonGroup(){return{type:"button-group",subtype:"basic-inline-button-group",buttons:[this.formatButton,this.boldButton,this.italicButton,this.removeFormatButton]}}get linkButton(){return{icon:"link",label:"Link",shortcutKeys:"ctrl+k",type:"rich-text-editor-link"}}get unlinkButton(){return{icon:"mdextra:unlink",label:"Remove Link",type:"rich-text-editor-unlink"}}get linkButtonGroup(){return{type:"button-group",subtype:"link-button-group",buttons:[this.linkButton,this.unlinkButton]}}get cutButton(){return{command:"cut",icon:"content-cut",label:"Cut",shortcutKeys:"ctrl+x",type:"rich-text-editor-button"}}get copyButton(){return{command:"copy",icon:"content-copy",label:"Copy",shortcutKeys:"ctrl+c",type:"rich-text-editor-button"}}get pasteButton(){return{command:"paste",icon:"content-paste",label:"Paste",shortcutKeys:"ctrl+v",type:"rich-text-editor-button"}}get clipboardButtonGroup(){return{type:"button-group",subtype:"clipboard-button-group",buttons:[this.cutButton,this.copyButton,this.pasteButton]}}get subscriptButton(){return{command:"subscript",icon:"mdextra:subscript",label:"Subscript",radio:!0,type:"rich-text-editor-button"}}get superscriptButton(){return{command:"superscript",icon:"mdextra:superscript",label:"Superscript",radio:!0,type:"rich-text-editor-button"}}get scriptButtonGroup(){return{type:"simple-toolbar-button-group",subtype:"script-button-group","aria-label":"Subscript and Superscript",buttons:[this.subscriptButton,this.superscriptButton]}}get symbolButton(){return{symbolTypes:["symbols"],type:"rich-text-editor-symbol-picker"}}get iconButton(){return{type:"rich-text-editor-icon-picker"}}get emojiButton(){return{type:"rich-text-editor-emoji-picker"}}get imageButton(){return{type:"rich-text-editor-image"}}get insertButtonGroup(){return{type:"button-group",subtype:"insert-button-group",buttons:[this.imageButton,this.symbolButton]}}get advancedInsertButtonGroup(){return{type:"button-group",subtype:"advanced-insert-button-group",buttons:[this.emojiButton]}}get justifyLeftButton(){return{command:"justifyLeft",icon:"editor:format-align-left",label:"Align Left",radio:!0,type:"rich-text-editor-button"}}get justifyCenterButton(){return{command:"justifyCenter",icon:"editor:format-align-center",label:"Align Center",radio:!0,type:"rich-text-editor-button"}}get justifyRightButton(){return{command:"justifyRight",icon:"editor:format-align-right",label:"Align Right",radio:!0,type:"rich-text-editor-button"}}get justifyFullButton(){return{command:"justifyFull",icon:"editor:format-align-justify",label:"Justify",radio:!0,type:"rich-text-editor-button"}}get justifyButtonGroup(){return{type:"simple-toolbar-button-group",subtype:"advanced-insert-button-group","aria-label":"Text Alignment",required:!0,buttons:[this.justifyLeftButton,this.justifyCenterButton,this.justifyRightButton,this.justifyFullButton]}}get orderedListButton(){return{command:"insertOrderedList",icon:"editor:format-list-numbered",label:"Ordered List",radio:!0,type:"rich-text-editor-button"}}get unorderedListButton(){return{command:"insertUnorderedList",icon:"editor:format-list-bulleted",label:"Unordered List",radio:!0,type:"rich-text-editor-button"}}get blockquoteButton(){return{command:"formatBlock",commandVal:"blockquote",label:"Blockquote",icon:"editor:format-quote",shortcutKeys:"ctrl+'",toggles:!0,type:"rich-text-editor-button"}}get indentButton(){return{command:"indent",icon:"editor:format-indent-increase",label:"Increase Indent",shortcutKeys:"ctrl+]",type:"rich-text-editor-button"}}get outdentButton(){return{command:"outdent",icon:"editor:format-indent-decrease",label:"Decrease Indent",shortcutKeys:"ctrl+[",type:"rich-text-editor-button"}}get listButtonGroup(){return{type:"simple-toolbar-button-group",subtype:"list-button-group","aria-label":"List Type",buttons:[this.orderedListButton,this.unorderedListButton]}}get listIndentButtonGroup(){return{type:"button-group",subtype:"list-indent-button-group",buttons:[this.listButtonGroup,this.blockquoteButton,this.indentButton,this.outdentButton]}}get saveButton(){return{command:"save",icon:"save",label:"Save",type:"rich-text-editor-button"}}get closeButton(){return{command:"cancel",icon:"close",label:"Cancel",type:"rich-text-editor-button"}}get saveCloseButtonGroup(){return{type:"button-group",subtype:"save-close-button-group",buttons:[this.saveButton]}}get sourceButton(){return{type:"rich-text-editor-source-code"}}get sourceButtonGroup(){return{type:"button-group",subtype:"source-button-group",buttons:[this.sourceButton]}}get defaultConfig(){return[this.historyButtonGroup,this.basicInlineButtonGroup,this.linkButtonGroup,this.clipboardButtonGroup,this.scriptButtonGroup,this.insertButtonGroup,this.listIndentButtonGroup]}get miniConfig(){return[{type:"button-group",buttons:[this.boldButton,this.italicButton,this.removeFormatButton]},this.linkButtonGroup,this.scriptButtonGroup,{type:"button-group",buttons:[this.orderedListButton,this.unorderedListButton]}]}get miniTemplate(){return n` <div id="container">${super.toolbarTemplate}</div> `}get toolbarTemplate(){return super.toolbarTemplate}render(){return this.toolbarTemplate}static get properties(){return{...super.properties,breadcrumbsLabel:{name:"breadcrumbsLabel",type:String,attribute:"breadcrumbs-label"},breadcrumbsSelectAllLabel:{name:"breadcrumbsSelectAllLabel",type:String,attribute:"breadcrumbs-select-all-label"},target:{name:"target",type:Object},id:{name:"id",type:String,attribute:"id",reflect:!0},savedSelection:{name:"savedSelection",type:Object},registered:{type:Boolean},selectedNode:{type:Object},selectionAncestors:{type:Array},show:{type:String,attribute:"show",reflect:!0},clickableElements:{name:"clickableElements",type:Object},__canceledEdits:{type:Object},__pasteDisabled:{name:"__pasteDisabled",type:Boolean,attribute:"paste-disabled",reflect:!0},__prompt:{type:Object},__promptOpen:{name:"__promptOpen",type:Boolean}}}constructor(){super(),import("./35fa442b.js"),import("./a0da888c.js"),import("./6bf47089.js"),import("./b8ffc576.js"),import("./c09794c2.js"),import("./8e93f001.js"),import("./5e07d92c.js"),import("./b0401d62.js"),this.config=this.defaultConfig,this.clickableElements={},this.breadcrumbsLabel="Select",this.breadcrumbsSelectAllLabel="All",this.__toolbar=this,document.addEventListener("-shadow-selectionchange",this._handleTargetSelection.bind(this.__toolbar)),this.addEventListener("mousedown",(t=>t.stopImmediatePropagation()))}connectedCallback(){super.connectedCallback(),window.RichTextEditorToolbars.push(this)}disconnectedCallback(){super.disconnectedCallback(),window.RichTextEditorToolbars=window.RichTextEditorToolbars.filter((t=>t!==this))}firstUpdated(t){this.id||(this.id=this._generateUUID()),super.firstUpdated(t),this.hasBreadcrumbs&&this.editor&&this.positionByTarget(this.editor),this.__prompt=window.RichTextEditorPrompt.requestAvailability(),this.__prompt.addEventListener("open",(t=>{this.__promptOpen=!0})),this.__prompt.addEventListener("close",(t=>{this.__promptOpen=!1})),this.onmousedown=this._addHighlight,this.onkeydown=this._addHighlight}updated(t){super.updated(t),t.forEach(((t,e)=>{"range"===e&&this._rangeChanged(this.range,t),"config"===e&&this.updateToolbar(),"editor"===e&&this._editorChange(),["editor","show","range"].includes(e)&&(this.hidden=this.disconnected),["breadcrumbs","sticky"].includes(e)&&this.breadcrumbs&&(this.breadcrumbs.sticky=this.sticky)}))}get controls(){let t=this.target?this.target.getAttribute("id"):void 0;return this.target&&this.setAttribute("controls",t),t}get disconnected(){return"always"!=this.show&&("selection"!=this.show?!this.target:this.noSelection)}get noSelection(){return!this.range||this.range.collapsed}get observer(){return new MutationObserver(this._handleTargetMutation.bind(this))}get isRangeInScope(){return this.range&&this.target&&this.rangeNodeOrParentNode(this.range)&&this.target.contains(this.rangeNodeOrParentNode(this.range))}cancel(){this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}close(){this.target=void 0,this.positionByTarget(!1),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_editorChanged(){this.dispatchEvent(new CustomEvent("editor-change",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}getRange(){let t=e=>{let i=e.parentNode;return i?t(i):e};try{this.range=t(this.target)?Ia(t(this.target)):void 0}catch(t){this.range=void 0}return this.range}getSelection(){return getSelection()}updateRange(t,e=this.range){t&&(t.range||(t.range=e))}_rangeChanged(t,e){this._updateButtonRanges(),this.dispatchEvent(new CustomEvent("range-changed",{bubbles:!0,composed:!0,cancelable:!0,detail:this}))}clearToolbar(){super.clearToolbar&&super.clearToolbar(),this.clickableElements={}}deregisterButton(t){super.deregisterButton&&super.deregisterButton(t),(t.tagsArray||[]).forEach((t=>delete this.clickableElements[t]))}registerButton(t){super.registerButton&&super.registerButton(t),"paste"!==t.command||navigator.clipboard?(t.__toolbar=this,t.disabled=!this.target,(t.tagsArray||[]).forEach((e=>{t.tagClickCallback&&(this.clickableElements[e]=t)}))):t.remove()}_addBreadcrumbs(){return this.breadcrumbs||(this.breadcrumbs=document.createElement("rich-text-editor-breadcrumbs"),document.body.appendChild(this.breadcrumbs)),this.breadcrumbs.label=this.breadcrumbsLabel,this.breadcrumbs}_generateUUID(){let t=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return"rte-"+"ss-s-s-s-sss".replace(/s/g,t)}_handleButtonUpdate(t){super._handleButtonUpdate&&super._handleButtonUpdate(t)}_renderButtonGroup(t){let e=super._renderButtonGroup(t);return t.subtype&&e.classList.add(t.subtype),e}_updateButtonRanges(){if(this.isRangeInScope){let t=[],e=i=>{"rich-text-editor-highlight"!==(i.tagName||"").toLowerCase()&&t.push(i),i.parentNode&&i.parentNode!==this.target&&e(i.parentNode)};this.rangeNodeOrParentNode(this.range)!==this.target&&e(this.rangeNodeOrParentNode(this.range)),t.push({nodeName:this.breadcrumbsSelectAllLabel,selectAll:this.target}),this.selectedNode=t[0],this.selectionAncestors=t.reverse(),(this.buttons||[]).forEach((t=>{t.range=void 0,t.range=this.range,t.selectedNode=this.selectedNode,t.selectionAncestors=this.selectionAncestors})),this.breadcrumbs&&(this.breadcrumbs.selectionAncestors=this.selectionAncestors,this.breadcrumbs.hidden=this.disconnected,this.breadcrumbs.editor=this.editor)}}cancelEdits(t=this.target){this.revertTarget(t),this.target(editor,!1)}get enabledTargetHandlers(){return{keydown:this._removeHighlight.bind(this),keypress:this._handleTargetKeypress.bind(this),mousedown:this._removeHighlight.bind(this),mouseup:this._addHighlight.bind(this)}}positionByTarget(t){t?(t.parentNode.insertBefore(this,t),this.slot=t.slot,this.hasBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs||this._addBreadcrumbs(),this.target.parentNode.insertBefore(this.breadcrumbs,this.target.nextSibling),this.breadcrumbs.slot=t.slot)):(document.body.append(this),this.slot=void 0,this.breadcrumbs&&(document.body.append(this.breadcrumbs),this.breadcrumbs.slot=void 0))}enableEditing(t=this.editor){let e=this.enabledTargetHandlers;!t||t.hidden||t.disabled||(t.makeSticky&&t.makeSticky(this.sticky),this.positionByTarget(t),t.setAttribute("contenteditable","true"),Object.keys(e).forEach((i=>t.removeEventListener(i,e[i]))),this.setCanceledEdits(),this.updateRange(t),this.observeChanges(!0),this.getRoot(t).onselectionchange=e=>{this.__promptOpen||this.updateRange(t,this.getRange())},this.dispatchEvent(new CustomEvent("enabled",{bubbles:!0,composed:!0,cancelable:!0,detail:(this.target.innerHTML||"").replace(/<!--[^(-->)]*-->/g,"").trim()})))}disableEditing(t=this.target){let e=this.enabledTargetHandlers,i=this.getRange();t&&(i&&i.collapse(!1),this.__highlight.emptyContents(),this.getRoot(t).onselectionchange=void 0,this.observeChanges(!1),this.__source&&this.__source.toggle(!1),t.removeAttribute("contenteditable"),Object.keys(e).forEach((i=>t.removeEventListener(i,e[i]))),t.makeSticky&&t.makeSticky(!1),this.dispatchEvent(new CustomEvent("disabled",{bubbles:!0,composed:!0,cancelable:!0,detail:(this.target.innerHTML||"").replace(/<!--[^(-->)]*-->/g,"").trim()})))}insertNew(t){let e=document.createElement("rich-text-editor");t.parentNode.insertBefore(e,t),e.appendChild(t)}observeChanges(t=!0){t?this.observer.observe(this.target,{attributes:!1,childList:!0,subtree:!0,characterData:!1}):this.observer&&this.observer.disconnect}revertTarget(t=this.target){this.target&&(this.target.innerHTML=this.__canceledEdits)}sanitizeHTML(t=""){let e="<body(.*\n)*>(.*\n)*</body>";return t.match(e)&&t.match(e).length>0&&(t=t.match(e)[0].replace(/<\?body(.*\n)*\>/i)),t}setCanceledEdits(t){this.__canceledEdits=t||(this.target&&this.target.innerHTML?this.target.innerHTML:"")}setTarget(t){let e=this.targetHandlers(t),i=this.target;t&&(i&&"textbox"==i.getAttribute("role")&&i.removeAttribute("role"),t.setAttribute("role","textbox"),i!==t&&(i&&this.unsetTarget(i),Object.keys(e).forEach((i=>t.addEventListener(i,e[i]))),this.getRoot(t).onselectionchange=e=>{this.__promptOpen||this.updateRange(t,this.getRange())},this.target=t,this.enableEditing(t))),this.updateRange(this.target),this.breadcrumbs&&(this.breadcrumbs.controls=this.controls),this.buttons.forEach((t=>{"close"!==t.command&&(t.disabled=!this.target)})),t!==i&&(this.range=void 0,this._rangeChanged())}unsetTarget(t=this.target){let e=this.targetHandlers(t);this.disableEditing(t),Object.keys(e).forEach((i=>t.removeEventListener(i,e[i]))),this.target=void 0}targetEmpty(){return!this.target||!this.target.innerHTML||""==this.trimHTML(this.target)}targetHandlers(t){return{dblclick:e=>this._handleTargetClick(t,e),focus:e=>this._handleTargetFocus(t,e),keydown:t=>this._handleShortcutKeys(t),paste:t=>this._handlePaste(t)}}get targetHTML(){return this.target?this.outdentHTML(this.target.innerHTML):void 0}htmlMatchesTarget(t){let e=t?this.outdentHTML(t):void 0,i=e?e.replace(/\s+/gm,""):void 0,o=this.targetHTML?this.targetHTML.replace(/\s+/gm,""):void 0;return i&&o&&o.localeCompare(i)}_handleTargetClick(t,e){let i=b(e);if(t&&!t.disabled){if(this.target!==t)e.preventDefault(),this.setTarget(t);else{let t=Object.keys(this.clickableElements||{}),o=!1;i.forEach((a=>{if(o)return;let n=(a.tagName||"").toLowerCase();n&&t.includes(n)&&(o=!0,e.preventDefault(),this.clickableElements[n].tagClickCallback({...e,detail:a,eventPath:i}))}))}this.range=this.getRange(),this.updateRange()}}_handleTargetFocus(t,e){this.__promptOpen||t.disabled||this.setTarget(t)}_handleTargetKeypress(t){this.targetEmpty()&&t.key&&(this.innerHTML=t.key.replace(">","&gt;").replace("<","&lt;").replace("&","&amp;"),this.range=this.getRange(),this.range.selectNodeContents(this),this.range.collapse())}_handleTargetMutation(t=[]){this._handleTargetSelection(),(t||[]).forEach((t=>{"attributes"==t.type&&((target.disabled||target.hidden)&&target.conteneditable?(this.disableEditing(target),target.tabindex=-1):target.disabled||target.hidden||!target.conteneditable||(this.enableEditing(target),target.tabindex=0))}))}_handleTargetSelection(t){this.__promptOpen||(this.range=this.getRange())}_handlePaste(t){t.stopImmediatePropagation(),this.pasteFromClipboard()}_addHighlight(){this.__highlight.hidden&&(this.range=this.getRange(),this.target&&"true"!=!this.target.getAttribute("contenteditable")&&this.__highlight.wrap(this.range||this.getRange()))}_removeHighlight(){this.__highlight.unwrap(this.range||this.getRange())}}};class ja extends($a(o)){}window.customElements.define(ja.tag,ja);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
const Fa=function(t){return class extends(Aa(t)){static get tag(){return"rich-text-editor-prompt-button"}render(){return super.render()}static get properties(){return{...super.properties,fields:{type:Array},id:{name:"id",type:String,reflect:!0,attribute:"id"},value:{type:Object},__wrap:{name:"__wrap",type:Object},__oldValue:{name:"__oldValue",type:Object}}}constructor(){super(),this.editableSelection=!1,this.fields=[{property:"innerHTML",title:"Text",inputMethod:"textfield"}],this.tagsList="span",this.value={innerHTML:void 0}}firstUpdated(t){super.firstUpdated(t)}get promptCommand(){return this.toggledCommand&&!this.toggled?this.toggledCommand:this.command}get promptCommandVal(){return this.commandVal}get setsInnerHTML(){let t=(this.fields||[]).filter((t=>"innerHTML"===t.property));return t&&t.length>0}get targetedNode(){let t=this.__highlight.querySelectorAll(this.tagsList);return 1===t.length?t[0]:this.__highlight}tagClickCallback(t={}){t.detail&&this.open(t.detail)}cancel(){this.close()}close(){this.__highlight.unwrap(this.range),this.range&&this.range.collapse()}confirm(t){this.value=t,this.setToggled(),this.updateSelection(),this.close()}getPropValue(t){let e=!!this.value&&{...this.value},i=!(!e||!e[t])&&(e[t].trim?e[t].trim():e[t]);return!(!i||""===i)&&i}getValue(){return{innerHTML:this.targetedNode.innerHTML||""}}open(t){this.highlightNode(t),this.value=this.getValue(),this.dispatchEvent(new CustomEvent("rich-text-editor-prompt-open",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}setInnerHTML(t){this.setsInnerHTML&&(this.targetedNode.innerHTML=t)}setToggled(){this.toggled=!this.value}updateSelection(){let t=this.promptCommand,e=this.promptCommandVal;this.setInnerHTML(this.getPropValue("innerHTML")),this.targetedNode===this.__highlight?this.selectNodeContents(this.targetedNode):this.selectNode(this.targetedNode),this._handleCommand(t,e,this.range)}_handleClick(t){t.preventDefault(),this.open()}_rangeChanged(t,e){this.value=this.getValue(),this.setToggled()}}};class Va extends(Fa(o)){}window.customElements.define(Va.tag,Va);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
class Ua extends(Fa(o)){static get tag(){return"hax-text-editor-button"}static get properties(){return{...super.properties,element:{type:Object}}}constructor(){super(),this.tag=Ua.tag,this.toggles=!0,this.command="insertHTML"}get targetedNode(){let t=this.__highlight.querySelectorAll(this.tagsList);return 1===t.length?t[0]:this.__highlight}firstUpdated(t){this.updateElement(),super.firstUpdated&&super.firstUpdated(t)}updated(t){super.updated(t),t.forEach(((t,e)=>{"element"===e&&this.element&&this.updateElement()}))}updateElement(){this.dispatchEvent(new CustomEvent("deregister-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}));let t=this.element||{},e=t.settings||{},i=t.gizmo||{};this.fields=[...(e.configure||[]).map((t=>(""===t.slot&&(t.property="innerHTML"),t)))],this.tagsList=i.tag||"span",this.icon=i.icon||"add",this.label=i.title||i.tag,this.value=this.getValue(void 0),this.dispatchEvent(new CustomEvent("deregister-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}getValue(){let t=super.getValue();return this.fields.forEach((e=>{e.property&&"innerHTML"!==e.property&&(t[e.property]=this.targetedNode&&this.targetedNode.getAttribute?this.targetedNode.getAttribute(e.property):void 0),e.slot&&""!==e.slot&&this.targetedNode&&this.targetedNode.querySelector&&this.targetedNode.querySelector(`[slot=${e.slot}]`)&&this.targetedNode.querySelector(`[slot=${e.slot}]`).innerHTML,e.slot&&""===e.slot&&this.targetedNode&&[...this.targetedNode.children||[]].filter(":not([slot])")&&[...this.targetedNode.children||[]].filter(":not([slot])").length>0&&[...this.targetedNode.children||[]].filter(":not([slot])").join("\n")})),t}setToggled(){this.toggled=!!this.value}tagClickCallback(t={}){t.detail&&this.open(t.detail);let e=this.__highlight.innerHTML;this.__highlight.innerHTML="",this.__highlight.innerHTML=e}updateSelection(){let t=document.createElement(this.tagsList),e="";this.fields.forEach((i=>{i.property&&"innerHTML"!==i.property&&(t[i.property]=this.value[i.property]),i.slot&&this.value[i.slot]&&(e+=`<${this.getSlotWrapper(i)}${Object.keys(i.slotAttributes||{}).map((t=>` ${t}="${i.slotAttributes[t]}"`))}>\n            ${this.value[slot]}\n          </${this.getSlotWrapper(i)}>`)})),e+=this.value.innerHTML||"",this.__highlight.innerHTML="",this.__highlight.parentNode.insertBefore(t,this.__highlight),this.__highlight.unwrap(),t.innerHTML=e}getSlotWrapper(t){let e=t.slotWrapper,i=t.allowedSlotWrappers,o=t.excludedSlotWrappers||[],a=["span","div","p"].filter((t=>!o.includes(t)));return e||(i&&i[0]?i[0]:a)}}window.customElements.define(Ua.tag,Ua);const qa=function(t){return class extends t{constructor(){super(),this.tourName="default"}connectedCallback(){super.connectedCallback&&super.connectedCallback(),super.firstUpdated||this.discoverSimpleTourStops()}disconnectedCallback(){super.disconnectedCallback()}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.discoverSimpleTourStops()}discoverSimpleTourStops(){this.shadowRoot.querySelectorAll("[data-simple-tour-stop]").forEach((t=>{try{let e="";t.getAttribute("data-stop-title")&&t.getAttribute(t.getAttribute("data-stop-title"))?e=t.getAttribute(t.getAttribute("data-stop-title")):t.querySelector("[data-stop-title]")&&(e=t.querySelector("[data-stop-title]").innerHTML);let i=t.querySelector("[data-stop-content]").innerHTML?t.querySelector("[data-stop-content]").innerHTML:"";Q.createTourStop(this.tourName,t,e,i,"live")}catch(t){console.warn(t)}}))}}},Ga=function(t){return class extends(qa(t)){static get styles(){return[a`:host{display:block;--hax-ui-spacing-sm:1px;max-width:100%}:host [hidden]{display:none}.selected-buttons{transition:.1s all ease-in-out;width:0}:host([has-selected-text]) .selected-buttons{width:100%}:host(.hax-context-pin-top) #toolbar{position:fixed;top:0}:host(:focus-within),:host(:hover){z-index:var(--hax-ui-focus-z-index)!important}.group{padding:0;background-color:var(--hax-ui-background-color)}hax-toolbar{flex:0 1 auto}hax-toolbar::part(morebutton){border:1px solid var(--simple-toolbar-group-border-width,var(--simple-toolbar-border-width,1px))!important}hax-toolbar[collapse-disabled]::part(morebutton){display:none!important}hax-toolbar [hidden]{display:none!important}hax-toolbar[collapse-disabled]::part(morebutton){display:none!important}`]}constructor(){super(),this.viewSource=!1,Di((()=>{this.hasSelectedText=Qi(ua.haxSelectedText).length>0})),Di((()=>{Qi(ua.editMode);const t=Qi(ua.activeNode);if(this.sourceView=!1,t&&t.tagName){let e=ua.haxSchemaFromTag(t.tagName);this.parentSchema=t&&t.parentNode?ua.haxSchemaFromTag(t.parentNode.tagName):void 0,this.sourceView=e.canEditSource}}))}render(){return n`<slot></slot> `}static get tag(){return"hax-context-behaviors"}static get properties(){return{...super.properties,activeNode:{type:Object},parentSchema:{type:Object},realSelectedValue:{type:String},sourceView:{type:Boolean},viewSource:{type:Boolean}}}get slotSchema(){let t={};if(this.activeNode&&this.parentSchema){let e=this.activeNode.slot||"";this.activeNode&&this.activeNode.parentNode||(t=ua.schemaBySlotId(this.activeNode.parentNode,e))}return t}get layoutElement(){return this.activeNode&&ua.isLayoutElement(this.activeNode)?this.activeNode:this.activeNode&&this.activeNode.parentNode&&ua.isLayoutElement(this.activeNode.parentNode)?this.activeNode.parentNode:void 0}get layoutParent(){return this.layoutElement&&this.layoutElement.parentNode&&ua.isLayoutElement(this.layoutElement.parentNode)&&this.layoutElement.parentNode.tagName&&"HAX-BODY"!==this.layoutElement.parentNode.tagName?this.layoutElement.parentNode:void 0}get slottedItems(){if(!this.activeNode)return[];let t=ua.slottedContentByNode(this.layoutElement)||{};return Object.keys(t).map((e=>t[e]))}elementIcon(t){let e=t&&this.elementGizmo(t)?this.elementGizmo(t):void 0;return e?e.icon:void 0}elementLabel(t){let e=t&&this.elementGizmo(t)?this.elementGizmo(t):void 0;return e?e.title||e.tag:t&&t.tagName?t.tagName.toLowerCase():""}elementGizmo(t){let e=t&&t.tagName?ua.haxSchemaFromTag(t.tagName):void 0;return e&&e.gizmo?e.gizmo:void 0}getFilteredBlocks(t=[]){return t.filter((t=>{if(!t.tag)return;let e=t.tag||"",i=this.slotSchema&&this.slotSchema.slotWrapper&&this.slotSchema.slotWrapper?this.slotSchema.slotWrapper:void 0,o=this.slotSchema&&this.slotSchema.slotWrapper&&this.slotSchema.allowedSlotWrappers?this.slotSchema.allowedSlotWrappers:void 0,a=this.slotSchema&&this.slotSchema.slotWrapper&&this.slotSchema.excludedSlotWrappers?this.slotSchema.excludedSlotWrappers:void 0,n=!this.slotSchema||!o,s=!!i&&i===e||!!o&&o.includes(e);return!(!!a&&a.includes(e))&&(n||s)}))}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"activeNode"===e&&this.activeNode!==t&&this.setTarget(this.activeNode)}))}setTarget(t=this.activeNode){super.setTarget&&super.setTarget(t),this.parentSchema=t&&t.parentNode?ua.haxSchemaFromTag(t.parentNode.tagName):void 0}}};
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
class Wa extends(Aa(o)){static get tag(){return"hax-text-editor-paste-button"}render(){return super.render()}static get properties(){return{...super.properties}}constructor(){super(),this.command="paste",this.icon="content-paste",this.label="Paste Clipboard"}sendCommand(t){navigator&&navigator.clipboard&&ua._onPaste({...t,clipboardData:navigator.clipboard})}}window.customElements.define(Wa.tag,Wa);
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Xa extends($a($(Ga(o)))){static get styles(){return[...super.baseStyles,...super.stickyStyles,a`:host{--rich-text-editor-button-color:var(--hax-ui-color);--rich-text-editor-button-bg:var(--hax-ui-background-color);--rich-text-editor-button-border-color:transparent;--rich-text-editor-button-hover-color:var(--hax-ui-color);--rich-text-editor-button-hover-bg:var(
            --hax-ui-background-color-secondary
          );--rich-text-editor-button-toggled-color:var(--hax-ui-color-accent);--rich-text-editor-button-toggled-bg:var(--hax-ui-background-color);--rich-text-editor-button-toggled-border-color:var(
            --hax-ui-color-accent
          );--rich-text-editor-button-disabled-opacity:1;--rich-text-editor-button-disabled-color:var(
            --hax-ui-disabled-color
          );--rich-text-editor-button-disabled-bg:var(--hax-ui-background-color);--rich-text-editor-button-disabled-border-color:transparent}#morebutton{align-self:flex-end}::slotted([icon-position]:hover){--rich-text-editor-button-toggled-bg:var(
            --hax-ui-background-color-accent
          )}::slotted(.group){flex:0 0 auto;justify-content:center;border-width:1px;margin:-1px;padding:0}::slotted(.group),::slotted([icon-position]){z-index:1}::slotted([icon-position]),:host([collapsed]) ::slotted(.group){flex:0 0 auto}:host ::slotted(:focus),:host ::slotted(:focus-within){z-index:2!important}:host ::slotted(:hover){z-index:3!important}`]}get tourTemplate(){return n` <div slot="tour" data-stop-content> ${this.t.textEditorToolbarTour} </div>`}render(){return super.toolbarTemplate}static get properties(){return{__updated:{type:Boolean}}}tag(){return"hax-text-editor-toolbar"}constructor(){super(),this.tag=Xa.tag,this.t={undoButton:"Undo",redoButton:"Redo",formatButton:"Format",blockP:"Paragraph",blockH1:"Heading 1",blockH2:"Heading 2",blockH3:"Heading 3",blockH4:"Heading 4",blockH5:"Heading 5",blockH6:"Heading 6",blockPre:"Preformatted",italicButton:"Italic",boldButton:"Bold",underlineButton:"Underline",strikethroughButton:"Cross out",codeButton:"Code",removeFormatButton:"Remove format",linkButton:"Link",unlinkButton:"Remove Link",cutButton:"Cut",copyButton:"Copy",pasteButton:"Paste Clipboard",subscriptButton:"Subscript",superscriptButton:"Superscript",symbolButton:"Insert Symbol",emojiButton:"Insert Emoticon",imageButton:"Insert Image",orderedListButton:"Bulleted list",unorderedListButton:"Numbered list",blockquoteButton:"Blockquote",indentButton:"Indent",outdentButton:"Outdent",textEditorToolbarTour:"Change how the text is structured and visualized in the page."},this.registerLocalization({context:this,namespace:"hax"}),this.sourceView=!1,this.haxUIElement=!0,this.tourName="hax",window.HaxTextEditorToolbarConfig=window.HaxTextEditorToolbarConfig||{},window.HaxTextEditorToolbarConfig.inlineGizmos=window.HaxTextEditorToolbarConfig.inlineGizmos||{},window.HaxTextEditorToolbarConfig.default=window.HaxTextEditorToolbarConfig.default||[...this.defaultConfig],this.config=window.HaxTextEditorToolbarConfig.default,this.sticky=!1,this.__updated=!1,this.setTarget(void 0),window.addEventListener("hax-store-ready",this._handleHaxStoreReady.bind(this)),window.addEventListener("hax-register-properties",this._handleElementRegister.bind(this))}get undoButton(){return{...super.undoButton,label:this.t.undoButton}}get redoButton(){return{...super.redoButton,label:this.t.redoButton}}get formatButton(){return{...super.formatButton,label:this.t.formatButton,blocks:this.formatBlocks}}get formatBlocks(){return[{label:this.t.blockP,tag:"p"},{label:this.t.blockH1,tag:"h1"},{label:this.t.blockH2,tag:"h2"},{label:this.t.blockH3,tag:"h3"},{label:this.t.blockH4,tag:"h4"},{label:this.t.blockH5,tag:"h5"},{label:this.t.blockH6,tag:"h6"},{label:this.t.blockPre,tag:"pre"}]}get boldButton(){return{...super.boldButton,label:this.t.boldButton}}get italicButton(){return{...super.italicButton,label:this.t.italicButton}}get underlineButton(){return{...super.underlineButton,label:this.t.underlineButton}}get strikethroughButton(){return{...super.strikethroughButton,label:this.t.strikethroughButton}}get codeButton(){return{...super.codeButton,icon:"hax:html-code",label:this.t.codeButton}}get removeFormatButton(){return{...super.removeFormatButton,label:this.t.removeFormatButton}}get advancedInlineButtonGroup(){return{type:"button-group",subtype:"advanced-inline-button-group",buttons:[this.underlineButton,this.strikethroughButton,this.codeButton]}}get linkButton(){return{...super.linkButton,label:this.t.linkButton,allowTarget:!!ua.activeHaxBody&&!!ua.activeHaxBody.allowLinkTarget}}get unlinkButton(){return{...super.unlinkButton,label:this.t.unlinkButton}}get cutButton(){return{...super.cutButton,label:this.t.cutButton}}get copyButton(){return{...super.copyButton,label:this.t.copyButton}}get pasteButton(){return{...super.pasteButton,label:this.t.pasteButton,shortcutKeys:void 0,type:"hax-text-editor-paste-button"}}get subscriptButton(){return{...super.subscriptButton,label:this.t.subscriptButton}}get superscriptButton(){return{...super.superscriptButton,label:this.t.superscriptButton}}get symbolButton(){return{...super.symbolButton,label:this.t.symbolButton}}get emojiButton(){return{...super.emojiButton,label:this.t.emojiButton}}get imageButton(){return{...super.imageButton,label:this.t.imageButton}}get orderedListButton(){return{...super.orderedListButton,label:this.t.orderedListButton}}get unorderedListButton(){return{...super.unorderedListButton,label:this.t.unorderedListButton}}get blockquoteButton(){return{...super.blockquoteButton,label:this.t.blockquoteButton}}get indentButton(){return{...super.indentButton,label:this.t.indentButton}}get outdentButton(){return{...super.outdentButton,label:this.t.outdentButton}}get sourceButton(){return{...super.sourceButton}}get haxSymbolInsertButtonGroup(){return{type:"button-group",subtype:"hax-symbol-insert-button-group",buttons:[this.symbolButton,this.emojiButton]}}get iconButton(){return{}}get defaultConfig(){return[this.basicInlineButtonGroup,this.linkButtonGroup,this.listIndentButtonGroup,this.scriptButtonGroup,this.haxSymbolInsertButtonGroup,this.advancedInlineButtonGroup]}get filteredBlocks(){return this.getFilteredBlocks(this.formatBlocks)}get formatButtonElement(){return this.formatButton.type?this.querySelector(this.formatButton.type):void 0}get isRangeInScope(){return this.range&&this.target&&this.rangeNodeOrParentNode(this.range)&&(this.range.commonAncestorContainer===this.target||this.target.contains(this.range.commonAncestorContainer))}targetHandlers(t){let e=super.targetHandlers(t);return delete e.paste,e}updated(t){super.updated&&super.updated(t),this.__ready&&t.forEach(((t,e)=>{"parentSchema"!==e&&"target"!==e||this.updateBlocks(),"activeNode"===e&&this.activeNode!==t&&this.setTarget(this.activeNode),"t"===e&&this.t!==t&&this.updateToolbarElements()}))}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.config=this.updateToolbarElements(),this.__prompt.haxUIElement=!0,this.__prompt.classList.add("ignore-activation"),this.addEventListener("keypress",this.trapKeys.bind(this)),this.__prompt.addEventListener("keypress",this.trapKeys.bind(this)),this.__prompt.addEventListener("paste",this._handlePaste.bind(this))}_handlePaste(t){t.stopPropagation()}trapKeys(t){t.stopPropagation()}updateBlocks(){let t=this.filteredBlocks;this.formatButtonElement&&this.formatButtonElement.blocks!==t&&(this.formatButtonElement.blocks=t,t.length<2?this.formatButtonElement.setAttribute("disabled","disabled"):this.formatButtonElement.removeAttribute("disabled"))}getRange(){let t=ua.getRange();return!t||t.rangeCount<1?void 0:ua.getRange()}getSelection(){return ua.getSelection()}positionByTarget(t){}_handleElementRegister(t){let e=t.detail||{},i=e.tag||{},o=e.properties||{};this._setInlineElement(i,o)}_handleHaxStoreReady(t){this.__ready=!0;let e=ua.elementList||{};Object.keys(e).forEach((t=>this._setInlineElement(t,elemets[t])))}_setInlineElement(t,e){if(!t||!e||window.HaxTextEditorToolbarConfig.inlineGizmos[t]||t.indexOf("-")<0)return;let i={...e},o=e.gizmo||{},a=t.replace(/-./g,(t=>t.toUpperCase()[1])),n=t.split("-").length>1,s=(o.meta||{}).inlineOnly,r=(o.handles||[]).filter((t=>"inline"===t.type)).length>1,l=n&&(s||r);i.gizmo.title||(i.gizmo.title=a),l&&(window.HaxTextEditorToolbarConfig.inlineGizmos[t]={element:i,type:"hax-text-editor-button"},this.__updated=!1,setTimeout((t=>this.config=this.updateToolbarElements()),500))}updateToolbarElements(){if(this.__updated)return;this.__updated=!0;let t=Object.keys(window.HaxTextEditorToolbarConfig.inlineGizmos||{}).map((t=>window.HaxTextEditorToolbarConfig.inlineGizmos[t]));return 0===t.length?[...this.defaultConfig||[]]:[...this.defaultConfig||[],{type:"button-group",subtype:"hax-insert-button-group",buttons:t}]}}customElements.define("hax-text-editor-toolbar",Xa);const Ya=[a`body{--hax-ui-font-family:sans-serif;--hax-ui-font-size:16px;--hax-ui-font-size-sm:13px;--hax-ui-font-size-xs:12px;--hax-ui-font-size-lg:calc(1.05 * var(--hax-ui-font-size, 16px));--hax-ui-font-size-xl:calc(1.25 * var(--hax-ui-font-size, 16px))}`],Ka=[a`body{--hax-tray-width:300px;--hax-tray-menubar-min-width:44px;--hax-tray-menubar-min-height:34px;--hax-ui-spacing-xs:4px;--hax-ui-border-radius:2px;--hax-ui-spacing-sm:calc(1 * var(--hax-ui-spacing-xs, 4px));--hax-ui-spacing:calc(2 * var(--hax-ui-spacing-xs, 4px));--hax-ui-spacing-lg:calc(3 * var(--hax-ui-spacing-xs, 4px));--hax-ui-spacing-xl:calc(4 * var(--hax-ui-spacing-xs, 4px));--hax-ui-focus-z-index:1001;--simple-toolbar-focus-z-index:var(--hax-ui-focus-z-index);--a11y-menu-button-focus-z-index:var(--hax-ui-focus-z-index)}`],Ja=[a`body{--hax-ui-color:#222;--hax-ui-color-focus:#000;--hax-ui-color-faded:#444;--hax-ui-disabled-color:#bbb;--hax-ui-background-color:#fff;--hax-ui-background-color-secondary:#e8e8e8;--hax-ui-background-color-faded:#b0b8bb;--hax-ui-color-accent:#009dc7;--hax-ui-color-accent-secondary:#007999;--hax-ui-background-color-accent:#ccf3fd;--hax-ui-color-danger:#ee0000;--hax-ui-color-danger-secondary:#850000;--hax-ui-background-color-danger:#ffdddd;--hax-ui-border-color:#ddd}body[hax-ui-theme=haxdark]{--hax-ui-color:#eeeae6;--hax-ui-color-focus:#fff;--hax-ui-color-faded:#c5c3be;--hax-ui-disabled-color:#555;--hax-ui-background-color:#333;--hax-ui-background-color-secondary:#111;--hax-ui-background-color-faded:#222;--hax-ui-color-accent:#77e2ff;--hax-ui-color-accent-secondary:#00c9ff;--hax-ui-background-color-accent:#000;--hax-ui-color-danger:#ff8f8f;--hax-ui-color-danger-secondary:#ff2222;--hax-ui-background-color-danger:#000;--hax-ui-border-color:#000}@media (prefers-color-scheme:dark){body[hax-ui-theme=system]{--hax-ui-color:#eeeae6;--hax-ui-color-focus:#fff;--hax-ui-color-faded:#c5c3be;--hax-ui-background-color:#333;--hax-ui-background-color-secondary:#111;--hax-ui-background-color-faded:#222;--hax-ui-color-accent:#77e2ff;--hax-ui-color-accent-secondary:#00c9ff;--hax-ui-background-color-accent:#000;--hax-ui-color-danger:#ff8f8f;--hax-ui-color-danger-secondary:#ff2222;--hax-ui-background-color-danger:#000;--hax-ui-border-color:#000}}`],Qa=[a`body{--simple-tooltip-background:var(--hax-ui-color);--simple-tooltip-text-color:var(--hax-ui-background-color);--simple-tooltip-opacity:1;--simple-tooltip-delay-in:0;--simple-tooltip-duration-in:100ms;--simple-tooltip-duration-out:0;--simple-tooltip-border-radius:2px;--simple-tooltip-font-size:var(--hax-ui-font-size-sm)}`],Za=[...Ya,...Ka,...[a`body{--simple-fields-field-margin:calc(2 * var(--hax-ui-font-size));--simple-toolbar-focus-z-index:var(--hax-ui-focus-z-index);--simple-fields-font-family:var(--hax-ui-font-family);--simple-fields-font-size:var(--hax-ui-font-size);--simple-fields-line-height:135%;--simple-fields-detail-font-size:var(--hax-ui-font-size-xs);--simple-fields-detail-line-height:120%;--simple-fields-margin:var(--hax-ui-spacing);--simple-fields-background-color:var(--hax-ui-background-color);--simple-fields-color:var(--hax-tray-text-color);--simple-fields-accent-color:var(--hax-ui-color-accent);--simple-fields-accent-color-light:var(--hax-ui-background-color-faded);--simple-fields-error-color:var(--hax-ui-color-danger-secondary);--simple-fields-button-danger-background-color:var(
        --hax-ui-color-danger
      );--simple-fields-button-danger-focus-color:var(
        --hax-ui-color-danger-secondary
      );--simple-fields-button-danger-background-color:var(
        --hax-ui-background-color
      );--simple-fields-secondary-accent-color:var(
        --hax-ui-color-accent-secondary
      );--simple-fields-border-color:var(--hax-ui-color-faded);--simple-fields-fieldset-border-color:rgba(127, 127, 127, 0.2);--simple-fields-legend-text-transform:capitalize;--simple-fields-legend-font-size:var(--hax-ui-font-size-xs);--simple-fields-meta-font-size:var(--hax-ui-font-size-xs);--simple-fields-meta-line-height:120%;--simple-fields-meta-opacity:0.7;--simple-fields-focus-meta-opacity:1;--simple-fields-button-color:var(--hax-ui-color);--simple-fields-button-background-color:var(--hax-ui-background-color);--simple-fields-button-border-color:var(--hax-ui-border-color);--simple-fields-button-text-transform:capitalize;--simple-fields-border-radius:var(--hax-ui-border-radius);--simple-fields-button-padding-sm:var(--hax-ui-spacing-sm);--simple-fields-button-padding:var(--hax-ui-spacing-sm);--simple-fields-button-toggled-color:var(--hax-ui-color);--simple-fields-button-toggled-background-color:var(
        --hax-ui-background-color-accent
      );--simple-fields-button-toggled-border-color:var(--hax-ui-color-accent);--simple-fields-button-focus-color:var(--hax-ui-color);--simple-fields-button-focus-background-color:var(
        --hax-ui-background-color-accent
      );--simple-fields-button-focus-border-color:var(--hax-ui-color-accent);--simple-fields-button-disabled-color:unset;--simple-fields-button-disabled-background-color:unset;--simple-fields-button-disabled-border-color:unset;--simple-fields-button-disabled-opacity:0.5;--hexagon-color:var(--hax-ui-color-accent)}`],...Qa,...[a`simple-modal[mode=hax-ui],simple-popover-manager[mode=hax]{font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size);--simple-modal-height:70vh;--simple-modal-width:70vw;--simple-popover-border-color:var(--hax-ui-color);--simple-modal-border-color:var(--hax-ui-color)}rich-text-editor-prompt{z-index:calc(var(--hax-ui-focus-z-index) - 1)}simple-modal[mode=hax-ui]::part(dialog){--simple-modal-z-index:100000001!important}simple-modal[opened]{z-index:100000001!important}simple-modal[mode=hax-ui]::part(titlebar),simple-popover-manager[mode=hax] h1[slot=heading],simple-popover-manager[mode=hax]::part(simple-popover-heading){color:var(--hax-ui-background-color);background-color:var(--hax-ui-color-accent);padding:var(--hax-ui-spacing-sm) var(--hax-ui-spacing);margin:0}simple-modal[mode=hax-ui]::part(close),simple-popover-manager[mode=hax] #close{color:var(--hax-ui-background-color);background-color:var(--hax-ui-color-accent);outline:1px solid var(--hax-ui-color-accent);--simple-icon-button-border:0px solid transparent;--simple-icon-button-border-radius:var(--hax-ui-border-radius);width:24px;height:24px;padding:0}simple-modal[mode=hax-ui]:focus-within::part(close),simple-modal[mode=hax-ui]:hover::part(close),simple-popover-manager[mode=hax] #close:focus,simple-popover-manager[mode=hax] #close:hover{background-color:var(--hax-ui-color-accent-secondary);--simple-icon-button-border:0px solid transparent}simple-modal[mode=hax-ui]::part(title),simple-popover-manager[mode=hax] h1{font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size);font-weight:400;margin:0 var(--hax-ui-spacing-sm) 0 0;padding:0}simple-popover-manager[mode=hax] h2{font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size-lg);font-weight:400;color:var(--hax-ui-color-accent-secondary);margin:0 0 var(--hax-ui-spacing-lg)}simple-modal[mode=hax-ui]::part(content),simple-modal[mode=hax-ui]::part(custom),simple-popover-manager[mode=hax]::part(simple-popover-body){font-size:var(--hax-ui-font-size);color:var(--hax-ui-color);background-color:var(--hax-ui-background-color)}simple-modal[mode=hax-ui]::part(content){padding:0 var(--hax-ui-spacing)}simple-modal[mode=hax-ui]::part(custom){padding:0}simple-popover-manager[mode=hax]::part(simple-popover-body){padding:var(--hax-ui-spacing)}simple-modal[mode=hax-ui]::part(buttons),simple-popover-manager[mode=hax]:part(simple-popover-nav){background-color:var(--hax-ui-background-color)}#hax-cancel-no,#hax-cancel-yes{flex:1 1 auto}simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav]::part(button){text-transform:capitalize;font-size:var(--hax-ui-font-size-sm);padding:var(--hax-ui-spacing-sm);color:var(--hax-ui-color);background-color:var(--hax-ui-background-color);border:1px solid var(--hax-ui-border-color);border-radius:var(--hax-ui-border-radius);background-color:var(--hax-ui-background-color)}simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav]::part(button):focus-within,simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav]::part(button):hover{color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav][disabled]::part(button){opacity:.5;border:1px solid var(--hax-ui-border-color)}`],...Ja],tn=[a`hexagon-loader{display:none;margin:0 auto;z-index:1000}hexagon-loader[loading]{display:block;opacity:.8}`],en=[a`:host[aria-expanded=true]{border:1px solid var(--hax-ui-border-color)}absolute-position-behavior{border-color:transparent;color:var(--hax-ui-color);background-color:var(--hax-ui-background-color)}:host([expanded]) absolute-position-behavior{border:1px solid var(--hax-ui-border-color)}button[part=button]{text-transform:capitalize;font-size:var(--hax-ui-font-size-sm);padding:var(--hax-ui-spacing-sm);color:var(--hax-ui-color);background-color:var(--hax-ui-background-color);border:1px solid var(--hax-ui-border-color);border-radius:var(--hax-ui-border-radius)}:host([role=menuitem]) button[part=button]{padding:1px;border-color:transparent}:host(:hover) button[part=button]{background-color:var(--hax-ui-background-color-secondary);color:var(--hax-ui-color)}:host([toggled]) button[part=button],button[part=button][aria-pressed=true]{color:var(--hax-ui-color-accent);border-color:var(--hax-ui-color-accent)}:host([toggled]:hover) button[part=button],button[part=button][aria-pressed=true]:hover{background-color:var(--hax-ui-background-color-accent)}:host([danger]) button[part=button],:host([feature]) button[part=button]{color:var(--hax-ui-background-color)}:host([feature]) button[part=button]{background-color:var(--hax-ui-color-accent);border-color:var(--hax-ui-color-accent)}:host([danger]) button[part=button]{background-color:var(--hax-ui-color-danger);border-color:var(--hax-ui-color-danger)}:host([danger]) button[part=button][aria-pressed=true],:host([feature]) button[part=button][aria-pressed=true]{color:var(--hax-ui-background-color)}:host([feature]) button[part=button][aria-pressed=true]{background-color:var(--hax-ui-color-accent-secondary);border-color:var(--hax-ui-color-accent)}:host([danger]) button[part=button][aria-pressed=true]{background-color:var(--hax-ui-color-danger-secondary);border-color:var(--hax-ui-color-danger)}:host([danger]:focus-within) button[part=button],:host([danger]:hover) button[part=button],:host([feature]:focus-within) button[part=button],:host([feature]:hover) button[part=button]{color:var(--hax-ui-background-color)}:host([feature]:focus-within) button[part=button],:host([feature]:hover) button[part=button]{background-color:var(--hax-ui-color-accent-secondary);border-color:var(--hax-ui-color-accent-secondary)}:host([danger]:focus-within) button[part=button],:host([danger]:hover) button[part=button]{background-color:var(--hax-ui-color-danger-secondary);border-color:var(--hax-ui-color-danger-secondary)}:host([large]) button[part=button]{font-size:var(--hax-ui-font-size);padding:var(--hax-ui-spacing);border-width:2px}:host([disabled]) button[part=button][disabled]{opacity:1;color:var(--hax-ui-disabled-color);border:1px solid var(--hax-ui-border-color)}[show-text-label]::part(label){text-transform:capitalize;margin:var(--hax-ui-spacing-sm)}`],on=[a`simple-fields-tabs{padding:0;border:none;margin-left:calc(0 - var(--hax-ui-spacing-sm));margin-right:calc(0 - var(--hax-ui-spacing-sm))}simple-fields-tabs::part(tablist){margin-bottom:var(--hax-ui-spacing)}hax-preferences-dialog::part(haxlink),simple-fields-tabs::part(tab),simple-fields-tabs::part(tab-active),simple-fields-tabs::part(tab-disabled){border:1px solid var(--hax-ui-border-color);text-decoration:none;border-radius:3px;color:var(--hax-ui-color);background-color:var(--hax-ui-background-color);outline:unset;text-transform:capitalize;font-size:var(--hax-ui-font-size-sm);padding:var(--hax-ui-spacing-xs);flex:1 1 auto}simple-fields-tabs::part(tab-active){color:var(--hax-ui-color-accent)}hax-preferences-dialog::part(haxlink){display:block;padding:var(--hax-ui-spacing-lg)}hax-preferences-dialog::part(haxlink):focus,hax-preferences-dialog::part(haxlink):hover{color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}simple-fields-tabs::part(tab-disabled){opacity:.5;background-color:rgba(127,127,127,.2)}simple-fields-tabs::part(content){border:none}simple-fields-tab{padding:0}simple-fields ::part(label){text-transform:captitalize;margin:0}`],an=[...en,...tn,...on],nn=[a`#tray-detail{font-family:var(--hax-ui-font-family);--hax-tray-detail-title-font-size:var(--hax-ui-font-size);--hax-tray-detail-topic-font-size:var(--hax-ui-font-size-lg);--hax-tray-detail-subtopic-font-size:var(--hax-ui-font-size);--hax-tray-detail-heading-text-transform:capitalize;--hax-tray-detail-heading-font-weight:normal}#toggle-tray-size{color:var(--hax-ui-background-color);background-color:var(--hax-ui-color-accent);outline:1px solid var(--hax-ui-color-accent);--simple-icon-button-border:0px solid transparent;--simple-icon-button-border-radius:var(--hax-ui-border-radius);width:24px;height:24px;padding:0}#toggle-tray-size:focus-within,#toggle-tray-size:hover{color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}#tray-detail h5,#tray-detail h6{text-transform:var(--hax-tray-detail-heading-text-transform);font-weight:var(--hax-tray-detail-heading-font-weight);margin:var(--hax-ui-spacing-lg) 0 var(--hax-ui-spacing-xs);color:var(--hax-ui-color-faded)}#tray-detail h4{text-transform:var(--hax-tray-detail-heading-text-transform);color:var(--hax-ui-background-color);font-size:var(--hax-tray-detail-title-font-size);font-weight:400;margin:0 var(--hax-ui-spacing-sm) 0 0;padding:0}#tray-detail h5{font-size:var(--hax-tray-detail-topic-font-size)}#tray-detail h6{font-size:var(--hax-tray-detail-subtopic-font-size)}`],sn=[a`h5{font-size:var(--hax-tray-detail-topic-font-size)}h6{font-size:var(--hax-tray-detail-subtopic-font-size)}h5,h6{color:var(--hax-ui-color-faded);text-transform:var(--hax-tray-detail-heading-text-transform);font-weight:var(--hax-tray-detail-heading-font-weight);margin:var(--hax-ui-spacing-lg) 0 var(--hax-ui-spacing-xs)}`];class rn extends o{static get styles(){return an}render(){return n`<slot></slot>`}static get tag(){return"hax-ui-styles"}}window.customElements.define(rn.tag,rn);const ln=function(t){return class extends(P(t)){static get tag(){return"hax-toolbar-item"}constructor(){super(),this.danger=!1,this.feature=!1,this.menu=!1}static get properties(){return{...super.properties,danger:{type:Boolean,reflect:!0},eventName:{type:String,reflect:!0,attribute:"event-name"},feature:{type:Boolean,reflect:!0},toggledTooltip:{type:String},tooltip:{type:String}}}get buttonTemplate(){return this.radio?n` <button id="button" aria-checked="${this.isToggled?"true":"false"}" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keydown="${this._handleKeys}" @mousedown="${this._handleMousedown}" role="radio" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`:this.toggles?n` <button id="button" aria-pressed="${this.isToggled?"true":"false"}" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keydown="${this._handleKeys}" @mousedown="${this._handleMousedown}" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`:n` <button id="button" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keydown="${this._handleKeys}" @mousedown="${this._handleMousedown}" tabindex="0" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`}static get simpleButtonThemeStyles(){return en}static get simpleButtonCoreStyles(){return super.simpleButtonCoreStyles}static get simpleButtonLayoutStyles(){return super.simpleButtonLayoutStyles}static get styles(){return[...super.styles,a`:host(:focus-within),:host(:hover){z-index:var(--hax-ui-focus-z-index,1001)!important}`]}_handleClick(t){}_handleKeys(t){}_handleMousedown(t){}}};class dn extends(ln(o)){}window.customElements.define(dn.tag,dn);var cn=Object.freeze({__proto__:null,HaxToolbarItem:dn,HaxToolbarItemBehaviors:ln});class hn extends(ln(o)){constructor(){super(),this.haxUIElement=!0,this.action=!1,this.more=!1,this.eventName="button",this.inputMethod=null,this.propertyToBind=null,this.slotToBind=null,this.value=""}static get tag(){return"hax-context-item"}static get properties(){return{...super.properties,more:{type:Boolean},action:{type:Boolean},label:{type:String,reflect:!0},inputMethod:{type:String,reflect:!0,attribute:"input-method"},propertyToBind:{type:String,reflect:!0,attribute:"property-to-bind"},slotToBind:{type:String,reflect:!0,attribute:"slot-to-bind"},description:{type:String,reflect:!0},default:{type:Boolean},value:{type:String}}}_handleMousedown(t){this.disabled||(ua._tmpSelection=ua.getSelection())}_handleClick(t){this.disabled||this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:this,eventName:this.eventName,value:this.value}}))}}window.customElements.define(hn.tag,hn);class un extends(H(o)){static get styles(){return[...super.styles]}constructor(){super(),this._blockEvent=!1}static get simpleButtonThemeStyles(){return en}static get simpleButtonCoreStyles(){return[...super.simpleButtonCoreStyles,a`::slotted([slot=menuitem]){--simple-toolbar-button-justify:flex-start;--simple-toolbar-button-label-white-space:nowrap}`]}static get tag(){return"hax-toolbar-menu"}static get properties(){return{...super.properties,_blockEvent:{type:Boolean},eventName:{type:String,attribute:"event-name"}}}}window.customElements.define(un.tag,un);class pn extends(function(t){return class extends(X(t)){static get styles(){return[...super.styles,a`:host{--hax-ui-border-radius:0px}.selected-buttons{transition:.1s all ease-in-out;width:0}:host([has-selected-text]) .selected-buttons{width:100%}::slotted(*){pointer-events:all}::slotted(.group){border:none}`]}constructor(){super(),this.selected=!1,this.inline=!1}static get tag(){return"hax-toolbar"}static get properties(){return{...super.properties,selected:{type:Boolean,reflect:!0},inline:{type:Boolean,reflect:!0}}}}}(o)){}window.customElements.define(pn.tag,pn);class mn extends($(Ga(o))){constructor(){super(),this.disableOps=!1,this.disableItemOps=!1,this.insertAbove=!0,this.disableDuplicate=!1,this.hasActiveEditingElement=!1,this.haxUIElement=!0,this.tourName="hax",this.trayDetail="content-edit",this.trayStatus="collapsed",this.t={edit:"Edit",dragHandle:"Drag handle",moveUp:"Move up",moveDown:"Move down",addColumn:"Add column",removeColumn:"Remove column",remove:"Remove",duplicate:"Duplicate",confirmDelete:"Confirm delete",changeTo:"Change to",editElement:"Edit Mode",modifyHTMLSource:"Modify HTML source",clickToChange:"Click to change",regions:"Available regions",insertItemAbove:"Insert item above",insertItemAboveOrBelow:"Insert item above or below",insertItemBelow:"Insert item below",selectLayout:"Select Layout Element"},this.registerLocalization({context:this,namespace:"hax"}),this.ceButtons=[],this.activeTagName="",this.activeTagIcon="hax:paragraph",this.addEventListener("hax-context-item-selected",this.handleCECustomEvent.bind(this))}static get tag(){return"hax-plate-context"}static get styles(){return[...super.styles,a`:host{width:calc(100% - 2px);align-items:stretch}hax-toolbar::part(morebutton){--simple-toolbar-button-color:var(--hax-ui-color);--simple-toolbar-button-bg:var(--hax-ui-background-color);--simple-toolbar-button-border-color:var(--hax-ui-border-color);--simple-toolbar-button-border-width:1px;--simple-toolbar-button-hover-color:var(--hax-ui-color);--simple-toolbar-button-hover-bg:var(
            --hax-ui-background-color-secondary
          );--simple-toolbar-button-toggled-color:var(--hax-ui-color-accent);--simple-toolbar-button-toggled-bg:var(--hax-ui-background-color);--simple-toolbar-button-toggled-border-color:var(
            --hax-ui-color-accent
          );--simple-toolbar-button-disabled-opacity:1;--simple-toolbar-button-disabled-color:var(--hax-ui-disabled-color);--simple-toolbar-button-disabled-bg:var(--hax-ui-background-color);--simple-toolbar-button-disabled-border-color:unset;--simple-toolbar-border-radius:0;align-self:flex-end;justify-self:stretch;margin:0 -2px 0 2px}#remove{max-width:44px;overflow:visible}hax-toolbar{max-width:calc(100% - 2px);display:flex;align-items:stretch;justify-content:flex-start}.group{display:flex;align-items:stretch;flex:0 0 auto;justify-content:center;border:1px solid var(--rich-text-editor-border-color,#ddd);padding:0;border-width:1px;margin:-1px}.group,.group>*{z-index:1}.group:empty{display:none}.group>*,:host([collapsed]) .group{flex:0 0 auto}.group :not([toggled])::part(button){border-color:transparent}:host .group:focus,:host .group:focus-within,:host .group>:focus,:host .group>:focus-within{z-index:2}:host .group:hover,:host .group>:hover{z-index:3}.first-slot:not(:first-child){border-top:1px solid #000}`]}render(){return n` <hax-toolbar always-expanded> <div class="group"> <hax-toolbar-menu ?disabled="${this.hasActiveEditingElement||!this.canMoveElement||this.viewSource}" id="drag" action icon="hax:arrow-all" label="${this.t.dragHandle}" draggable="true" reset-on-select data-simple-tour-stop data-stop-title="label" ?hidden="${!this.canMoveElement}"> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" ?disabled="${this.hasActiveEditingElement}" show-text-label role="menuitem" icon="hax:keyboard-arrow-up" label="${this.t.moveUp}" event-name="hax-plate-up"></hax-context-item> </simple-toolbar-menu-item> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" ?disabled="${this.hasActiveEditingElement}" role="menuitem" show-text-label icon="hax:keyboard-arrow-down" label="${this.t.moveDown}" event-name="hax-plate-down"></hax-context-item> </simple-toolbar-menu-item> ${this.activeNode&&this.activeNode.parentNode&&ua.isLayoutElement(this.activeNode.parentNode)?(this.slottedItems||[]).map(((t,e)=>n` <simple-toolbar-menu-item slot="menuitem" class="move-to-slot ${e<1?"first-slot":""}"> <hax-context-item action align-horizontal="left" ?disabled="${this.viewSource}" label="${t.label}" event-name="move-to-slot" data-slot="${t.slot}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> `)):""} <div slot="tour" data-stop-content> Click the drag handle once to show a menu to just move up or down one item in the content OR click and drag to place the item exactly where you want it to go. </div> </hax-toolbar-menu> <hax-toolbar-menu action align-horizontal="left" ?disabled="${this.viewSource||this.disableOps}" icon="hax:select-element" label="${this.t.selectLayout}"> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" ?hidden="${!this.layoutParent||this.activeNode!==this.layoutElement}" .icon="${this.elementIcon(this.layoutParent)}" label="${this.elementLabel(this.layoutParent)}" event-name="hax-select-grid" .eventData="${this.layoutParent}" role="menuitem" show-text-label> </hax-context-item> <hax-context-item action align-horizontal="left" ?disabled="${this.activeNode===this.layoutElement}" ?hidden="${!this.layoutElement}" .icon="${this.elementIcon(this.layoutElement)}" label="${this.elementLabel(this.layoutElement)}" event-name="hax-select-grid" .eventData="${this.layoutElement}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> ${(this.slottedItems||[]).map(((t,e)=>(t.items||[]).map(((i,o)=>n` <simple-toolbar-menu-item slot="menuitem" class="hax-select-grid-item ${e<1&&o<1?"first-slot":""}"> <hax-context-item action align-horizontal="left" ?disabled="${this.viewSource||this.activeNode===i}" label="${t.title||t.id}${t.items.length>1?` (${o+1})`:""}" event-name="hax-select-grid-item" .eventData="${{target:i,grid:t.grid,slot:t.slot,index:o,editMode:t.editMode}}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> `))))} </hax-toolbar-menu> <slot name="primary"></slot> <hax-toolbar-menu icon="add-box" label="${this.t.insertItemAboveOrBelow}" ?disabled="${this.viewSource}"> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" show-text-label role="menuitem" ?disabled="${!this.insertAbove}" icon="hardware:keyboard-arrow-up" event-name="insert-above-active" label="${this.t.insertItemAbove}"></hax-context-item> </simple-toolbar-menu-item> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" show-text-label role="menuitem" icon="hardware:keyboard-arrow-down" event-name="insert-below-active" label="${this.t.insertItemBelow}" ?disabled="${this.viewSource}"></hax-context-item> </simple-toolbar-menu-item> ${ua.isLayoutElement(this.activeNode)?(this.slottedItems||[]).map(((t,e)=>n` <simple-toolbar-menu-item slot="menuitem" class="insert-into-active ${e<1?"first-slot":""}"> <hax-context-item action align-horizontal="left" ?disabled="${this.viewSource}" label="${t.label}" event-name="insert-into-active" data-slot="${t.slot}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> `)):""} </hax-toolbar-menu> <hax-context-item action ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps||this.disableDuplicate}" label="${this.t.duplicate}" icon="icons:content-copy" event-name="hax-plate-duplicate" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Duplicate the active piece of content and place it below the current item. </div> </hax-context-item> </div> <hax-context-item action icon="delete" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" icon="delete" label="${this.t.remove}" event-name="hax-plate-delete" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Delete the current item. You can always use the undo arrow to bring this back. </div> </hax-context-item> <hax-context-item action id="right" class="paddle" icon="hax:table-column-remove" label="${this.t.addColumn}" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" event-name="hax-plate-create-right" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Add a column to split the current column into two pieces. This can be done up to six pieces columns. For differnet layouts see Grid settings panel. </div> </hax-context-item> <hax-context-item action class="paddle" icon="hax:table-column-plus-after" label="${this.t.removeColumn}" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" event-name="hax-plate-remove-right" ?hidden="${!this.activeNode||ua.isOriginalGridPlate(this.activeNode)}" id="rightremove" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Remove a column from the split column layout. If at two columns and removing it will remove the layout split and make it 100% width. </div> </hax-context-item> ${this.ceButtons.map((t=>n` <hax-context-item action icon="${t.icon}" label="${t.label}" event-name="hax-ce-custom-button" value="${t.callback}" ?disabled="${t.disabled||this.disableItemOps}"></hax-context-item>`))} <slot name="secondary"></slot>  <div class="group"> <hax-context-item action more label="${this.t.changeTo}..." tooltip="${this.activeTagName}, ${this.t.clickToChange}" ?disabled="${this.disableTransform||this.viewSource||this.disableOps}" event-name="hax-transform-node"></hax-context-item> <hax-context-item action label="${this.t.editElement}" ?disabled="${this.viewSource||this.disableOps}" ?hidden="${!this.editElementProperty}" event-name="hax-edit-element-toggle" .eventData="${{target:this.activeNode,editMode:this.editElementProperty}}" toggles ?toggled="${this.editElementToggled}"></hax-context-item> <hax-context-item action icon="icons:code" label="${this.t.modifyHTMLSource}" ?disabled="${!this.sourceView||this.disableOps||this.editElementToggled}" event-name="hax-source-view-toggle" toggles ?toggled="${this.viewSource}"></hax-context-item> <slot name="more"></slot> <hax-context-item icon="build" action align-horizontal="left" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" label="${this.t.edit}" data-simple-tour-stop data-stop-title="label" event-name="content-edit" toggles ?toggled="${"content-edit"===this.trayDetail&&"collapsed"!==this.trayStatus}"> <div slot="tour" data-stop-content> Opens the Edit panel for more advanced settings. </div> </hax-context-item> </div> </hax-toolbar> `}get disableTransform(){return!this.filteredBlocks||this.filteredBlocks.length<1}get filteredBlocks(){return this.getFilteredBlocks(this.formatBlocks)}__updatePlatePosition(t){let e=this.shadowRoot.querySelector("#right"),i=this.shadowRoot.querySelector("#rightremove");e.disabled=!1,i.disabled=!1,t&&"GRID-PLATE"==t.tagName?"1-1-1-1-1-1"==t.layout&&(e.disabled=!0):i.disabled=!0}__dblClickFire(t){"remove"===t.target.id&&this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:t.target,eventName:"hax-plate-delete",value:t.target.value}}))}_handleOpen(t){this.dispatchEvent(new CustomEvent("hax-transform-node",{bubbles:!0,cancelable:!0,composed:!0,detail:ua.elementList[el]}))}handleCECustomEvent(t){let e=t.detail;if("hax-ce-custom-button"===e.eventName)this.activeNode&&"function"==typeof this.activeNode[e.value]&&this.activeNode[e.value](t)&&ua.refreshActiveNodeForm()}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"onScreen"===e&&this.onScreen&&this._resetCEMenu(),"activeNode"!==e&&"activeEditingElement"!==e||(this.activeSchema=ua.activeSchema(),this.editElementProperty=!(!this.activeSchema||!this.activeSchema.editElement)&&this.activeSchema.editElement,this.editElementToggled=this.activeNode&&this.editElementProperty&&!!this.activeNode[this.editElementProperty])}))}firstUpdated(t){super.firstUpdated(t),Di((()=>{this.activeNode=Qi(ua.activeNode),this.activeNode&&this.activeNode.classList&&this._resetCEMenu(),this.activeNode&&this.getAttribute("on-screen")&&this.__updatePlatePosition(this.activeNode)})),Di((()=>{Qi(ua.activeEditingElement)?this.hasActiveEditingElement=!0:this.hasActiveEditingElement=!1})),this.shadowRoot.querySelector("#drag").addEventListener("dragstart",this._dragStart),this.shadowRoot.querySelector("#drag").addEventListener("dragend",this._dragEnd)}_dragEnd(t){let e=b(t)?b(t)[0]:void 0;e&&e.close(!0),ua._lockContextPosition=!1}_dragStart(t){let e=Qi(ua.activeNode),i=b(t)?b(t)[0]:void 0;i&&i.close(!0),ua.__dragTarget=e,ua._lockContextPosition=!0,ua.activeHaxBody.__activeHover=null,ua.activeHaxBody._hideContextMenu(ua.activeHaxBody.contextMenus.add),t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setDragImage(e,-20,-20)),t.stopPropagation(),t.stopImmediatePropagation()}async _resetCEMenu(){if(this.shadowRoot&&f(this,"*"),this.ceButtons=[],ua.activeHaxBody&&null!=this.activeNode){let t=ua.haxSchemaFromTag(this.activeNode.tagName);if(this.sourceView=t.canEditSource,this.activeNode){let t=await ua.activeHaxBody.replaceElementWorkflow(this.activeNode,!0)||[],e=this.activeNode&&this.activeNode.tagName?this.activeNode.tagName.toLowerCase():void 0,i=ua.activeHaxBody.primitiveTextBlocks.includes(e)?"p":void 0;this.formatBlocks=e?t.filter((t=>t.tag&&![e,i].includes(t.tag))):t}ua.activeGizmo&&(this.activeTagName=ua.activeGizmo.title,this.activeTagIcon=ua.activeGizmo.icon)}else ua.activeGizmo?(this.activeTagName=ua.activeGizmo.title,this.activeTagIcon=ua.activeGizmo.icon):(this.activeTagName="",this.activeTagIcon="");await ua.runHook(this.activeNode,"inlineContextMenu",[this])}static get properties(){return{...super.properties,activeTagIcon:{type:String},activeSchema:{type:Object},editElementProperty:{type:String},editElementToggled:{type:Boolean},activeTagName:{type:String},disableOps:{type:Boolean},disableItemOps:{type:Boolean},insertAbove:{type:Boolean},disableDuplicate:{type:Boolean},canMoveElement:{type:Boolean},ceButtons:{type:Array},formatBlocks:{type:Object},hasActiveEditingElement:{type:Boolean},onScreen:{type:Boolean,attribute:"on-screen",reflect:!0},sourceView:{type:Boolean},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayStatus:{type:String,reflect:!0,attribute:"tray-status"}}}}window.customElements.define(mn.tag,mn),Element.prototype.replaceWith||(Element.prototype.replaceWith=v),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=v),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=v),String.prototype.replaceAll||(String.prototype.replaceAll=function(t,e){return this.split(t).join(e)});var gn=null;class bn extends($(pa(r))){static get tag(){return"hax-body"}static get styles(){return[...super.styles,a`:host([edit-mode]),:host([edit-mode]) * ::slotted(*){line-height:1.8}:host([edit-mode]) ol,:host([edit-mode]) ul{padding-left:20px;margin-left:20px}:host([edit-mode]) ul{list-style-type:disc}:host([edit-mode]) code{padding:.2em .4em;margin:0;font-size:12px;background-color:var(--hax-base-styles-code-background-color,rgba(175,184,193,.2));border-radius:6px;font-family:var(--hax-base-styles-code-font-family,ui-monospace,monospace)}:host([edit-mode]) pre{padding:16px;overflow:auto;line-height:1.45;background-color:var(--hax-base-styles-pre-background-color,rgba(175,184,193,.2));border-radius:6px;margin-bottom:0;word-break:normal;word-wrap:normal;margin-top:0;font-family:var(--hax-base-styles-pre-font-family,ui-monospace,monospace);font-size:12px}:host([edit-mode]) li{margin-bottom:6px}:host([edit-mode][tray-status=full-panel]) #bodycontainer{display:none}:host{display:block;position:relative;min-height:32px;min-width:32px;outline:0;--hax-contextual-action-text-color:var(--hax-ui-background-color);--hax-contextual-action-hover-color:var(--hax-ui-color-accent);--hax-contextual-action-color:var(--hax-ui-color-accent-secondary);--hax-body-editable-outline:1px solid var(--hax-ui-disabled-color, #ddd);--hax-body-active-outline-hover:1px solid var(--hax-ui-color-faded, #444);--hax-body-active-outline:1px solid var(--hax-ui-color-focus, #000);--hax-body-active-drag-outline:1px solid var(--hax-ui-color-accent, #009dc7);--hax-body-target-background-color:var(
            --hax-ui-background-color-accent
          );--hax-body-possible-target-background-color:inherit}#topcontext{z-index:calc(var(--hax-ui-focus-z-index) - 2);min-width:280px}#topcontextmenu{width:auto;max-width:100%;position:absolute;bottom:0}.hax-context-menu{display:none;z-index:1}.hax-context-menu:hover{z-index:calc(var(--hax-ui-focus-z-index) + 1);transition:0s z-index ease-in-out}.hax-context-menu-active,.hax-context-visible{display:flex}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]){-webkit-appearance:textfield;cursor:text;-moz-user-select:text;-khtml-user-select:text;-webkit-user-select:text;-o-user-select:text}:host([edit-mode]) #bodycontainer ::slotted([contenteditable][data-hax-ray]:empty)::before{content:attr(data-hax-ray);opacity:.2;transition:.2s all ease-in-out}:host([edit-mode]) #bodycontainer ::slotted([contenteditable][data-hax-ray]:hover:empty)::before{opacity:.4;cursor:text}:host([edit-mode]) #bodycontainer ::slotted([contenteditable][data-hax-ray]:empty:focus)::before{content:""}:host([edit-mode]) #bodycontainer ::slotted(p){min-height:var(--hax-base-styles-p-min-height,1rem);font-size:var(--hax-base-styles-p-font-size);line-height:var(--hax-base-styles-p-line-height);letter-spacing:var(--hax-base-styles-p-letter-spacing)}:host([edit-mode]) #bodycontainer ::slotted(a){color:var(--hax-base-styles-a-color);font-size:var(--hax-base-styles-a-font-size,var(--hax-base-styles-p-font-size));font-weight:var(--hax-base-styles-a-font-weight)}:host([edit-mode]) #bodycontainer ::slotted(a:visited){color:var(--hax-base-styles-a-color-visited)}:host([edit-mode]) #bodycontainer ::slotted(a:active),:host([edit-mode]) #bodycontainer ::slotted(a:focus),:host([edit-mode]) #bodycontainer ::slotted(a:hover){color:var(--hax-base-styles-a-color-active);font-weight:var(--hax-base-styles-a-font-weight-active)}:host([edit-mode]) #bodycontainer ::slotted(li),:host([edit-mode]) #bodycontainer ::slotted(ol),:host([edit-mode]) #bodycontainer ::slotted(ul){padding-bottom:var(--hax-base-styles-list-padding-bottom);line-height:var(--hax-base-styles-list-line-height,var(--hax-base-styles-p-line-height));font-size:var(--hax-base-styles-list-font-size,var(--hax-base-styles-p-font-size))}:host([edit-mode]) #bodycontainer ::slotted(ol>li:last-child),:host([edit-mode]) #bodycontainer ::slotted(ul>li:last-child){padding-bottom:var(--hax-base-styles-list-last-child-padding-bottom)}:host([edit-mode]) #bodycontainer ::slotted(img[contenteditable]){max-width:100%}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]){outline:0;caret-color:auto}:host([edit-mode]) #bodycontainer ::slotted(.blinkfocus){outline:2px solid var(--hax-contextual-action-hover-color)}:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock]){background-color:snow;opacity:.5;transition:.2s all ease-in-out}:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock]:hover){opacity:.9}:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock])::after{width:28px;height:28px;content:"";display:flex;float:right;z-index:1;position:relative;background-position:center;background-repeat:no-repeat;background-color:snow}:host([edit-mode]) #bodycontainer ::slotted(:not([data-hax-layout])[contenteditable]:hover){outline:var(--hax-body-active-outline-hover);caret-color:auto}:host(.hax-add-content-visible[edit-mode]) #bodycontainer ::slotted(.hax-active){margin-bottom:30px}:host([edit-mode]) #bodycontainer ::slotted(.hax-active[contenteditable]:hover){cursor:text!important;caret-color:auto;outline:var(--hax-body-active-outline-hover)}:host([edit-mode]) #bodycontainer ::slotted(:not([data-hax-layout])[contenteditable].hax-active:hover){cursor:text!important;caret-color:auto;outline:var(--hax-body-active-outline-hover)}:host([edit-mode]) #bodycontainer ::slotted(code.hax-active[contenteditable]){display:block}:host([edit-mode]) #bodycontainer ::slotted(.hax-active[contenteditable]){outline:var(--hax-body-active-outline)!important}:host([edit-mode]) #bodycontainer ::slotted(hr[contenteditable]){height:2px;background-color:#eee;padding-top:4px;padding-bottom:4px}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]){-webkit-user-select:text;cursor:pointer}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]::-moz-selection){background-color:var(--hax-body-highlight,#ffffac);color:#000}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]::selection){background-color:var(--hax-body-highlight,#ffffac);color:#000}#bodycontainer{-webkit-user-select:text;user-select:text}.hax-context-menu:not(:defined),absolute-position-behavior:not(:defined){display:none}:host([edit-mode][hax-mover]) #bodycontainer ::slotted(*)::before{background-color:var(--hax-body-possible-target-background-color);content:" ";width:100%;display:block;position:relative;margin:-12px 0 0 0;z-index:2;height:12px;transition:.2s all ease-in-out}:host([edit-mode][hax-mover]) #bodycontainer ::slotted(img){outline:var(--hax-body-editable-outline)}:host([edit-mode]) #bodycontainer ::slotted(.hax-hovered)::before,:host([edit-mode]) #bodycontainer ::slotted(img.hax-hovered){background-color:var(--hax-body-target-background-color)!important}:host([edit-mode]) #bodycontainer ::slotted(img.hax-hovered){border-top:8px var(--hax-contextual-action-hover-color,var(--hax-ui-color-accent));margin-top:-8px}#textcontextmenu.not-text,:host([hidden]),[hidden]{display:none!important}@media screen and (max-width:800px){.hax-context-menu{height:0}.hax-context-visible{height:auto}:host(:not([tray-status=collapsed])){z-index:-1}:host([edit-mode]) #bodycontainer,:host([edit-mode]) #bodycontainer[element-align=left],:host([edit-mode]) #bodycontainer[element-align=right]{margin:calc(100px + var(--hax-tray-menubar-min-height)) 0 0 0}}@media screen and (min-color-index:0) and(-webkit-min-device-pixel-ratio:0){:host([edit-mode][hax-mover]) #bodycontainer ::slotted(*){outline:var(--hax-body-editable-outline);background-color:var(--hax-body-possible-target-background-color)}:host([edit-mode]) #bodycontainer ::slotted(.hax-hovered){background-color:var(--hax-body-target-background-color)!important;outline:var(--hax-body-active-outline)}}`]}constructor(){if(super(),this.__ignoreActive=!1,this.__dragMoving=!1,this.___moveLock=!1,this.viewSourceToggle=!1,this.editMode=!1,this.haxMover=!1,this.activeNode=null,this.__lockIconPath=y.getIcon("icons:lock"),this.part="hax-body",this.t={addContent:"Add Content"},this.registerLocalization({context:this,namespace:"hax"}),!window.HaxUiStyles){window.HaxUiStyles=document.createElement("div");let t=document.createElement("style"),e=Za.map((t=>t.cssText)).join("");t.setAttribute("data-hax",!0),t.setAttribute("type","text/css"),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)}setTimeout((()=>{this.polyfillSafe=ua.computePolyfillSafe(),this.addEventListener("place-holder-replace",this.replacePlaceholder.bind(this)),this.addEventListener("focusin",this._focusIn.bind(this)),this.addEventListener("mousemove",this._mouseMove.bind(this)),this.addEventListener("mouseleave",this._mouseLeave.bind(this)),this.addEventListener("touchstart",this._mouseMove.bind(this),{passive:!0}),this.addEventListener("mousedown",this._mouseDown.bind(this)),this.addEventListener("mouseup",this._mouseUp.bind(this)),this.addEventListener("dragenter",this.dragEnterBody.bind(this)),this.addEventListener("dragend",this.dragEndBody.bind(this)),this.addEventListener("drop",this.dropEvent.bind(this))}),0),Di((()=>{this.editMode=Qi(ua.editMode)})),Di((()=>{this.elementAlign=Qi(ua.elementAlign)})),Di((()=>{this.trayStatus=Qi(ua.trayStatus),this.trayDetail=Qi(ua.trayDetail)})),Di((()=>{this.activeNode=Qi(ua.activeNode)})),Di((()=>{Qi(ua.activeEditingElement)}))}get isGridActive(){return ua.isGridPlateElement(activeNode)}dragEndBody(t){this.__manageFakeEndCap(!1),ua._lockContextPosition=!1,this.querySelectorAll(".hax-hovered").forEach((t=>{t.classList.remove("hax-hovered")}))}_mouseLeave(t){this.editMode&&ua.ready&&(clearTimeout(this.__mouseQuickTimer),clearTimeout(this.__mouseTimer),this.__activeHover=null)}_mouseMove(t){if(this.editMode&&ua.ready){var e=b(t);clearTimeout(this.__mouseQuickTimer),this.__mouseQuickTimer=setTimeout((()=>{this.__activeHover&&this.__activeHover!=e[0].closest("[data-hax-ray]:not(li)")&&(this.__activeHover=null)}),300),clearTimeout(this.__mouseTimer),this.__mouseTimer=setTimeout((()=>{this.__addActiveVisible();let t=e[0].closest("[data-hax-ray]:not(li)");if(t)this.__activeHover=t;else if(e[0].closest("[data-move-order]")&&e[3]&&e[3].closest("[data-hax-layout]"))if(e[0].closest("[data-move-order]:not(.has-nodes")){if(this.__addAbove=!1,this.__slot=e[0].closest("[data-move-order]").getAttribute("id").replace("col","col-"),0==e[0].closest("[data-move-order]").parentNode.parentNode.host.children.length){let t=document.createElement("p");e[0].closest("[data-move-order]").parentNode.parentNode.host.appendChild(t)}this.__activeHover=e[0].closest("[data-move-order]").parentNode.parentNode.host.children[0]}else this.__activeHover=e[0].closest("[data-move-order]").parentNode.parentNode.host;else e[0].closest("#bodycontainer")&&(this.__activeHover=null)}),400)}}_mouseDown(t){if(this.editMode){this.__mouseDown=!0;let e=t.target;e.closest("[draggable]")?e=e.closest("[draggable]"):e.closest("[slot]")?e=e.closest("[slot]"):e.closest("[data-hax-ray]")?e=e.closest("[data-hax-ray]"):e.closest("[contenteditable]")?e=e.closest("[contenteditable]"):ua.validTagList.includes(e.tagName.toLowerCase())||"HAX-BODY"===e.tagName||e.haxUIElement||console.warn(e),!e.haxUIElement&&this.__focusLogic(e)&&(t.stopPropagation(),t.stopImmediatePropagation())}}_mouseUp(t){setTimeout((()=>{this.__mouseDown=!1}),0),clearTimeout(gn),this.__manageFakeEndCap(!1)}clickEvent(t){clearTimeout(gn)}blurEvent(t){this.editMode&&ua.activeEditingElement}__manageFakeEndCap(t=!0){if(t&&!this.__fakeEndCap){let t=document.createElement("fake-hax-body-end");t.style.width="100%",t.style.height="20px",t.style.zIndex="2",t.style.display="block",this.__fakeEndCap=t,this.haxMover=!0,this.appendChild(this.__fakeEndCap),this.__applyNodeEditableState(this.__fakeEndCap,!0)}else!t&&this.__fakeEndCap&&(this.__fakeEndCap.remove(),this.haxMover=!1,this.__fakeEndCap=null)}dragEnterBody(t){this.__manageFakeEndCap(!0)}render(){return n` <style id="hax-body-style-element"></style> <div id="bodycontainer" class="ignore-activation" element-align="${this.elementAlign||"right"}"> <slot id="body"></slot> </div> <absolute-position-behavior id="topcontext" fit-to-visible-bounds justify position="top" allow-overlap auto sticky data-node-type="${this.activeNode?this.viewSourceToggle?this.activeNode.parentNode.tagName:this.activeNode.tagName:""}" .target="${this.activeNode?this.viewSourceToggle?this.activeNode.parentNode:this.activeNode:document.body}" .trayStatus="${this.trayStatus}" ?hidden="${!this.activeNode}"> <div id="topcontextmenu"> <hax-plate-context always-expanded id="platecontextmenu" class="hax-context-menu ignore-activation" .activeNode="${this.activeNode}" .trayDetail="${this.trayDetail}" .trayStatus="${this.trayStatus}" ?viewSource="${this.viewSourceToggle}" ?canMoveElement="${this.canMoveElement}"></hax-plate-context> <hax-text-editor-toolbar id="textcontextmenu" class="hax-context-menu ignore-activation ${!this.activeNode||this.activeNode.getAttribute("data-hax-lock")||this.activeNode.parentNode&&this.activeNode.parentNode.getAttribute("data-hax-lock")||!ua.isTextElement(this.activeNode)&&!ua.isSingleSlotElement(this.activeNode)?"not-text":"is-text"}" .activeNode="${this.activeNode}" show="always"> </hax-text-editor-toolbar> </div> </absolute-position-behavior> `}static get properties(){return{...super.properties,allowLinkTarget:{type:Boolean},haxMover:{type:Boolean,attribute:"hax-mover",reflect:!0},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},elementAlign:{type:String,reflect:!0,attribute:"element-align"},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayStatus:{type:String,reflect:!0,attribute:"tray-status"},activeNode:{type:Object},canMoveElement:{type:Boolean},viewSourceToggle:{type:Boolean,reflect:!0}}}HAXBODYStyleSheetContent(){let t=[];return t.push(a`:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock])::after{background-image:url(${_(this.__lockIconPath)})}`),t}firstUpdated(t){s(this.HAXBODYStyleSheetContent(),this.shadowRoot.querySelector("#hax-body-style-element")),this.dispatchEvent(new CustomEvent("hax-register-body",{bubbles:!0,cancelable:!0,composed:!0,detail:this}));try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("defaultParagraphSeparator",!1,"p")}catch(t){console.warn(t)}this.contextMenus={text:this.shadowRoot.querySelector("#textcontextmenu"),plate:this.shadowRoot.querySelector("#platecontextmenu"),parent:this.shadowRoot.querySelector("#topcontext")},this.shadowRoot.querySelector("slot").addEventListener("mouseup",(t=>{this.editMode&&setTimeout((()=>{const t=ua.getSelection();ua._tmpSelection=t,ua.haxSelectedText=t.toString();try{const t=ua.getRange();t.cloneRange&&(ua._tmpRange=t.cloneRange())}catch(t){console.warn(t)}}),10)})),this.editMode=ua.editMode,this.__tabTrap=!1,this.ready=!0,super.firstUpdated&&super.firstUpdated(t)}async updated(t){t.forEach((async(t,e)=>{"editMode"==e&&void 0!==t&&setTimeout((async()=>{this._editModeChanged(this[e],t),this[e]?(await this._activeNodeChanged(this.activeNode,null),this.activeNode.focus()):await this._activeNodeChanged(null,this.activeNode)}),0),"activeNode"==e&&this.ready&&await this._activeNodeChanged(this[e],t)})),super.updated&&super.updated(t)}connectedCallback(){super.connectedCallback(),this._observer=new MutationObserver((t=>{var e=!1;this.__ignoreActive||this.__dragMoving||this.undoStackIgnore||this.__fakeEndCap?this.undoStackIgnore&&t.forEach((t=>{t.addedNodes.length>0&&t.addedNodes.forEach((t=>{this._validElementTest(t)&&setTimeout((()=>{this.__applyNodeEditableState(t,this.editMode)}),0)}))})):t.forEach((t=>{if(t.addedNodes.length>0){for(var i of t.addedNodes)if(this._validElementTest(i)){if(!this.__delHit&&"BR"===i.tagName&&i.parentElement&&ua.__validGridTags().includes(i.parentElement.tagName.toLowerCase())&&i===i.parentElement.childNodes[i.parentElement.childNodes.length-1]){let t=i.parentElement;if(i.remove(),t.childNodes.length>0){let e=t.childNodes[t.childNodes.length-1];e.textContent+="​",ua._positionCursorInNode(e,e.length)}continue}if(this.__delHit=!1,"P"===i.tagName&&i.children.length>0&&"P"===i.children[0].tagName){x(i);continue}if("P"===i.tagName&&i.parentElement&&"P"===i.parentElement.tagName){x(i.parentElement);continue}if(null!=i.getAttribute("slot")&&i.parentElement===this){i.removeAttribute("slot");continue}if("LI"===i.tagName&&i.children.length>0&&"SPAN"===i.children[0].tagName){this.activeNode!==i.children[0]&&this.activeNode!==i||(this.activeNode=i),x(i.children[0]);continue}if("LI"===i.tagName&&i.parentElement&&!["UL","OL"].includes(i.parentElement.tagName)){x(i);continue}if("P"===i.tagName&&i.children.length>0&&["P","LI"].includes(i.children[0].tagName)){x(i.children[0]);continue}if(this.__slot&&(i.setAttribute("slot",this.__slot),this.__slot=null),this.__indentTrap)if("SPAN"===i.tagName)i.parentNode===this?this.haxChangeTagName(i,"p",!0):"LI"===i.parentNode.tagName&&(i.parentNode.innerHTML=i.textContent);else if("BR"===i.tagName){i.remove();continue}if(!this.editMode||"true"!=i.getAttribute("contenteditable")&&!0!==i.getAttribute("contenteditable")&&"contenteditable"!=i.getAttribute("contenteditable")||this.__applyNodeEditableState(i,!this.editMode),this.__applyNodeEditableState(i,this.editMode),ua.isGridPlateElement(i)){let t=i.querySelectorAll("*");for(var o=0;o<t.length;o++)this._validElementTest(t[o])&&this.__applyNodeEditableState(t[o],this.editMode)}if(["H1","H2","H3","H4","H5","H6"].includes(i.tagName)&&null==i.getAttribute("id")&&i.setAttribute("id",w("header-")),this.___moveLock||e)this.___moveLock=!1;else if(e=!0,ua.activeNode=i,"BR"===i.tagName){const t=ua.getSelection();ua._tmpSelection=t,ua.haxSelectedText=t.toString();const e=ua.getRange();e.collapsed&&"BR"===this.activeNode.tagName&&this.activeNode.parentNode===e.commonAncestorContainer&&""===this.activeNode.innerText&&(ua.activeNode=this.activeNode.parentNode)}}this.__indentTrap&&setTimeout((()=>{this.__indentTrap=!1}),0)}else this.ready&&this.editMode&&ua.ready&&0===t.addedNodes.length&&t.removedNodes.length>0&&this.shadowRoot&&0===this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length&&setTimeout((()=>{0===this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length&&this.appendChild(document.createElement("p"))}),100)})),this.__ignoreActive&&(this.__ignoreActive=!1),ua.haxTray.updateMap()})),this._observer.observe(this,{childList:!0,subtree:!0}),window.addEventListener("hax-context-item-selected",this._haxContextOperation.bind(this)),window.addEventListener("hax-toggle-active-node-lock",this._toggleNodeLocking.bind(this)),window.addEventListener("click",this.clickEvent.bind(this)),window.addEventListener("blur",this.blurEvent.bind(this)),window.addEventListener("keydown",this._onKeyDown.bind(this)),window.addEventListener("keypress",this._onKeyPress.bind(this)),document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),window.addEventListener("scroll",this._keepContextVisible.bind(this),{passive:!0}),window.addEventListener("resize",this._keepContextVisible.bind(this),{passive:!0})}disconnectedCallback(){window.removeEventListener("hax-toggle-active-node-lock",this._toggleNodeLocking.bind(this)),window.removeEventListener("click",this.clickEvent.bind(this)),window.removeEventListener("blur",this.blurEvent.bind(this)),window.removeEventListener("keydown",this._onKeyDown.bind(this)),window.removeEventListener("keypress",this._onKeyPress.bind(this)),document.body.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),window.removeEventListener("scroll",this._keepContextVisible.bind(this)),window.removeEventListener("resize",this._keepContextVisible.bind(this)),window.removeEventListener("hax-context-item-selected",this._haxContextOperation.bind(this)),this._observer.disconnect(),super.disconnectedCallback()}_toggleNodeLocking(t){t.detail.lock?(this.contextMenus.plate.disableDuplicate=!0,this.contextMenus.plate.disableOps=!0,this.contextMenus.plate.disableItemOps=!0,this.contextMenus.plate.canMoveElement=!1,t.detail.node.removeAttribute("contenteditable"),this.removeAttribute("contenteditable")):(this.contextMenus.plate.disableDuplicate=!1,this.contextMenus.plate.disableOps=!1,this.contextMenus.plate.disableItemOps=!1,this.contextMenus.plate.canMoveElement=this.canMoveElement,t.detail.node.setAttribute("contenteditable",!0),this.setAttribute("contenteditable",!0)),this.requestUpdate()}_keepContextVisible(t=null){this.editMode&&(clearTimeout(this.__contextVisibleLock),this.__contextVisibleLock=setTimeout((()=>{let t=!1;this.contextMenus.plate.classList.contains("hax-context-visible")&&(t=this.contextMenus.plate),t&&this.positionContextMenus()}),100))}_onKeyDown(t){if(this.editMode&&"HAX-TRAY"!==document.activeElement.tagName&&"BODY"!==document.activeElement.tagName&&"SIMPLE-MODAL"!==document.activeElement.tagName&&this.getAttribute("contenteditable")){if(this.__dropActiveVisible(),this.__manageFakeEndCap(!1),null!=ua.getSelection().anchorNode)switch(t.key){case"Z":case"z":t.ctrlKey&&(t.shiftKey?this.redo():this.undo(),t.detail.keyboardEvent&&(t.detail.keyboardEvent.preventDefault(),t.detail.keyboardEvent.stopPropagation(),t.detail.keyboardEvent.stopImmediatePropagation()),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation());break;case"Tab":ua.isTextElement(this.activeNode)&&(t.detail.keyboardEvent&&(t.detail.keyboardEvent.preventDefault(),t.detail.keyboardEvent.stopPropagation(),t.detail.keyboardEvent.stopImmediatePropagation()),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),t.shiftKey?this._tabBackKeyPressed():this._tabKeyPressed());break;case"Enter":if(this.activeNode&&(this.__slot=this.activeNode.getAttribute("slot")),this.activeNode&&"P"===this.activeNode.tagName&&["1","#","`",">","-","!"].includes(this.activeNode.textContent[0])){const t=this.activeNode.textContent.replaceAll(/ /g," ");this.keyboardShortCutProcess(t)}break;case"Backspace":case"Delete":this.__delHit=!0;break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":setTimeout((()=>{const t=ua.getSelection();ua._tmpSelection=t,ua.haxSelectedText=t.toString();const e=ua.getRange();e.commonAncestorContainer&&this.activeNode!==e.commonAncestorContainer&&"function"==typeof e.commonAncestorContainer.focus?"HAX-BODY"!==e.commonAncestorContainer.tagName&&this.__focusLogic(e.commonAncestorContainer,!1):e.commonAncestorContainer&&e.commonAncestorContainer.parentNode&&this.activeNode!==e.commonAncestorContainer.parentNode&&"function"==typeof e.commonAncestorContainer.parentNode.focus&&("HAX-BODY"!==e.commonAncestorContainer.parentNode.tagName?this.__focusLogic(e.commonAncestorContainer.parentNode,!1):this.__focusLogic(e.commonAncestorContainer,!1))}),0);break;default:setTimeout((()=>{if(this.activeNode&&"P"===this.activeNode.tagName&&["1","#","`",">","-","!"].includes(this.activeNode.textContent[0])){const t=this.activeNode.textContent.replaceAll(/ /g," ");" "===t[t.length-1]&&this.keyboardShortCutProcess(t)}}),0)}}}keyboardShortCutProcess(t){if(ua.keyboardShortcuts[t.replace(" ","")]){let e=l(ua.keyboardShortcuts[t.replace(" ","")]);this.haxReplaceNode(this.activeNode,e),this.__focusLogic(e),"HR"===e.tagName&&this.haxInsert("p","",{})}else if("!"===t[0]){let e=t.replace("!","").replaceAll(/ /g,"");if(ua.elementList[e]){let t,i=ua.haxSchemaFromTag(e);t=i.gizmo.tag&&i.demoSchema&&i.demoSchema[0]?l(i.demoSchema[0]):document.createElement(e),this.haxReplaceNode(this.activeNode,t),this.__focusLogic(t)}else ua.toast(`${e} is not a valid tag`)}}_onKeyPress(t){let e=this.activeNode&&this.activeNode.nextElementSibling?this.activeNode.nextElementSibling:null;e&&"Enter"===t.key&&this.setActiveNode(this.activeNode.nextElementSibling),setTimeout((()=>{this.activeNode&&this.activeNode===e&&this.editMode&&this.activeNode.previousElementSibling&&this.haxInsert("p","",{},this.activeNode.previousElementSibling)}),1)}setActiveNode(t,e=!1){t&&this.editMode&&this.activeNode&&(ua.isTextElement(this.activeNode)||e)&&(this.activeNode=t,clearTimeout(this.__positionContextTimer),this.__positionContextTimer=setTimeout((()=>{this.__addActiveVisible(),this.positionContextMenus()}),2e3))}elementMidViewport(){const t=this.activeNode.getBoundingClientRect().y;return t<0&&t>-1*this.activeNode.offsetHeight+140}replacePlaceholder(t){if("text"===t.detail){let t=document.createElement("p");this.haxReplaceNode(this.activeNode,t),this.__focusLogic(t),this.activeNode.parentNode&&this.activeNode.parentNode.setAttribute("contenteditable",!0)}else this.replaceElementWorkflow()}async canTansformNode(t=null){return await this.replaceElementWorkflow(t,!0).length>0}async insertElementWorkflow(t=null,e=!1){}get primitiveTextBlocks(){return["p","div","pre","h1","h2","h3","h4","h5","h6"]}getAllSlotConfig(t){if(!t)return;let e=this.getParentGrid(t);return e&&e.tag?this.getSlotConfig(ua.elementList[e.tag],slot):void 0}getParentGrid(t){return((t=t||this.activeNode)?t.slot:void 0)?p(t.parentNode):void 0}getSlotConfig(t="",e={}){let i=e.settings,o=i?Object.keys(i||{}).map((e=>i[e].filter((e=>!(!e.slot||t&&e.slot!==t))))).flat():void 0;return o&&o.length>0?o[0]:void 0}async replaceElementWorkflow(t=null,e=!1){null==t&&(t=this.activeNode);let i=await p(t,null);if(!i)return;let o="*",a=!1,n=(t||{}).slot,s=this.getParentGrid(t);"place-holder"===i.tag&&void 0!==i.properties.type?(o=i.properties.type,a=!0):this.primitiveTextBlocks.includes(i.tag)&&(a=!0);var r=i.content?{innerHTML:i.content}:{};if(void 0!==ua.elementList[i.tag]&&!1!==ua.elementList[i.tag].gizmo&&void 0!==ua.elementList[i.tag].gizmo.handles&&ua.elementList[i.tag].gizmo.handles.length>0){let t=ua.elementList[i.tag].gizmo;for(var l=0;l<t.handles.length;l++)for(var d in i.properties.innerHTML&&(r.innerHTML=i.properties.innerHTML),t.handles[l])"type"!==d&&void 0!==i.properties[t.handles[l][d]]&&(r[d]=i.properties[t.handles[l][d]])}let c=ua.guessGizmo(o,r,a),h=s?this.getSlotConfig(n,ua.elementList[s.tag]):void 0,u=s&&"grid-plate"===s.tag?["grid-plate"]:h?h.excludedSlotWrappers:void 0,m=h?h.allowedSlotWrappers:void 0;if((u||m)&&(c=c.filter((t=>!u.includes(t.tag)&&(!m||m.includes(t.tag))))),c.length>0){let i=t.tagName.toLowerCase(),o=i.replace("-"," ");void 0!==ua.elementList[i]&&!1!==ua.elementList[i].gizmo&&(o=ua.elementList[i].gizmo.title),e||(ua.activePlaceHolder=this.activeNode,ua.haxAppPicker.presentOptions(c,"__convert",`Change ${o} to...`,"gizmo"))}else e||ua.toast("Sorry, this can not be transformed!",5e3);return c}_haxStorePropertyUpdated(t){t.detail&&void 0!==t.detail.value&&t.detail.property&&(this[t.detail.property]=t.detail.value)}haxClearBody(t=!0){let e=!0;t&&(e=prompt("Are you sure you want to delete all content?")),e&&f(this)}haxInsert(t,e,i={},o=this.activeNode,a=!1){var n=document.createElement(t);n.innerHTML=e;const s=n.cloneNode(!0);for(var r in i){let t=m(r);i.hasOwnProperty(r)&&(!0===i[r]?s.setAttribute(t,t):!1===i[r]?s.removeAttribute(t):null!=i[r]&&i[r].constructor===Array||null!=i[r]&&i[r].constructor===Object?s.properties&&s.properties[r].readOnly||(s.set?s.set(t,i[r]):s[t]=i[r]):s.setAttribute(t,i[r]))}return null!==ua.activePlaceHolder&&void 0!==ua.activePlaceHolder.style?(s.style.width=ua.activePlaceHolder.style.width,s.style.float=ua.activePlaceHolder.style.float,s.style.margin=ua.activePlaceHolder.style.margin,s.style.display=ua.activePlaceHolder.style.display,this.haxReplaceNode(ua.activePlaceHolder,s),ua.activePlaceHolder=null):o&&o.parentNode?this.__isLayout(o.parentNode)?(null!=o.getAttribute("slot")&&s.setAttribute("slot",o.getAttribute("slot")),this.__addAbove?o.parentNode.insertBefore(s,o):o.parentNode.insertBefore(s,o.nextElementSibling)):o.parentNode&&o.parentNode.nextElementSibling?o.parentNode.nextElementSibling.parentNode.insertBefore(s,o.parentNode.nextElementSibling):o.parentNode&&o.nextElementSibling?this.__addAbove?o.parentNode.insertBefore(s,o):o.parentNode.insertBefore(s,o.nextElementSibling):o.parentNode&&o.parentNode.children[o.parentNode.children.length-1]===o?this.__addAbove?o.parentNode.insertBefore(s,o):o.parentNode.appendChild(s):o.parentNode?o.parentNode.insertBefore(s,o):this.appendChild(s):this.appendChild(s),this.contextMenus.text.hasSelectedText=!1,setTimeout((()=>{this.__focusLogic(s),this.scrollHere(s)}),0),s}async haxToContent(){this.hideContextMenus();var t=this.activeNode;ua.activeNode=null;let e="slot"===this.shadowRoot.querySelector("#body").localName?this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}):[];for(var i="",o=0;o<e.length;o++)if(this._validElementTest(e[o]))this.__applyDragDropState(e[o],!1),e[o].classList.remove("hax-hovered"),e[o].contentEditable=!1,i+=await ua.nodeToContent(e[o]),this.__isLayout(e[o])&&this._applyContentEditable(this.editMode,e[o]);else if(8===e[o].nodeType)i+="\x3c!-- "+e[o].textContent+" --\x3e";else if(e[o].haxUIElement&&e[o].children&&e[o].children[0]){let t=await ua.runHook(e[o],"activeElementChanged",[this.activeNode,!1]);t&&t!==e[o]?i+=await ua.nodeToContent(t):i+=await ua.nodeToContent(e[o].children[0])}else 1!==e[o].nodeType&&void 0!==e[o].textContent&&"undefined"!==e[o].textContent?i+=e[o].textContent:console.warn(e[o]);if(i=(i=(i=(i=(i=i.replace(/\scontenteditable=\"false\"/g,"")).replace(/\scontenteditable/g,"")).replace(/\sdraggable/g,"")).replace(/\sdata-hax-ray=\".*?\"/g,"")).replace(/\sdata-hax-grid/g,""),this.parentNode.tagName){let t=this.parentNode.tagName.toLowerCase(),e="style-scope "+t+" x-scope",a=new RegExp(e,"g");i=i.replace(a,""),e="style-scope "+t,a=new RegExp(e,"g"),i=i.replace(a,""),e="x-scope "+t+"-0",a=new RegExp(e,"g"),i=i.replace(a,"");let n=ua.validTagList;for(var o in n)e="style-scope "+n[o],a=new RegExp(e,"g"),i=i.replace(a,""),e="x-scope "+n[o]+"-0 ",a=new RegExp(e,"g"),i=i.replace(a,""),e="x-scope "+n[o]+"-0",a=new RegExp(e,"g"),i=i.replace(a,"")}return i=(i=i.replace(/\sclass=\"\"/g,"")).replace(/\sclass=\"\s\"/g,""),this._applyContentEditable(this.editMode),ua.activeNode=t,i=A(i)}async haxDuplicateNode(t){let e=await p(t,null);ua.testHook(t,"preProcessInsertContent")&&(e=await ua.runHook(t,"preProcessInsertContent",[e,this.activeNode])),e.content==e.properties.innerHTML&&delete e.properties.innerHTML;var i=l({tag:e.tag,content:e.content,properties:e.properties});return"webview"===i.tagName.toLowerCase()&&ua._isSandboxed&&void 0!==i.guestinstance&&delete i.guestinstance,null!==t?t.parentNode.insertBefore(i,t.nextSibling):t.parentNode.appendChild(i),ua.activeNode=i,!0}hideContextMenus(t=!0){clearTimeout(gn),clearTimeout(this.__contextVisibleLock),clearTimeout(this.__positionContextTimer),this._hideContextMenu(this.contextMenus.text),this.__activeHover=null,t&&this._hideContextMenu(this.contextMenus.plate)}positionContextMenus(t=this.activeNode){if(t&&t.tagName&&this.ready){let e=t.tagName.toLowerCase();ua.elementList&&ua.elementList[e]&&ua.elementList[e].contentEditable&&null===t.getAttribute("data-hax-lock")&&t.parentNode&&null===t.parentNode.getAttribute("data-hax-lock")?t.setAttribute("contenteditable",!0):t.removeAttribute("contenteditable"),clearTimeout(this.__positionContextTimer),this.__positionContextTimer=setTimeout((()=>{if(!ua._lockContextPosition){let e=t.tagName.toLowerCase();ua._isSandboxed&&"webview"===e&&(e="iframe");let i=ua.elementList[e];t?this._showContextMenu(this.contextMenus.plate):this._hideContextMenu(this.contextMenus.plate),void 0===i||ua.isTextElement(t)?this._showContextMenu(this.contextMenus.text):(this._hideContextMenu(this.contextMenus.text),i.element=t),(i||{}).gizmo;let o=i&&i.gizmo&&(i.gizmo.handles||[]).filter((t=>"inline"===(t||{}).type)).length>0;i&&"core"!=i.editingElement?setTimeout((()=>{(t&&t.parentNode||!o)&&(this.canMoveElement=!0)}),250):this.activeNode&&("LI"===this.activeNode.tagName||this._HTMLInlineTextDecorationTest(this.activeNode))?this.canMoveElement=!1:this.canMoveElement=!0}this.contextMenus.parent.setPosition()}),50)}}__addActiveVisible(){for(var t in this.contextMenus)("add"!=t||this.__activeHover)&&this.contextMenus[t].classList.add("hax-context-menu-active")}__dropActiveVisible(){for(var t in this.contextMenus)this.contextMenus[t].classList.remove("hax-context-menu-active");this.__activeHover=null}haxMoveGridPlate(t,e=1){this.___moveLock=!0;let i=t?t.parentNode:void 0,o=e>0?t.nextElementSibling:t.previousElementSibling,a=this.__layoutSlots(i)||[],n=t.getAttribute("slot"),s=n?a.indexOf(n):-1,r=a[s+e];return o&&(!n||o.getAttribute("slot")),!o||n&&n!==o.getAttribute("slot")?r?t.setAttribute("slot",r):t&&i&&i!==this&&(o=e>0?i.nextElementSibling:i,r=i.getAttribute("slot"),o&&(i.parentNode.insertBefore(t,o),r&&t.setAttribute("slot",r))):i.insertBefore(t,e>0?o.nextElementSibling:o),this.scrollHere(t),this.positionContextMenus(t),!0}async haxGridPlateOps(t=!0,e="right",i=this.activeNode){let o=!1;if("GRID-PLATE"===i.tagName){if(t)switch(i.layout){case"1":i.layout="1-1",o=!0;break;case"1-1":i.layout="1-1-1",o=!0;break;case"1-1-1":i.layout="1-1-1-1",o=!0;break;case"1-1-1-1":i.layout="1-1-1-1-1",o=!0;break;case"1-1-1-1-1":i.layout="1-1-1-1-1-1",o=!0}else switch(i.layout){case"1-1":let t;await i.childNodes.forEach((e=>{e.tagName&&(t=e.cloneNode(!0),i.getAttribute("slot")?t.setAttribute("slot",i.getAttribute("slot")):t.removeAttribute("slot"),i.parentNode.insertBefore(t,i))})),ua.activeNode=t,setTimeout((()=>{i.remove()}),0),o=!0;break;case"1-1-1":i.layout="1-1",o=!0;break;case"1-1-1-1":i.layout="1-1-1",o=!0;break;case"1-1-1-1-1":i.layout="1-1-1-1",o=!0;break;case"1-1-1-1-1-1":i.layout="1-1-1-1-1",o=!0}if(o){let t=this.contextMenus.plate.shadowRoot.querySelector("#right"),o=this.contextMenus.plate.shadowRoot.querySelector("#rightremove");t.disabled=!1,o.disabled=!1,"1-1-1-1-1-1"==i.layout&&(t.disabled=!0),"left"==e&&i.childNodes.forEach((t=>{if(t.tagName){let e=parseInt(t.getAttribute("slot").replace("col-",""),10)+1;t.setAttribute("slot",`col-${e}`)}}))}}else{let t=document.createElement("grid-plate");t.layout="1-1",t.disableResponsive=!0,i.getAttribute("slot")&&t.setAttribute("slot",i.getAttribute("slot"));let o="2";"right"==e&&(o="1");let a=i.cloneNode(!0);a.setAttribute("slot","col-"+o),t.appendChild(a),i.parentNode.insertBefore(t,i),setTimeout((()=>{i.remove()}),0)}await ua.refreshActiveNodeForm()}haxReplaceNode(t,e){try{null==t&&(t=this.__oldActiveNode),!t.replaceWith&&ua._tmpRange&&(t=ua._tmpRange,ua._tmpRange=null),t&&t.getAttribute&&null!=t.getAttribute("slot")&&e.setAttribute("slot",t.getAttribute("slot")),t.replaceWith(e)}catch(t){console.warn(t)}return e}haxChangeTagName(t,e,i=!0){for(var o=document.createElement(e),a=0,n=t.attributes.length;a<n;++a){let e=t.attributes.item(a).nodeName,i=t.attributes.item(a).value;try{o.setAttribute(e,i)}catch(e){console.warn(t.attributes),console.warn(e)}}i&&(o.innerHTML=t.innerHTML.trim()),"ul"==e||"ol"==e?"<br />"==o.innerHTML?o.innerHTML="<li><br /></li>":"ul"!=t.tagName.toLowerCase()&&"ol"!=t.tagName.toLowerCase()&&(o.innerHTML="<li>"+t.innerHTML.trim().replace(/<br\/>/g,"</li>\n<li>").replace(/<br>/g,"</li>\n<li>")+"</li>"):"ul"!=t.tagName.toLowerCase()&&"ol"!=t.tagName.toLowerCase()||(o.innerHTML=o.innerHTML.replace(/<ul>/g,"").replace(/<\/ul>/g,"").replace(/<li><\/li>/g,"").replace(/<li>/g,"").replace(/<\/li>/g,"<br/>"));try{t.replaceWith(o),i&&setTimeout((()=>{let t=o.children;t[0]&&t.tagName?t[0].focus():o.focus()}),10)}catch(e){console.warn(e),console.warn(o),console.warn(t)}return o}haxDeleteNode(t){if(t.previousElementSibling)ua.activeNode=t.previousElementSibling;else if(t.nextElementSibling)ua.activeNode=t.nextElementSibling;else{this.haxInsert("p","",{});try{var e=document.createRange(),i=ua.getSelection();e.setStart(this.activeNode,0),e.collapse(!0),i.removeAllRanges(),i.addRange(e),this.activeNode.focus()}catch(t){console.warn(t)}}try{return t.remove()}catch(t){console.warn(t)}}importContent(t,e=!0){e&&f(this,"*"),setTimeout((()=>{t=A(t);let e=document.createElement("div");for(e.insertAdjacentHTML("beforeend",t);null!==e.firstChild;)if(void 0!==e.firstChild.tagName)if(ua._isSandboxed&&"iframe"===e.firstChild.tagName.toLowerCase()){for(var i=document.createElement("webview"),o=0,a=e.firstChild.attributes.length;o<a;++o){var n=e.firstChild.attributes.item(o).nodeName,s=e.firstChild.attributes.item(o).value;"height"!==n&&"width"!==n||i.style[n],i.setAttribute(n,s)}this.appendChild(i)}else this.appendChild(e.firstChild);else e.removeChild(e.firstChild)}),0)}sortGridSlots(t=this.activeNode){let e=ua.haxSchemaFromTag(t.tagName);if("grid"!==e.type)return;let i="GRID-PLATE"===t.tagName?t.layout.split("-").map(((t,e)=>`col-${e}`)):ua.slotsFromSchema(e).map((t=>t.slot));i.reverse().forEach(((e,i)=>{0==i?t.querySelectorAll(`[slot=${e}]`).forEach((e=>t.append(e))):[...t.querySelectorAll(`[slot=${e}]`)].reverse().forEach((e=>t.insertBefore(e,t.firstChild)))}))}async _haxContextOperation(t){let e=t.detail,i=b(t),o=i&&i[0]?i[0].getAttribute("data-slot"):void 0;switch(e.eventName){case"insert-above-active":if(this.activeNode&&this.activeNode.previousElementSibling)this.haxInsert("p","",{},this.activeNode.previousElementSibling);else{let t=document.createElement("p");this.insertBefore(t,this.activeNode)}break;case"insert-below-active":this.haxInsert("p","",{});break;case"move-to-slot":o&&this.activeNode&&ua.isGridPlateElement(this.activeNode.parentNode)&&(this.activeNode.slot=o,this.sortGridSlots(this.activeNode.parentNode));break;case"insert-into-active":if(o&&this.activeNode&&ua.isGridPlateElement(this.activeNode)){let t=document.createElement("p");t.slot=o,this.activeNode.append(t),this.haxInsert("p","",{slot:o},t),t.remove(),this.sortGridSlots()}break;case"hax-select-grid":if(i[0]&&i[0].eventData){let t=i[0].eventData;this.setActiveNode(t,!0),this.positionContextMenus(t)}break;case"hax-select-grid-item":if(i[0]&&i[0].eventData){let t=i[0].eventData,e=t.target,o=t.slot,a=t.index,n=t.grid,s=t.editMode,r=t.invisible?n:[...n.children].filter((t=>o&&""!==o?t.slot===o:!t.slot||""===t.slot))[a]||e;n&&s?this.setSlotEditMode(n,s,r):(this.setActiveNode(node,!0),this.positionContextMenus(node))}break;case"hax-edit-element-toggle":if(i[0]&&i[0].eventData){let t=i[0].eventData;t&&t.target&&t.editMode&&this.toggleElementEditMode(t.target,t.editMode)}break;case"hax-source-view-toggle":if(this.activeNode.__haxSourceView){this.activeNode.__haxSourceView=!1;let t=await ua.runHook(ua.activeEditingElement,"activeElementChanged",[this.activeNode,!1]),e=ua.haxSchemaFromTag(this.activeNode.tagName.toLowerCase());if(this.activeNode&&this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&t.setAttribute("slot",this.activeNode.getAttribute("slot")),e.saveOptions&&e.saveOptions.unsetAttributes&&e.saveOptions.unsetAttributes.length)for(var a in e.saveOptions.unsetAttributes)t.removeAttribute(e.saveOptions.unsetAttributes[a]);this.__applyNodeEditableState(t,this.editMode),x(ua.activeEditingElement),ua.activeEditingElement=null,this.viewSourceToggle=!1}else this.activeNode.__haxSourceView=!0,ua.activeEditingElement=document.createElement("code-editor"),ua.activeEditingElement.language="html",ua.activeEditingElement.title="",ua.activeEditingElement.theme="vs",ua.activeEditingElement.fontSize=12,ua.activeEditingElement.wordWrap=!0,this.viewSourceToggle=!0,import("./b5891f85.js"),this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&ua.activeEditingElement.setAttribute("slot",this.activeNode.getAttribute("slot")),this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.__applyDragDropState(this.activeNode,!1),this.activeNode.classList.remove("hax-active"),ua.testHook(this.activeNode,"preProcessNodeToContent")&&(this.activeNode=await ua.runHook(this.activeNode,"preProcessNodeToContent",[this.activeNode])),E(this.activeNode,ua.activeEditingElement),ua.activeEditingElement.focus();break;case"hax-full-text-editor-toggle":if(this.activeNode.__haxSourceView){this.activeNode.__haxSourceView=!1;let t=await ua.runHook(ua.activeEditingElement,"activeElementChanged",[this.activeNode,!1]),e=ua.haxSchemaFromTag(this.activeNode.tagName.toLowerCase());if(this.activeNode&&this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&t.setAttribute("slot",this.activeNode.getAttribute("slot")),e.saveOptions&&e.saveOptions.unsetAttributes&&e.saveOptions.unsetAttributes.length)for(var a in e.saveOptions.unsetAttributes)t.removeAttribute(e.saveOptions.unsetAttributes[a]);this.__applyNodeEditableState(t,this.editMode),x(ua.activeEditingElement),ua.activeEditingElement=null,this.viewSourceElement=ua.activeEditingElement}else this.activeNode.__haxSourceView=!0,import("./62266fa6.js").then((()=>{ua.activeEditingElement=document.createElement("rich-text-editor"),ua.activeEditingElement.type="rich-text-editor-toolbar-full",this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&ua.activeEditingElement.setAttribute("slot",this.activeNode.getAttribute("slot")),this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.__applyDragDropState(this.activeNode,!1),this.activeNode.classList.remove("hax-active"),E(this.activeNode,ua.activeEditingElement),this.viewSourceElement=ua.activeEditingElement}));break;case"text-tag":ua.activeNode=this.haxChangeTagName(this.activeNode,e.value),this.positionContextMenus();break;case"text-tag-ul":this.contextMenus.text.realSelectedValue="ul",ua.activeNode=this.haxChangeTagName(this.activeNode,"ul"),this.positionContextMenus();break;case"text-tag-ol":this.contextMenus.text.realSelectedValue="ol",ua.activeNode=this.haxChangeTagName(this.activeNode,"ol"),this.positionContextMenus();break;case"text-align-left":this.activeNode.style.textAlign=null;break;case"hax-transform-node":this.replaceElementWorkflow();break;case"hax-plate-create-right":this.haxGridPlateOps();break;case"hax-plate-remove-right":this.haxGridPlateOps(!1);break;case"hax-plate-duplicate":this.haxDuplicateNode(this.activeNode);break;case"hax-plate-delete":null!=this.activeNode&&this.haxDeleteNode(this.activeNode);break;case"hax-plate-up":this.haxMoveGridPlate(this.activeNode,-1);break;case"hax-plate-down":this.haxMoveGridPlate(this.activeNode);break;case"content-edit":"content-edit"===ua.haxTray.trayDetail&&(ua.haxTray.collapsed=!ua.haxTray.collapsed),ua.haxTray.trayDetail="content-edit"}}_focusIn(t){this.__mouseDown||this.__focusLogic(t.target)&&(t.stopPropagation(),t.stopImmediatePropagation())}__focusLogic(t,e=!0){let i=!1;if(this.editMode&&!this.__tabTrap){let o=t;"SPAN"===o.tagName&&ua.isTextElement(o.parentNode)&&""==o.parentNode.getAttribute("slot")&&(o=t.parentNode);let a=null;if(this._validElementTest(o)&&o.parentNode&&o.parentNode.tagName){if("P"===o.parentNode.tagName&&""==o.parentNode.getAttribute("slot"))a=o,i=!0;else{for(;o.parentNode&&o.parentNode.tagName&&"HAX-BODY"!=o.parentNode.tagName;)null===a&&"B"!==o.tagName&&"I"!==o.tagName&&"STRONG"!==o.tagName&&"EM"!==o.tagName&&(a=o),o=o.parentNode;null===a?a=o:ua.isGridPlateElement(o)}(this.activeNode&&this.activeNode.parentNode!==o&&!o.classList.contains("ignore-activation")||o.haxUIElement||o.classList.contains("ignore-activation"))&&(i=!0),a.haxUIElement||a.classList.contains("ignore-activation")||(ua.activeNode=a,this.activeNode=a,setTimeout((()=>{if(e&&!this.__mouseDown&&ua.isTextElement(a))try{var t=document.createRange(),i=ua.getSelection();t.setStart(this.activeNode,0),t.collapse(!0),i.removeAllRanges(),i.addRange(t),this.activeNode.focus()}catch(t){console.warn(t)}this.positionContextMenus(a)}),0),i=!0)}}else this.__tabTrap=!1;return i}scrollHere(t){setTimeout((()=>{"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!0):t.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),0)}undo(){super.undo(),setTimeout((()=>{let t=this.querySelector(".hax-active");t?(this.__focusLogic(t),this.scrollHere(t)):this.hideContextMenus()}),0)}redo(){super.redo(),setTimeout((()=>{let t=this.querySelector(".hax-active");t?(this.__focusLogic(t),this.scrollHere(t)):this.hideContextMenus()}),0)}async _editModeChanged(t,e){if(void 0!==e){if(this._applyContentEditable(t),t)if(this.children&&this.children[0]&&this.children[0].focus)this.__focusLogic(this.children[0]);else{this.haxInsert("p","",{});try{var i=document.createRange(),o=ua.getSelection();i.setStart(this.activeNode,0),i.collapse(!0),o.removeAllRanges(),o.addRange(i),this.activeNode.focus()}catch(t){console.warn(t)}}else this.activeNode&&(this.unsetSlotEditMode(this.activeNode),this.unsetElementEditMode(this.activeNode));setTimeout((()=>{this.undoStack.undoStackLimit=50,this.undoStack.undoStackPosition=-1,this.undoStack.commands=[],this.undoStack.changed(),this.undoStackInitialValue=this.innerHTML,this.undoStackPrevValue=this.undoStackInitialValue}),0)}if(0==t){x(ua.activeEditingElement),ua.activeEditingElement=null,this.removeAttribute("contenteditable"),this.hideContextMenus();let t=this.querySelectorAll("[contenteditable],.hax-active");for(var a=0;a<t.length;a++){let e=t[a];e.removeAttribute("contenteditable"),e.classList.remove("hax-active")}}let n="slot"===this.shadowRoot.querySelector("#body").localName?this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}):[];0===n.length&&(n=this.shadowRoot.querySelector("#body").children);for(a=0;a<n.length;a++)await ua.runHook(n[a],"editModeChanged",[t])}_haxResolvePreviousElement(t){for(t=t.previousElementSibling;null!=t&&void 0!==t.tagName&&"HAX-"===t.tagName.substring(0,4);)t=t.previousElementSibling;return t}_validElementTest(t){return!(t.haxUIElement||!t.tagName||["TEMPLATE","HAX-BODY","RICH-TEXT-EDITOR-CLIPBOARD","RICH-TEXT-EDITOR-PROMPT","RICH-TEXT-EDITOR-HIGHLIGHT","HAX-APP-SEARCH-RESULT","FAKE-HAX-BODY-END"].includes(t.tagName))&&(!this._HTMLInlineTextDecorationTest(t)||"HAX-BODY"==t.parentNode)}_HTMLInlineTextDecorationTest(t){return["span","b","strong","i","em",...Object.keys(window.HaxTextEditorToolbarConfig.inlineGizmos||{})].includes(t.tagName.toLowerCase())}_HTMLPrimativeTest(t){return null!=t&&void 0!==t.tagName&&-1==t.tagName.indexOf("-")}_applyContentEditable(t,e=this.shadowRoot.querySelector("#body")){let i="slot"===e.localName?e.assignedNodes({flatten:!0}):[];0===i.length&&(i=e.children);for(var o=0;o<i.length;o++)if(this._validElementTest(i[o])&&(!t||!0!==i[o].getAttribute("contenteditable")&&"true"!=i[o].getAttribute("contenteditable")&&"contenteditable"!=i[o].getAttribute("contenteditable"))&&this.__applyNodeEditableState(i[o],t),ua.isGridPlateElement(i[o])){let e=i[o].querySelectorAll("*");for(var a=0;a<e.length;a++)this._validElementTest(e[a])&&this.__applyNodeEditableState(e[a],t)}}__layoutDropEvent(t,e){[...e.querySelectorAll(".active")].forEach((t=>{t.classList.remove("active")})),[...e.shadowRoot.querySelectorAll(".active")].forEach((t=>{t.classList.remove("active")}))}__layoutDragEnter(t){t.target.classList.add("active")}__layoutDragLeave(t){t.target.classList.remove("active")}__layoutMonitor(t){var e=b(t);e[0]&&e[0].assignedNodes&&e[0].assignedNodes().length&&e[0].parentNode?e[0].parentNode.classList.add("has-nodes"):e[0].parentNode&&e[0].parentNode.classList.remove("has-nodes")}__getLayoutOrder(t,e){if(!e.shadowRoot)return!1;let i=t.getAttribute("slot"),o=e.shadowRoot.querySelector(`[slot=${i}]`);return[...e.shadowRoot.querySelectorAll("[slot]")].map((t=>t.parentNode)).indexOf(o)||-1}__layoutCanMove(t,e,i){if(!e.shadowRoot)return!1;let o=e.shadowRoot.querySelector(`[slot=${slot}]`),a=[...e.shadowRoot.querySelectorAll("[slot]")].map((t=>t.parentNode)),n=(a.indexOf(o)||-1)+(i?-1:1);return n>=a[0]&&n<=a[a.length-1]}__layoutMove(t,e,i){if(!e.shadowRoot)return!1;let o=e.shadowRoot.querySelector(`[slot=${s}]`),a=[...e.shadowRoot.querySelectorAll("[slot]")].map((t=>t.parentNode)),n=a.indexOf(o)||-1,s=a[n+(i?-1:1)];s&&t.setAttribute("slot",s)}async __sortLayoutChildren(t){t.setAttribute("hax-layout-sorting",!0);try{let e=Array.prototype.reduce.call(t.querySelectorAll("[slot]"),(function(t,e){return t}),[]);e=e.sort((function(e,i){return this.__getLayoutOrder(e,t)<this.__getLayoutOrder(i,t)?-1:1})),await e.forEach((e=>{e.parentNode===this&&t.appendChild(e)}))}catch(t){console.warn(t)}t.removeAttribute("hax-layout-sorting")}__layoutSlotValid(t,e){return this.__layoutSlots(e).includes(t.getAttribute("slot"))}__layoutSlots(t){return t.shadowRoot?[...t.shadowRoot.querySelectorAll("[slot]")].map((t=>t.getAttribute("name"))):[]}__applyDragDropState(t,e){let i={drop:e=>this.__layoutDropEvent.bind(this)(e,t),dragenter:this.__layoutDragEnter.bind(this),dragleave:this.__layoutDragEnter.bind(this),slotchange:this.__layoutMonitor.bind(this)};if(t.setAttribute("data-hax-layout",!0),ua.isGridPlateElement(t)&&t.setAttribute("data-hax-grid",!0),e&&t.setAttribute("data-hax-ray",e),e&&t.shadowRoot){t.addEventListener("drop",i.drop);let e=[...t.shadowRoot.querySelectorAll("drag-enabled")],o=[...t.shadowRoot.querySelectorAll("slot")];e.forEach((t=>{t.addEventListener("dragenter",i.dragenter),t.addEventListener("dragleave",i.dragleave)})),o.forEach((t=>t.addEventListener("slotchange",i.slotchange))),t.haxLayoutObserver=new MutationObserver((e=>{t.getAttribute("hax-layout-sorting")||(e.forEach((e=>{e.addedNodes.forEach((e=>{e.tagName&&e!==this&&e.parentElement&&"HAX-BODY"!==e.parentElement.tagName&&!this.__layoutSlotValid(e,t)&&this.__layoutSlots(t).length>0&&e.setAttribute("slot",this.__layoutSlots(t)[0])}))})),this.__sortLayoutChildren(t))})),t.haxLayoutObserver.observe(this,{childList:!0})}else if(t.shadowRoot){t.haxLayoutObserver&&t.haxLayoutObserver.disconnect(),this.removeEventListener("drop",i.drop);let e=[...t.shadowRoot.querySelectorAll("drag-enabled")],o=[...t.shadowRoot.querySelectorAll("slot")];e.forEach((t=>{t.removeEventListener("dragenter",i.dragenter),t.removeEventListener("dragleave",i.dragleave)})),o.forEach((t=>t.removeEventListener("slotchange",i.slotchange))),t.removeAttribute("data-hax-ray")}}__isLayout(t){return t&&ua.haxSchemaFromTag(t.tagName)&&"grid"===ua.haxSchemaFromTag(t.tagName).type}__applyNodeEditableState(t,e=!0){let i;if(!t.tagName)return!1;let o=t.tagName.replace("-"," ").toLowerCase(),a=Qi(ua.gizmoList).findIndex((e=>{if(e)return e.tag===t.tagName.toLowerCase()}));if(-1!==a&&(o=Qi(ua.gizmoList)[a].title),"IMG"==t.tagName&&t.setAttribute("draggable",!1),e?(this.__applyDragDropState(t,o),i="addEventListener"):(this.__applyDragDropState(t,!1),i="removeEventListener"),t[i]("drop",this.dropEvent.bind(this)),t[i]("dragenter",this.dragEnter.bind(this)),t[i]("dragleave",this.dragLeave.bind(this)),t[i]("dragover",(t=>{this.__dragMoving=!0,t.preventDefault()})),this._HTMLPrimativeTest(t)&&(e?t.setAttribute("contenteditable",e):t.removeAttribute("contenteditable"),t.querySelectorAll("a").length>0)){let o=t.querySelectorAll("a");for(var n=0,s=o.length;n<s;n++)e?o[n].setAttribute("contenteditable",e):o[n].removeAttribute("contenteditable"),o[n][i]("click",(t=>{t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}))}}undoManagerStackLogic(t){this.__dragMoving||(this.querySelectorAll(".hax-hovered").forEach((t=>{t.classList.remove("hax-hovered")})),super.undoManagerStackLogic(t))}dropEvent(t){if(this.editMode){this.__dragMoving=!1,this.undoManagerStackLogic({}),clearTimeout(gn),ua._lockContextPosition=!1,ua.haxTray.activeTab="item-1";var e,i=null,o=b(t);if(null!==(i=t.target.closest("[data-hax-layout]")&&t.target.parentNode!=t.target.closest("[data-hax-layout]")?t.target.closest("[data-hax-layout]"):t.target.closest("[contenteditable],img")?t.target.closest("[contenteditable],img"):t.originalTarget?t.originalTarget:t.target).getAttribute("data-hax-lock"))return!1;o[0].classList.contains("column")?this.__slot=o[0].getAttribute("id").replace("col","col-"):i.getAttribute("slot")&&(this.__slot=i.getAttribute("slot")),ua.activeNode=i,this.querySelectorAll(".hax-hovered").forEach((t=>{t.classList.remove("hax-hovered")})),this.querySelectorAll(".active").forEach((t=>{t.classList.remove("active")}));try{if(null===ua.__dragTarget&&t.dataTransfer&&t.dataTransfer.items&&t.dataTransfer.items.length>0&&"file"===t.dataTransfer.items[0].kind){t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation();let i=document.createElement("p");t.target.closest("[data-hax-layout]")&&t.target.parentNode!=t.target.closest("[data-hax-layout]")?e=t.target.closest("[data-hax-layout]"):t.target.closest("[contenteditable],img")&&(e=t.target.closest("[contenteditable],img")),e&&(e.tagName&&"HAX-BODY"!==e.tagName||!e.getAttribute("data-hax-layout"))||this.__isLayout(o[0])?(e.getAttribute("slot")?i.setAttribute("slot",e.getAttribute("slot")):o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):i.removeAttribute("slot"),e.parentNode.insertBefore(i,e)):(o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):e&&"HAX-BODY"===e.tagName&&i.getAttribute("slot")&&i.removeAttribute("slot"),e?e.appendChild(i):this.appendChild(i)),t.placeHolderElement=i,this.dispatchEvent(new CustomEvent("place-holder-file-drop",{bubbles:!0,cancelable:!0,composed:!0,detail:t}))}else{if(i=ua.__dragTarget,e=t.target,t.target.closest("[data-hax-layout]")&&t.target.parentNode!=t.target.closest("[data-hax-layout]")?e=t.target.closest("[data-hax-layout]"):t.target.closest("[contenteditable],img")&&(e=t.target.closest("[contenteditable],img")),e&&i&&this._validElementTest(i)&&i!==e){try{"HAX-BODY"!==e.tagName&&!this.__isLayout(e)||this.__isLayout(o[0])?(e.getAttribute("slot")?i.setAttribute("slot",e.getAttribute("slot")):o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):i.removeAttribute("slot"),e.parentNode.insertBefore(i,e)):(o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):"HAX-BODY"===e.tagName&&i.getAttribute("slot")&&i.removeAttribute("slot"),e.appendChild(i))}catch(t){console.warn(t)}t.preventDefault(),t.stopPropagation()}i&&this._validElementTest(i)&&"function"==typeof i.focus&&(ua.activeNode=i,ua.testHook(ua.activeNode,"trayDragNDropToNode")&&ua.runHook(ua.activeNode,"trayDragNDropToNode",[ua.activeNode]),this.dispatchEvent(new CustomEvent("hax-drop-focus-event",{bubbles:!0,cancelable:!0,composed:!0,detail:this.activeNode})),this.scrollHere(this.activeNode),this.positionContextMenus())}}catch(t){console.warn(t)}}ua.__dragTarget=null,this.__manageFakeEndCap(!1)}dragEnter(t){this.editMode&&t.target&&ua.__dragTarget&&(this.__dragMoving=!0,t.preventDefault(),t.target&&t.target.classList&&t.target.classList.add("hax-hovered"),this.handleMousemove(t))}handleMousemove(t){var e=t.clientX,i=t.clientY,o=document.documentElement.clientWidth,a=document.documentElement.clientHeight,n=a-200,s=o-200,r=e<200,l=e>s,d=i<200,c=i>n;if(r||l||d||c){var h=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.body.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth),u=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.body.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),p=h-o,m=u-a;!function t(){clearTimeout(gn),function(){var t=window.pageXOffset,o=window.pageYOffset,a=o>0,h=o<m,u=t>0,g=t<p,b=t,f=o;if(r&&u){b-=25*((200-e)/200)}else if(l&&g){b+=25*((e-s)/200)}if(d&&a){f-=25*((200-i)/200)}else if(c&&h){f+=25*((i-n)/200)}return b=Math.max(0,Math.min(p,b)),f=Math.max(0,Math.min(m,f)),(b!==t||f!==o)&&(window.scrollTo(b,f),!0)}()&&(gn=setTimeout(t,30))}()}else clearTimeout(gn)}dragLeave(t){this.editMode&&t.target&&t.target.classList&&(this.__dragMoving=!0,t.target.classList.remove("hax-hovered"))}toggleElementEditMode(t,e){t[e]?this.unsetElementEditMode(t,e):this.setElementEditMode(t,e)}unsetElementEditMode(t=this.activeNode){if(!t)return;let e=t.getAttribute("data-element-edit-mode")||"editMode";t[e]=!1,this.__applyNodeEditableState(t,this.editMode),ua.activeEditingElement=null,this.editElementToggled=!1,this.__ignoreActive=!1}setElementEditMode(t,e="editMode"){t.setAttribute("data-element-edit-mode",e),t[e]=!0,ua.activeEditingElement=t,this.editElementToggled=!1,this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.activeNode.classList.remove("hax-active"),this.__applyDragDropState(this.activeNode,!1),ua.activeEditingElement.focus()}unsetSlotEditMode(t){let e=t.getAttribute("data-grid-saved-settings")?JSON.parse(t.getAttribute("data-grid-saved-settings")):void 0;Object.keys(e||{}).forEach((i=>t[i]=e[i])),t.removeAttribute("data-grid-saved-settings")}setSlotEditMode(t,e,i){let o=t.getAttribute("data-grid-saved-settings")?JSON.parse(t.getAttribute("data-grid-saved-settings")):{},a=Object.keys(o);Object.keys(e||{}).forEach((i=>{a.includes(i)||(o[i]=t[i]),t[i]=e[i]})),t.setAttribute("data-grid-saved-settings",JSON.stringify(o))}async _activeNodeChanged(t,e){if(window.SimplePopoverManager.requestAvailability().opened=!1,this.contextMenus.plate.disableDuplicate=!1,this.contextMenus.plate.disableOps=!1,this.contextMenus.plate.disableItemOps=!1,this.contextMenus.plate.canMoveElement=this.canMoveElement,await this.querySelectorAll(".hax-active").forEach((t=>{t.classList.remove("hax-active")})),t&&e&&ua.isGridPlateElement(t)&&(this.__ignoreActive=!0),this.editMode&&null!=t&&t.parentNode){let e=t.tagName.toLowerCase();t.classList.add("hax-active"),(ua.isTextElement(t)||"HR"===t.tagName||ua.isGridPlateElement(t))&&null===t.getAttribute("data-hax-lock")&&null===t.parentNode.getAttribute("data-hax-lock")?(t.setAttribute("contenteditable",!0),this.setAttribute("contenteditable",!0)):(t.removeAttribute("contenteditable"),this.removeAttribute("contenteditable")),this._keepContextVisible(),this.contextMenus.text.realSelectedValue=e}else null===t&&(this.hideContextMenus(),this.__oldActiveNode=e);if(this.editMode&&await ua.runHook(e,"activeElementChanged",[e,!1])&&(this.__ignoreActive=!0),this.editMode&&await ua.runHook(t,"activeElementChanged",[t,!0])&&(this.__ignoreActive=!0),this.editMode&&e){let t=ua.haxSchemaFromTag(e.tagName.toLowerCase());if("core"!=t.editingElement||e.parentNode&&e.parentNode.haxUIElement&&e.parentNode===ua.activeEditingElement){this.__ignoreActive=!0;let o=await ua.runHook(ua.activeEditingElement,"activeElementChanged",[e,!1]);if(o&&o!==e){if(e&&e.getAttribute&&null!=e.getAttribute("slot")&&o.setAttribute("slot",e.getAttribute("slot")),t.saveOptions&&t.saveOptions.unsetAttributes&&t.saveOptions.unsetAttributes.length)for(var i in t.saveOptions.unsetAttributes)o.removeAttribute(t.saveOptions.unsetAttributes[i]);this.__applyNodeEditableState(o,this.editMode)}x(ua.activeEditingElement),ua.activeEditingElement=null}}if(this.editMode&&t){let e=ua.haxSchemaFromTag(t.tagName);if(e&&e.editingElement&&"core"!=e.editingElement){if(e.editingElement.import){let t=new URL("./../../",import.meta.url).href;await import(`${t}${e.editingElement.import}`)}ua.activeEditingElement=document.createElement(e.editingElement.tag),t.getAttribute&&null!=t.getAttribute("slot")&&ua.activeEditingElement.setAttribute("slot",t.getAttribute("slot")),e.editingElement.callback&&e.editingElement.callback(ua.activeEditingElement),this.__ignoreActive=!0,E(t,ua.activeEditingElement),await ua.runHook(ua.activeEditingElement,"activeElementChanged",[t,!0])}}!e||!e.parentNode||t&&t.parentNode&&t.parentNode===e.parentNode||this.unsetSlotEditMode(e.parentNode),this.unsetElementEditMode(e)}_getPosition(t){return{x:t.offsetLeft-t.scrollLeft+t.clientLeft,y:t.offsetTop-t.scrollTop+t.clientTop}}_showContextMenu(t){t.setAttribute("on-screen","on-screen"),t.classList.add("hax-context-visible","hax-context-menu-active")}_getContextContainer(t){let e=t&&t.parentNode?t.parentNode:void 0;return e&&e.nodeType?1==e.nodeType?e:e.host:void 0}_hideContextMenu(t){t&&(t.removeAttribute("on-screen"),t.classList.remove("hax-context-visible"),t.classList.remove("hax-context-menu-active"))}_tabKeyPressed(){if(this.activeNode&&ua.getRange().cloneRange)try{let e=!1,i=this.activeNode.parentNode;const o=this.activeNode.parentNode.tagName;let a=ua.getRange().cloneRange();var t=a.commonAncestorContainer.tagName;if(void 0===t&&(t=a.commonAncestorContainer.parentNode.tagName),["UL","OL","LI"].includes(o)||["UL","OL","LI"].includes(t))this.polyfillSafe&&(this.__tabTrap=!0,this.__indentTrap=!0,document.execCommand("indent"));else for(;!e;)null==i.nextSibling?e=!0:"function"===i.nextSibling.focus?(i.nextSibling.focus(),e=!0):i=i.nextSibling}catch(t){console.warn(t)}}_tabBackKeyPressed(){if(this.activeNode&&ua.getRange().cloneRange)try{let e=this.activeNode.parentNode;const i=this.activeNode.parentNode.tagName;let o=ua.getRange().cloneRange();var t=o.commonAncestorContainer.tagName;if(void 0===t&&(t=o.commonAncestorContainer.parentNode.tagName),["UL","OL","LI"].includes(i)||["UL","OL","LI"].includes(t))this.polyfillSafe&&(this.__tabTrap=!0,this.__indentTrap=!0,document.execCommand("outdent"));else{if(null!=e)for(;null!=e&&!this._validElementTest(e);)e=e.previousSibling;null!=e&&setTimeout((()=>{e.focus()}),50)}}catch(t){console.warn(t)}}}window.customElements.define(bn.tag,bn);
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class fn extends o{static get styles(){return[a`:host{display:block;margin-bottom:var(--a11y-tabs-content-padding);border:1px solid var(--a11y-tabs-border-color);padding:var(--a11y-tabs-content-padding)}.sr-only{position:absolute;left:-99999px;height:0;overflow:hidden}.label-heading{display:flex;align-items:center;color:var(--a11y-tabs-selected-color,var(--a11y-tabs-focus-color));background-color:var(--a11y-tabs-background);font-weight:var(--a11y-tabs-selected-font-weight,normal);border-bottom:1px solid var(--a11y-tabs-border-color);margin:0 0 calc(var(--a11y-tabs-content-padding)/ 2);padding:0 0 calc(var(--a11y-tabs-content-padding)/ 2);border-radius:var(--a11y-tabs-horizontal-border-radius,2px) var(--a11y-tabs-horizontal-border-radius,2px) 0 0}simple-icon-lite{margin-right:1em}@media screen{:host{border:none;height:var(--a11y-tabs-tab-height,--a11y-tabs-height);overflow:var(--a11y-tabs-tab-overflow,--a11y-tabs-overflow);margin-bottom:unset}:host([inactive]){display:none}#content-inner{max-width:100%;overflow:auto}.label-heading{display:none}}`]}render(){return n` <span class="sr-only">Tab ${this.xOfY}</span> <div class="label-heading" part="heading"> <simple-icon-lite class="icon" ?hidden="${!this.icon}" .icon="${this.icon}" part="icon"> </simple-icon-lite> <slot name="label" ?hidden="${!this.label}"></slot> <div class="label" part="label">${this.label}</div> </div> <div id="content-inner" part="content"><slot></slot></div> <span class="sr-only"> End of tab ${this.xOfY}. Back to <a href="#${this.id}">tabs</a>. </span> `}static get haxProperties(){return{canScale:!1,canPosition:!1,canEditSource:!0,gizmo:{title:"Tab",description:"A single tab.",icon:"view-day",color:"grey",groups:["Content","Presentation","Tabs"]},settings:{configure:[{property:"icon",title:"Tab Icon",inputMethod:"iconpicker"},{property:"disabled",title:"Disabled",inputMethod:"boolean"},{property:"label",title:"Tab Label",inputMethod:"textfield"},{slot:"",title:"Tab Content",description:"A content of the tab.",inputMethod:"code-editor"}],advanced:[{property:"id",title:"Unique ID",inputMethod:"textfield"},{property:"flag",title:"Optional Flag Text",inputMethod:"textfield"},{property:"flagIcon",title:"Optional Flag Icon",inputMethod:"iconpicker"}]}}}static get properties(){return{ariaLabelledby:{type:String,reflect:!0,attribute:"aria-labelledby"},flag:{type:String,reflect:!0},flagIcon:{type:String,attribute:"flag-icon"},disabled:{type:Boolean,reflect:!0,attribute:"disabled"},icon:{type:String},id:{type:String,reflect:!0,attribute:"id"},inactive:{type:Boolean,reflect:!0,attribute:"inactive"},label:{type:String},order:{type:Number},role:{type:String,reflect:!0,attribute:"role"},tabindex:{type:Number},total:{type:Number}}}constructor(){super(),this.disabled=!1,this.hidden=!1,this.order=1,this.role="tabpanel",this.total=1,this.tabindex=0,this.flag="",this.addEventListener("a11y-tab-flag",(t=>this.handleFlag(t)))}get observer(){return new MutationObserver((t=>this._labelChanged()))}get xOfY(){return`${this.order} of ${this.total}`}connectedCallback(){super.connectedCallback(),this._labelChanged(),this.observer.observe(this,{childList:!0})}disconnectedCallback(){this.observer.disconnect(),this.removeEventListener("a11y-tab-flag",(t=>this.handleFlag(t))),this._fireTabChanged(),super.disconnectedCallback()}updated(t){t.forEach(((t,e)=>{["id","order"].includes(e)&&!this.id&&(this.id=`tab-${this.order}`),["label","order"].includes(e)&&!this.label&&this._labelChanged(),"flag"===e&&this._fireTabChanged(),"flagIcon"===e&&this._fireTabChanged(),"icon"===e&&this._fireTabChanged(),"id"===e&&(this.ariaLabelledby=`${this.id}-button`,this._fireTabChanged()),"label"===e&&this._fireTabChanged(),"disabled"===e&&this.disabled&&this._fireTabChanged()}))}static get tag(){return"a11y-tab"}_handleFlag(t){this.flag=t.detail.flag,this.flagIcon=t.detail.flagIcon}_labelChanged(){this.label&&""!==this.label.trim()||(this.label=this.querySelector('*[slot="label"]')?this.querySelector('*[slot="label"]').innerHTML:`Tab ${this.order}`)}_fireTabChanged(){this.dispatchEvent(new CustomEvent("a11y-tab-changed",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}}window.customElements.define(fn.tag,fn);class vn extends fn{static get tag(){return"simple-fields-tab"}static get styles(){return[...super.styles]}static get properties(){return{...super.properties,...D.properties}}}window.customElements.define(vn.tag,vn);class yn extends(R(o)){static get tag(){return"simple-fields-combo"}static get styles(){return[...super.styles,a`:host([expanded]){overflow:visible}:host(:focus-within),:host(:hover),li:hover,ul:hover{z-index:2}.input-option{display:flex;align-items:center;justify-content:space-between;flex:1 1 100%}.box-input{flex:1 1 auto}ul[role=listbox]{opacity:0;position:absolute;list-style:none;max-height:var(--simple-fields-combo-max-height,12em);max-width:100%;left:0}:host([align-right]) ul[role=listbox]{right:0;left:unset}:host([justify]) ul[role=listbox]{right:0;left:0}:host([expanded]:focus-within) ul[role=listbox],:host([expanded]:hover) ul[role=listbox]{opacity:1}ul[role=listbox] li[role=option]{margin:0;padding:0;padding-left:.125em;border-top:1px solid transparent;border-bottom:1px solid transparent;background-color:var(--simple-fields-background-color,#fff)}[role=listbox] [role=option]{display:block;margin:.25em;padding:0;font-size:100%}[role=listbox] [role=option][aria-selected=true]{background-color:var(--simple-fields-active-color,#eee)}[role=listbox].focus [role=option][aria-selected=true]{background-color:var(--simple-fields-accent-color-light,#d9eaff);border-color:var(--simple-fields-accent-color,#3f51b5)}[role=listbox] li[role=option]:hover{background-color:var(--simple-fields-accent-color-light,#d9eaff)}::slotted([slot=prefix]:not(:empty)){margin-right:.25em}::slotted([slot=suffix]:not(:empty)){margin:0 .25em}`]}static get properties(){return{...super.properties,activeDescendant:{type:String},alignRight:{type:Boolean,reflect:!0,attribute:"align-right"},expanded:{type:Boolean,reflect:!0},justify:{type:Boolean,reflect:!0},filter:{type:String},filteredOptions:{type:Array},inputFocus:{type:Boolean},inputHover:{type:Boolean},listFocus:{type:Boolean},listHover:{type:Boolean},hoveredOption:{type:Object}}}constructor(){super(),this.expanded=!1,this.filter="",this.filteredOptions=[],this.inputFocus=!1,this.inputHover=!1,this.isNone=!0,this.isList=!1,this.isBoth=!1,this.listFocus=!1,this.listHover=!1,this.option=!1,this.autocomplete="none"}get stateInfo(){return{activeDescendant:this.activeDescendant,filteredOptions:this.filteredOptions,filter:this.filter,option:this.option,_selectedOption:this._selectedOption,value:this.value,firstOption:this.firstOption,lastOption:this.lastOption,input:!!this.input&&this.input.value}}get fieldElementTag(){return"input"}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.filter=this.value?this.value:"",this.filterOptions(this.filter,this.option)}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"autocomplete"===e&&this.autocompleteChanged(),"value"===e&&this.value!==t&&this.fieldValueChanged(),"itemsList"!==e&&"options"!==e||this.filterOptions(this.filter,this.option)}))}fieldValueChanged(){this.input&&this.input.value!==this.value&&(this.input.value=this.value),this._fireValueChanged()}autocompleteChanged(){if("string"==typeof this.autocomplete){let t=this.autocomplete.toLowerCase();this.isNone="none"===t,this.isList="list"===t,this.isBoth="both"===t}else this.isNone=!0}get inputTemplate(){return n` <input .aria-activedescendant="${this.activeDescendant}" .aria-autocomplete="${this.autocomplete}" .aria-descrbedby="${this.describedBy}" .aria-expanded="${this.expanded}" aria-haspopup="true" .aria-invalid="${this.error?"true":"false"}" .aria-owns="${this.id}-list" ?autofocus="${this.autofocus}" @blur="${this._onInputBlur}" @change="${this._handleFieldChange}" class="field box-input ${this.inputFocus?"focus":""}" @click="${this._onInputClick}" ?disabled="${this.disabled}" @focus="${this._onInputFocus}" id="${this.id}" @keydown="${this._onInputKeydown}" @keyup="${this._onInputKeyup}" name="${this.id}" .placeholder="${this.placeholder||""}" part="option-input" ?readonly="${this.readonly}" ?required="${this.required}" tabindex="0" type="text" value="${this.value||""}"> `}get expandButtonTemplate(){return n` <simple-icon-button-lite icon="arrow-drop-down" ?hidden="${this.sortedOptions.length<1}" label="open" @click="${this._onButtonClick}" part="option-icon" tabindex="-1"> </simple-icon-button-lite> `}get listboxTemplate(){return n` <ul .aria-labelledBy="${this.fieldId}-label" class="${this.listFocus?"focus":""}" data-items="${this.itemsList.join()}" data-options="${this.filteredOptions.map((t=>t.value)).join()}" ?hidden="${this.isListboxHidden}" id="${this.id}-list" @mouseout="${this._onListboxMouseout}" @mouseover="${this._onListboxMouseover}" role="listbox" part="listbox"> ${this.listboxInnerTemplate} </ul> `}get listboxInnerTemplate(){return(this.filteredOptions||[]).map((t=>this.getListItem(t)))}get isListboxHidden(){return this.hidden||!this.expanded||this.filteredOptions.length<1}getListItem(t){return n` <li aria-selected="${this._isSelected(t)}" id="option${t.id}" role="option" part="listbox-li" @click="${e=>this._onOptionClick(e,t)}" @mouseout="${e=>this._onOptionMouseout(e,t)}" @mouseover="${e=>this._onOptionMouseover(e,t)}"> ${this.getListItemInner(t)} </li> `}getListItemInner(t){return t.value}get fieldMainTemplate(){return n` <div class="field-main" part="field-main" ?hidden="${this.hidden}"> ${this.labelTemplate} <div id="field-main-inner" part="field-main-inner"> ${this.prefixTemplate} <span class="input-option" part="option-inner"> ${this.inputTemplate} ${this.suffixTemplate} ${this.expandButtonTemplate} </span> ${this.listboxTemplate} </div> </div> `}get hasOptions(){return this.filteredOptions.length>0}setActiveDescendant(t){t&&this.listFocus?this.activeDescendant=`option${t.id}`:this.activeDescendant=""}setValue(t){this.filter=t,this.input.setSelectionRange(this.filter.length,this.filter.length),(this.isList||this.isBoth)&&this.filterOptions(this.filter,this.option)}setOption(t,e=!1){t&&(this.option=t,this.setCurrentOptionStyle(this.option),this.setActiveDescendant(this.option),this.isBoth&&(this.value=this.option.value,this.input.value=this.option.value,e?setTimeout((()=>{this.input.setSelectionRange(t.value.length,t.value.length)}),0):setTimeout((()=>{this.input.setSelectionRange(this.filter.length,t.value.length)}),0)))}setVisualFocusTextbox(){this.listFocus=!1,this.inputFocus=!0,this.setActiveDescendant(!1)}setVisualFocusListbox(){this.inputFocus=!1,this.listFocus=!0,this.setActiveDescendant(this.option)}removeVisualFocusAll(){this.inputFocus=!1,this.listFocus=!0,this.option=!1,this.setActiveDescendant(!1)}_onButtonClick(t){this.expanded?this.close(!0):this.open(),this.input.focus(),this.setVisualFocusTextbox()}_onInputClick(t){this.expanded?this.close(!0):this.open()}_onInputBlur(t){this.hoveredOption||(this.listFocus=!1,this.setCurrentOptionStyle(null),this.removeVisualFocusAll(),setTimeout(this.close(!1),300))}_onInputFocus(t){this.setVisualFocusTextbox(),this.option=!1,this.setCurrentOptionStyle(null)}_onInputKeydown(t){var e=!1,i=t.altKey;switch(t.keyCode){case this.keyCode.RETURN:(this.listFocus||this.isBoth)&&this.option&&this.setValue(this.option.value),this.close(!0),e=!0;break;case this.keyCode.DOWN:this.hasOptions&&(this.listFocus||this.isBoth&&this.option?this.setOption(this.nextItem,!0):(this.open(),i||this.setOption(this.firstItem,!0)),this.setVisualFocusListbox()),e=!0;break;case this.keyCode.UP:this.hasOptions&&(this.listFocus||this.isBoth&&this.option?this.setOption(this.previousItem,!0):(this.open(),i||this.setOption(this.lastItem,!0)),this.setVisualFocusListbox()),e=!0;break;case this.keyCode.ESC:this.close(!0),this.setVisualFocusTextbox(),this.setValue(""),this.option=!1,e=!0;break;case this.keyCode.TAB:this.close(!0),this.listFocus&&this.option&&this.setValue(this.option.value)}e&&(t.stopPropagation(),t.preventDefault())}_onInputKeyup(t){this.dispatchEvent(new CustomEvent("combo-input-keyup",{bubbles:!0,cancelable:!0,composed:!0,detail:t}));var e=!1,i=!1,o=t.key||"";function a(t){return 1===t.length&&t.match(/\S/)}if(a(o)&&(this.filter+=o),this.input&&(this.input.value||"").length<this.filter.length&&(this.filter=this.input.value||"",this.option=!1),t.keyCode!==this.keyCode.ESC){switch(t.keyCode){case this.keyCode.BACKSPACE:this.setValue(this.input.value),this.setVisualFocusTextbox(),this.setCurrentOptionStyle(!1),this.option=!1,e=!0;break;case this.keyCode.LEFT:case this.keyCode.RIGHT:case this.keyCode.HOME:case this.keyCode.END:this.isBoth?this.filter=this.input.value:(this.option=!1,this.setCurrentOptionStyle(!1)),this.setVisualFocusTextbox(),e=!0;break;default:a(o)&&(this.setVisualFocusTextbox(),this.setCurrentOptionStyle(!1),e=!0)}t.keyCode!==this.keyCode.RETURN&&(this.isList||this.isBoth?(i=this.filterOptions(this.filter,this.option))?(!this.expanded&&(this.input.value||"").length&&this.open(),0===i.textComparison.indexOf((this.input.value||"").toLowerCase())?(this.option=i,(this.isBoth||this.listFocus)&&(this.setCurrentOptionStyle(i),this.isBoth&&a(o)&&this.setOption(i))):(this.option=!1,this.setCurrentOptionStyle(!1))):(this.close(),this.option=!1,this.setActiveDescendant(!1)):this.input&&(this.input.value||"").length&&this.open()),e&&(t.stopPropagation(),t.preventDefault())}}get sortedOptions(){let t=(this.itemsList||[]).map(((t,e)=>"object"==typeof t?t:{id:e,value:t}));return Object.keys(this.options||{}).sort(((t,e)=>t>e?1:-1)).forEach((e=>t.push({id:t.length,value:this.options[e]}))),t}filterOptions(t,e){var i,o,a,n;for("string"!=typeof t&&(t=""),t=t.toLowerCase(),this.filteredOptions=[],this.firstChars=[],i=0;i<this.sortedOptions.length;i++)(o=this.sortedOptions[i]).id=i,o.textComparison=o.value.toLowerCase(),0!==t.length&&0!==o.textComparison.indexOf(t)||(this.filteredOptions.push(o),a=o.value.trim(),this.firstChars.push(a.substring(0,1).toLowerCase()));if((n=this.filteredOptions.length)>0){this.firstOption=this.filteredOptions[0],this.lastOption=this.filteredOptions[n-1];let t=this.filteredOptions.map((t=>t.textComparison));o=e&&e.textComparison&&t.includes(e.textComparison)?e:this.firstOption}else this.firstOption=!1,o=!1,this.lastOption=!1;return o}setCurrentOptionStyle(t){this._selectedOption=t,this.listbox&&t&&this.shadowRoot&&this.shadowRoot.querySelector(`#option${t.id}`)&&(this.listbox.scrollTop=this.shadowRoot.querySelector(`#option${t.id}`).offsetTop)}_isSelected(t){return t&&this._selectedOption&&t.textComparison===this._selectedOption.textComparison?"true":"false"}_onListboxMouseover(t){this.listHover=!0}_onListboxMouseout(t){this.listHover=!1,this.hoveredOption=void 0,setTimeout(this.close(!1),300)}open(){this.exapanded||(this.expanded=!0)}close(t){"boolean"!=typeof t&&(t=!1),!t&&(this.inputFocus||this.hasHover||this.hasHover)||(this.setCurrentOptionStyle(!1),this.expanded=!1,this.setActiveDescendant(!1))}_onOptionClick(t,e){e&&(this.setOption(e),this.setValue(e.value)),this.close(!0)}_onOptionMouseover(t,e){this.hoveredOption=e,this.listHover=!0,this.open()}_onOptionMouseout(t,e){this.listHover=!1,this.hoveredOption=void 0,setTimeout(this.close(!1),300)}get previousItem(){var t,e=this.option?this.option.textComparison:void 0,i=this.firstOption?this.firstOption.textComparison:void 0,o=this.filteredOptions.map((t=>t.textComparison));return e!==i?(t=o.indexOf(e),this.filteredOptions[t-1]):this.lastOption}get nextItem(){var t,e=this.option?this.option.textComparison:void 0,i=this.lastOption?this.lastOption.textComparison:void 0,o=this.filteredOptions.map((t=>t.textComparison));return e!==i?(t=o.indexOf(e),this.filteredOptions[t+1]):this.firstOption}get listbox(){return this._listbox||(this._listbox=this.shadowRoot&&this.shadowRoot.querySelector(`#${this.id}-list`)?this.shadowRoot.querySelector(`#${this.id}-list`):void 0),this._listbox}get input(){return this._input||(this._input=this.field?this.field:this.shadowRoot&&this.shadowRoot.querySelector(`#${this.id}`)?this.shadowRoot.querySelector(`#${this.id}`):void 0),this._input}get keyCode(){return{BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}}}window.customElements.define(yn.tag,yn);
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class _n extends o{static get styles(){return[a`:host{display:flex;align-items:center;padding:var(--simple-fields-button-padding,2px);font-size:var(--simple-fields-detail-font-size,12px)}:host([hidden]){display:none}[part=preview]{width:var(--simple-fields-url-combo-preview-size,26px);height:var(--simple-fields-url-combo-preview-size,26px);--simple-icon-height:var(
            --simple-fields-url-combo-preview-size,
            26px
          );--simple-icon-width:var(
            --simple-fields-url-combo-preview-size,
            26px
          );margin-right:var(--simple-fields-button-padding,2px)}span[part=preview]{background-position:center;background-size:cover;background-repeat:no-repeat;border-radius:var(--simple-fields-border-radius,2px)}span[part=label]{max-width:100%;flex:1 1 auto}span[part=label] span{display:block;line-height:100%;margin:0;overflow-wrap:break-word;word-wrap:break-word}span[part=label-secondary]{font-size:var(--simple-fields-meta-font-size,10px);opacity:var(--simple-fields-meta-opacity,unset);color:var(--simple-fields-meta-color)}`]}render(){return n`${this.previewTemplate}${this.labelTemplate}`}get iconTypes(){return{anchor:"hax:anchor",page:"lrn:content",pdf:"hax:file-pdf",doc:"hax:file-doc",docx:"hax:file-docx",ppt:"hax:file-ppt",pptx:"hax:file-ppt",csv:"hax:file-csv",xls:"hax:file-xls",xlsx:"hax:file-xls",url:"icons:language",file:"hax:file-blank",mp4:"av:movie",mov:"av:movie",webm:"av:movie",mp3:"av:volume-up",wav:"av:volume-up",html:"icons:language",tel:"communication:phone",email:"icons:mail"}}get currentLocation(){return window.location}get resourceURL(){return new URL(this.value||"./",this.currentLocation)}get isLocal(){return!!this.resourceURL.hostname&&this.resourceURL.hostname==this.currentLocation.hostname}get isSamePage(){return this.isLocal&&`${this.resourceURL.pathname}${this.resourceURL.search}`==`${this.currentLocation.pathname}${this.currentLocation.search}`}get isAnchor(){return this.isSamePage&&!!this.resourceURL.hash}get fileExtension(){let t=(this.resourceURL&&this.resourceURL.pathname?this.resourceURL.pathname:"").match(/\.\w+$/);return((t&&t[0]?t[0].replace(/^\./,""):this.type?this.type:"")||"").toLowerCase()}get imageTypes(){return["gif","svg","png","jpg","jpeg"]}get pageTypes(){return["html","htm","php",""]}get isPage(){return this.pageTypes.includes(this.fileExtension)}get isEmail(){return!!this.resourceURL&&"mailto:"===this.resourceURL.protocol}get isPhone(){return!!this.resourceURL&&"tel:"===this.resourceURL.protocol}get isImage(){return this.imageTypes.includes(this.fileExtension)}get previewSrc(){return this.preview&&""!==this.preview.trim()?this.preview:void 0}get iconName(){return this.icon&&""!==this.icon.trim()?this.icon:this.isAnchor?this.iconTypes.anchor:this.isLocal&&this.isPage?this.iconTypes.page:this.isPage?this.iconTypes.html:this.isEmail?this.iconTypes.email:this.isPhone?this.iconTypes.tel:this.fileExtension&&""!==this.fileExtension?this.iconTypes[this.fileExtension]:this.iconTypes.file}get iconTemplate(){return n`<simple-icon-lite part="preview" icon="${this.iconName}"></simple-icon-lite>`}get imageTemplate(){return n`<span part="preview" style="background-image:url(${this.previewSrc})"></span>`}get previewTemplate(){return this.preview&&""!==this.preview?this.imageTemplate:this.icon&&""!==this.icon?this.iconTemplate:this.previewSrc&&""!==this.previewSrc?this.imageTemplate:this.iconName&&""!==this.iconName?this.iconTemplate:""}get labelTemplate(){return n`<span part="label"> ${this.primaryLabelTemplate} ${this.name&&""!==this.name.trim()?this.secondaryLabelTemplate:""} </span>`}get primaryLabelTemplate(){return this.name&&""!==this.name.trim()?n`<span part="label-primary">${this.name}</span>`:this.value&&""!==this.value.trim()?n`<span part="label-primary">${this.value}</span>`:""}get secondaryLabelTemplate(){return this.value&&""!==this.value.trim()?n`<span part="label-secondary">${this.value}</span>`:""}static get properties(){return{...super.properties,name:{name:"name",type:String,reflectToAttribute:!0},icon:{name:"icon",type:String,reflectToAttribute:!0},preview:{name:"preview",type:String,reflectToAttribute:!0},type:{name:"type",type:String,reflectToAttribute:!0},value:{name:"value",type:String,reflectToAttribute:!0}}}static get tag(){return"simple-fields-url-combo-item"}constructor(){super()}firstUpdated(t){}updated(t){t.forEach(((t,e)=>{}))}}customElements.define(_n.tag,_n);class xn extends yn{static get tag(){return"simple-fields-url-combo"}static get styles(){return[...super.styles,a`:host([display-as=grid]){--simple-fields-url-combo-preview-size:var(
            --simple-fields-url-combo-grid-preview-size,
            100px
          )}ul[role=listbox] li[role=option]:not(:last-child){border-bottom:1px solid var(--simple-fields-border-color-light,#ccc)}:host([display-as=columns]) ul[role=listbox] li[role=option],:host([display-as=grid]) ul[role=listbox] li[role=option]{border-radius:var(--simple-fields-border-radius,2px);border:1px solid var(--simple-fields-border-color-light,#ccc)}:host([always-expanded]) #field-main-inner{flex-wrap:wrap;--simple-fields-combo-max-height:var(
            --simple-fields-url-combox-expanded-max-height,
            unset
          )}.input-bottom,:host([always-expanded]) .border-bottom:not(.input-bottom),:host([always-expanded]) [part=option-icon],:host([has-suggestions=false]) [part=option-icon]{display:none}:host([always-expanded]) .input-bottom{display:block}:host([always-expanded]) ul[role=listbox]{border:none;position:static;opacity:1;flex:1 0 100%;margin:var(--simple-fields-margin-small,8px) 0}:host([display-as=columns]) ul[role=listbox]{grid-gap:var(--simple-fields-button-padding,2px)}:host([display-as=grid]) ul[role=listbox]{grid-gap:var(--simple-fields-margin-small,8px)}:host([display-as=columns]) ul[role=listbox],:host([display-as=grid]) ul[role=listbox]{display:grid;grid-template-columns:repeat(auto-fill,minmax(calc(var(--simple-fields-url-combo-preview-size) + 2 * var(--simple-fields-button-padding,2px)),1fr))}:host([display-as=grid]) ::slotted(simple-fields-url-combo-item),:host([display-as=grid]) simple-fields-url-combo-item{flex-direction:column;align-items:center;text-align:center;justify-content:space-between;padding:var(--simple-fields-margin-small,8px)}:host([display-as=grid]) ::slotted(simple-fields-url-combo-item::part(preview)),:host([display-as=grid]) simple-fields-url-combo-item::part(preview){display:block;margin-right:0}`]}static get properties(){return{...super.properties,displayAs:{type:String,attribute:"display-as",reflect:!0},alwaysExpanded:{type:Boolean,attribute:"always-expanded",reflect:!0}}}constructor(){super(),this.grid=!1}get isListboxHidden(){return!(this.alwaysExpanded||this.expanded)||this.hidden||this.filteredOptions.length<1}get listboxTemplate(){return n` <div class="border-bottom input-bottom blur"></div> <div class="border-bottom input-bottom focus"></div> ${super.listboxTemplate} `}getListItemInner(t){return n`<simple-fields-url-combo-item icon="${t.icon}" name="${t.name}" preview="${t.preview}" type="${t.type}" value="${t.value}"> </simple-fields-url-combo-item>`}getOptionData(t,e){return{value:"object"==typeof t?t.value:t,name:"object"==typeof t?t.name:void 0,icon:"object"==typeof t?t.icon:void 0,preview:"object"==typeof t?t.preview:void 0,type:"object"==typeof t?t.type:void 0,id:e}}get sortedOptions(){let t=(this.itemsList||[]).map(((t,e)=>"object"==typeof t?t:this.getOptionData(t,e)));return Object.keys(this.options||{}).sort(((t,e)=>t>e?1:-1)).forEach((e=>t.push(this.getOptionData(this.options[e],t.length)))),t}possibleEmail(t){return t.match(/^\S+@\S+.\S+$/)}possiblePhone(t){return t.match(/^(\+\d{1,3}\s?)?((\(\d{3}\)\s?)|(\d{3})(\s|-?))(\d{3}(\s|-?))(\d{4})(\s?(([E|e][X|x][T|t][\:|\.|]?)|x|X)(\s?\d+))?$/)}filterOptions(t,e){super.filterOptions(t,e),this.possibleEmail(t)?(this.filteredOptions=[{value:`mailto:${t}`,id:"mailto"},...this.filteredOptions],this.open()):this.possiblePhone(t)&&(this.filteredOptions=[{value:`tel:${t.replace(/[\(\)\-\s\:\.]/g,"").replace(/[a-zA-Z]+/,"p")}`,id:"tel"},...this.filteredOptions],this.open())}}window.customElements.define(xn.tag,xn);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let wn,An=null,En=window.HTMLImports&&window.HTMLImports.whenReady||null;function Sn(t){requestAnimationFrame((function(){En?En(t):(An||(An=new Promise((t=>{wn=t})),"complete"===document.readyState?wn():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&wn()}))),An.then((function(){t&&t()})))}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Cn="__shadyCSSCachedStyle";let Nn=null,Tn=null;class kn{constructor(){this.customStyles=[],this.enqueued=!1,Sn((()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()}))}enqueueDocumentValidation(){!this.enqueued&&Tn&&(this.enqueued=!0,Sn(Tn))}addCustomStyle(t){t.__seenByShadyCSS||(t.__seenByShadyCSS=!0,this.customStyles.push(t),this.enqueueDocumentValidation())}getStyleForCustomStyle(t){if(t[Cn])return t[Cn];let e;return e=t.getStyle?t.getStyle():t,e}processStyles(){const t=this.customStyles;for(let e=0;e<t.length;e++){const i=t[e];if(i[Cn])continue;const o=this.getStyleForCustomStyle(i);if(o){const t=o.__appliedElement||o;Nn&&Nn(t),i[Cn]=t}}return t}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function On(t,e){for(let i in e)null===i?t.style.removeProperty(i):t.style.setProperty(i,e[i])}kn.prototype.addCustomStyle=kn.prototype.addCustomStyle,kn.prototype.getStyleForCustomStyle=kn.prototype.getStyleForCustomStyle,kn.prototype.processStyles=kn.prototype.processStyles,Object.defineProperties(kn.prototype,{transformCallback:{get:()=>Nn,set(t){Nn=t}},validateCallback:{get:()=>Tn,set(t){let e=!1;Tn||(e=!0),Tn=t,e&&this.enqueueDocumentValidation()}}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Pn=!(window.ShadyDOM&&window.ShadyDOM.inUse);let Ln,Bn;function Mn(t){Ln=(!t||!t.shimcssproperties)&&(Pn||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(Bn=window.ShadyCSS.cssBuild);const Hn=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?Ln=window.ShadyCSS.nativeCss:window.ShadyCSS?(Mn(window.ShadyCSS),window.ShadyCSS=void 0):Mn(window.WebComponents&&window.WebComponents.flags);const Dn=Ln,Rn=new kn;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/window.ShadyCSS||(window.ShadyCSS={prepareTemplate(t,e,i){},prepareTemplateDom(t,e){},prepareTemplateStyles(t,e,i){},styleSubtree(t,e){Rn.processStyles(),On(t,e)},styleElement(t){Rn.processStyles()},styleDocument(t){Rn.processStyles(),On(document.body,t)},getComputedStyleValue:(t,e)=>function(t,e){const i=window.getComputedStyle(t).getPropertyValue(e);return i?i.trim():""}(t,e),flushCustomStyles(){},nativeCss:Dn,nativeShadow:Pn,cssBuild:Bn,disableRuntime:Hn}),window.ShadyCSS.CustomStyleInterface=Rn,
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.JSCompiler_renameProperty=function(t,e){return t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let zn,In,$n=/(url\()([^)]*)(\))/g,jn=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function Fn(t,e){if(t&&jn.test(t))return t;if("//"===t)return t;if(void 0===zn){zn=!1;try{const t=new URL("b","http://a");t.pathname="c%20d",zn="http://a/c%20d"===t.href}catch(t){}}if(e||(e=document.baseURI||window.location.href),zn)try{return new URL(t,e).href}catch(e){return t}return In||(In=document.implementation.createHTMLDocument("temp"),In.base=In.createElement("base"),In.head.appendChild(In.base),In.anchor=In.createElement("a"),In.body.appendChild(In.anchor)),In.base.href=e,In.anchor.href=t,In.anchor.href||t}function Vn(t,e){return t.replace($n,(function(t,i,o,a){return i+"'"+Fn(o.replace(/["']/g,""),e)+"'"+a}))}function Un(t){return t.substring(0,t.lastIndexOf("/")+1)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const qn=!window.ShadyDOM||!window.ShadyDOM.inUse;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss);const Gn=qn&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const t=new CSSStyleSheet;t.replaceSync("");const e=document.createElement("div");return e.attachShadow({mode:"open"}),e.shadowRoot.adoptedStyleSheets=[t],e.shadowRoot.adoptedStyleSheets[0]===t}catch(t){return!1}})();let Wn=window.Polymer&&window.Polymer.rootPath||Un(document.baseURI||window.location.href),Xn=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,Yn=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,Kn=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,Jn=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,Qn=window.Polymer&&window.Polymer.legacyOptimizations||!1,Zn=window.Polymer&&window.Polymer.legacyWarnings||!1,ts=window.Polymer&&window.Polymer.syncInitialRender||!1,es=window.Polymer&&window.Polymer.legacyUndefined||!1,is=window.Polymer&&window.Polymer.orderedComputed||!1,os=window.Polymer&&window.Polymer.removeNestedTemplates||!1,as=window.Polymer&&window.Polymer.fastDomIf||!1,ns=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1;window.Polymer&&window.Polymer.legacyNoObservedAttributes;let ss=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,rs={},ls={};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function ds(t,e){rs[t]=ls[t.toLowerCase()]=e}function cs(t){return rs[t]||ls[t.toLowerCase()]}class hs extends HTMLElement{static get observedAttributes(){return["id"]}static import(t,e){if(t){let i=cs(t);return i&&e?i.querySelector(e):i}return null}attributeChangedCallback(t,e,i,o){e!==i&&this.register()}get assetpath(){if(!this.__assetpath){const t=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,e=Fn(this.getAttribute("assetpath")||"",t.baseURI);this.__assetpath=Un(e)}return this.__assetpath}register(t){if(t=t||this.id){if(Kn&&void 0!==cs(t))throw ds(t,null),new Error(`strictTemplatePolicy: dom-module ${t} re-registered`);this.id=t,ds(t,this),(e=this).querySelector("style")&&console.warn("dom-module %s has style outside template",e.id)}var e}}hs.prototype.modules=rs,customElements.define("dom-module",hs);function us(t){return hs.import(t)}function ps(t){const e=Vn((t.body?t.body:t).textContent,t.baseURI),i=document.createElement("style");return i.textContent=e,i}function ms(t){const e=t.trim().split(/\s+/),i=[];for(let t=0;t<e.length;t++)i.push(...gs(e[t]));return i}function gs(t){const e=us(t);if(!e)return console.warn("Could not find style data in module named",t),[];if(void 0===e._styles){const t=[];t.push(...fs(e));const i=e.querySelector("template");i&&t.push(...bs(i,e.assetpath)),e._styles=t}return e._styles}function bs(t,e){if(!t._styles){const i=[],o=t.content.querySelectorAll("style");for(let t=0;t<o.length;t++){let a=o[t],n=a.getAttribute("include");n&&i.push(...ms(n).filter((function(t,e,i){return i.indexOf(t)===e}))),e&&(a.textContent=Vn(a.textContent,e)),i.push(a)}t._styles=i}return t._styles}function fs(t){const e=[],i=t.querySelectorAll("link[rel=import][type~=css]");for(let t=0;t<i.length;t++){let o=i[t];if(o.import){const t=o.import,i=o.hasAttribute("shady-unscoped");if(i&&!t._unscopedStyle){const e=ps(t);e.setAttribute("shady-unscoped",""),t._unscopedStyle=e}else t._style||(t._style=ps(t));e.push(i?t._unscopedStyle:t._style)}}return e}function vs(t){let e=us(t);if(e&&void 0===e._cssText){let t=function(t){let e="",i=fs(t);for(let t=0;t<i.length;t++)e+=i[t].textContent;return e}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(e),i=e.querySelector("template");i&&(t+=function(t,e){let i="";const o=bs(t,e);for(let t=0;t<o.length;t++){let e=o[t];e.parentNode&&e.parentNode.removeChild(e),i+=e.textContent}return i}(i,e.assetpath)),e._cssText=t||null}return e||console.warn("Could not find style data in module named",t),e&&e._cssText||""}const ys=window.ShadyCSS.CustomStyleInterface;class _s extends HTMLElement{constructor(){super(),this._style=null,ys.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const t=this.querySelector("style");if(!t)return null;this._style=t;const e=t.getAttribute("include");return e&&(t.removeAttribute("include"),t.textContent=function(t){let e=t.trim().split(/\s+/),i="";for(let t=0;t<e.length;t++)i+=vs(e[t]);return i}(e)+t.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",_s);class xs extends HTMLElement{static get version(){return"1.6.1"}}customElements.define("vaadin-lumo-styles",xs);const ws=document.createElement("template");ws.innerHTML='<custom-style>\n  <style>\n    @font-face {\n      font-family: \'lumo-icons\';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format(\'woff\');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n      --lumo-icons-align-center: "\\ea01";\n      --lumo-icons-align-left: "\\ea02";\n      --lumo-icons-align-right: "\\ea03";\n      --lumo-icons-angle-down: "\\ea04";\n      --lumo-icons-angle-left: "\\ea05";\n      --lumo-icons-angle-right: "\\ea06";\n      --lumo-icons-angle-up: "\\ea07";\n      --lumo-icons-arrow-down: "\\ea08";\n      --lumo-icons-arrow-left: "\\ea09";\n      --lumo-icons-arrow-right: "\\ea0a";\n      --lumo-icons-arrow-up: "\\ea0b";\n      --lumo-icons-bar-chart: "\\ea0c";\n      --lumo-icons-bell: "\\ea0d";\n      --lumo-icons-calendar: "\\ea0e";\n      --lumo-icons-checkmark: "\\ea0f";\n      --lumo-icons-chevron-down: "\\ea10";\n      --lumo-icons-chevron-left: "\\ea11";\n      --lumo-icons-chevron-right: "\\ea12";\n      --lumo-icons-chevron-up: "\\ea13";\n      --lumo-icons-clock: "\\ea14";\n      --lumo-icons-cog: "\\ea15";\n      --lumo-icons-cross: "\\ea16";\n      --lumo-icons-download: "\\ea17";\n      --lumo-icons-dropdown: "\\ea18";\n      --lumo-icons-edit: "\\ea19";\n      --lumo-icons-error: "\\ea1a";\n      --lumo-icons-eye: "\\ea1b";\n      --lumo-icons-eye-disabled: "\\ea1c";\n      --lumo-icons-menu: "\\ea1d";\n      --lumo-icons-minus: "\\ea1e";\n      --lumo-icons-ordered-list: "\\ea1f";\n      --lumo-icons-phone: "\\ea20";\n      --lumo-icons-photo: "\\ea21";\n      --lumo-icons-play: "\\ea22";\n      --lumo-icons-plus: "\\ea23";\n      --lumo-icons-redo: "\\ea24";\n      --lumo-icons-reload: "\\ea25";\n      --lumo-icons-search: "\\ea26";\n      --lumo-icons-undo: "\\ea27";\n      --lumo-icons-unordered-list: "\\ea28";\n      --lumo-icons-upload: "\\ea29";\n      --lumo-icons-user: "\\ea2a";\n    }\n  </style>\n</custom-style>',document.head.appendChild(ws.content);const As=document.createElement("template");As.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Base (background) */\n      --lumo-base-color: #FFF;\n\n      /* Tint */\n      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n      --lumo-tint: #FFF;\n\n      /* Shade */\n      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);\n      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);\n      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);\n      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n      --lumo-shade: hsl(214, 35%, 15%);\n\n      /* Contrast */\n      --lumo-contrast-5pct: var(--lumo-shade-5pct);\n      --lumo-contrast-10pct: var(--lumo-shade-10pct);\n      --lumo-contrast-20pct: var(--lumo-shade-20pct);\n      --lumo-contrast-30pct: var(--lumo-shade-30pct);\n      --lumo-contrast-40pct: var(--lumo-shade-40pct);\n      --lumo-contrast-50pct: var(--lumo-shade-50pct);\n      --lumo-contrast-60pct: var(--lumo-shade-60pct);\n      --lumo-contrast-70pct: var(--lumo-shade-70pct);\n      --lumo-contrast-80pct: var(--lumo-shade-80pct);\n      --lumo-contrast-90pct: var(--lumo-shade-90pct);\n      --lumo-contrast: var(--lumo-shade);\n\n      /* Text */\n      --lumo-header-text-color: var(--lumo-contrast);\n      --lumo-body-text-color: var(--lumo-contrast-90pct);\n      --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n      --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n      /* Primary */\n      --lumo-primary-color: hsl(214, 90%, 52%);\n      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);\n      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);\n      --lumo-primary-text-color: var(--lumo-primary-color);\n      --lumo-primary-contrast-color: #FFF;\n\n      /* Error */\n      --lumo-error-color: hsl(3, 100%, 61%);\n      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);\n      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);\n      --lumo-error-text-color: hsl(3, 92%, 53%);\n      --lumo-error-contrast-color: #FFF;\n\n      /* Success */\n      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */\n      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);\n      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);\n      --lumo-success-text-color: hsl(145, 100%, 32%);\n      --lumo-success-contrast-color: #FFF;\n    }\n  </style>\n</custom-style><dom-module id="lumo-color">\n  <template>\n    <style>\n      [theme~="dark"] {\n        /* Base (background) */\n        --lumo-base-color: hsl(214, 35%, 21%);\n\n        /* Tint */\n        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);\n        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);\n        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n        --lumo-tint: hsl(214, 100%, 98%);\n\n        /* Shade */\n        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n        --lumo-shade: hsl(214, 33%, 13%);\n\n        /* Contrast */\n        --lumo-contrast-5pct: var(--lumo-tint-5pct);\n        --lumo-contrast-10pct: var(--lumo-tint-10pct);\n        --lumo-contrast-20pct: var(--lumo-tint-20pct);\n        --lumo-contrast-30pct: var(--lumo-tint-30pct);\n        --lumo-contrast-40pct: var(--lumo-tint-40pct);\n        --lumo-contrast-50pct: var(--lumo-tint-50pct);\n        --lumo-contrast-60pct: var(--lumo-tint-60pct);\n        --lumo-contrast-70pct: var(--lumo-tint-70pct);\n        --lumo-contrast-80pct: var(--lumo-tint-80pct);\n        --lumo-contrast-90pct: var(--lumo-tint-90pct);\n        --lumo-contrast: var(--lumo-tint);\n\n        /* Text */\n        --lumo-header-text-color: var(--lumo-contrast);\n        --lumo-body-text-color: var(--lumo-contrast-90pct);\n        --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n        --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n        /* Primary */\n        --lumo-primary-color: hsl(214, 86%, 55%);\n        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);\n        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);\n        --lumo-primary-text-color: hsl(214, 100%, 70%);\n        --lumo-primary-contrast-color: #FFF;\n\n        /* Error */\n        --lumo-error-color: hsl(3, 90%, 63%);\n        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);\n        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);\n        --lumo-error-text-color: hsl(3, 100%, 67%);\n\n        /* Success */\n        --lumo-success-color: hsl(145, 65%, 42%);\n        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);\n        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);\n        --lumo-success-text-color: hsl(145, 85%, 47%);\n      }\n\n      html {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      [theme~="dark"] {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        color: var(--lumo-header-text-color);\n      }\n\n      a {\n        color: var(--lumo-primary-text-color);\n      }\n\n      blockquote {\n        color: var(--lumo-secondary-text-color);\n      }\n\n      code,\n      pre {\n        background-color: var(--lumo-contrast-10pct);\n        border-radius: var(--lumo-border-radius-m);\n      }\n    </style>\n  </template>\n</dom-module><dom-module id="lumo-color-legacy">\n  <template>\n    <style include="lumo-color">\n      :host {\n        color: var(--lumo-body-text-color) !important;\n        background-color: var(--lumo-base-color) !important;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(As.content);const Es=document.createElement("template");Es.innerHTML="<custom-style>\n  <style>\n    html {\n      --lumo-size-xs: 1.625rem;\n      --lumo-size-s: 1.875rem;\n      --lumo-size-m: 2.25rem;\n      --lumo-size-l: 2.75rem;\n      --lumo-size-xl: 3.5rem;\n\n      /* Icons */\n      --lumo-icon-size-s: 1.25em;\n      --lumo-icon-size-m: 1.5em;\n      --lumo-icon-size-l: 2.25em;\n      /* For backwards compatibility */\n      --lumo-icon-size: var(--lumo-icon-size-m);\n    }\n  </style>\n</custom-style>",document.head.appendChild(Es.content);const Ss=document.createElement("template");Ss.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Square */\n      --lumo-space-xs: 0.25rem;\n      --lumo-space-s: 0.5rem;\n      --lumo-space-m: 1rem;\n      --lumo-space-l: 1.5rem;\n      --lumo-space-xl: 2.5rem;\n\n      /* Wide */\n      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n      /* Tall */\n      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n    }\n  </style>\n</custom-style>",document.head.appendChild(Ss.content);const Cs=document.createElement("template");Cs.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Border radius */\n      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n      --lumo-border-radius: 0.25em; /* Deprecated */\n\n      /* Shadow */\n      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n      /* Clickable element cursor */\n      --lumo-clickable-cursor: default;\n    }\n  </style>\n</custom-style>",document.head.appendChild(Cs.content);const Ns=document.createElement("template");Ns.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Font families */\n      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n\n      /* Font sizes */\n      --lumo-font-size-xxs: .75rem;\n      --lumo-font-size-xs: .8125rem;\n      --lumo-font-size-s: .875rem;\n      --lumo-font-size-m: 1rem;\n      --lumo-font-size-l: 1.125rem;\n      --lumo-font-size-xl: 1.375rem;\n      --lumo-font-size-xxl: 1.75rem;\n      --lumo-font-size-xxxl: 2.5rem;\n\n      /* Line heights */\n      --lumo-line-height-xs: 1.25;\n      --lumo-line-height-s: 1.375;\n      --lumo-line-height-m: 1.625;\n    }\n\n  </style>\n</custom-style><dom-module id="lumo-typography">\n  <template>\n    <style>\n      html {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Can’t combine with the above selector because that doesn’t work in browsers without native shadow dom */\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      small,\n      [theme~="font-size-s"] {\n        font-size: var(--lumo-font-size-s);\n        line-height: var(--lumo-line-height-s);\n      }\n\n      [theme~="font-size-xs"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-weight: 600;\n        line-height: var(--lumo-line-height-xs);\n        margin-top: 1.25em;\n      }\n\n      h1 {\n        font-size: var(--lumo-font-size-xxxl);\n        margin-bottom: 0.75em;\n      }\n\n      h2 {\n        font-size: var(--lumo-font-size-xxl);\n        margin-bottom: 0.5em;\n      }\n\n      h3 {\n        font-size: var(--lumo-font-size-xl);\n        margin-bottom: 0.5em;\n      }\n\n      h4 {\n        font-size: var(--lumo-font-size-l);\n        margin-bottom: 0.5em;\n      }\n\n      h5 {\n        font-size: var(--lumo-font-size-m);\n        margin-bottom: 0.25em;\n      }\n\n      h6 {\n        font-size: var(--lumo-font-size-xs);\n        margin-bottom: 0;\n        text-transform: uppercase;\n        letter-spacing: 0.03em;\n      }\n\n      p,\n      blockquote {\n        margin-top: 0.5em;\n        margin-bottom: 0.75em;\n      }\n\n      a {\n        text-decoration: none;\n      }\n\n      a:hover {\n        text-decoration: underline;\n      }\n\n      hr {\n        display: block;\n        align-self: stretch;\n        height: 1px;\n        border: 0;\n        padding: 0;\n        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      blockquote {\n        border-left: 2px solid var(--lumo-contrast-30pct);\n      }\n\n      b,\n      strong {\n        font-weight: 600;\n      }\n\n      /* RTL specific styles */\n\n      blockquote[dir="rtl"] {\n        border-left: none;\n        border-right: 2px solid var(--lumo-contrast-30pct);\n      }\n\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Ns.content);const Ts=document.createElement("template");Ts.innerHTML='<dom-module id="lumo-field-button">\n  <template>\n    <style>\n      [part$="button"] {\n        flex: none;\n        width: 1em;\n        height: 1em;\n        line-height: 1;\n        font-size: var(--lumo-icon-size-m);\n        text-align: center;\n        color: var(--lumo-contrast-60pct);\n        transition: 0.2s color;\n        cursor: var(--lumo-clickable-cursor);\n      }\n\n      :host(:not([readonly])) [part$="button"]:hover {\n        color: var(--lumo-contrast-90pct);\n      }\n\n      :host([disabled]) [part$="button"],\n      :host([readonly]) [part$="button"] {\n        color: var(--lumo-contrast-20pct);\n      }\n\n      [part$="button"]::before {\n        font-family: "lumo-icons";\n        display: block;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(Ts.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class ks{constructor(t){this.value=t.toString()}toString(){return this.value}}function Os(t){if(t instanceof HTMLTemplateElement)return t.innerHTML;if(t instanceof ks)return function(t){if(t instanceof ks)return t.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${t}`)}(t);throw new Error(`non-template value passed to Polymer's html function: ${t}`)}const Ps=function(t,...e){const i=document.createElement("template");return i.innerHTML=e.reduce(((e,i,o)=>e+Os(i)+t[o+1]),t[0]),i},Ls=Ps`<dom-module id="lumo-button" theme-for="vaadin-button">
  <template>
    <style>
      :host {
        /* Sizing */
        --lumo-button-size: var(--lumo-size-m);
        min-width: calc(var(--lumo-button-size) * 2);
        height: var(--lumo-button-size);
        padding: 0 calc(var(--lumo-button-size) / 3 + var(--lumo-border-radius) / 2);
        margin: var(--lumo-space-xs) 0;
        box-sizing: border-box;
        /* Style */
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size-m);
        font-weight: 500;
        color: var(--_lumo-button-color, var(--lumo-primary-text-color));
        background-color: var(--_lumo-button-background-color, var(--lumo-contrast-5pct));
        border-radius: var(--lumo-border-radius);
        cursor: default;
        -webkit-tap-highlight-color: transparent;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Set only for the internal parts so we don’t affect the host vertical alignment */
      [part="label"],
      [part="prefix"],
      [part="suffix"] {
        line-height: var(--lumo-line-height-xs);
      }

      [part="label"] {
        padding: calc(var(--lumo-button-size) / 6) 0;
      }

      :host([theme~="small"]) {
        font-size: var(--lumo-font-size-s);
        --lumo-button-size: var(--lumo-size-s);
      }

      :host([theme~="large"]) {
        font-size: var(--lumo-font-size-l);
        --lumo-button-size: var(--lumo-size-l);
      }

      /* This needs to be the last selector for it to take priority */
      :host([disabled][disabled]) {
        pointer-events: none;
        color: var(--lumo-disabled-text-color);
        background-color: var(--lumo-contrast-5pct);
      }

      /* For interaction states */
      :host::before,
      :host::after {
        content: "";
        /* We rely on the host always being relative */
        position: absolute;
        z-index: 1;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background-color: currentColor;
        border-radius: inherit;
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
      }

      /* Hover */

      :host(:hover)::before {
        opacity: 0.05;
      }

      /* Disable hover for touch devices */
      @media (pointer: coarse) {
        :host(:not([active]):hover)::before {
          opacity: 0;
        }
      }

      /* Active */

      :host::after {
        transition: opacity 1.4s, transform 0.1s;
        filter: blur(8px);
      }

      :host([active])::before {
        opacity: 0.1;
        transition-duration: 0s;
      }

      :host([active])::after {
        opacity: 0.1;
        transition-duration: 0s, 0s;
        transform: scale(0);
      }

      /* Keyboard focus */

      :host([focus-ring]) {
        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);
      }

      /* Types (primary, tertiary, tertiary-inline */

      :host([theme~="tertiary"]),
      :host([theme~="tertiary-inline"]) {
        background-color: transparent !important;
        transition: opacity 0.2s;
        min-width: 0;
      }

      :host([theme~="tertiary"])::before,
      :host([theme~="tertiary-inline"])::before {
        display: none;
      }

      :host([theme~="tertiary"]) {
        padding: 0 calc(var(--lumo-button-size) / 6);
      }

      @media (hover: hover) {
        :host([theme*="tertiary"]:not([active]):hover) {
          opacity: 0.8;
        }
      }

      :host([theme~="tertiary"][active]),
      :host([theme~="tertiary-inline"][active]) {
        opacity: 0.5;
        transition-duration: 0s;
      }

      :host([theme~="tertiary-inline"]) {
        margin: 0;
        height: auto;
        padding: 0;
        line-height: inherit;
        font-size: inherit;
      }

      :host([theme~="tertiary-inline"]) [part="label"] {
        padding: 0;
        overflow: visible;
        line-height: inherit;
      }

      :host([theme~="primary"]) {
        background-color: var(--_lumo-button-primary-background-color, var(--lumo-primary-color));
        color: var(--_lumo-button-primary-color, var(--lumo-primary-contrast-color));
        font-weight: 600;
        min-width: calc(var(--lumo-button-size) * 2.5);
      }

      :host([theme~="primary"][disabled]) {
        background-color: var(--lumo-primary-color-50pct);
        color: var(--lumo-primary-contrast-color);
      }

      :host([theme~="primary"]:hover)::before {
        opacity: 0.1;
      }

      :host([theme~="primary"][active])::before {
        background-color: var(--lumo-shade-20pct);
      }

      @media (pointer: coarse) {
        :host([theme~="primary"][active])::before {
          background-color: var(--lumo-shade-60pct);
        }

        :host([theme~="primary"]:not([active]):hover)::before {
          opacity: 0;
        }
      }

      :host([theme~="primary"][active])::after {
        opacity: 0.2;
      }

      /* Colors (success, error, contrast) */

      :host([theme~="success"]) {
        color: var(--lumo-success-text-color);
      }

      :host([theme~="success"][theme~="primary"]) {
        background-color: var(--lumo-success-color);
        color: var(--lumo-success-contrast-color);
      }

      :host([theme~="success"][theme~="primary"][disabled]) {
        background-color: var(--lumo-success-color-50pct);
      }

      :host([theme~="error"]) {
        color: var(--lumo-error-text-color);
      }

      :host([theme~="error"][theme~="primary"]) {
        background-color: var(--lumo-error-color);
        color: var(--lumo-error-contrast-color);
      }

      :host([theme~="error"][theme~="primary"][disabled]) {
        background-color: var(--lumo-error-color-50pct);
      }

      :host([theme~="contrast"]) {
        color: var(--lumo-contrast);
      }

      :host([theme~="contrast"][theme~="primary"]) {
        background-color: var(--lumo-contrast);
        color: var(--lumo-base-color);
      }

      :host([theme~="contrast"][theme~="primary"][disabled]) {
        background-color: var(--lumo-contrast-50pct);
      }

      /* Icons */

      [part] ::slotted(iron-icon) {
        display: inline-block;
        width: var(--lumo-icon-size-m);
        height: var(--lumo-icon-size-m);
      }

      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */
      [part] ::slotted(iron-icon[icon^="vaadin:"]) {
        padding: 0.25em;
        box-sizing: border-box !important;
      }

      [part="prefix"] {
        margin-left: -0.25em;
        margin-right: 0.25em;
      }

      [part="suffix"] {
        margin-left: 0.25em;
        margin-right: -0.25em;
      }

      /* Icon-only */

      :host([theme~="icon"]:not([theme~="tertiary-inline"])) {
        min-width: var(--lumo-button-size);
        padding-left: calc(var(--lumo-button-size) / 4);
        padding-right: calc(var(--lumo-button-size) / 4);
      }

      :host([theme~="icon"]) [part="prefix"],
      :host([theme~="icon"]) [part="suffix"] {
        margin-left: 0;
        margin-right: 0;
      }

      /* RTL specific styles */

      :host([dir="rtl"]) [part="prefix"] {
        margin-left: 0.25em;
        margin-right: -0.25em;
      }

      :host([dir="rtl"]) [part="suffix"] {
        margin-left: -0.25em;
        margin-right: 0.25em;
      }

      :host([dir="rtl"][theme~="icon"]) [part="prefix"],
      :host([dir="rtl"][theme~="icon"]) [part="suffix"] {
        margin-left: 0;
        margin-right: 0;
      }
    </style>
  </template>
</dom-module>`;document.head.appendChild(Ls.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Bs=0;const Ms=function(t){let e=t.__mixinApplications;e||(e=new WeakMap,t.__mixinApplications=e);let i=Bs++;return function(o){let a=o.__mixinSet;if(a&&a[i])return o;let n=e,s=n.get(o);if(!s){s=t(o),n.set(o,s);let e=Object.create(s.__mixinSet||a||null);e[i]=!0,s.__mixinSet=e}return s}},Hs=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?t=>ShadyDOM.patch(t):t=>t
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Ds(t){return t.indexOf(".")>=0}function Rs(t){let e=t.indexOf(".");return-1===e?t:t.slice(0,e)}function zs(t,e){return 0===t.indexOf(e+".")}function Is(t,e){return 0===e.indexOf(t+".")}function $s(t,e,i){return e+i.slice(t.length)}function js(t){if(Array.isArray(t)){let e=[];for(let i=0;i<t.length;i++){let o=t[i].toString().split(".");for(let t=0;t<o.length;t++)e.push(o[t])}return e.join(".")}return t}function Fs(t){return Array.isArray(t)?js(t).split("."):t.toString().split(".")}function Vs(t,e,i){let o=t,a=Fs(e);for(let t=0;t<a.length;t++){if(!o)return;o=o[a[t]]}return i&&(i.path=a.join(".")),o}function Us(t,e,i){let o=t,a=Fs(e),n=a[a.length-1];if(a.length>1){for(let t=0;t<a.length-1;t++){if(o=o[a[t]],!o)return}o[n]=i}else o[e]=i;return a.join(".")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const qs={},Gs=/-[a-z]/g,Ws=/([A-Z])/g;function Xs(t){return qs[t]||(qs[t]=t.indexOf("-")<0?t:t.replace(Gs,(t=>t[1].toUpperCase())))}function Ys(t){return qs[t]||(qs[t]=t.replace(Ws,"-$1").toLowerCase())}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Ks=0,Js=0,Qs=[],Zs=0,tr=!1,er=document.createTextNode("");new window.MutationObserver((function(){tr=!1;const t=Qs.length;for(let e=0;e<t;e++){let t=Qs[e];if(t)try{t()}catch(t){setTimeout((()=>{throw t}))}}Qs.splice(0,t),Js+=t})).observe(er,{characterData:!0});const ir={after:t=>({run:e=>window.setTimeout(e,t),cancel(t){window.clearTimeout(t)}}),run:(t,e)=>window.setTimeout(t,e),cancel(t){window.clearTimeout(t)}},or={run:t=>window.requestIdleCallback?window.requestIdleCallback(t):window.setTimeout(t,16),cancel(t){window.cancelIdleCallback?window.cancelIdleCallback(t):window.clearTimeout(t)}},ar={run:t=>(tr||(tr=!0,er.textContent=Zs++),Qs.push(t),Ks++),cancel(t){const e=t-Js;if(e>=0){if(!Qs[e])throw new Error("invalid async handle: "+t);Qs[e]=null}}},nr=ar,sr=Ms((t=>class extends t{static createProperties(t){const e=this.prototype;for(let i in t)i in e||e._createPropertyAccessor(i)}static attributeNameForProperty(t){return t.toLowerCase()}static typeForProperty(t){}_createPropertyAccessor(t,e){this._addPropertyToAttributeMap(t),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[t]||(this.__dataHasAccessor[t]=!0,this._definePropertyAccessor(t,e))}_addPropertyToAttributeMap(t){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let e=this.__dataAttributes[t];return e||(e=this.constructor.attributeNameForProperty(t),this.__dataAttributes[e]=t),e}_definePropertyAccessor(t,e){Object.defineProperty(this,t,{get(){return this.__data[t]},set:e?function(){}:function(e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let t in this.__dataHasAccessor)this.hasOwnProperty(t)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[t]=this[t],delete this[t])}_initializeInstanceProperties(t){Object.assign(this,t)}_setProperty(t,e){this._setPendingProperty(t,e)&&this._invalidateProperties()}_getProperty(t){return this.__data[t]}_setPendingProperty(t,e,i){let o=this.__data[t],a=this._shouldPropertyChange(t,e,o);return a&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(t in this.__dataOld)&&(this.__dataOld[t]=o),this.__data[t]=e,this.__dataPending[t]=e),a}_isPropertyPending(t){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(t))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,nr.run((()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())})))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const t=this.__data,e=this.__dataPending,i=this.__dataOld;this._shouldPropertiesChange(t,e,i)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(t,e,i)),this.__dataCounter--}_shouldPropertiesChange(t,e,i){return Boolean(e)}_propertiesChanged(t,e,i){}_shouldPropertyChange(t,e,i){return i!==e&&(i==i||e==e)}attributeChangedCallback(t,e,i,o){e!==i&&this._attributeToProperty(t,i),super.attributeChangedCallback&&super.attributeChangedCallback(t,e,i,o)}_attributeToProperty(t,e,i){if(!this.__serializing){const o=this.__dataAttributes,a=o&&o[t]||t;this[a]=this._deserializeValue(e,i||this.constructor.typeForProperty(a))}}_propertyToAttribute(t,e,i){this.__serializing=!0,i=arguments.length<3?this[t]:i,this._valueToNodeAttribute(this,i,e||this.constructor.attributeNameForProperty(t)),this.__serializing=!1}_valueToNodeAttribute(t,e,i){const o=this._serializeValue(e);"class"!==i&&"name"!==i&&"slot"!==i||(t=Hs(t)),void 0===o?t.removeAttribute(i):t.setAttribute(i,o)}_serializeValue(t){return"boolean"==typeof t?t?"":void 0:null!=t?t.toString():void 0}_deserializeValue(t,e){switch(e){case Boolean:return null!==t;case Number:return Number(t);default:return t}}})),rr={};let lr=HTMLElement.prototype;for(;lr;){let t=Object.getOwnPropertyNames(lr);for(let e=0;e<t.length;e++)rr[t[e]]=!0;lr=Object.getPrototypeOf(lr)}const dr=Ms((t=>{const e=sr(t);return class extends e{static createPropertiesForAttributes(){let t=this.observedAttributes;for(let e=0;e<t.length;e++)this.prototype._createPropertyAccessor(Xs(t[e]))}static attributeNameForProperty(t){return Ys(t)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(t){for(let e in t)this._setProperty(e,t[e])}_ensureAttribute(t,e){const i=this;i.hasAttribute(t)||this._valueToNodeAttribute(i,e,t)}_serializeValue(t){if("object"==typeof t){if(t instanceof Date)return t.toString();if(t)try{return JSON.stringify(t)}catch(t){return""}}return super._serializeValue(t)}_deserializeValue(t,e){let i;switch(e){case Object:try{i=JSON.parse(t)}catch(e){i=t}break;case Array:try{i=JSON.parse(t)}catch(e){i=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${t}`)}break;case Date:i=isNaN(t)?String(t):Number(t),i=new Date(i);break;default:i=super._deserializeValue(t,e)}return i}_definePropertyAccessor(t,e){!function(t,e){if(!rr[e]){let i=t[e];void 0!==i&&(t.__data?t._setPendingProperty(e,i):(t.__dataProto?t.hasOwnProperty(JSCompiler_renameProperty("__dataProto",t))||(t.__dataProto=Object.create(t.__dataProto)):t.__dataProto={},t.__dataProto[e]=i))}}(this,t),super._definePropertyAccessor(t,e)}_hasAccessor(t){return this.__dataHasAccessor&&this.__dataHasAccessor[t]}_isPropertyPending(t){return Boolean(this.__dataPending&&t in this.__dataPending)}}})),cr={"dom-if":!0,"dom-repeat":!0};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let hr=!1,ur=!1;function pr(t){(function(){if(!hr){hr=!0;const t=document.createElement("textarea");t.placeholder="a",ur=t.placeholder===t.textContent}return ur})()&&"textarea"===t.localName&&t.placeholder&&t.placeholder===t.textContent&&(t.textContent=null)}function mr(t){let e=t.getAttribute("is");if(e&&cr[e]){let i=t;for(i.removeAttribute("is"),t=i.ownerDocument.createElement(e),i.parentNode.replaceChild(t,i),t.appendChild(i);i.attributes.length;)t.setAttribute(i.attributes[0].name,i.attributes[0].value),i.removeAttribute(i.attributes[0].name)}return t}function gr(t,e){let i=e.parentInfo&&gr(t,e.parentInfo);if(!i)return t;for(let t=i.firstChild,o=0;t;t=t.nextSibling)if(e.parentIndex===o++)return t}function br(t,e,i,o){o.id&&(e[o.id]=i)}function fr(t,e,i){if(i.events&&i.events.length)for(let o,a=0,n=i.events;a<n.length&&(o=n[a]);a++)t._addMethodEventListenerToNode(e,o.name,o.value,t)}function vr(t,e,i,o){i.templateInfo&&(e._templateInfo=i.templateInfo,e._parentTemplateInfo=o)}const yr=Ms((t=>class extends t{static _parseTemplate(t,e){if(!t._templateInfo){let i=t._templateInfo={};i.nodeInfoList=[],i.nestedTemplate=Boolean(e),i.stripWhiteSpace=e&&e.stripWhiteSpace||t.hasAttribute("strip-whitespace"),this._parseTemplateContent(t,i,{parent:null})}return t._templateInfo}static _parseTemplateContent(t,e,i){return this._parseTemplateNode(t.content,e,i)}static _parseTemplateNode(t,e,i){let o=!1,a=t;return"template"!=a.localName||a.hasAttribute("preserve-content")?"slot"===a.localName&&(e.hasInsertionPoint=!0):o=this._parseTemplateNestedTemplate(a,e,i)||o,pr(a),a.firstChild&&this._parseTemplateChildNodes(a,e,i),a.hasAttributes&&a.hasAttributes()&&(o=this._parseTemplateNodeAttributes(a,e,i)||o),o||i.noted}static _parseTemplateChildNodes(t,e,i){if("script"!==t.localName&&"style"!==t.localName)for(let o,a=t.firstChild,n=0;a;a=o){if("template"==a.localName&&(a=mr(a)),o=a.nextSibling,a.nodeType===Node.TEXT_NODE){let i=o;for(;i&&i.nodeType===Node.TEXT_NODE;)a.textContent+=i.textContent,o=i.nextSibling,t.removeChild(i),i=o;if(e.stripWhiteSpace&&!a.textContent.trim()){t.removeChild(a);continue}}let s={parentIndex:n,parentInfo:i};this._parseTemplateNode(a,e,s)&&(s.infoIndex=e.nodeInfoList.push(s)-1),a.parentNode&&n++}}static _parseTemplateNestedTemplate(t,e,i){let o=t,a=this._parseTemplate(o,e);return(a.content=o.content.ownerDocument.createDocumentFragment()).appendChild(o.content),i.templateInfo=a,!0}static _parseTemplateNodeAttributes(t,e,i){let o=!1,a=Array.from(t.attributes);for(let n,s=a.length-1;n=a[s];s--)o=this._parseTemplateNodeAttribute(t,e,i,n.name,n.value)||o;return o}static _parseTemplateNodeAttribute(t,e,i,o,a){return"on-"===o.slice(0,3)?(t.removeAttribute(o),i.events=i.events||[],i.events.push({name:o.slice(3),value:a}),!0):"id"===o&&(i.id=a,!0)}static _contentForTemplate(t){let e=t._templateInfo;return e&&e.content||t.content}_stampTemplate(t,e){t&&!t.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t);let i=(e=e||this.constructor._parseTemplate(t)).nodeInfoList,o=e.content||t.content,a=document.importNode(o,!0);a.__noInsertionPoint=!e.hasInsertionPoint;let n=a.nodeList=new Array(i.length);a.$={};for(let t,o=0,s=i.length;o<s&&(t=i[o]);o++){let i=n[o]=gr(a,t);br(0,a.$,i,t),vr(0,i,t,e),fr(this,i,t)}return a=a,a}_addMethodEventListenerToNode(t,e,i,o){let a=function(t,e,i){return t=t._methodHost||t,function(e){t[i]?t[i](e,e.detail):console.warn("listener method `"+i+"` not defined")}}(o=o||t,0,i);return this._addEventListenerToNode(t,e,a),a}_addEventListenerToNode(t,e,i){t.addEventListener(e,i)}_removeEventListenerFromNode(t,e,i){t.removeEventListener(e,i)}}));
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let _r=0;const xr=[],wr={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Ar=/[A-Z]/;function Er(t,e,i){let o=t[e];if(o){if(!t.hasOwnProperty(e)&&(o=t[e]=Object.create(t[e]),i))for(let t in o){let e=o[t],i=o[t]=Array(e.length);for(let t=0;t<e.length;t++)i[t]=e[t]}}else o=t[e]={};return o}function Sr(t,e,i,o,a,n){if(e){let s=!1;const r=_r++;for(let l in i){let d=e[a?Rs(l):l];if(d)for(let e,c=0,h=d.length;c<h&&(e=d[c]);c++)e.info&&e.info.lastRun===r||a&&!Nr(l,e.trigger)||(e.info&&(e.info.lastRun=r),e.fn(t,l,i,o,e.info,a,n),s=!0)}return s}return!1}function Cr(t,e,i,o,a,n,s,r){let l=!1,d=e[s?Rs(o):o];if(d)for(let e,c=0,h=d.length;c<h&&(e=d[c]);c++)e.info&&e.info.lastRun===i||s&&!Nr(o,e.trigger)||(e.info&&(e.info.lastRun=i),e.fn(t,o,a,n,e.info,s,r),l=!0);return l}function Nr(t,e){if(e){let i=e.name;return i==t||!(!e.structured||!zs(i,t))||!(!e.wildcard||!Is(i,t))}return!0}function Tr(t,e,i,o,a){let n="string"==typeof a.method?t[a.method]:a.method,s=a.property;n?n.call(t,t.__data[s],o[s]):a.dynamicFn||console.warn("observer method `"+a.method+"` not defined")}function kr(t,e,i){let o=Rs(e);if(o!==e){return Or(t,Ys(o)+"-changed",i[e],e),!0}return!1}function Or(t,e,i,o){let a={value:i,queueProperty:!0};o&&(a.path=o),Hs(t).dispatchEvent(new CustomEvent(e,{detail:a}))}function Pr(t,e,i,o,a,n){let s=(n?Rs(e):e)!=e?e:null,r=s?Vs(t,s):t.__data[e];s&&void 0===r&&(r=i[e]),Or(t,a.eventName,r,s)}function Lr(t,e,i,o,a){let n=t.__data[e];Xn&&(n=Xn(n,a.attrName,"attribute",t)),t._propertyToAttribute(e,a.attrName,n)}function Br(t,e,i,o){let a=t[wr.COMPUTE];if(a)if(is){_r++;const n=function(t){let e=t.constructor.__orderedComputedDeps;if(!e){e=new Map;const i=t[wr.COMPUTE];let o,{counts:a,ready:n,total:s}=function(t){const e=t.__computeInfo,i={},o=t[wr.COMPUTE],a=[];let n=0;for(let t in e){const o=e[t];n+=i[t]=o.args.filter((t=>!t.literal)).length+(o.dynamicFn?1:0)}for(let t in o)e[t]||a.push(t);return{counts:i,ready:a,total:n}}(t);for(;o=n.shift();){e.set(o,e.size);const t=i[o];t&&t.forEach((t=>{const e=t.info.methodInfo;--s,0==--a[e]&&n.push(e)}))}if(0!==s){const e=t;console.warn(`Computed graph for ${e.localName} incomplete; circular?`)}t.constructor.__orderedComputedDeps=e}return e}(t),s=[];for(let t in e)Hr(t,a,s,n,o);let r;for(;r=s.shift();)Dr(t,"",e,i,r)&&Hr(r.methodInfo,a,s,n,o);Object.assign(i,t.__dataOld),Object.assign(e,t.__dataPending),t.__dataPending=null}else{let n=e;for(;Sr(t,a,n,i,o);)Object.assign(i,t.__dataOld),Object.assign(e,t.__dataPending),n=t.__dataPending,t.__dataPending=null}}const Mr=(t,e,i)=>{let o=0,a=e.length-1,n=-1;for(;o<=a;){const s=o+a>>1,r=i.get(e[s].methodInfo)-i.get(t.methodInfo);if(r<0)o=s+1;else{if(!(r>0)){n=s;break}a=s-1}}n<0&&(n=a+1),e.splice(n,0,t)},Hr=(t,e,i,o,a)=>{const n=e[a?Rs(t):t];if(n)for(let e=0;e<n.length;e++){const s=n[e];s.info.lastRun===_r||a&&!Nr(t,s.trigger)||(s.info.lastRun=_r,Mr(s.info,i,o))}};function Dr(t,e,i,o,a){let n=Vr(t,e,i,o,a);if(n===xr)return!1;let s=a.methodInfo;return t.__dataHasAccessor&&t.__dataHasAccessor[s]?t._setPendingProperty(s,n,!0):(t[s]=n,!1)}function Rr(t,e,i,o,a,n,s){i.bindings=i.bindings||[];let r={kind:o,target:a,parts:n,literal:s,isCompound:1!==n.length};if(i.bindings.push(r),function(t){return Boolean(t.target)&&"attribute"!=t.kind&&"text"!=t.kind&&!t.isCompound&&"{"===t.parts[0].mode}(r)){let{event:t,negate:e}=r.parts[0];r.listenerEvent=t||Ys(a)+"-changed",r.listenerNegate=e}let l=e.nodeInfoList.length;for(let i=0;i<r.parts.length;i++){let o=r.parts[i];o.compoundIndex=i,zr(t,e,r,o,l)}}function zr(t,e,i,o,a){if(!o.literal)if("attribute"===i.kind&&"-"===i.target[0])console.warn("Cannot set attribute "+i.target+' because "-" is not a valid attribute starting character');else{let n=o.dependencies,s={index:a,binding:i,part:o,evaluator:t};for(let i=0;i<n.length;i++){let o=n[i];"string"==typeof o&&(o=Xr(o),o.wildcard=!0),t._addTemplatePropertyEffect(e,o.rootProperty,{fn:Ir,info:s,trigger:o})}}}function Ir(t,e,i,o,a,n,s){let r=s[a.index],l=a.binding,d=a.part;if(n&&d.source&&e.length>d.source.length&&"property"==l.kind&&!l.isCompound&&r.__isPropertyEffectsClient&&r.__dataHasAccessor&&r.__dataHasAccessor[l.target]){let o=i[e];e=$s(d.source,l.target,e),r._setPendingPropertyOrPath(e,o,!1,!0)&&t._enqueueClient(r)}else{let s=a.evaluator._evaluateBinding(t,d,e,i,o,n);s!==xr&&function(t,e,i,o,a){a=function(t,e,i,o){if(i.isCompound){let a=t.__dataCompoundStorage[i.target];a[o.compoundIndex]=e,e=a.join("")}"attribute"!==i.kind&&("textContent"!==i.target&&("value"!==i.target||"input"!==t.localName&&"textarea"!==t.localName)||(e=null==e?"":e));return e}(e,a,i,o),Xn&&(a=Xn(a,i.target,i.kind,e));if("attribute"==i.kind)t._valueToNodeAttribute(e,a,i.target);else{let o=i.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[o]?e[wr.READ_ONLY]&&e[wr.READ_ONLY][o]||e._setPendingProperty(o,a)&&t._enqueueClient(e):t._setUnmanagedPropertyToNode(e,o,a)}}(t,r,l,d,s)}}function $r(t,e){if(e.isCompound){let i=t.__dataCompoundStorage||(t.__dataCompoundStorage={}),o=e.parts,a=new Array(o.length);for(let t=0;t<o.length;t++)a[t]=o[t].literal;let n=e.target;i[n]=a,e.literal&&"property"==e.kind&&("className"===n&&(t=Hs(t)),t[n]=e.literal)}}function jr(t,e,i){if(i.listenerEvent){let o=i.parts[0];t.addEventListener(i.listenerEvent,(function(t){!function(t,e,i,o,a){let n,s=t.detail,r=s&&s.path;r?(o=$s(i,o,r),n=s&&s.value):n=t.currentTarget[i],n=a?!n:n,e[wr.READ_ONLY]&&e[wr.READ_ONLY][o]||!e._setPendingPropertyOrPath(o,n,!0,Boolean(r))||s&&s.queueProperty||e._invalidateProperties()}(t,e,i.target,o.source,o.negate)}))}}function Fr(t,e,i,o,a,n){n=e.static||n&&("object"!=typeof n||n[e.methodName]);let s={methodName:e.methodName,args:e.args,methodInfo:a,dynamicFn:n};for(let a,n=0;n<e.args.length&&(a=e.args[n]);n++)a.literal||t._addPropertyEffect(a.rootProperty,i,{fn:o,info:s,trigger:a});return n&&t._addPropertyEffect(e.methodName,i,{fn:o,info:s}),s}function Vr(t,e,i,o,a){let n=t._methodHost||t,s=n[a.methodName];if(s){let o=t._marshalArgs(a.args,e,i);return o===xr?xr:s.apply(n,o)}a.dynamicFn||console.warn("method `"+a.methodName+"` not defined")}const Ur=[],qr=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function Gr(t){let e="";for(let i=0;i<t.length;i++){e+=t[i].literal||""}return e}function Wr(t){let e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let t={methodName:e[1],static:!0,args:Ur};if(e[2].trim()){return function(t,e){return e.args=t.map((function(t){let i=Xr(t);return i.literal||(e.static=!1),i}),this),e}(e[2].replace(/\\,/g,"&comma;").split(","),t)}return t}return null}function Xr(t){let e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:e,value:"",literal:!1},o=e[0];switch("-"===o&&(o=e[1]),o>="0"&&o<="9"&&(o="#"),o){case"'":case'"':i.value=e.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(e),i.literal=!0}return i.literal||(i.rootProperty=Rs(e),i.structured=Ds(e),i.structured&&(i.wildcard=".*"==e.slice(-2),i.wildcard&&(i.name=e.slice(0,-2)))),i}function Yr(t,e,i){let o=Vs(t,i);return void 0===o&&(o=e[i]),o}function Kr(t,e,i,o){const a={indexSplices:o};es&&!t._overrideLegacyUndefined&&(e.splices=a),t.notifyPath(i+".splices",a),t.notifyPath(i+".length",e.length),es&&!t._overrideLegacyUndefined&&(a.indexSplices=[])}function Jr(t,e,i,o,a,n){Kr(t,e,i,[{index:o,addedCount:a,removed:n,object:e,type:"splice"}])}const Qr=Ms((t=>{const e=yr(dr(t));return class extends e{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return wr}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(Zr.length){let t=Zr[Zr.length-1];t._enqueueClient(this),this.__dataHost=t}}_initializeProtoProperties(t){this.__data=Object.create(t),this.__dataPending=Object.create(t),this.__dataOld={}}_initializeInstanceProperties(t){let e=this[wr.READ_ONLY];for(let i in t)e&&e[i]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[i]=this.__dataPending[i]=t[i])}_addPropertyEffect(t,e,i){this._createPropertyAccessor(t,e==wr.READ_ONLY);let o=Er(this,e,!0)[t];o||(o=this[e][t]=[]),o.push(i)}_removePropertyEffect(t,e,i){let o=Er(this,e,!0)[t],a=o.indexOf(i);a>=0&&o.splice(a,1)}_hasPropertyEffect(t,e){let i=this[e];return Boolean(i&&i[t])}_hasReadOnlyEffect(t){return this._hasPropertyEffect(t,wr.READ_ONLY)}_hasNotifyEffect(t){return this._hasPropertyEffect(t,wr.NOTIFY)}_hasReflectEffect(t){return this._hasPropertyEffect(t,wr.REFLECT)}_hasComputedEffect(t){return this._hasPropertyEffect(t,wr.COMPUTE)}_setPendingPropertyOrPath(t,e,i,o){if(o||Rs(Array.isArray(t)?t[0]:t)!==t){if(!o){let i=Vs(this,t);if(!(t=Us(this,t,e))||!super._shouldPropertyChange(t,e,i))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(t,e,i))return function(t,e,i){let o=t.__dataLinkedPaths;if(o){let a;for(let n in o){let s=o[n];Is(n,e)?(a=$s(n,s,e),t._setPendingPropertyOrPath(a,i,!0,!0)):Is(s,e)&&(a=$s(s,n,e),t._setPendingPropertyOrPath(a,i,!0,!0))}}}(this,t,e),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[t])return this._setPendingProperty(t,e,i);this[t]=e}return!1}_setUnmanagedPropertyToNode(t,e,i){i===t[e]&&"object"!=typeof i||("className"===e&&(t=Hs(t)),t[e]=i)}_setPendingProperty(t,e,i){let o=this.__dataHasPaths&&Ds(t),a=o?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(t,e,a[t])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),t in this.__dataOld||(this.__dataOld[t]=this.__data[t]),o?this.__dataTemp[t]=e:this.__data[t]=e,this.__dataPending[t]=e,(o||this[wr.NOTIFY]&&this[wr.NOTIFY][t])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[t]=i),!0)}_setProperty(t,e){this._setPendingProperty(t,e,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(t){this.__dataPendingClients=this.__dataPendingClients||[],t!==this&&this.__dataPendingClients.push(t)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let t=this.__dataPendingClients;if(t){this.__dataPendingClients=null;for(let e=0;e<t.length;e++){let i=t[e];i.__dataEnabled?i.__dataPending&&i._flushProperties():i._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(t,e){for(let i in t)!e&&this[wr.READ_ONLY]&&this[wr.READ_ONLY][i]||this._setPendingPropertyOrPath(i,t[i],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(t,e,i){let o,a=this.__dataHasPaths;this.__dataHasPaths=!1,Br(this,e,i,a),o=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(e,i,a),this._flushClients(),Sr(this,this[wr.REFLECT],e,i,a),Sr(this,this[wr.OBSERVE],e,i,a),o&&function(t,e,i,o,a){let n,s,r=t[wr.NOTIFY],l=_r++;for(let s in e)e[s]&&(r&&Cr(t,r,l,s,i,o,a)||a&&kr(t,s,i))&&(n=!0);n&&(s=t.__dataHost)&&s._invalidateProperties&&s._invalidateProperties()}(this,o,e,i,a),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(t,e,i){this[wr.PROPAGATE]&&Sr(this,this[wr.PROPAGATE],t,e,i),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,t,e,i)}_runEffectsForTemplate(t,e,i,o){const a=(e,o)=>{Sr(this,t.propertyEffects,e,i,o,t.nodeList);for(let a=t.firstChild;a;a=a.nextSibling)this._runEffectsForTemplate(a,e,i,o)};t.runEffects?t.runEffects(a,e,o):a(e,o)}linkPaths(t,e){t=js(t),e=js(e),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[t]=e}unlinkPaths(t){t=js(t),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[t]}notifySplices(t,e){let i={path:""};Kr(this,Vs(this,t,i),i.path,e)}get(t,e){return Vs(e||this,t)}set(t,e,i){i?Us(i,t,e):this[wr.READ_ONLY]&&this[wr.READ_ONLY][t]||this._setPendingPropertyOrPath(t,e,!0)&&this._invalidateProperties()}push(t,...e){let i={path:""},o=Vs(this,t,i),a=o.length,n=o.push(...e);return e.length&&Jr(this,o,i.path,a,e.length,[]),n}pop(t){let e={path:""},i=Vs(this,t,e),o=Boolean(i.length),a=i.pop();return o&&Jr(this,i,e.path,i.length,0,[a]),a}splice(t,e,i,...o){let a,n={path:""},s=Vs(this,t,n);return e<0?e=s.length-Math.floor(-e):e&&(e=Math.floor(e)),a=2===arguments.length?s.splice(e):s.splice(e,i,...o),(o.length||a.length)&&Jr(this,s,n.path,e,o.length,a),a}shift(t){let e={path:""},i=Vs(this,t,e),o=Boolean(i.length),a=i.shift();return o&&Jr(this,i,e.path,0,0,[a]),a}unshift(t,...e){let i={path:""},o=Vs(this,t,i),a=o.unshift(...e);return e.length&&Jr(this,o,i.path,0,e.length,[]),a}notifyPath(t,e){let i;if(1==arguments.length){let o={path:""};e=Vs(this,t,o),i=o.path}else i=Array.isArray(t)?js(t):t;this._setPendingPropertyOrPath(i,e,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(t,e){var i;this._addPropertyEffect(t,wr.READ_ONLY),e&&(this["_set"+(i=t,i[0].toUpperCase()+i.substring(1))]=function(e){this._setProperty(t,e)})}_createPropertyObserver(t,e,i){let o={property:t,method:e,dynamicFn:Boolean(i)};this._addPropertyEffect(t,wr.OBSERVE,{fn:Tr,info:o,trigger:{name:t}}),i&&this._addPropertyEffect(e,wr.OBSERVE,{fn:Tr,info:o,trigger:{name:e}})}_createMethodObserver(t,e){let i=Wr(t);if(!i)throw new Error("Malformed observer expression '"+t+"'");Fr(this,i,wr.OBSERVE,Vr,null,e)}_createNotifyingProperty(t){this._addPropertyEffect(t,wr.NOTIFY,{fn:Pr,info:{eventName:Ys(t)+"-changed",property:t}})}_createReflectedProperty(t){let e=this.constructor.attributeNameForProperty(t);"-"===e[0]?console.warn("Property "+t+" cannot be reflected to attribute "+e+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(t,wr.REFLECT,{fn:Lr,info:{attrName:e}})}_createComputedProperty(t,e,i){let o=Wr(e);if(!o)throw new Error("Malformed computed expression '"+e+"'");const a=Fr(this,o,wr.COMPUTE,Dr,t,i);Er(this,"__computeInfo")[t]=a}_marshalArgs(t,e,i){const o=this.__data,a=[];for(let n=0,s=t.length;n<s;n++){let{name:s,structured:r,wildcard:l,value:d,literal:c}=t[n];if(!c)if(l){const t=Is(s,e),a=Yr(o,i,t?e:s);d={path:t?e:s,value:a,base:t?Vs(o,s):a}}else d=r?Yr(o,i,s):o[s];if(es&&!this._overrideLegacyUndefined&&void 0===d&&t.length>1)return xr;a[n]=d}return a}static addPropertyEffect(t,e,i){this.prototype._addPropertyEffect(t,e,i)}static createPropertyObserver(t,e,i){this.prototype._createPropertyObserver(t,e,i)}static createMethodObserver(t,e){this.prototype._createMethodObserver(t,e)}static createNotifyingProperty(t){this.prototype._createNotifyingProperty(t)}static createReadOnlyProperty(t,e){this.prototype._createReadOnlyProperty(t,e)}static createReflectedProperty(t){this.prototype._createReflectedProperty(t)}static createComputedProperty(t,e,i){this.prototype._createComputedProperty(t,e,i)}static bindTemplate(t){return this.prototype._bindTemplate(t)}_bindTemplate(t,e){let i=this.constructor._parseTemplate(t),o=this.__preBoundTemplateInfo==i;if(!o)for(let t in i.propertyEffects)this._createPropertyAccessor(t);if(e)if(i=Object.create(i),i.wasPreBound=o,this.__templateInfo){const e=t._parentTemplateInfo||this.__templateInfo,o=e.lastChild;i.parent=e,e.lastChild=i,i.previousSibling=o,o?o.nextSibling=i:e.firstChild=i}else this.__templateInfo=i;else this.__preBoundTemplateInfo=i;return i}static _addTemplatePropertyEffect(t,e,i){(t.hostProps=t.hostProps||{})[e]=!0;let o=t.propertyEffects=t.propertyEffects||{};(o[e]=o[e]||[]).push(i)}_stampTemplate(t,e){e=e||this._bindTemplate(t,!0),Zr.push(this);let i=super._stampTemplate(t,e);if(Zr.pop(),e.nodeList=i.nodeList,!e.wasPreBound){let t=e.childNodes=[];for(let e=i.firstChild;e;e=e.nextSibling)t.push(e)}return i.templateInfo=e,function(t,e){let{nodeList:i,nodeInfoList:o}=e;if(o.length)for(let e=0;e<o.length;e++){let a=o[e],n=i[e],s=a.bindings;if(s)for(let e=0;e<s.length;e++){let i=s[e];$r(n,i),jr(n,t,i)}n.__dataHost=t}}(this,e),this.__dataClientsReady&&(this._runEffectsForTemplate(e,this.__data,null,!1),this._flushClients()),i}_removeBoundDom(t){const e=t.templateInfo,{previousSibling:i,nextSibling:o,parent:a}=e;i?i.nextSibling=o:a&&(a.firstChild=o),o?o.previousSibling=i:a&&(a.lastChild=i),e.nextSibling=e.previousSibling=null;let n=e.childNodes;for(let t=0;t<n.length;t++){let e=n[t];Hs(Hs(e).parentNode).removeChild(e)}}static _parseTemplateNode(t,i,o){let a=e._parseTemplateNode.call(this,t,i,o);if(t.nodeType===Node.TEXT_NODE){let e=this._parseBindings(t.textContent,i);e&&(t.textContent=Gr(e)||" ",Rr(this,i,o,"text","textContent",e),a=!0)}return a}static _parseTemplateNodeAttribute(t,i,o,a,n){let s=this._parseBindings(n,i);if(s){let e=a,n="property";Ar.test(a)?n="attribute":"$"==a[a.length-1]&&(a=a.slice(0,-1),n="attribute");let r=Gr(s);return r&&"attribute"==n&&("class"==a&&t.hasAttribute("class")&&(r+=" "+t.getAttribute(a)),t.setAttribute(a,r)),"attribute"==n&&"disable-upgrade$"==e&&t.setAttribute(a,""),"input"===t.localName&&"value"===e&&t.setAttribute(e,""),t.removeAttribute(e),"property"===n&&(a=Xs(a)),Rr(this,i,o,n,a,s,r),!0}return e._parseTemplateNodeAttribute.call(this,t,i,o,a,n)}static _parseTemplateNestedTemplate(t,i,o){let a=e._parseTemplateNestedTemplate.call(this,t,i,o);const n=t.parentNode,s=o.templateInfo,r="dom-if"===n.localName,l="dom-repeat"===n.localName;os&&(r||l)&&(n.removeChild(t),(o=o.parentInfo).templateInfo=s,o.noted=!0,a=!1);let d=s.hostProps;if(as&&r)d&&(i.hostProps=Object.assign(i.hostProps||{},d),os||(o.parentInfo.noted=!0));else{let t="{";for(let e in d){Rr(this,i,o,"property","_host_"+e,[{mode:t,source:e,dependencies:[e],hostProp:!0}])}}return a}static _parseBindings(t,e){let i,o=[],a=0;for(;null!==(i=qr.exec(t));){i.index>a&&o.push({literal:t.slice(a,i.index)});let n=i[1][0],s=Boolean(i[2]),r=i[3].trim(),l=!1,d="",c=-1;"{"==n&&(c=r.indexOf("::"))>0&&(d=r.substring(c+2),r=r.substring(0,c),l=!0);let h=Wr(r),u=[];if(h){let{args:t,methodName:i}=h;for(let e=0;e<t.length;e++){let i=t[e];i.literal||u.push(i)}let o=e.dynamicFns;(o&&o[i]||h.static)&&(u.push(i),h.dynamicFn=!0)}else u.push(r);o.push({source:r,mode:n,negate:s,customEvent:l,signature:h,dependencies:u,event:d}),a=qr.lastIndex}if(a&&a<t.length){let e=t.substring(a);e&&o.push({literal:e})}return o.length?o:null}static _evaluateBinding(t,e,i,o,a,n){let s;return s=e.signature?Vr(t,i,o,0,e.signature):i!=e.source?Vs(t,e.source):n&&Ds(i)?Vs(t,i):t.__data[i],e.negate&&(s=!s),s}}})),Zr=[];const tl=Ms((t=>{const e=sr(t);function i(t){const e=Object.getPrototypeOf(t);return e.prototype instanceof a?e:null}function o(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",t))){let e=null;if(t.hasOwnProperty(JSCompiler_renameProperty("properties",t))){const i=t.properties;i&&(e=
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(t){const e={};for(let i in t){const o=t[i];e[i]="function"==typeof o?{type:o}:o}return e}(i))}t.__ownProperties=e}return t.__ownProperties}class a extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const t=this._properties;this.__observedAttributes=t?Object.keys(t).map((t=>this.prototype._addPropertyToAttributeMap(t))):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const t=i(this);t&&t.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const t=o(this);t&&this.createProperties(t)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const t=i(this);this.__properties=Object.assign({},t&&t._properties,o(this))}return this.__properties}static typeForProperty(t){const e=this._properties[t];return e&&e.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return a})),il=window.ShadyCSS&&window.ShadyCSS.cssBuild,ol=Ms((t=>{const e=tl(Qr(t));function i(t,e,i,o){i.computed&&(i.readOnly=!0),i.computed&&(t._hasReadOnlyEffect(e)?console.warn(`Cannot redefine computed property '${e}'.`):t._createComputedProperty(e,i.computed,o)),i.readOnly&&!t._hasReadOnlyEffect(e)?t._createReadOnlyProperty(e,!i.computed):!1===i.readOnly&&t._hasReadOnlyEffect(e)&&console.warn(`Cannot make readOnly property '${e}' non-readOnly.`),i.reflectToAttribute&&!t._hasReflectEffect(e)?t._createReflectedProperty(e):!1===i.reflectToAttribute&&t._hasReflectEffect(e)&&console.warn(`Cannot make reflected property '${e}' non-reflected.`),i.notify&&!t._hasNotifyEffect(e)?t._createNotifyingProperty(e):!1===i.notify&&t._hasNotifyEffect(e)&&console.warn(`Cannot make notify property '${e}' non-notify.`),i.observer&&t._createPropertyObserver(e,i.observer,o[i.observer]),t._addPropertyToAttributeMap(e)}function o(t,e,i,o){if(!il){const a=e.content.querySelectorAll("style"),n=bs(e),s=function(t){let e=us(t);return e?fs(e):[]}(i),r=e.content.firstElementChild;for(let i=0;i<s.length;i++){let a=s[i];a.textContent=t._processStyleText(a.textContent,o),e.content.insertBefore(a,r)}let l=0;for(let e=0;e<n.length;e++){let i=n[e],s=a[l];s!==i?(i=i.cloneNode(!0),s.parentNode.insertBefore(i,s)):l++,i.textContent=t._processStyleText(i.textContent,o)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,i),ss&&il&&Gn){const i=e.content.querySelectorAll("style");if(i){let e="";Array.from(i).forEach((t=>{e+=t.textContent,t.parentNode.removeChild(t)})),t._styleSheet=new CSSStyleSheet,t._styleSheet.replaceSync(e)}}}return class extends e{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){e._finalizeClass.call(this);const t=((i=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",i))||(i.__ownObservers=i.hasOwnProperty(JSCompiler_renameProperty("observers",i))?i.observers:null),i.__ownObservers);var i;t&&this.createObservers(t,this._properties),this._prepareTemplate()}static _prepareTemplate(){let t=this.template;t&&("string"==typeof t?(console.error("template getter must return HTMLTemplateElement"),t=null):Qn||(t=t.cloneNode(!0))),this.prototype._template=t}static createProperties(t){for(let e in t)i(this.prototype,e,t[e],t)}static createObservers(t,e){const i=this.prototype;for(let o=0;o<t.length;o++)i._createMethodObserver(t[o],e)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const t=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==t?t:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(t){let e=null;if(t&&(!Kn||Jn)&&(e=hs.import(t,"template"),Kn&&!e))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${t}`);return e}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(t){this._template=t}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const t=this.importMeta;if(t)this._importPath=Un(t.url);else{const t=hs.import(this.is);this._importPath=t&&t.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Wn,this.importPath=this.constructor.importPath;let t=function(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",t))){t.__propertyDefaults=null;let e=t._properties;for(let i in e){let o=e[i];"value"in o&&(t.__propertyDefaults=t.__propertyDefaults||{},t.__propertyDefaults[i]=o)}}return t.__propertyDefaults}(this.constructor);if(t)for(let e in t){let i=t[e];if(this._canApplyPropertyDefault(e)){let t="function"==typeof i.value?i.value.call(this):i.value;this._hasAccessor(e)?this._setPendingProperty(e,t,!0):this[e]=t}}}_canApplyPropertyDefault(t){return!this.hasOwnProperty(t)}static _processStyleText(t,e){return Vn(t,e)}static _finalizeTemplate(t){const e=this.prototype._template;if(e&&!e.__polymerFinalized){e.__polymerFinalized=!0;const i=this.importPath;o(this,e,t,i?Fn(i):""),this.prototype._bindTemplate(e)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(t){const e=Hs(this);if(e.attachShadow)return t?(e.shadowRoot||(e.attachShadow({mode:"open",shadyUpgradeFragment:t}),e.shadowRoot.appendChild(t),this.constructor._styleSheet&&(e.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),ts&&window.ShadyDOM&&window.ShadyDOM.flushInitial(e.shadowRoot),e.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(t){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,t)}resolveUrl(t,e){return!e&&this.importPath&&(e=Fn(this.importPath)),Fn(t,e)}static _parseTemplateContent(t,i,o){return i.dynamicFns=i.dynamicFns||this._properties,e._parseTemplateContent.call(this,t,i,o)}static _addTemplatePropertyEffect(t,i,o){return!Zn||i in this._properties||o.info.part.signature&&o.info.part.signature.static||o.info.part.hostProp||t.nestedTemplate||console.warn(`Property '${i}' used in template but not declared in 'properties'; attribute will not be observed.`),e._addTemplatePropertyEffect.call(this,t,i,o)}}})),al=ol(HTMLElement);
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class nl{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(t,e){this._asyncModule=t,this._callback=e,this._timer=this._asyncModule.run((()=>{this._timer=null,sl.delete(this),this._callback()}))}cancel(){this.isActive()&&(this._cancelAsync(),sl.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(t,e,i){return t instanceof nl?t._cancelAsync():t=new nl,t.setConfig(e,i),t}}let sl=new Set;const rl=function(t){sl.add(t)},ll=function(){const t=Boolean(sl.size);return sl.forEach((t=>{try{t.flush()}catch(t){setTimeout((()=>{throw t}))}})),t};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let dl="string"==typeof document.head.style.touchAction,cl="__polymerGestures",hl="__polymerGesturesHandled",ul="__polymerGesturesTouchAction",pl=["mousedown","mousemove","mouseup","click"],ml=[0,1,4,2],gl=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(t){return!1}}();function bl(t){return pl.indexOf(t)>-1}let fl=!1;function vl(t){if(!bl(t)&&"touchend"!==t)return dl&&fl&&Yn?{passive:!0}:void 0}!function(){try{let t=Object.defineProperty({},"passive",{get(){fl=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}}();let yl=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const _l=[],xl={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},wl={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function Al(t){return xl[t.localName]||!1}function El(t){let e=Array.prototype.slice.call(t.labels||[]);if(!e.length){e=[];let i=t.getRootNode();if(t.id){let o=i.querySelectorAll(`label[for = ${t.id}]`);for(let t=0;t<o.length;t++)e.push(o[t])}}return e}let Sl=function(t){let e=t.sourceCapabilities;if((!e||e.firesTouchEvents)&&(t[hl]={skip:!0},"click"===t.type)){let e=!1,i=Pl(t);for(let t=0;t<i.length;t++){if(i[t].nodeType===Node.ELEMENT_NODE)if("label"===i[t].localName)_l.push(i[t]);else if(Al(i[t])){let o=El(i[t]);for(let t=0;t<o.length;t++)e=e||_l.indexOf(o[t])>-1}if(i[t]===Tl.mouse.target)return}if(e)return;t.preventDefault(),t.stopPropagation()}};function Cl(t){let e=yl?["click"]:pl;for(let i,o=0;o<e.length;o++)i=e[o],t?(_l.length=0,document.addEventListener(i,Sl,!0)):document.removeEventListener(i,Sl,!0)}function Nl(t){let e=t.type;if(!bl(e))return!1;if("mousemove"===e){let e=void 0===t.buttons?1:t.buttons;return t instanceof window.MouseEvent&&!gl&&(e=ml[t.which]||0),Boolean(1&e)}return 0===(void 0===t.button?0:t.button)}let Tl={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function kl(t,e,i){t.movefn=e,t.upfn=i,document.addEventListener("mousemove",e),document.addEventListener("mouseup",i)}function Ol(t){document.removeEventListener("mousemove",t.movefn),document.removeEventListener("mouseup",t.upfn),t.movefn=null,t.upfn=null}document.addEventListener("touchend",(function(t){Tl.mouse.mouseIgnoreJob||Cl(!0),Tl.mouse.target=Pl(t)[0],Tl.mouse.mouseIgnoreJob=nl.debounce(Tl.mouse.mouseIgnoreJob,ir.after(2500),(function(){Cl(),Tl.mouse.target=null,Tl.mouse.mouseIgnoreJob=null}))}),!!fl&&{passive:!0});const Pl=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:t=>t.composedPath&&t.composedPath()||[],Ll={},Bl=[];function Ml(t){const e=Pl(t);return e.length>0?e[0]:t.target}function Hl(t){let e,i=t.type,o=t.currentTarget.__polymerGestures;if(!o)return;let a=o[i];if(a){if(!t[hl]&&(t[hl]={},"touch"===i.slice(0,5))){let e=(t=t).changedTouches[0];if("touchstart"===i&&1===t.touches.length&&(Tl.touch.id=e.identifier),Tl.touch.id!==e.identifier)return;dl||"touchstart"!==i&&"touchmove"!==i||function(t){let e=t.changedTouches[0],i=t.type;if("touchstart"===i)Tl.touch.x=e.clientX,Tl.touch.y=e.clientY,Tl.touch.scrollDecided=!1;else if("touchmove"===i){if(Tl.touch.scrollDecided)return;Tl.touch.scrollDecided=!0;let i=function(t){let e="auto",i=Pl(t);for(let t,o=0;o<i.length;o++)if(t=i[o],t[ul]){e=t[ul];break}return e}(t),o=!1,a=Math.abs(Tl.touch.x-e.clientX),n=Math.abs(Tl.touch.y-e.clientY);t.cancelable&&("none"===i?o=!0:"pan-x"===i?o=n>a:"pan-y"===i&&(o=a>n)),o?t.preventDefault():$l("track")}}(t)}if(e=t[hl],!e.skip){for(let i,o=0;o<Bl.length;o++)i=Bl[o],a[i.name]&&!e[i.name]&&i.flow&&i.flow.start.indexOf(t.type)>-1&&i.reset&&i.reset();for(let o,n=0;n<Bl.length;n++)o=Bl[n],a[o.name]&&!e[o.name]&&(e[o.name]=!0,o[i](t))}}}function Dl(t,e,i){return!!Ll[e]&&(function(t,e,i){let o=Ll[e],a=o.deps,n=o.name,s=t[cl];s||(t[cl]=s={});for(let e,i,o=0;o<a.length;o++)e=a[o],yl&&bl(e)&&"click"!==e||(i=s[e],i||(s[e]=i={_count:0}),0===i._count&&t.addEventListener(e,Hl,vl(e)),i[n]=(i[n]||0)+1,i._count=(i._count||0)+1);t.addEventListener(e,i),o.touchAction&&function(t,e){dl&&t instanceof HTMLElement&&ar.run((()=>{t.style.touchAction=e}));t[ul]=e}(t,o.touchAction)}(t,e,i),!0)}function Rl(t,e,i){return!!Ll[e]&&(function(t,e,i){let o=Ll[e],a=o.deps,n=o.name,s=t[cl];if(s)for(let e,i,o=0;o<a.length;o++)e=a[o],i=s[e],i&&i[n]&&(i[n]=(i[n]||1)-1,i._count=(i._count||1)-1,0===i._count&&t.removeEventListener(e,Hl,vl(e)));t.removeEventListener(e,i)}(t,e,i),!0)}function zl(t){Bl.push(t);for(let e=0;e<t.emits.length;e++)Ll[t.emits[e]]=t}function Il(t,e,i){let o=new Event(e,{bubbles:!0,cancelable:!0,composed:!0});if(o.detail=i,Hs(t).dispatchEvent(o),o.defaultPrevented){let t=i.preventer||i.sourceEvent;t&&t.preventDefault&&t.preventDefault()}}function $l(t){let e=function(t){for(let e,i=0;i<Bl.length;i++){e=Bl[i];for(let i,o=0;o<e.emits.length;o++)if(i=e.emits[o],i===t)return e}return null}(t);e.info&&(e.info.prevent=!0)}function jl(t,e,i,o){e&&Il(e,t,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:o,prevent:function(t){return $l(t)}})}function Fl(t,e,i){if(t.prevent)return!1;if(t.started)return!0;let o=Math.abs(t.x-e),a=Math.abs(t.y-i);return o>=5||a>=5}function Vl(t,e,i){if(!e)return;let o,a=t.moves[t.moves.length-2],n=t.moves[t.moves.length-1],s=n.x-t.x,r=n.y-t.y,l=0;a&&(o=n.x-a.x,l=n.y-a.y),Il(e,"track",{state:t.state,x:i.clientX,y:i.clientY,dx:s,dy:r,ddx:o,ddy:l,sourceEvent:i,hover:function(){return function(t,e){let i=document.elementFromPoint(t,e),o=i;for(;o&&o.shadowRoot&&!window.ShadyDOM;){let a=o;if(o=o.shadowRoot.elementFromPoint(t,e),a===o)break;o&&(i=o)}return i}(i.clientX,i.clientY)}})}function Ul(t,e,i){let o=Math.abs(e.clientX-t.x),a=Math.abs(e.clientY-t.y),n=Ml(i||e);!n||wl[n.localName]&&n.hasAttribute("disabled")||(isNaN(o)||isNaN(a)||o<=25&&a<=25||function(t){if("click"===t.type){if(0===t.detail)return!0;let e=Ml(t);if(!e.nodeType||e.nodeType!==Node.ELEMENT_NODE)return!0;let i=e.getBoundingClientRect(),o=t.pageX,a=t.pageY;return!(o>=i.left&&o<=i.right&&a>=i.top&&a<=i.bottom)}return!1}(e))&&(t.prevent||Il(n,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:i}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/zl({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){Ol(this.info)},mousedown:function(t){if(!Nl(t))return;let e=Ml(t),i=this;kl(this.info,(function(t){Nl(t)||(jl("up",e,t),Ol(i.info))}),(function(t){Nl(t)&&jl("up",e,t),Ol(i.info)})),jl("down",e,t)},touchstart:function(t){jl("down",Ml(t),t.changedTouches[0],t)},touchend:function(t){jl("up",Ml(t),t.changedTouches[0],t)}}),zl({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(t){this.moves.length>2&&this.moves.shift(),this.moves.push(t)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,Ol(this.info)},mousedown:function(t){if(!Nl(t))return;let e=Ml(t),i=this,o=function(t){let o=t.clientX,a=t.clientY;Fl(i.info,o,a)&&(i.info.state=i.info.started?"mouseup"===t.type?"end":"track":"start","start"===i.info.state&&$l("tap"),i.info.addMove({x:o,y:a}),Nl(t)||(i.info.state="end",Ol(i.info)),e&&Vl(i.info,e,t),i.info.started=!0)};kl(this.info,o,(function(t){i.info.started&&o(t),Ol(i.info)})),this.info.x=t.clientX,this.info.y=t.clientY},touchstart:function(t){let e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchmove:function(t){let e=Ml(t),i=t.changedTouches[0],o=i.clientX,a=i.clientY;Fl(this.info,o,a)&&("start"===this.info.state&&$l("tap"),this.info.addMove({x:o,y:a}),Vl(this.info,e,i),this.info.state="track",this.info.started=!0)},touchend:function(t){let e=Ml(t),i=t.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),Vl(this.info,e,i))}}),zl({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(t){Nl(t)&&(this.info.x=t.clientX,this.info.y=t.clientY)},click:function(t){Nl(t)&&Ul(this.info,t)},touchstart:function(t){const e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchend:function(t){Ul(this.info,t.changedTouches[0],t)}});const ql=Ms((t=>class extends t{_addEventListenerToNode(t,e,i){Dl(t,e,i)||super._addEventListenerToNode(t,e,i)}_removeEventListenerFromNode(t,e,i){Rl(t,e,i)||super._removeEventListenerFromNode(t,e,i)}})),Gl=t=>class extends t{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(t,e,i){super.attributeChangedCallback(t,e,i),"theme"===t&&this._setTheme(i)}},Wl=t=>class extends(Gl(t)){static finalize(){super.finalize();const t=this.prototype._template,e=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,i=Object.getPrototypeOf(this.prototype)._template;i&&!e&&Array.from(i.content.querySelectorAll("style[include]")).forEach((e=>{this._includeStyle(e.getAttribute("include"),t)})),this._includeMatchingThemes(t)}static _includeMatchingThemes(t){const e=hs.prototype.modules;let i=!1;const o=this.is+"-default-theme";Object.keys(e).sort(((t,e)=>{const i=0===t.indexOf("vaadin-"),o=0===e.indexOf("vaadin-"),a=["lumo-","material-"],n=a.filter((e=>0===t.indexOf(e))).length>0,s=a.filter((t=>0===e.indexOf(t))).length>0;return i!==o?i?-1:1:n!==s?n?-1:1:0})).forEach((a=>{if(a!==o){const o=e[a].getAttribute("theme-for");o&&o.split(" ").forEach((e=>{new RegExp("^"+e.split("*").join(".*")+"$").test(this.is)&&(i=!0,this._includeStyle(a,t))}))}})),!i&&e[o]&&this._includeStyle(o,t)}static _includeStyle(t,e){if(e&&!e.content.querySelector(`style[include="${t}"]`)){const i=document.createElement("style");i.setAttribute("include",t),e.content.appendChild(i)}}}
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/;let Xl=!1;window.addEventListener("keydown",(()=>{Xl=!0}),{capture:!0}),window.addEventListener("mousedown",(()=>{Xl=!1}),{capture:!0});const Yl=t=>class extends((t=>class extends t{static get properties(){var t={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(t.tabIndex=t.tabindex),t}})(t)){static get properties(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}get _keyboardActive(){return Xl}ready(){this.addEventListener("focusin",(t=>{t.composedPath()[0]===this?this.contains(t.relatedTarget)||this._focus():-1===t.composedPath().indexOf(this.focusElement)||this.disabled||this._setFocused(!0)})),this.addEventListener("focusout",(t=>this._setFocused(!1))),super.ready();const t=t=>{t.composed||t.target.dispatchEvent(new CustomEvent(t.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",t),this.shadowRoot.addEventListener("focusout",t),this.addEventListener("keydown",(t=>{if(!t.defaultPrevented&&9===t.keyCode)if(t.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout((()=>this._isShiftTabbing=!1),0);else{const t=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(t&&parseFloat(t[1])>=63&&parseFloat(t[1])<66&&this.parentNode&&this.nextSibling){const t=document.createElement("input");t.style.position="absolute",t.style.opacity="0",t.tabIndex=this.tabIndex,this.parentNode.insertBefore(t,this.nextSibling),t.focus(),t.addEventListener("focusout",(()=>this.parentNode.removeChild(t)))}}})),this.autofocus&&!this.disabled&&window.requestAnimationFrame((()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","")}))}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1)}_setFocused(t){t?this.setAttribute("focused",""):this.removeAttribute("focused"),t&&Xl?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}_disabledChanged(t){this.focusElement.disabled=t,t?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(void 0!==this._previousTabIndex&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}_tabindexChanged(t){void 0!==t&&(this.focusElement.tabIndex=t),this.disabled&&this.tabindex&&(-1!==this.tabindex&&(this._previousTabIndex=this.tabindex),this.tabindex=t=void 0),window.ShadyDOM&&this.setProperties({tabIndex:t,tabindex:t})}click(){this.disabled||super.click()}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/;
/**
@license
Copyright (c) 2020 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
class Kl{static detectScrollType(){const t=document.createElement("div");t.textContent="ABCD",t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t);let e="reverse";return t.scrollLeft>0?e="default":(t.scrollLeft=2,t.scrollLeft<2&&(e="negative")),document.body.removeChild(t),e}static getNormalizedScrollLeft(t,e,i){const{scrollLeft:o}=i;if("rtl"!==e||!t)return o;switch(t){case"negative":return i.scrollWidth-i.clientWidth+o;case"reverse":return i.scrollWidth-i.clientWidth-o}return o}static setNormalizedScrollLeft(t,e,i,o){if("rtl"===e&&t)switch(t){case"negative":i.scrollLeft=i.clientWidth-i.scrollWidth+o;break;case"reverse":i.scrollLeft=i.scrollWidth-i.clientWidth-o;break;default:i.scrollLeft=o}else i.scrollLeft=o}}const Jl=[];let Ql;new MutationObserver((function(){const t=td();Jl.forEach((e=>{Zl(e,t)}))})).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const Zl=function(t,e){e?t.setAttribute("dir",e):t.removeAttribute("dir")},td=function(){return document.documentElement.getAttribute("dir")},ed=t=>class extends t{static get properties(){return{dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),Ql||(Ql=Kl.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),Zl(this,td()))}attributeChangedCallback(t,e,i){if(super.attributeChangedCallback(t,e,i),"dir"!==t)return;const o=i===td()&&-1===Jl.indexOf(this),a=!i&&e&&-1===Jl.indexOf(this),n=i!==td()&&e===td();o||a?(this.__subscribe(),Zl(this,td())):n&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}__subscribe(t=!0){t?-1===Jl.indexOf(this)&&Jl.push(this):Jl.indexOf(this)>-1&&Jl.splice(Jl.indexOf(this),1)}__getNormalizedScrollLeft(t){return Kl.getNormalizedScrollLeft(Ql,this.getAttribute("dir")||"ltr",t)}__setNormalizedScrollLeft(t,e){return Kl.setNormalizedScrollLeft(Ql,this.getAttribute("dir")||"ltr",t,e)}},id=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,od=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function ad(t,e){if("function"!=typeof t)return;const i=id.exec(t.toString());if(i)try{t=new Function(i[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};const nd=function(t,e){if(window.Vaadin.developmentMode)return ad(t,e)};function sd(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!!localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&(od?!(od&&Object.keys(od).map((t=>od[t])).filter((t=>t.productionMode)).length>0):!ad((function(){return!0})))}catch(t){return!1}}());const rd=function(){return nd(sd)};let ld;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){rd&&rd()};const dd=new Set,cd=t=>class extends(ed(t)){static finalize(){super.finalize();const{is:t}=this;t&&!dd.has(t)&&(window.Vaadin.registrations.push(this),dd.add(t),window.Vaadin.developmentModeCallback&&(ld=nl.debounce(ld,or,(()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()})),rl(ld)))}constructor(){super(),null===document.doctype&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}}
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/;class hd extends(cd(Yl(Wl(ql(al))))){static get template(){return Ps`
    <style>
      :host {
        display: inline-block;
        position: relative;
        outline: none;
        white-space: nowrap;
      }

      :host([hidden]) {
        display: none !important;
      }

      /* Ensure the button is always aligned on the baseline */
      .vaadin-button-container::before {
        content: "\\2003";
        display: inline-block;
        width: 0;
      }

      .vaadin-button-container {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        width: 100%;
        height: 100%;
        min-height: inherit;
        text-shadow: inherit;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      [part="prefix"],
      [part="suffix"] {
        flex: none;
      }

      [part="label"] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      #button {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: inherit;
      }
    </style>
    <div class="vaadin-button-container">
      <div part="prefix">
        <slot name="prefix"></slot>
      </div>
      <div part="label">
        <slot></slot>
      </div>
      <div part="suffix">
        <slot name="suffix"></slot>
      </div>
    </div>
    <button id="button" type="button"></button>
`}static get is(){return"vaadin-button"}static get version(){return"2.4.0"}ready(){super.ready(),this.setAttribute("role","button"),this.$.button.setAttribute("role","presentation"),this._addActiveListeners(),window.ShadyDOM&&window.ShadyDOM.flush()}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("active")&&this.removeAttribute("active")}_addActiveListeners(){Dl(this,"down",(()=>!this.disabled&&this.setAttribute("active",""))),Dl(this,"up",(()=>this.removeAttribute("active"))),this.addEventListener("keydown",(t=>!this.disabled&&[13,32].indexOf(t.keyCode)>=0&&this.setAttribute("active",""))),this.addEventListener("keyup",(()=>this.removeAttribute("active"))),this.addEventListener("blur",(()=>this.removeAttribute("active")))}get focusElement(){return this.$.button}}customElements.define(hd.is,hd);const ud=Ps`<dom-module id="lumo-progress-bar" theme-for="vaadin-progress-bar">
  <template>
    <style>
      :host {
        height: calc(var(--lumo-size-l) / 10);
        margin: var(--lumo-space-s) 0;
      }

      [part="bar"] {
        border-radius: var(--lumo-border-radius);
        background-color: var(--lumo-contrast-10pct);
      }

      [part="value"] {
        border-radius: var(--lumo-border-radius);
        background-color: var(--lumo-primary-color);
        /* Use width instead of transform to preserve border radius */
        transform: none;
        width: calc(var(--vaadin-progress-value) * 100%);
        will-change: width;
        transition: 0.1s width linear;
      }

      /* Indeterminate mode */

      :host([indeterminate]) [part="value"] {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        width: 100%;
        background-color: transparent !important;
        background-image: var(--lumo-progress-indeterminate-progress-bar-background);
        opacity: 0.75;
        will-change: transform;
        animation: vaadin-progress-indeterminate 1.6s infinite cubic-bezier(.645, .045, .355, 1);
      }

      @keyframes vaadin-progress-indeterminate {
        0% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
        }

        25% {
          transform: scaleX(0.4);
        }

        50% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background);
        }

        50.1% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }

        75% {
          transform: scaleX(0.4);
        }

        100% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }
      }

      :host(:not([aria-valuenow])) [part="value"]::before,
      :host([indeterminate]) [part="value"]::before {
        content: "";
        display: block;
        width: 100%;
        height: 100%;
        border-radius: inherit;
        background-color: var(--lumo-primary-color);
        will-change: opacity;
        animation: vaadin-progress-pulse3 1.6s infinite cubic-bezier(.645, .045, .355, 1);
      }

      @keyframes vaadin-progress-pulse3 {
        0% { opacity: 1; }
        10% { opacity: 0; }
        40% { opacity: 0; }
        50% { opacity: 1; }
        50.1% { opacity: 1; }
        60% { opacity: 0; }
        90% { opacity: 0; }
        100% { opacity: 1; }
      }

      /* Contrast color */

      :host([theme~="contrast"]) [part="value"],
      :host([theme~="contrast"]) [part="value"]::before {
        background-color: var(--lumo-contrast-80pct);
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-80pct));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-60pct));
      }

      /* Error color */

      :host([theme~="error"]) [part="value"],
      :host([theme~="error"]) [part="value"]::before {
        background-color: var(--lumo-error-color);
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
      }

      /* Primary color */

      :host([theme~="success"]) [part="value"],
      :host([theme~="success"]) [part="value"]::before {
        background-color: var(--lumo-success-color);
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
      }

      /* RTL specific styles */

      :host([indeterminate][dir="rtl"]) [part="value"] {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        animation: vaadin-progress-indeterminate-rtl 1.6s infinite cubic-bezier(.355, .045, .645, 1);
      }

      :host(:not([aria-valuenow])[dir="rtl"]) [part="value"]::before,
      :host([indeterminate][dir="rtl"]) [part="value"]::before {
        animation: vaadin-progress-pulse3 1.6s infinite cubic-bezier(.355, .045, .645, 1);
      }

      @keyframes vaadin-progress-indeterminate-rtl {
        0% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
        }

        25% {
          transform: scaleX(0.4);
        }

        50% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background);
        }

        50.1% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }

        75% {
          transform: scaleX(0.4);
        }

        100% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }
      }

      /* Contrast color */

      :host([theme~="contrast"][dir="rtl"]) [part="value"],
      :host([theme~="contrast"][dir="rtl"]) [part="value"]::before {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-80pct));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-60pct));
      }

      /* Error color */

      :host([theme~="error"][dir="rtl"]) [part="value"],
      :host([theme~="error"][dir="rtl"]) [part="value"]::before {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
      }

      /* Primary color */

      :host([theme~="success"][dir="rtl"]) [part="value"],
      :host([theme~="success"][dir="rtl"]) [part="value"]::before {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
      }
    </style>
  </template>
</dom-module><custom-style>
  <style>
    @keyframes vaadin-progress-pulse3 {
      0% { opacity: 1; }
      10% { opacity: 0; }
      40% { opacity: 0; }
      50% { opacity: 1; }
      50.1% { opacity: 1; }
      60% { opacity: 0; }
      90% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</custom-style>`;document.head.appendChild(ud.content);
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
const pd=t=>class extends t{static get properties(){return{value:{type:Number,observer:"_valueChanged"},min:{type:Number,value:0,observer:"_minChanged"},max:{type:Number,value:1,observer:"_maxChanged"},indeterminate:{type:Boolean,value:!1,reflectToAttribute:!0}}}static get observers(){return["_normalizedValueChanged(value, min, max)"]}ready(){super.ready(),this.setAttribute("role","progressbar")}_normalizedValueChanged(t,e,i){const o=this._normalizeValue(t,e,i);this.style.setProperty("--vaadin-progress-value",o),this.updateStyles({"--vaadin-progress-value":String(o)})}_valueChanged(t,e){this.setAttribute("aria-valuenow",t)}_minChanged(t,e){this.setAttribute("aria-valuemin",t)}_maxChanged(t,e){this.setAttribute("aria-valuemax",t)}_normalizeValue(t,e,i){let o;return t||0==t?e>=i?o=1:(o=(t-e)/(i-e),o=Math.min(Math.max(o,0),1)):o=0,o}}
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/;class md extends(cd(Wl(pd(al)))){static get template(){return Ps`
    <style>
      :host {
        display: block;
        width: 100%; /* prevent collapsing inside non-stretching column flex */
        height: 8px;
      }

      :host([hidden]) {
        display: none !important;
      }

      [part="bar"] {
        height: 100%;
      }

      [part="value"] {
        height: 100%;
        transform-origin: 0 50%;
        transform: scaleX(var(--vaadin-progress-value));
      }

      /* RTL specific styles */

      :host([dir="rtl"]) [part="value"] {
        transform-origin: 100% 50%;
      }
    </style>

    <div part="bar">
      <div part="value"></div>
    </div>
`}static get is(){return"vaadin-progress-bar"}static get version(){return"1.3.0"}}customElements.define(md.is,md);const gd=Ps`<dom-module id="lumo-upload" theme-for="vaadin-upload">
  <template>
    <style>
      :host {
        line-height: var(--lumo-line-height-m);
      }

      :host(:not([nodrop])) {
        overflow: hidden;
        border: 1px dashed var(--lumo-contrast-20pct);
        border-radius: var(--lumo-border-radius);
        padding: var(--lumo-space-m);
        transition: background-color 0.6s, border-color 0.6s;
      }

      [part="primary-buttons"] > * {
        display: inline-block;
        white-space: nowrap;
      }

      [part="drop-label"] {
        display: inline-block;
        white-space: normal;
        padding: 0 var(--lumo-space-s);
        color: var(--lumo-secondary-text-color);
        font-family: var(--lumo-font-family);
      }

      :host([dragover-valid]) {
        border-color: var(--lumo-primary-color-50pct);
        background: var(--lumo-primary-color-10pct);
        transition: background-color 0.1s, border-color 0.1s;
      }

      :host([dragover-valid]) [part="drop-label"] {
        color: var(--lumo-primary-text-color);
      }

      :host([max-files-reached]) [part='drop-label'] {
        color: var(--lumo-disabled-text-color);
      }

      [part="drop-label-icon"] {
        display: inline-block;
      }

      [part="drop-label-icon"]::before {
        content: var(--lumo-icons-upload);
        font-family: lumo-icons;
        font-size: var(--lumo-icon-size-m);
        line-height: 1;
        vertical-align: -.25em;
      }
    </style>
  </template>
</dom-module><dom-module id="lumo-upload-file" theme-for="vaadin-upload-file">
  <template>
    <style include="lumo-field-button">
      :host {
        padding: var(--lumo-space-s) 0;
      }

      :host(:not(:first-child)) {
        border-top: 1px solid var(--lumo-contrast-10pct);
      }

      [part="row"] {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
      }

      [part="status"],
      [part="error"] {
        color: var(--lumo-secondary-text-color);
        font-size: var(--lumo-font-size-s);
      }

      [part="info"] {
        display: flex;
        align-items: baseline;
        flex: auto;
      }

      [part="meta"] {
        width: 0.001px;
        flex: 1 1 auto;
      }

      [part="name"] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      [part="commands"] {
        display: flex;
        align-items: baseline;
        flex: none;
      }

      [part="done-icon"],
      [part="warning-icon"] {
        margin-right: var(--lumo-space-xs);
      }

      /* When both icons are hidden, let us keep space for one */
      [part="done-icon"][hidden] + [part="warning-icon"][hidden] {
        display: block !important;
        visibility: hidden;
      }

      [part="done-icon"],
      [part="warning-icon"] {
        font-size: var(--lumo-icon-size-m);
        font-family: 'lumo-icons';
        line-height: 1;
      }

      [part="start-button"],
      [part="retry-button"],
      [part="clear-button"] {
        flex: none;
        margin-left: var(--lumo-space-xs);
      }

      [part="done-icon"]::before,
      [part="warning-icon"]::before,
      [part="start-button"]::before,
      [part="retry-button"]::before,
      [part="clear-button"]::before {
        vertical-align: -.25em;
      }

      [part="done-icon"]::before {
        content: var(--lumo-icons-checkmark);
        color: var(--lumo-primary-text-color);
      }

      [part="warning-icon"]::before {
        content: var(--lumo-icons-error);
        color: var(--lumo-error-text-color);
      }

      [part="start-button"]::before {
        content: var(--lumo-icons-play);
      }

      [part="retry-button"]::before {
        content: var(--lumo-icons-reload);
      }

      [part="clear-button"]::before {
        content: var(--lumo-icons-cross);
      }

      [part="error"] {
        color: var(--lumo-error-text-color);
      }

      [part="progress"] {
        width: auto;
        margin-left: calc(var(--lumo-icon-size-m) + var(--lumo-space-xs));
        margin-right: calc(var(--lumo-icon-size-m) + var(--lumo-space-xs));
      }

      [part="progress"][complete],
      [part="progress"][error] {
        display: none;
      }

    </style>
  </template>
</dom-module>`;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function bd(t,e,i,o,a){let n;a&&(n="object"==typeof i&&null!==i,n&&(o=t.__dataTemp[e]));let s=o!==i&&(o==o||i==i);return n&&s&&(t.__dataTemp[e]=i),s}document.head.appendChild(gd.content);const fd=Ms((t=>class extends t{_shouldPropertyChange(t,e,i){return bd(this,t,e,i,!0)}})),vd=Ms((t=>class extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(t,e,i){return bd(this,t,e,i,this.mutableData)}}));fd._mutablePropertyChange=bd;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let yd=null;function _d(){return yd}_d.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:_d,writable:!0}});const xd=Qr(_d),wd=fd(xd);const Ad=Qr(class{});class Ed extends Ad{constructor(t){super(),this._configureProperties(t),this.root=this._stampTemplate(this.__dataHost);let e=[];this.children=e;for(let t=this.root.firstChild;t;t=t.nextSibling)e.push(t),t.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let i=this.__templatizeOptions;(t&&i.instanceProps||!i.instanceProps)&&this._enableProperties()}_configureProperties(t){if(this.__templatizeOptions.forwardHostProp)for(let t in this.__hostProps)this._setPendingProperty(t,this.__dataHost["_host_"+t]);for(let e in t)this._setPendingProperty(e,t[e])}forwardHostProp(t,e){this._setPendingPropertyOrPath(t,e,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(t,e,i){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(t,e,(t=>{t.model=this,i(t)}));else{let o=this.__dataHost.__dataHost;o&&o._addEventListenerToNode(t,e,i)}}_showHideChildren(t){!function(t,e){for(let i=0;i<e.length;i++){let o=e[i];if(Boolean(t)!=Boolean(o.__hideTemplateChildren__))if(o.nodeType===Node.TEXT_NODE)t?(o.__polymerTextContent__=o.textContent,o.textContent=""):o.textContent=o.__polymerTextContent__;else if("slot"===o.localName)if(t)o.__polymerReplaced__=document.createComment("hidden-slot"),Hs(Hs(o).parentNode).replaceChild(o.__polymerReplaced__,o);else{const t=o.__polymerReplaced__;t&&Hs(Hs(t).parentNode).replaceChild(o,t)}else o.style&&(t?(o.__polymerDisplay__=o.style.display,o.style.display="none"):o.style.display=o.__polymerDisplay__);o.__hideTemplateChildren__=t,o._showHideChildren&&o._showHideChildren(t)}}(t,this.children)}_setUnmanagedPropertyToNode(t,e,i){t.__hideTemplateChildren__&&t.nodeType==Node.TEXT_NODE&&"textContent"==e?t.__polymerTextContent__=i:super._setUnmanagedPropertyToNode(t,e,i)}get parentModel(){let t=this.__parentModel;if(!t){let e;t=this;do{t=t.__dataHost.__dataHost}while((e=t.__templatizeOptions)&&!e.parentModel);this.__parentModel=t}return t}dispatchEvent(t){return!0}}Ed.prototype.__dataHost,Ed.prototype.__templatizeOptions,Ed.prototype._methodHost,Ed.prototype.__templatizeOwner,Ed.prototype.__hostProps;const Sd=fd(Ed);function Cd(t){let e=t.__dataHost;return e&&e._methodHost||e}function Nd(t,e,i){let o=i.mutableData?Sd:Ed;Pd.mixin&&(o=Pd.mixin(o));let a=class extends o{};return a.prototype.__templatizeOptions=i,a.prototype._bindTemplate(t),function(t,e,i,o){let a=i.hostProps||{};for(let e in o.instanceProps){delete a[e];let i=o.notifyInstanceProp;i&&t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:Od(e,i)})}if(o.forwardHostProp&&e.__dataHost)for(let e in a)i.hasHostProps||(i.hasHostProps=!0),t.prototype._addPropertyEffect(e,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(t,e,i){t.__dataHost._setPendingPropertyOrPath("_host_"+e,i[e],!0,!0)}})}(a,t,e,i),a}function Td(t,e,i,o){let a=i.forwardHostProp;if(a&&e.hasHostProps){const r="template"==t.localName;let l=e.templatizeTemplateClass;if(!l){if(r){let t=i.mutableData?wd:xd;class o extends t{}l=e.templatizeTemplateClass=o}else{const i=t.constructor;class o extends i{}l=e.templatizeTemplateClass=o}let n=e.hostProps;for(let t in n)l.prototype._addPropertyEffect("_host_"+t,l.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:kd(t,a)}),l.prototype._createNotifyingProperty("_host_"+t);Zn&&o&&function(t,e,i){const o=i.constructor._properties,{propertyEffects:a}=t,{instanceProps:n}=e;for(let t in a)if(!(o[t]||n&&n[t])){const e=a[t];for(let i=0;i<e.length;i++){const{part:o}=e[i].info;if(!o.signature||!o.signature.static){console.warn(`Property '${t}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}(e,i,o)}if(t.__dataProto&&Object.assign(t.__data,t.__dataProto),r)s=l,yd=n=t,Object.setPrototypeOf(n,s.prototype),new s,yd=null,t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties();else{Object.setPrototypeOf(t,l.prototype);const i=e.hostProps;for(let e in i)if(e="_host_"+e,e in t){const i=t[e];delete t[e],t.__data[e]=i}}}var n,s}function kd(t,e){return function(t,i,o){e.call(t.__templatizeOwner,i.substring("_host_".length),o[i])}}function Od(t,e){return function(t,i,o){e.call(t.__templatizeOwner,t,i,o[i])}}function Pd(t,e,i){if(Kn&&!Cd(t))throw new Error("strictTemplatePolicy: template owner not trusted");if(i=i||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=e;let o=(e?e.constructor:Ed)._parseTemplate(t),a=o.templatizeInstanceClass;a||(a=Nd(t,o,i),o.templatizeInstanceClass=a);const n=Cd(t);Td(t,o,i,n);let s=class extends a{};return s.prototype._methodHost=n,s.prototype.__dataHost=t,s.prototype.__templatizeOwner=e,s.prototype.__hostProps=o.hostProps,s=s,s}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Ld=!1;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const Bd=vd(al);class Md extends Bd{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!ns,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let t=0;t<this.__instances.length;t++)this.__detachInstance(t)}connectedCallback(){if(super.connectedCallback(),function(){if(Qn&&!qn){if(!Ld){Ld=!0;const t=document.createElement("style");t.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(t)}return!0}return!1}()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let t=Hs(Hs(this).parentNode);for(let e=0;e<this.__instances.length;e++)this.__attachInstance(e,t)}}__ensureTemplatized(){if(!this.__ctor){const t=this;let e=this.template=t._templateInfo?t:this.querySelector("template");if(!e){let t=new MutationObserver((()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");t.disconnect(),this.__render()}));return t.observe(this,{childList:!0}),!1}let i={};i[this.as]=!0,i[this.indexAs]=!0,i[this.itemsIndexAs]=!0,this.__ctor=Pd(e,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:i,forwardHostProp:function(t,e){let i=this.__instances;for(let o,a=0;a<i.length&&(o=i[a]);a++)o.forwardHostProp(t,e)},notifyInstanceProp:function(t,e,i){if((o=this.as)===(a=e)||zs(o,a)||Is(o,a)){let o=t[this.itemsIndexAs];e==this.as&&(this.items[o]=i);let a=$s(this.as,`${JSCompiler_renameProperty("items",this)}.${o}`,e);this.notifyPath(a,i)}var o,a}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(t){if("string"==typeof t){let e=t,i=this.__getMethodHost();return function(){return i[e].apply(i,arguments)}}return t}__sortChanged(t){this.__sortFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__filterChanged(t){this.__filterFn=this.__functionFromPropertyValue(t),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(t){return Math.ceil(1e3/t)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(t){if(this.__sortFn||this.__filterFn)if(t){if(this.__observePaths){let e=this.__observePaths;for(let i=0;i<e.length;i++)0===t.indexOf(e[i])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(t){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(t.path,t.value)||("items"===t.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(t,e=0){this.__renderDebouncer=nl.debounce(this.__renderDebouncer,e>0?ir.after(e):ar,t.bind(this)),rl(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),function(){let t,e;do{t=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),e=ll()}while(t||e)}()}__render(){if(!this.__ensureTemplatized())return;let t=this.items||[];const e=this.__sortAndFilterItems(t),i=this.__calculateLimit(e.length);this.__updateInstances(t,i,e),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame((()=>this.__continueChunking()))),this._setRenderedItemCount(this.__instances.length),ns&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(t){let e=new Array(t.length);for(let i=0;i<t.length;i++)e[i]=i;return this.__filterFn&&(e=e.filter(((e,i,o)=>this.__filterFn(t[e],i,o)))),this.__sortFn&&e.sort(((e,i)=>this.__sortFn(t[e],t[i]))),e}__calculateLimit(t){let e=t;const i=this.__instances.length;if(this.initialCount){let o;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(e=Math.min(t,this.initialCount),o=Math.max(e-i,0),this.__chunkCount=o||1):(o=Math.min(Math.max(t-i,0),this.__chunkCount),e=Math.min(i+o,t)),this.__shouldMeasureChunk=o===this.__chunkCount,this.__shouldContinueChunking=e<t,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,e}__continueChunking(){if(this.__shouldMeasureChunk){const t=performance.now()-this.__renderStartTime,e=this._targetFrameTime/t;this.__chunkCount=Math.round(this.__chunkCount*e)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(t,e,i){const o=this.__itemsIdxToInstIdx={};let a;for(a=0;a<e;a++){let e=this.__instances[a],n=i[a],s=t[n];o[n]=a,e?(e._setPendingProperty(this.as,s),e._setPendingProperty(this.indexAs,a),e._setPendingProperty(this.itemsIndexAs,n),e._flushProperties()):this.__insertInstance(s,a,n)}for(let t=this.__instances.length-1;t>=a;t--)this.__detachAndRemoveInstance(t)}__detachInstance(t){let e=this.__instances[t];const i=Hs(e.root);for(let t=0;t<e.children.length;t++){let o=e.children[t];i.appendChild(o)}return e}__attachInstance(t,e){let i=this.__instances[t];e.insertBefore(i.root,this)}__detachAndRemoveInstance(t){this.__detachInstance(t),this.__instances.splice(t,1)}__stampInstance(t,e,i){let o={};return o[this.as]=t,o[this.indexAs]=e,o[this.itemsIndexAs]=i,new this.__ctor(o)}__insertInstance(t,e,i){const o=this.__stampInstance(t,e,i);let a=this.__instances[e+1],n=a?a.children[0]:this;return Hs(Hs(this).parentNode).insertBefore(o.root,n),this.__instances[e]=o,o}_showHideChildren(t){for(let e=0;e<this.__instances.length;e++)this.__instances[e]._showHideChildren(t)}__handleItemPath(t,e){let i=t.slice(6),o=i.indexOf("."),a=o<0?i:i.substring(0,o);if(a==parseInt(a,10)){let t=o<0?"":i.substring(o+1);this.__handleObservedPaths(t);let n=this.__itemsIdxToInstIdx[a],s=this.__instances[n];if(s){let i=this.as+(t?"."+t:"");s._setPendingPropertyOrPath(i,e,!1,!0),s._flushProperties()}return!0}}itemForElement(t){let e=this.modelForElement(t);return e&&e[this.as]}indexForElement(t){let e=this.modelForElement(t);return e&&e[this.indexAs]}modelForElement(t){return function(t,e){let i;for(;e;)if(i=e.__dataHost?e:e.__templatizeInstance){if(i.__dataHost==t)return i;e=i.__dataHost}else e=Hs(e).parentNode;return null}(this.template,t)}}customElements.define(Md.is,Md);const Hd=document.createElement("template");Hd.innerHTML="<custom-style>\n  <style>\n    @font-face {\n      font-family: 'vaadin-upload-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAABmAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIF5mNtYXAAAAFoAAAAVAAAAFQXVtKMZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAfQAAAH0bBJxYWhlYWQAAAO4AAAANgAAADYPD267aGhlYQAAA/AAAAAkAAAAJAfCA8tobXR4AAAEFAAAACgAAAAoHgAAx2xvY2EAAAQ8AAAAFgAAABYCSgHsbWF4cAAABFQAAAAgAAAAIAAOADVuYW1lAAAEdAAAAhYAAAIWmmcHf3Bvc3QAAAaMAAAAIAAAACAAAwAAAAMDtwGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QUDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkF//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAgAA/8AEAAPAABkAMgAAEz4DMzIeAhczLgMjIg4CBycRIScFIRcOAyMiLgInIx4DMzI+AjcXphZGWmo6SH9kQwyADFiGrmJIhXJbIEYBAFoDWv76YBZGXGw8Rn5lRQyADFmIrWBIhHReIkYCWjJVPSIyVnVDXqN5RiVEYTxG/wBa2loyVT0iMlZ1Q16jeUYnRWE5RgAAAAABAIAAAAOAA4AAAgAAExEBgAMAA4D8gAHAAAAAAwAAAAAEAAOAAAIADgASAAAJASElIiY1NDYzMhYVFAYnETMRAgD+AAQA/gAdIyMdHSMjXYADgPyAgCMdHSMjHR0jwAEA/wAAAQANADMD5gNaAAUAACUBNwUBFwHT/jptATMBppMzAU2a4AIgdAAAAAEAOv/6A8YDhgALAAABJwkBBwkBFwkBNwEDxoz+xv7GjAFA/sCMAToBOoz+wAL6jP7AAUCM/sb+xowBQP7AjAE6AAAAAwAA/8AEAAPAAAcACwASAAABFSE1IREhEQEjNTMJAjMRIRECwP6A/sAEAP0AgIACQP7A/sDAAQABQICA/oABgP8AgAHAAUD+wP6AAYAAAAABAAAAAQAAdhiEdV8PPPUACwQAAAAAANX4FR8AAAAA1fgVHwAA/8AEAAPAAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAQAAAEAAAAAAAAAAAAAAAAAAAAKBAAAAAAAAAAAAAAAAgAAAAQAAAAEAACABAAAAAQAAA0EAAA6BAAAAAAAAAAACgAUAB4AagB4AJwAsADSAPoAAAABAAAACgAzAAMAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEAEwAAAAEAAAAAAAIABwDMAAEAAAAAAAMAEwBaAAEAAAAAAAQAEwDhAAEAAAAAAAUACwA5AAEAAAAAAAYAEwCTAAEAAAAAAAoAGgEaAAMAAQQJAAEAJgATAAMAAQQJAAIADgDTAAMAAQQJAAMAJgBtAAMAAQQJAAQAJgD0AAMAAQQJAAUAFgBEAAMAAQQJAAYAJgCmAAMAAQQJAAoANAE0dmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwdmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzdmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQBydmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n</custom-style>",document.head.appendChild(Hd.content);
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
class Dd extends(Wl(al)){static get template(){return Ps`
    <style>
      :host {
        display: block;
      }

      [hidden] {
        display: none;
      }
    </style>

    <div part="row">
      <div part="info">
        <div part="done-icon" hidden\$="[[!file.complete]]"></div>
        <div part="warning-icon" hidden\$="[[!file.error]]"></div>

        <div part="meta">
          <div part="name" id="name">[[file.name]]</div>
          <div part="status" hidden\$="[[!file.status]]" id="status">[[file.status]]</div>
          <div part="error" id="error" hidden\$="[[!file.error]]">[[file.error]]</div>
        </div>
      </div>
      <div part="commands">
        <div part="start-button" file-event="file-start" on-click="_fireFileEvent" hidden\$="[[!file.held]]"></div>
        <div part="retry-button" file-event="file-retry" on-click="_fireFileEvent" hidden\$="[[!file.error]]"></div>
        <div part="clear-button" file-event="file-abort" on-click="_fireFileEvent"></div>
      </div>
    </div>

    <vaadin-progress-bar part="progress" id="progress" value\$="[[_formatProgressValue(file.progress)]]" error\$="[[file.error]]" indeterminate\$="[[file.indeterminate]]" uploading\$="[[file.uploading]]" complete\$="[[file.complete]]">
    </vaadin-progress-bar>
`}static get is(){return"vaadin-upload-file"}static get properties(){return{file:Object}}static get observers(){return["_fileAborted(file.abort)",'_toggleHostAttribute(file.error, "error")','_toggleHostAttribute(file.indeterminate, "indeterminate")','_toggleHostAttribute(file.uploading, "uploading")','_toggleHostAttribute(file.complete, "complete")']}_fileAborted(t){t&&this._remove()}_remove(){this.dispatchEvent(new CustomEvent("file-remove",{detail:{file:this.file},bubbles:!0,composed:!0}))}_formatProgressValue(t){return t/100}_fireFileEvent(t){return t.preventDefault(),this.dispatchEvent(new CustomEvent(t.target.getAttribute("file-event"),{detail:{file:this.file},bubbles:!0,composed:!0}))}_toggleHostAttribute(t,e){const i=Boolean(t);this.hasAttribute(e)!==i&&(i?this.setAttribute(e,""):this.removeAttribute(e))}}customElements.define(Dd.is,Dd);
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
class Rd extends(cd(Wl(al))){static get template(){return Ps`
    <style>
      :host {
        display: block;
        position: relative;
      }

      :host([hidden]) {
        display: none !important;
      }

      [hidden] {
        display: none !important;
      }
    </style>

    <div part="primary-buttons">
      <div id="addFiles" on-touchend="_onAddFilesTouchEnd" on-click="_onAddFilesClick">
        <slot name="add-button">
          <vaadin-button part="upload-button" id="addButton" disabled="[[maxFilesReached]]">
            [[_i18nPlural(maxFiles, i18n.addFiles, i18n.addFiles.*)]]
          </vaadin-button>
        </slot>
      </div>
      <div part="drop-label" hidden\$="[[nodrop]]" id="dropLabelContainer">
        <slot name="drop-label-icon">
          <div part="drop-label-icon"></div>
        </slot>
        <slot name="drop-label" id="dropLabel">
          [[_i18nPlural(maxFiles, i18n.dropFiles, i18n.dropFiles.*)]]
        </slot>
      </div>
    </div>
    <slot name="file-list">
      <div id="fileList" part="file-list">
        <template is="dom-repeat" items="[[files]]" as="file">
          <vaadin-upload-file file="[[file]]"></vaadin-upload-file>
        </template>
      </div>
    </slot>
    <slot></slot>
    <input type="file" id="fileInput" on-change="_onFileInputChange" hidden="" accept\$="{{accept}}" multiple\$="[[_isMultiple(maxFiles)]]" capture\$="[[capture]]">
`}static get is(){return"vaadin-upload"}static get version(){return"4.4.3"}static get properties(){return{nodrop:{type:Boolean,reflectToAttribute:!0,value:function(){try{return!!document.createEvent("TouchEvent")}catch(t){return!1}}},target:{type:String,value:""},method:{type:String,value:"POST"},headers:{type:Object,value:{}},timeout:{type:Number,value:0},_dragover:{type:Boolean,value:!1,observer:"_dragoverChanged"},files:{type:Array,notify:!0,value:function(){return[]}},maxFiles:{type:Number,value:1/0},maxFilesReached:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0,computed:"_maxFilesAdded(maxFiles, files.length)"},accept:{type:String,value:""},maxFileSize:{type:Number,value:1/0},_dragoverValid:{type:Boolean,value:!1,observer:"_dragoverValidChanged"},formDataName:{type:String,value:"file"},noAuto:{type:Boolean,value:!1},withCredentials:{type:Boolean,value:!1},capture:String,i18n:{type:Object,value:function(){return{dropFiles:{one:"Drop file here",many:"Drop files here"},addFiles:{one:"Upload File...",many:"Upload Files..."},cancel:"Cancel",error:{tooManyFiles:"Too Many Files.",fileIsTooBig:"File is Too Big.",incorrectFileType:"Incorrect File Type."},uploading:{status:{connecting:"Connecting...",stalled:"Stalled.",processing:"Processing File...",held:"Queued"},remainingTime:{prefix:"remaining time: ",unknown:"unknown remaining time"},error:{serverUnavailable:"Server Unavailable",unexpectedServerError:"Unexpected Server Error",forbidden:"Forbidden"}},units:{size:["B","kB","MB","GB","TB","PB","EB","ZB","YB"]}}}}}}ready(){super.ready(),this.addEventListener("dragover",this._onDragover.bind(this)),this.addEventListener("dragleave",this._onDragleave.bind(this)),this.addEventListener("drop",this._onDrop.bind(this)),this.addEventListener("file-retry",this._onFileRetry.bind(this)),this.addEventListener("file-abort",this._onFileAbort.bind(this)),this.addEventListener("file-remove",this._onFileRemove.bind(this)),this.addEventListener("file-start",this._onFileStart.bind(this))}_formatSize(t){if("function"==typeof this.i18n.formatSize)return this.i18n.formatSize(t);const e=this.i18n.units.sizeBase||1e3,i=~~(Math.log(t)/Math.log(e)),o=Math.max(0,Math.min(3,i-1));return parseFloat((t/Math.pow(e,i)).toFixed(o))+" "+this.i18n.units.size[i]}_splitTimeByUnits(t){const e=[60,60,24,1/0],i=[0];for(var o=0;o<e.length&&t>0;o++)i[o]=t%e[o],t=Math.floor(t/e[o]);return i}_formatTime(t,e){if("function"==typeof this.i18n.formatTime)return this.i18n.formatTime(t,e);for(;e.length<3;)e.push(0);return e.reverse().map((t=>(t<10?"0":"")+t)).join(":")}_formatFileProgress(t){return t.totalStr+": "+t.progress+"% ("+(t.loaded>0?this.i18n.uploading.remainingTime.prefix+t.remainingStr:this.i18n.uploading.remainingTime.unknown)+")"}_maxFilesAdded(t,e){return t>=0&&e>=t}_onDragover(t){t.preventDefault(),this.nodrop||this._dragover||(this._dragoverValid=!this.maxFilesReached,this._dragover=!0),t.dataTransfer.dropEffect=!this._dragoverValid||this.nodrop?"none":"copy"}_onDragleave(t){t.preventDefault(),this._dragover&&!this.nodrop&&(this._dragover=this._dragoverValid=!1)}_onDrop(t){this.nodrop||(t.preventDefault(),this._dragover=this._dragoverValid=!1,this._addFiles(t.dataTransfer.files))}_createXhr(){return new XMLHttpRequest}_configureXhr(t){if("string"==typeof this.headers)try{this.headers=JSON.parse(this.headers)}catch(t){this.headers=void 0}for(var e in this.headers)t.setRequestHeader(e,this.headers[e]);this.timeout&&(t.timeout=this.timeout),t.withCredentials=this.withCredentials}_setStatus(t,e,i,o){t.elapsed=o,t.elapsedStr=this._formatTime(t.elapsed,this._splitTimeByUnits(t.elapsed)),t.remaining=Math.ceil(o*(e/i-1)),t.remainingStr=this._formatTime(t.remaining,this._splitTimeByUnits(t.remaining)),t.speed=~~(e/o/1024),t.totalStr=this._formatSize(e),t.loadedStr=this._formatSize(i),t.status=this._formatFileProgress(t)}uploadFiles(t){t&&!Array.isArray(t)&&(t=[t]),t=(t=t||this.files).filter((t=>!t.complete)),Array.prototype.forEach.call(t,this._uploadFile.bind(this))}_uploadFile(t){if(t.uploading)return;const e=Date.now(),i=t.xhr=this._createXhr();let o,a;i.upload.onprogress=n=>{clearTimeout(o),a=Date.now();const s=(a-e)/1e3,r=n.loaded,l=n.total,d=~~(r/l*100);t.loaded=r,t.progress=d,t.indeterminate=r<=0||r>=l,t.error?t.indeterminate=t.status=void 0:t.abort||(d<100?(this._setStatus(t,l,r,s),o=setTimeout((()=>{t.status=this.i18n.uploading.status.stalled,this._notifyFileChanges(t)}),2e3)):(t.loadedStr=t.totalStr,t.status=this.i18n.uploading.status.processing)),this._notifyFileChanges(t),this.dispatchEvent(new CustomEvent("upload-progress",{detail:{file:t,xhr:i}}))},i.onreadystatechange=()=>{if(4==i.readyState){if(clearTimeout(o),t.indeterminate=t.uploading=!1,t.abort)return void this._notifyFileChanges(t);t.status="";if(!this.dispatchEvent(new CustomEvent("upload-response",{detail:{file:t,xhr:i},cancelable:!0})))return;0===i.status?t.error=this.i18n.uploading.error.serverUnavailable:i.status>=500?t.error=this.i18n.uploading.error.unexpectedServerError:i.status>=400&&(t.error=this.i18n.uploading.error.forbidden),t.complete=!t.error,this.dispatchEvent(new CustomEvent("upload-"+(t.error?"error":"success"),{detail:{file:t,xhr:i}})),this._notifyFileChanges(t)}};const n=new FormData;t.uploadTarget=t.uploadTarget||this.target||"",t.formDataName=this.formDataName;if(!this.dispatchEvent(new CustomEvent("upload-before",{detail:{file:t,xhr:i},cancelable:!0})))return;n.append(t.formDataName,t,t.name),i.open(this.method,t.uploadTarget,!0),this._configureXhr(i),t.status=this.i18n.uploading.status.connecting,t.uploading=t.indeterminate=!0,t.complete=t.abort=t.error=t.held=!1,i.upload.onloadstart=()=>{this.dispatchEvent(new CustomEvent("upload-start",{detail:{file:t,xhr:i}})),this._notifyFileChanges(t)};this.dispatchEvent(new CustomEvent("upload-request",{detail:{file:t,xhr:i,formData:n},cancelable:!0}))&&i.send(n)}_retryFileUpload(t){this.dispatchEvent(new CustomEvent("upload-retry",{detail:{file:t,xhr:t.xhr},cancelable:!0}))&&this._uploadFile(t)}_abortFileUpload(t){this.dispatchEvent(new CustomEvent("upload-abort",{detail:{file:t,xhr:t.xhr},cancelable:!0}))&&(t.abort=!0,t.xhr&&t.xhr.abort(),this._notifyFileChanges(t))}_notifyFileChanges(t){var e="files."+this.files.indexOf(t)+".";for(var i in t)t.hasOwnProperty(i)&&this.notifyPath(e+i,t[i])}_addFiles(t){Array.prototype.forEach.call(t,this._addFile.bind(this))}_addFile(t){if(this.maxFilesReached)return void this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:t,error:this.i18n.error.tooManyFiles}}));if(this.maxFileSize>=0&&t.size>this.maxFileSize)return void this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:t,error:this.i18n.error.fileIsTooBig}}));const e=t.name.match(/\.[^\.]*$|$/)[0],i=new RegExp("^("+this.accept.replace(/[, ]+/g,"|").replace(/\/\*/g,"/.*")+")$","i");!this.accept||i.test(t.type)||i.test(e)?(t.loaded=0,t.held=!0,t.status=this.i18n.uploading.status.held,this.unshift("files",t),this.noAuto||this._uploadFile(t)):this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:t,error:this.i18n.error.incorrectFileType}}))}_removeFile(t){this.files.indexOf(t)>-1&&this.splice("files",this.files.indexOf(t),1)}_onAddFilesTouchEnd(t){t.preventDefault(),this.__resetMouseCanceller(),this._onAddFilesClick()}__resetMouseCanceller(){Tl.mouse.mouseIgnoreJob&&Tl.mouse.mouseIgnoreJob.flush()}_onAddFilesClick(){this.maxFilesReached||(this.$.fileInput.value="",this.$.fileInput.click())}_onFileInputChange(t){this._addFiles(t.target.files)}_onFileStart(t){this._uploadFile(t.detail.file)}_onFileRetry(t){this._retryFileUpload(t.detail.file)}_onFileAbort(t){this._abortFileUpload(t.detail.file)}_onFileRemove(t){this._removeFile(t.detail.file)}_dragoverChanged(t){t?this.setAttribute("dragover",t):this.removeAttribute("dragover")}_dragoverValidChanged(t){t?this.setAttribute("dragover-valid",t):this.removeAttribute("dragover-valid")}_i18nPlural(t,e){return 1==t?e.one:e.many}_isMultiple(t){return 1!=t}}customElements.define(Rd.is,Rd);class zd extends($(D(o))){static get tag(){return"simple-fields-upload"}static get styles(){return[...super.styles,...z,a`:host{pointer-events:all;overflow:visible;transition:.3s all ease;--simple-login-camera-aspect:1.777777777777;--simple-camera-snap-color:var(--simple-fields-color, currentColor);--simple-camera-snap-background:var(
            --simple-fields-background-color,
            unset
          );--simple-camera-snap-border-radius:2px;--lumo-font-family:var(--simple-fields-font-family, sans-serif);--lumo-error-color:var(--simple-fields-error-color, #b40000);--lumo-primary-font-color:var(--simple-fields-color, currentColor);--lumo-base-color:var(--simple-fields-background-color, transparent)}:host([responsive-size=xs]),div[part=description]{font-size:10px;--simple-fields-font-size:10px;--simple-fields-button-font-size:11px;--simple-fields-legend-font-size:11px;--simple-fields-detail-font-size:10px}fieldset{padding:0;max-width:100%}#upload,div[slot=drop-label]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;width:100%}#upload{border-radius:var(--simple-fields-border-radius,2px);border:1px dashed var(--simple-fields-border-color-light,#ccc)}#url{flex:1 1 100%;margin:var(--simple-fields-margin-small,8px) 0;background-color:transparent}#upload-options{position:relative;transition:height .3s linear}div[slot=drop-label]>*{flex:0 1 auto}simple-fields-url-combo[always-expanded]::part(listbox){background-color:transparent}simple-toolbar-button{font-family:var(--simple-fields-font-family,sans-serif);color:var(--simple-fields-color,currentColor);margin:calc(.5 * var(--simple-fields-margin-small,8px)) calc(.25 * var(--simple-fields-margin-small,8px))}simple-toolbar-button[part=cancel-media]{position:absolute;right:0;top:0;z-index:2;--simple-fields-button-padding-sm:0;background-color:var(--simple-fields-background-color,#fff);opacity:.7}span[part=drop-area-text]{font-family:var(--simple-fields-button-font-family,sans-serif);font-size:var(--simple-fields-button-font-size,14px);white-space:nowrap;margin:calc(.5 * var(--simple-fields-margin-small,8px)) calc(.25 * var(--simple-fields-margin-small,8px))}vaadin-upload{padding:var(--simple-fields-margin-small,8px);position:relative;overflow:visible;border:none!important}vaadin-upload[dragover]{border-color:var(--simple-fields-secondary-accent-color,var(--simple-colors-default-theme-accent-3,#77e2ff))}vaadin-upload::part(drop-label){font-family:var(--simple-fields-font-family,sans-serif);color:var(--simple-fields-color,currentColor);display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0;width:100%;margin-top:-16px}vaadin-upload.option-selfie::part(drop-label){display:block}vaadin-upload::part(drop-label-icon){display:none}vaadin-upload-file{--disabled-text-color:#var(--simple-fields-border-color, #999)}simple-camera-snap{--simple-camera-snap-button-container-bottom:2px;--simple-camera-snap-button-container-z-index:5;--simple-camera-snap-button-border-radius:100%;--simple-camera-snap-button-opacity:0.7}`]}constructor(){super(),this.t=this.t||{},this.t={...this.t,dropMediaHereOr:"drop media here or",upload:"Upload",takePhoto:"Take photo",recordAudio:"Record audio",cancel:"Cancel",uploadMedia:"Upload media"},this.registerLocalization({context:this,namespace:"simple-fields",localesPath:new URL("../locales",import.meta.url).href,locales:["es"]}),this.itemsList=[],this.autocomplete="off",this.noCamera=!1,this.noVoiceRecord=!0,this.responsiveSize="sm"}render(){return n` <fieldset part="fieldset">${this.legend} ${this.fields}</fieldset> `}get fields(){return n` <div id="upload-options"> <vaadin-upload capture="" class="option-${this.option}" form-data-name="file-upload" id="fileupload" @upload-before="${this._fileAboutToUpload}" @upload-response="${this._fileUploadResponse}" part="upload" ?nodrop="${this.disabled}"> <button ?disabled="${this.disabled}" id="add-hidden" slot="add-button" hidden></button> <div slot="drop-label" part="browse-area" ?hidden="${"selfie"==this.option||"audio"==this.option}"> <simple-fields-url-combo id="url" ?autofocus="${this.autofocus}" autocomplete="both" value="${this.value||""}" label="URL" type="url" auto-validate="" part="url" ?disabled="${this.disabled}" ?always-expanded="${this.responsiveSize.indexOf("s")<0}" display-as="${this.responsiveSize.indexOf("l")>-1?"grid":""}" .itemsList="${this.itemsList}" @click="${t=>t.stopImmediatePropagation()}" @mousedown="${t=>t.stopImmediatePropagation()}" @focus="${t=>t.stopImmediatePropagation()}" @value-changed="${this.valueChanged}"> </simple-fields-url-combo> </div> <div id="upload"> <span part="drop-area-text">${this.t.dropMediaHereOr}</span> <simple-toolbar-button id="browse" ?disabled="${this.disabled}" label="${this.t.upload}.." ?show-text-label="${this.responsiveSize.indexOf("s")<0}" icon="icons:file-upload" show-text-label @click="${this._handleBrowse}" controls="fieldset" part="browse"> </simple-toolbar-button> <simple-toolbar-button icon="image:camera-alt" ?disabled="${this.disabled}" label="${this.t.takePhoto}.." ?show-text-label="${this.responsiveSize.indexOf("s")<0}" @mousedown="${t=>t.preventDefault()}" @focus="${t=>t.preventDefault()}" @click="${this._handleCameraOption}" controls="fieldset" part="take-photo" ?hidden="${!navigator.mediaDevices||this.noCamera}"> </simple-toolbar-button> <simple-toolbar-button icon="image:camera-alt" ?disabled="${this.disabled}" label="${this.t.recordAudio}.." ?show-text-label="${this.responsiveSize.indexOf("s")<0}" @mousedown="${t=>t.preventDefault()}" @focus="${t=>t.preventDefault()}" @click="${this._handleAudioOption}" controls="fieldset" part="record-audio" ?hidden="${!navigator.mediaDevices||this.noVoiceRecord}"> </simple-toolbar-button> </div> <simple-toolbar-button id="cancel" icon="icons:clear" ?disabled="${this.disabled}" label="${this.t.cancel}" @mousedown="${t=>t.preventDefault()}" @focus="${t=>t.preventDefault()}" @click="${this._handleCancel}" controls="fieldset" slot="drop-label" part="cancel-media" ?hidden="${"selfie"!==this.option&&"audio"!==this.option}"> </simple-toolbar-button> <div id="camerahole" ?hidden="${"selfie"!==this.option}" part="camera" slot="drop-label" part="camera-preview"></div> <div id="voicerecorder" ?hidden="${"audio"!==this.option}" slot="drop-label" part="voice-preview"></div> ${this.desc} </vaadin-upload> </div> `}_handleCameraOption(t){t.preventDefault(),this.option="selfie",this._takeSelfie(t)}_handleAudioOption(t){t.preventDefault(),this.option="voice",this._voiceRecorder(t)}_handleCancel(t){t.preventDefault(),this.option="fileupload"}_handleBrowse(t){t.preventDefault(),this.shadowRoot.querySelector("#add-hidden").dispatchEvent(new CustomEvent("click",t))}valueChanged(t){this.value=t.detail.value}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"value"==e&&this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:this[e]}}))})),this.field&&this.__delayedFocus&&this.focus()}static get properties(){return{...super.properties,accept:{type:String},autocomplete:{type:String},autofocus:{type:Boolean},value:{type:String},option:{type:String},noCamera:{type:Boolean,attribute:"no-camera"},noVoiceRecord:{type:Boolean,attribute:"no-voice-record"},responsiveSize:{type:String,attribute:"responsive-size",reflect:!0},itemsList:{type:Object,attribute:"items-list"}}}get field(){if(this.shadowRoot)return"selfie"==this.option&&this.shadowRoot.querySelector("#cancel")||"audio"==this.option&&this.shadowRoot.querySelector("#cancel")?this.shadowRoot.querySelector("#cancel"):!!this.shadowRoot.querySelector("#url")&&this.shadowRoot.querySelector("#url")}focus(){this.field?(this.field.focus(),this.__delayedFocus=!1):this.__delayedFocus=!0}_fileAboutToUpload(t){this.dispatchEvent(new CustomEvent("upload-before",{bubbles:!0,cancelable:!0,composed:!1,detail:t.detail}))}_fileUploadResponse(t){this.dispatchEvent(new CustomEvent("upload-response",{bubbles:!0,cancelable:!0,composed:!1,detail:t.detail}))}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.value?this.option="url":this.option="fileupload",window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"responsive-size",relativeToParent:!0,sm:150,md:300,lg:600,xl:1200}}))}__newPhotoShowedUp(t){let e=new File([t.detail.raw],"headshot"+t.timeStamp+".jpg");this.shadowRoot.querySelector("#fileupload")._addFile(e)}__newAudioShowedUp(t){let e=new File([t.detail.value],"voice-memo"+t.timeStamp+".mp3");this.shadowRoot.querySelector("#fileupload")._addFile(e)}_takeSelfie(t){this.camera||(import("./e7fcf299.js"),this.camera=document.createElement("simple-camera-snap"),this.camera.autoplay=!0,this.camera.addEventListener("simple-camera-snap-image",this.__newPhotoShowedUp.bind(this)),this.shadowRoot.querySelector("#camerahole").appendChild(this.camera))}_voiceRecorder(t){this.voice||(import("./a1e24b77.js"),this.voice=document.createElement("voice-recorder"),this.voice.addEventListener("voice-recorder-recording",this.__newAudioShowedUp.bind(this)),this.shadowRoot.querySelector("#voicerecorder").appendChild(this.voice))}_resolveObjectPath(t,e){return t.split(".").reduce((function(t,e){return t?t[e]:null}),e||self)}}window.customElements.define(zd.tag,zd);class Id extends(d($(zd))){constructor(){super(),this.autocomplete="on",this.__winEvents={"hax-app-picker-selection":"_haxAppPickerSelection"},this.t={whereUpload:"Where would you like to upload this",cantHandle:"Sorry, you don't have a storage location that can handle",uploads:"uploads"},this.registerLocalization({context:this,namespace:"hax"})}static get tag(){return"hax-upload-field"}_canUpload(){return!this.__allowUpload&&ua}_fileAboutToUpload(t){if(this._canUpload()){t.preventDefault(),t.stopPropagation();let i={source:t.detail.file.name,type:t.detail.file.type};var e=ua.guessGizmoType(i);let o=ua.getHaxAppStoreTargets(e);1===o.length?this._haxAppPickerSelection({detail:o[0]}):0!==o.length?ua.haxAppPicker.presentOptions(o,e,`${this.t.whereUpload} ${e}?`,"app"):ua.toast(`${this.t.cantHandle} ${e} ${this.t.uploads}!`,5e3)}else this.__allowUpload=!1}_haxAppPickerSelection(t){let e=t.detail.connection;this.__appUsed=t.detail,this.shadowRoot.querySelector("#fileupload").method=e.operations.add.method;let i=e.protocol+"://"+e.url;"/"!=i.substr(i.length-1)&&(i+="/"),void 0!==e.operations.add.endPoint&&(i+=e.operations.add.endPoint),null!=ua.connectionRewrites.appendUploadEndPoint&&(i+="?"+ua.connectionRewrites.appendUploadEndPoint),null!=ua.connectionRewrites.appendJwt&&(i+="&"+ua.connectionRewrites.appendJwt+"="+function(t){try{return localStorage.getItem(t)}catch(t){return!1}}(ua.connectionRewrites.appendJwt)),this.shadowRoot.querySelector("#fileupload").headers=e.headers,this.shadowRoot.querySelector("#fileupload").target=i,this.__allowUpload=!0,this.shadowRoot.querySelector("#fileupload").uploadFiles()}_fileUploadResponse(t){let e=JSON.parse(t.detail.xhr.response),i=this.__appUsed.connection.operations.add.resultMap,o={},a={};for(var n in void 0!==this._resolveObjectPath(i.item,e)&&(o=this._resolveObjectPath(i.item,e)),a.type=i.defaultGizmoType,i.gizmo)a[n]=this._resolveObjectPath(i.gizmo[n],o);void 0===a.url&&void 0!==a.source&&(a.url=a.source),void 0!==i.gizmo.type&&(a.type=this._resolveObjectPath(i.gizmo.type,o)),this.shadowRoot.querySelector("#url").value=a.url}}customElements.define(Id.tag,Id);class $d extends Id{static get tag(){return"hax-tray-upload"}constructor(){super(),this.__winEvents={"hax-app-picker-selection":"_haxAppPickerSelection","place-holder-file-drop":"_placeHolderFileDrop"}}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"t"===e&&(this.label=this.t.uploadMedia)}))}_fileUploadResponse(t){super._fileUploadResponse(t),this.newAssetConfigure()}_canUpload(){return!this.__allowUpload}newAssetConfigure(){let t={source:this.shadowRoot.querySelector("#url").value,title:this.shadowRoot.querySelector("#url").value};ua.insertLogicFromValues(t,this)}_placeHolderFileDrop(t){ua.activePlaceHolder=t.detail.placeHolderElement,this.shadowRoot.querySelector("#fileupload")._onDrop(t.detail)}}window.customElements.define($d.tag,$d);class jd extends(ln(o)){static get tag(){return"hax-tray-button"}constructor(){super(),this.eventData=null}static get properties(){return{...super.properties,voiceCommand:{type:String,attribute:"voice-command"},wide:{type:Boolean,reflect:!0},index:{type:Number},eventData:{type:String,attribute:"event-data"}}}_voiceEvent(t){this._handleClick(t),this.click()}_handleClick(t){this.dispatchEvent(new CustomEvent("hax-tray-button-click",{bubbles:!0,cancelable:!0,composed:!0,detail:{eventName:this.eventName,index:this.index,value:this.eventData}}))}updated(t){super.updated&&super.updated(t),t.forEach(((t,e)=>{"voiceCommand"==e&&this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: "+this[e],context:this,callback:"_voiceEvent"}}))}))}}customElements.define(jd.tag,jd);class Fd extends o{static get styles(){return[a`:host{overflow-y:auto;position:relative}simple-button-grid{overflow:auto}simple-button-grid.collapse-hide{max-height:0!important;transition:all .5s}.visibility-hidden{z-index:-1;visibility:hidden;opacity:0;height:0;transition:all .5s}`]}constructor(){super(),this.addEventListener("hax-tray-button-click",(t=>{"search-selected"===t.detail.eventName?(this.searching=!0,ua.activeApp=Qi(this.appList[t.detail.index])):"cancel-search"===t.detail.eventName&&(this.searching=!1)})),this.searching=!1,this.appList=[],this.activeApp=null,this.hasActive=!1,import("./e0129f04.js"),Promise.resolve().then((function(){return qd})),Di((()=>{this.appList=Qi(ua.appList)})),Di((()=>{this.activeApp=Qi(ua.activeApp)}))}render(){return n` <simple-button-grid class="${this.searching?"collapse-hide":""}" always-expanded columns="3"> ${this.appList.map((t=>n` <hax-tray-button class="${this.searching?"visibility-hidden":""}" show-text-label icon-position="top" index="${t.index}" label="${t.details.title}" icon="${t.details.icon}" color="${t.details.color}" event-name="search-selected" event-data="${t.index}"> </hax-tray-button> `))} </simple-button-grid> <hax-app-search id="haxappsearch" class="${this.searching?"":"visibility-hidden"}"></hax-app-search> <slot></slot> `}static get tag(){return"hax-app-browser"}static get properties(){return{search:{type:String},searching:{type:Boolean,reflect:!0},activeApp:{type:Object},hasActive:{reflect:!0,type:Boolean,attribute:"has-active"},appList:{type:Array}}}updated(t){t.forEach(((t,e)=>{"activeApp"==e&&this[e]&&this._activeAppChanged(this[e],t),"appList"==e&&this[e]&&this.shadowRoot&&(this.searching=!1)}))}_activeAppChanged(t,e){this.hasActive=void 0!==e&&null!=t}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.searching=!1}}window.customElements.define(Fd.tag,Fd);
/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const Vd=function(t){return class extends(X(t)){tag(){return"simple-toolbar-grid"}static get baseStyles(){return[a`:host{padding:0;margin:0;max-width:100%;display:flex;overflow:hidden;flex-direction:column;align-items:stretch;overflow:hidden!important;--simple-button-grid-cols:var(
              --simple-toolbar-button-min-width,
              var(
                --simple-toolbar-button-width,
                var(--simple-toolbar-button-height, 24px)
              )
            );transition:all .5s;transition:z-index 0s}:host([hidden]){z-index:-1;visibility:hidden;opacity:0;height:0}#grid{flex:1 1 auto;max-width:100%;overflow:auto}#buttons{flex:0 1 100%;max-width:100%;display:flex;flex-wrap:wrap;--simple-toolbar-button-flex:var(
              --simple-toolbar-button-grid-flex,
              1 1 100%
            )}#buttons{display:grid;overflow:visible;grid-gap:var(--simple-button-grid-margin,4px);grid-template-columns:repeat(auto-fill,minmax(calc(var(--simple-button-grid-cols) - 2 * var(--simple-button-grid-margin,4px)),1fr))}:host([collapsed]:not([always-expanded])) ::slotted([collapse-hide]){display:none!important}`]}static get properties(){return{...super.properties,columns:{type:Number,attribute:"columns"},rows:{type:Number,attribute:"rows"},disableAutogrow:{type:Boolean,attribute:"disable-autogrow",reflect:!0}}}get gridStyles(){let t=[];return this.columns&&t.push(`--simple-button-grid-cols:${100/this.columns}%`),t.join(";")}get toolbarTemplate(){return n` <div id="grid"> <div id="buttons" class="${!this.alwaysExpanded&&this.collapsed?"collapsed":""}" style="${this.gridStyles}" part="buttons"> <slot></slot> ${this.alwaysExpanded?"":this.moreButton} </div> </div> `}_bottom(t){return t&&t.offsetTop&&t.clientHeight?t.offsetTop+t.clientHeight:void 0}resizeToolbar(){if(this.alwaysExpanded)return;let t=this.shadowRoot?this.shadowRoot.querySelector("#morebutton"):void 0;this._bottom(t);let e,i=this._bottom(this),o=[...this.children||[]],a=!0,n=[];o.forEach((t=>{if(t.removeAttribute&&t.removeAttribute("collapse-hide"),0==n.length)n.unshift(t.offsetTop);else{let o=t.offsetTop>n[0];o&&n.unshift(t.offsetTop),this.rows&&n.length>this.rows||!this.rows&&o&&this._bottom(t)>i?(t.setAttribute("collapse-hide",!0),a=!1):a?e=t:t.setAttribute("collapse-hide",!0)}})),this.collapseDisabled=a&&!(t&&e&&this._bottom(t)>i),!this.collapseDisabled&&e&&e.setAttribute("collapse-hide",!0)}constructor(){super()}}};
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class Ud extends(Vd(o)){}customElements.define("simple-button-grid",Ud);var qd=Object.freeze({__proto__:null,SimpleButtonGrid:Ud,SimpleButtonGridBehaviors:Vd});class Gd extends($(function(t){return class extends t{constructor(){super(),this.caseSensitive=!1,this.filtered=[],this.resetList()}resetList(t=[]){this.items=[...t],this.where="title",this.value="",this.like=""}static get properties(){return{...super.properties,items:{type:Array},like:{type:String},where:{type:String},caseSensitive:{type:Boolean,attribute:"case-sensitive",reflect:!0},filtered:{type:Array}}}update(t){super.update(t),t.forEach(((t,e)=>{["items","where","like","caseSensitive"].includes(e)&&this.shadowRoot&&(clearTimeout(this.__debounce),this.__debounce=setTimeout((()=>{this.filtered=this._computeFiltered(this.items,this.where,this.like,this.caseSensitive)}),0)),"filtered"==e&&this.shadowRoot&&(this.dispatchEvent(new CustomEvent("filter",{bubbles:!0,cancelable:!0,composed:!0,detail:!0})),this.dispatchEvent(new CustomEvent("filtered-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:{value:this.filtered}})))}))}filter(){this.where=""}_computeFiltered(t,e,i,o){"\\"!==i[0]&&"\\"!==i||(i="\\"+i);var a=null;a=o?new RegExp(i):new RegExp(i,"i");var n=this._decomposeWhere.bind(this);return t.filter((function(t){if("object"==typeof t){var i=n(e,t);return void 0===i&&""!=e&&console.warn("grafitto-filter was unable to find a property in '"+e+"'"),a.test(i)}return"string"==typeof t?a.test(t):"number"==typeof t?a.test(t.toString()):void 0}))}_decomposeWhere(t,e){return t.split(".").reduce((function(t,e){return t&&t[e]}),e)}}}(o))){static get styles(){return[a`:host{display:flex;flex-direction:column;align-items:stretch;flex:0 1 auto;overflow-y:auto}:host>*{max-width:100%}.toolbar-inner{display:flex;flex-direction:column;align-items:stretch;width:100%;flex:0 0 auto}hax-tray-button::part(button){font-size:var(hax-ui-font-size-xs)}simple-fields-field{margin-top:0}`]}constructor(){super(),this.where="title",this.t={filterContentTypes:"Filter Content Types"},this.registerLocalization({context:this,namespace:"hax"})}render(){return n` <div class="toolbar-inner" part="toolbar"> <simple-fields-field id="inputfilter" @value-changed="${this.inputfilterChanged}" aria-controls="filter" label="${this.t.filterContentTypes}" type="text" auto-validate="" part="filter"></simple-fields-field> </div> <simple-button-grid columns="3" always-expanded part="grid"> ${this.filtered.map(((t,e)=>n` <hax-tray-button show-text-label voice-command="insert ${t.title}" draggable="true" @dragstart="${this._dragStart}" index="${e}" label="${t.title}" event-name="insert-tag" event-data="${t.tag}" data-demo-schema="true" icon-position="top" icon="${t.icon}" part="grid-button"></hax-tray-button> `))} </simple-button-grid> `}static get tag(){return"hax-gizmo-browser"}_dragStart(t){let e=ua.haxSchemaFromTag(t.target.eventData);var i;i=e.gizmo.tag&&e.demoSchema&&e.demoSchema[0]?l(e.demoSchema[0]):document.createElement(t.target.eventData),ua.__dragTarget=i,t.dataTransfer&&(t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move"),t.stopPropagation(),t.stopImmediatePropagation()}inputfilterChanged(t){this.like=t.target.value}updated(t){t.forEach(((t,e)=>{"activeApp"==e&&this._activeAppChanged(this[e],t),"filtered"==e&&this.requestUpdate()}))}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),Di((()=>{this.resetList(Qi(ua.gizmoList))}))}resetList(t){super.resetList(t),t&&(this.items=[...t.filter(((t,e)=>!(t&&t.meta&&(t.meta.inlineOnly||t.meta.hidden||t.requiresParent))))])}}window.customElements.define(Gd.tag,Gd);
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Wd{constructor(){this.imports={},this.webpack=!1,this.import=(t,e,i=!1)=>this.load(t,e,i),this.load=(t,e,i=!1)=>{let o=this.imports[t],a=!i&&this.webpack&&this.webpack[t];return new Promise(a||o?(e,i)=>{e(this.imports[t])}:(i,o)=>{const a=document.createElement("script");a.src=e,a.setAttribute("data-name",t),this.imports[t]=e,a.onload=()=>{i(this.imports[t]),this.imports[t]=!0,setTimeout((()=>{const i=new CustomEvent(`es-bridge-${t}-loaded`,{bubbles:!0,cancelable:!0,detail:{name:t,location:e}});document.dispatchEvent(i)}),100)},a.onerror=()=>{o(new Error(`Failed to load ${t} script with location ${e}.`)),delete this.imports[t],this.imports[t]=!1},document.documentElement.appendChild(a)})}}}window.ESGlobalBridge=window.ESGlobalBridge||{},window.ESGlobalBridge.requestAvailability=()=>(window.ESGlobalBridge.instance||(window.ESGlobalBridge.instance=new Wd),window.ESGlobalBridge.instance);const Xd=window.ESGlobalBridge.requestAvailability();
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class Yd extends HTMLElement{constructor(){super(),this.dirHandler=null,this.fileHandler=null,this.files=[]}static get tag(){return"file-system-broker"}async loadFile(t,e=!1,i=!0){let o,a=this.typeToAccept(t),n=`${t} file`;return[o]=await window.showOpenFilePicker({types:[{description:n,accept:a}],excludeAcceptAllOption:i,multiple:e}),this.fileHandler=await o.getFile(),this.fileHandler}async getFileContents(t,e=!1,i=!0){return await this.loadFile(t,e,i),await this.fileHandler.text()}typeToAccept(t){let e={};switch(t){case"xls":case"xlsx":case"ods":e={"text/csv":[".csv"],"application/*":[".xls",".xlsx",".ods"]};break;case"csv":e={"text/*":[".csv",".txt"]};break;case"image":e={"image/*":[".jpg",".jpeg",".gif",".png"]};break;case"video":e={"video/*":[".mp4"]};break;case"markdown":e={"text/*":[".txt",".md"]}}return e}async saveFile(t,e){const i={types:[{description:`Save ${t} file`,accept:this.typeToAccept(t)}]};this.fileHandler=await window.showSaveFilePicker(i);const o=await this.fileHandler.createWritable();await o.write(e),await o.close()}async openDir(t=!0){try{this.dirHandler=await window.showDirectoryPicker()}catch(t){console.log(t)}return this.files=[],this.files=await this.__readDir(this.dirHandler,t,this.dirHandler.name||"",this.dirHandler),this.files}async readFileInDir(t){try{this.dirHandler=await window.showDirectoryPicker();for await(const e of this.dirHandler.values())if(t&&"function"==typeof e.getFile&&e.name===t){const t=await e.getFile();return await t.text()}}catch(t){console.log(t)}return""}async writeFileInDir(t,e=""){try{this.dirHandler=await window.showDirectoryPicker();for await(const o of this.dirHandler.values())if(t&&"function"==typeof o.getFile&&o.name===t){var i=await this.dirHandler.getFileHandle(o.name);const t=await i.createWritable();return await t.write(e),await t.close(),!0}}catch(t){console.log(t)}return!1}async __readDir(t,e,i,o){const a=[];for await(let[n,s]of t){const{kind:t}=s;"directory"===s.kind?(a.push({name:n,kind:t,handle:s,folder:i,parentHandler:o}),".git"!==n&&e&&a.push(...await this.__readDir(s,e,i+"/"+n,s))):a.push({name:n,kind:t,handle:s,folder:i,parentHandler:o})}return a}}window.FileSystemBroker=window.FileSystemBroker||{},window.FileSystemBroker.requestAvailability=()=>(window.FileSystemBroker.instance||(window.FileSystemBroker.instance=document.createElement("file-system-broker"),document.body.appendChild(window.FileSystemBroker.instance)),window.FileSystemBroker.instance);const Kd=window.FileSystemBroker.requestAvailability();customElements.define(Yd.tag,Yd);class Jd extends Yd{static get tag(){return"docx-file-system-broker"}constructor(){super(),this.libPath=new URL("./",import.meta.url).href,this.libPath+="mammoth/",Xd.load("mammoth",this.libPath+"mammoth.browser.min.js").then((()=>{window.mammoth&&(this.docx=window.mammoth,this.dispatchEvent(new CustomEvent("docx-reader-ready",{bubbles:!0,composed:!0,cancelable:!1,detail:this})))}))}__toHTML(t,e){window.dispatchEvent(new CustomEvent("docx-file-system-data",{composed:!1,bubbles:!1,cancelable:!0,detail:{name:e,value:t.value}}))}HTMLToDOCX(t,e,i=!0){const o=`<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>\n      <head>\n        <meta charset='utf-8'>\n        <title>${e}</title>\n      </head>\n      <body>\n      ${t}\n      </body>\n    </html>`;if(i){let t=document.createElement("a");document.body.appendChild(t),t.href="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(o),t.download=`${e}.docx`,t.click(),document.body.removeChild(t)}return o}fileToHTML(t,e="filepicked"){var i=new FileReader;i.onload=async t=>{await this.docx.convertToHtml({arrayBuffer:t.target.result}).then((t=>this.__toHTML(t,e))).done()},i.readAsBinaryString(t)}}customElements.define(Jd.tag,Jd),window.DOCXFileSystemBroker=window.DOCXFileSystemBroker||{},window.DOCXFileSystemBroker.requestAvailability=()=>(window.DOCXFileSystemBroker.instance||(window.DOCXFileSystemBroker.instance=document.createElement("docx-file-system-broker"),document.body.appendChild(window.DOCXFileSystemBroker.instance)),window.DOCXFileSystemBroker.instance);const Qd=window.DOCXFileSystemBroker.requestAvailability();var Zd=Object.freeze({__proto__:null,DOCXFileSystemBrokerSingleton:Qd,DOCXFileSystemBroker:Jd,FileSystemBroker:Yd,FileSystemBrokerSingleton:Kd});class tc extends($(function(t){return class extends t{static get properties(){return super.properties?Object.assign({fileTypes:{type:Object,value:()=>({CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"})}},super.properties):{fileTypes:{type:Object,value:()=>({CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"})}}}downloadFromData(t,e,i="download",o=!0){const a=this.fileTypes[e.toUpperCase()],n=new Blob([decodeURIComponent(encodeURI(t))],{type:a}),s=i+"."+e.toLowerCase();if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,s);else{const t=document.createElement("a");t.href=(window.URL||window.webkitURL).createObjectURL(n),t.download=s,t.target=o?"_blank":"_self",this.appendChild(t),t.click(),this.removeChild(t)}}downloadFromURI(t,e=!0){return window.open(t,e?"_blank":"_self"),!0}}}(o))){static get styles(){return[...an,a`#wrapper,:host{margin:0;padding:0;display:flex;flex-direction:column;align-items:stretch;position:relative;flex:1 1 100%}#spacer{flex:1 1 100%;z-index:-1}#textarea{position:absolute;top:0;bottom:0;margin:0;padding:0}hax-toolbar{flex:0 0 auto;background-color:var(--hax-ui-background-color)}hax-toolbar::part(buttons){display:flex;justify-content:center;align-items:stretch;margin:0 auto}hax-tray-button{flex:1 1 auto}@media screen and (max-width:800px){hax-tray-button{flex:0 1 auto}}`]}render(){return n` <div id="wrapper"> <div id="spacer"></div> <textarea id="hiddentextarea" hidden></textarea> <code-editor id="textarea" theme="${"hax"==this.haxUiTheme?"vs":"haxdark"==this.haxUiTheme?"vs-dark":"auto"}" language="html" font-size="13" word-wrap></code-editor> </div> <hax-toolbar always-expanded> <hax-tray-button label="${this.t.refresh}" tooltip="${this.t.refreshTooltip}" icon="icons:refresh" @click="${this.refreshHTMLEditor.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button label="${this.t.updatePage}" tooltip="${this.t.updatePageTooltip}" icon="editor:insert-drive-file" @click="${this.importContent.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.scrubContent.bind(this)}" icon="editor:format-clear" label="${this.t.cleanFormatting}" tooltip="${this.t.cleanFormattingTooltip}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.selectBody.bind(this)}" icon="icons:content-copy" label="${this.t.copyHTML}" tooltip="${this.t.copyHTMLTooltip}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button label="${this.t.downloadHTML}" tooltip="${this.t.downloadHTMLTooltip}" icon="icons:file-download" @click="${this.download.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button label="${this.t.downloadDOCX}" tooltip="${this.t.downloadDOCXTooltip}" icon="editor:insert-drive-file" @click="${this.downloadDOCX.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.importDOCX.bind(this)}" label="${this.t.importDOCX}" tooltip="${this.t.importDOCXTooltip}" icon="icons:file-upload" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.htmlToHaxElements.bind(this)}" label="${this.t.schema}" tooltip="${this.t.schemaTooltip}" icon="hax:code-json" show-text-label icon-position="top"> </hax-tray-button> </hax-toolbar> `}static get tag(){return"hax-view-source"}refreshHTMLEditor(t){this.updateEditor()}importDOCX(t){Promise.resolve().then((function(){return Zd})).then((async t=>{const e=window.FileSystemBroker.requestAvailability(),i=await e.loadFile("docx");window.DOCXFileSystemBroker.requestAvailability().fileToHTML(i,"hax-view-source")}))}insertDOCXFileContents(t){if("hax-view-source"===t.detail.name){let i=document.createElement("div");i.innerHTML=t.detail.value;let o=!1;ua.activeNode.hasAttribute("slot")&&(o=ua.activeNode.getAttribute("slot"));for(var e=i.children.length-1;e>0;e--)o&&i.children[e].setAttribute("slot",o),ua.activeNode.parentNode.insertBefore(i.children[e],ua.activeNode.nextSibling);ua.toast(this.t.fileImported),this.close()}}connectedCallback(){super.connectedCallback(),window.addEventListener("docx-file-system-data",this.insertDOCXFileContents.bind(this))}disconnectedCallback(){window.removeEventListener("docx-file-system-data",this.insertDOCXFileContents.bind(this)),super.disconnectedCallback()}download(t){const e=this.contentToFile(!1);this.downloadFromData(e,"html","my-new-code"),ua.toast("HTML content downloaded"),this.close()}async downloadDOCX(t){let e=await ua.activeHaxBody.haxToContent();window.DOCXFileSystemBroker.requestAvailability().HTMLToDOCX(e,document.title),ua.toast("docx file downloaded"),this.close()}downloadfull(t){const e=this.contentToFile(!0);this.downloadFromData(e,"html","my-new-webpage"),ua.toast("Working offline copy downloaded"),this.close()}importContent(t){const e=this.shadowRoot.querySelector("#textarea").value;ua.activeHaxBody.importContent(e),ua.haxTray.trayDetail=""}scrubContent(t){const e=this.shadowRoot.querySelector("#textarea").value;ua.toast("Scrubbed, Content updated"),ua.activeHaxBody.importContent(h(e)),this.close()}openSource(){import("./b5891f85.js").then((()=>{this.updateEditor()}))}selectBody(t){let e=this.shadowRoot.querySelector("#hiddentextarea");e.value=this.shadowRoot.querySelector("#textarea").value,e.removeAttribute("hidden"),e.focus(),e.select(),document.execCommand("copy"),e.setAttribute("hidden","hidden"),ua.toast(this.t.copiedToClipboard)}async htmlToHaxElements(t){let e=await ua.htmlToHaxElements(this.shadowRoot.querySelector("#textarea").value);var i=JSON.stringify(e,null,2);let o=this.shadowRoot.querySelector("#textarea").value,a=this.shadowRoot.querySelector("#hiddentextarea");a.removeAttribute("hidden"),a.value=i,a.focus(),a.select(),document.execCommand("copy"),a.value=o,a.setAttribute("hidden","hidden"),ua.toast(this.t.copiedToClipboard),this.close()}close(){ua.haxTray.trayDetail=""}async firstUpdated(t){super.firstUpdated&&(super.firstUpdated(t),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxViewSource",object:this}})))}updateEditor(){ua.activeHaxBody&&this.shadowRoot&&this.shadowRoot.querySelector("#textarea")&&(this.shadowRoot.querySelector("#textarea").editorValue="",setTimeout((async()=>{this.shadowRoot.querySelector("#textarea").editorValue=S(await ua.activeHaxBody.haxToContent())}),0))}async contentToFile(t){let e=await ua.activeHaxBody.haxToContent();var i=e;return t&&(i=`\n        <!DOCTYPE html>\n        <html lang="en">\n          <head>\n            <meta charset="utf-8" />\n            <meta\n              name="viewport"\n              content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes"\n            />\n            <title>hax-body demo</title>\n            <script>window.WCGlobalCDNPath="https://cdn.webcomponents.psu.edu/cdn/"; <\/script> <script src="https://cdn.webcomponents.psu.edu/cdn/build.js"><\/script> \n            <style>\n              body {\n                padding: 32px;\n              }\n            </style>\n          </head>\n          <body>\n          ${e}\n          </body>\n        </html>\n      `),i}static get properties(){return{...super.properties,globalPreferences:{type:Object},theme:{type:String}}}constructor(){super(),this.t={updatePage:"Update",updatePageTooltip:"Update Page HTML",copyHTML:"Copy",copyHTMLTooltip:"Copy HTML to clipboard",downloadHTML:"Download",downloadHTMLTooltip:"Download HTML format",downloadDOCX:"Download DOCX",downloadDOCXTooltip:"Download .docx format",cleanFormatting:"Clean",cleanFormattingTooltip:"Clean HTML Formatting",cleanFormatting:"Clean",schema:"Schema",schemaTooltip:"HAX Schema",refresh:"Refresh",refreshTooltip:"Refresh HTML source",importDOCX:"Import DOCX",importDOCXTooltip:"Import .docx content into body",fileImported:"File imported"},this.registerLocalization({context:this,namespace:"hax"}),this.fileTypes={CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"},Di((()=>{this.globalPreferences=Qi(ua.globalPreferences),this.haxUiTheme=(this.globalPreferences||{}).haxUiTheme||"hax"}))}}window.customElements.define(tc.tag,tc);class ec extends o{static get styles(){return[a`:host{display:flex;flex-direction:column;align-items:stretch;flex:0 0 auto;overflow-y:auto}simple-button-grid{overflow:auto}`]}constructor(){super(),this.staxList=[]}render(){return n` <simple-button-grid columns="3" rows="1" always-expanded> ${this.staxList.map((t=>n` <hax-tray-button icon-position="top" show-text-label index="${t.index}" label="${t.details.title}" .stax="${t.stax}" icon="hax:templates" color="green" event-name="insert-stax"></hax-tray-button> `))} </simple-button-grid> `}static get tag(){return"hax-stax-browser"}static get properties(){return{staxList:{type:Array}}}}window.customElements.define(ec.tag,ec);class ic extends($(o)){static get styles(){return[...sn,a`:host{display:block}.container{text-align:left}.stats{display:flex;align-items:stretch;flex-wrap:wrap}.stat{flex:1 1 auto;text-align:center;border:1px solid var(--hax-ui-border-color);font-weight:400;font-size:var(--hax-ui-font-size-xs);line-height:140%;padding:var(--hax-ui-spacing-sm)}.stat>*{display:block}.stat :first-child{font-weight:700;font-size:150%}ul{list-style:none;padding:0;margin:0}ul li{margin:0;padding:0}li>hax-toolbar-item{width:100%}hax-toolbar-item[data-active-item]::part(button){color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}li>hax-toolbar-item.heading-level-page-break::part(button),li>hax-toolbar-item::part(button),li>hax-toolbar-item[icon="hax:h2"].heading-level-h2::part(button){width:100%;margin-left:0}li>hax-toolbar-item.heading-level-h2::part(button),li>hax-toolbar-item[icon="hax:h3"].heading-level-h3::part(button){width:calc(100% - 26px);margin-left:26px}li>hax-toolbar-item.heading-level-h3::part(button),li>hax-toolbar-item[icon="hax:h4"].heading-level-h4::part(button){width:calc(100% - calc(2 * 26px));margin-left:calc(2 * 26px)}li>hax-toolbar-item.heading-level-h4::part(button),li>hax-toolbar-item[icon="hax:h5"].heading-level-h5::part(button){width:calc(100% - calc(3 * 26px));margin-left:calc(3 * 26px)}li>hax-toolbar-item.heading-level-h5::part(button),li>hax-toolbar-item[icon="hax:h6"].heading-level-h6::part(button){width:calc(100% - calc(4 * 26px));margin-left:calc(4 * 26px)}li>hax-toolbar-item.heading-level-h6::part(button){width:calc(100% - calc(5 * 26px));margin-left:calc(5 * 26px)}`]}constructor(){super(),this.elementList=[],this.t={contentStatistics:"Content Statistics",words:"Words",headings:"Headings",pageBreaks:"Page breaks",paragraphs:"Paragraphs",widgets:"Widgets",characters:"Characters",listView:"List view"},this.registerLocalization({context:this,namespace:"hax"}),Di((()=>{this.activeNodeIndex=Qi(ua.activeNodeIndex)}))}async updateHAXMap(t){let e=[];for(var i=0;i<ua.activeHaxBody.childNodes.length;i++){const t=ua.activeHaxBody.childNodes[i];e.push(await p(t,null))}this.calcStats(e);let o=[];for(i=0;i<e.length;i++){let t=ua.haxSchemaFromTag(e[i].tag);t.gizmo?o.push({tag:e[i].tag,icon:t.gizmo.icon,name:t.gizmo.title}):e[i].tag&&e[i].tag.includes("-")?o.push({tag:e[i].tag,icon:"hax:templates",name:"Widget"}):o.push({tag:e[i].tag,icon:"hax:paragraph",name:"HTML block"})}this.elementList=[...o]}calcStats(t){if(t&&ua.activeHaxBody.innerText){let i={c:ua.activeHaxBody.innerText.length,w:parseInt(ua.activeHaxBody.innerText.split(/\s+/g).length-1),h:0,b:0,p:0,e:0};for(var e in t.forEach((t=>{switch(t.tag){case"blockquote":case"div":case"span":case"p":case"ul":case"ol":case"strong":case"em":i.p++;break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":i.h++;break;case"page-break":i.b++;break;default:i.e++}})),i)this[`${e}Count`]=i[e]}}render(){return n` <h5>${this.t.contentStatistics}</h5> <div class="stats"> <div class="stat"> <span>${this.wCount}</span> <span>${this.t.words}</span> </div> <div class="stat"> <span>${this.pCount}</span> <span>${this.t.paragraphs}</span> </div> <div class="stat"> <span>${this.cCount}</span> <span>${this.t.characters}</span> </div> <div class="stat"> <span>${this.bCount}</span> <span>${this.t.pageBreaks}</span> </div> <div class="stat"> <span>${this.hCount}</span> <span>${this.t.headings}</span> </div> <div class="stat"> <span>${this.eCount}</span> <span>${this.t.widgets}</span> </div> </div> <h5>${this.t.listView}</h5> <ul> ${this.indentedElements.map(((t,e)=>n` <li> <hax-toolbar-item align-horizontal="left" class="heading-level-${t.parent||"h1"}" @click="${t=>this.goToItem(e)}" data-index="${e}" ?data-active-item="${e===this.activeNodeIndex}" icon="${t.icon}" label="${t.name}" show-text-label> </hax-toolbar-item> </li> `))} </ul> `}get indentedElements(){let t="h1";return this.elementList.map((e=>{let i=e;return i.parent=t,"page-break"===i.tag?(i.parent="page-break",t="page-break"):["h1","h2","h3","h4","h5","h6"].includes(i.tag)&&(i.parent=i.tag,t=i.tag),i}))}goToItem(t){if(!1!==t){let e=ua.activeHaxBody.children[parseInt(t)];ua.activeNode=e,e.classList.add("blinkfocus"),"function"==typeof e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded(!0):e.scrollIntoView({behavior:"smooth",inline:"center"}),setTimeout((()=>{e.classList.remove("blinkfocus")}),500)}}scrollInMap(){var t=b(e)[0];this.goToItem(t.getAttribute("data-index"))}static get tag(){return"hax-map"}static get properties(){return{opened:{type:Boolean},elementList:{type:Array},cCount:{type:String},wCount:{type:String},bCount:{type:String},hCount:{type:String},pCount:{type:String},eCount:{type:String},activeNodeIndex:{type:Number}}}}customElements.define(ic.tag,ic);
/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class oc extends(I(r)){static get tag(){return"simple-icon-button"}constructor(){super(),this.accentColor="grey",this.contrast=4,this.dark=!1}render(){return n` <button ?autofocus="${this.autofocus}" .aria-labelledby="${this.ariaLabelledby}" .aria-pressed="${this.toggles||this.toggled?"true":this.toggles?"false":void 0}" controls="${this.controls}" part="button" ?disabled="${this.disabled}" form="${this.form}" label="${this.label}" aria-label="${this.label}" name="${this.fieldName}" .type="${this.type}" value="${this.value}"> <simple-icon part="icon" icon="${this.icon}" accent-color="${this.accentColor}" contrast="${this.contrast}" ?dark="${this.dark}"></simple-icon> </button> `}static get properties(){return{...super.properties,contrast:{type:Number,reflect:!0}}}}customElements.define(oc.tag,oc);class ac extends($(o)){static get styles(){return[a`:host{display:block}.pref-container{text-align:left}simple-icon-lite{--simple-icon-height:36px;--simple-icon-width:36px}`]}constructor(){super(),this.hideLink=!1,this.t={learnAboutHAXTheWeb:"Learn about HAXTheWeb",voiceCommands:"Voice commands",haxUITheme:"HAX UI Theme",language:"Language",english:"English",spanish:"Spanish"},this.udpateSchema(),this.registerLocalization({context:this,namespace:"hax",updateCallback:"udpateSchema"}),Di((()=>{this.globalPreferences=Qi(ua.globalPreferences),this.globalPreferences.haxLang&&j.lang!=this.globalPreferences.haxLang&&(j.lang=this.globalPreferences.haxLang||"en",this.udpateSchema())}))}udpateSchema(){let t=j.lang;t.indexOf("-")&&(t=t.split("-")[0]),this.schema=[{property:"haxVoiceCommands",title:this.t.voiceCommands,description:"Experimental: Voice based control system",inputMethod:"boolean",value:!1},{property:"haxUiTheme",title:this.t.haxUITheme,description:"Change the theme of the HAX interface (not the site's content).",inputMethod:"radio",options:{hax:"Default (light)",haxdark:"Dark",system:"System Default"},value:"hax"},{property:"haxLang",title:this.t.language,description:"Toggle between supported languages for internationalization",inputMethod:"radio",options:{en:this.t.english,es:this.t.spanish},value:t}],this.schemaValues={haxVoiceCommands:!1,haxUiTheme:"hax",haxLang:t},this.shadowRoot&&this.shadowRoot.querySelector("#settingsform")&&this.reloadPreferencesForm()}closeBtn(t){this.dispatchEvent(new CustomEvent("hax-tray-button-click",{bubbles:!0,cancelable:!0,composed:!0,detail:{eventName:"open-preferences",index:0,value:!0}}))}render(){return n` <div style="height:100%;overflow:auto" class="pref-container"> <simple-fields id="settingsform" .schematizer="${Zo}" .elementizer="${ta}"> </simple-fields> </div> <hr> <br> ${this.hideLink?"":n`<a href="https://haxtheweb.org/" rel="noopener" id="link" target="_blank" part="haxlink"><simple-icon-lite icon="hax:hax2022"></simple-icon-lite> ${this.t.learnAboutHAXTheWeb}</a>`} `}static get tag(){return"hax-preferences-dialog"}static get properties(){return{hideLink:{type:Boolean},schema:{type:Object},globalPreferences:{type:Object}}}firstUpdated(t){this.reloadPreferencesForm(),this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this))}__valueChangedEvent(t){t.detail.value&&(ua.globalPreferences={...t.detail.value},this.schemaValues={...t.detail.value})}reloadPreferencesForm(){this.shadowRoot.querySelector("#settingsform").fields=[...this.schema],this.shadowRoot.querySelector("#settingsform").value={...this.schemaValues}}}window.customElements.define(ac.tag,ac);class nc extends o{static get styles(){return a`:host{display:block}.progress-line,.progress-line:before{height:5px;width:100%;margin:auto}:host([full]) .progress-line{--loading-indicator-width:100%}.progress-line{background-color:var(--loading-indicator-background-color,rgba(0,0,0,.05));display:-webkit-flex;display:flex;width:var(--loading-indicator-width,300px)}.progress-line:before{background-color:var(--loading-indicator-color,#000);content:"";animation:running-progress 2s cubic-bezier(.4,0,.2,1) infinite}@keyframes running-progress{0%{margin-left:0;margin-right:100%}50%{margin-left:25%;margin-right:0}100%{margin-left:100%;margin-right:0}}@keyframes fade-out{0%{opacity:1}99%{opacity:0}100%{opacity:0}}`}static get properties(){return{full:{type:Boolean,reflect:!0},loading:{type:Boolean,reflect:!0}}}constructor(){super(),this.full=!1,this.loading=!1}render(){return this.loading?n`<div class="progress-line"></div>`:t}static get tag(){return"loading-indicator"}}customElements.define(nc.tag,nc);class sc extends($(qa(d(o)))){static get tag(){return"hax-tray"}constructor(){super(),this.tourName="hax",this.__winEvents={"can-redo-changed":"_redoChanged","can-undo-changed":"_undoChanged","hax-drop-focus-event":"_expandSettingsPanel"},this.t={structure:"Outline",structureTip:"View Page Structure",editSelected:"Edit selected",edit:"Edit",save:"Save",move:"Move",close:"Close",moveMenu:"Toggles Menu Aligmnent",menuAlignment:"Menu Alignment",menuLeft:"Move",menuRight:"Move",menuPosition:"Menu position",changeSideVisually:"Change which side of the screen the menu is affixed to visually.",expand:"Expand",collapse:"Collapse",menuSize:"Menu size",menuSizeDescription:"Expand or collapse the menu visually.",takeATour:"Help",settings:"Settings",source:"Source",undo:"Undo",redo:"Redo",media:"Media",blocks:"Blocks",cancel:"Cancel",cancelWithoutSaving:"Cancel without saving",configure:"Configure",advanced:"Advanced",layout:"Layout",alignment:"Alignment",left:"Left",center:"Center",right:"Right",search:"Search",templates:"Templates",width:"Width"},this.registerLocalization({context:this,namespace:"hax",updateCallback:"_updateTrayDetail"}),this._initial=!0,this.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},this.collapsed=!0,this.activeTab="item-0",this.activeSchema=[],this.canUndo=!1,this.canRedo=!1,this.trayDetail="content-edit",this.activeTagName="",this.traySizeIcon="hax:arrow-expand-right",this.__setup=!1,setTimeout((()=>{this.addEventListener("hax-tray-button-click",this._processTrayEvent.bind(this))}),0),Di((()=>{this.activeGizmo=Qi(ua.activeGizmo)})),Di((()=>{this.activeNode=Qi(ua.activeNode)})),Di((()=>{this.elementAlign=Qi(ua.elementAlign)})),Di((()=>{this.tourOpened=Qi(ua.tourOpened)})),Di((()=>{this.appStoreLoaded=Qi(ua.appStoreLoaded)})),Di((()=>{this.globalPreferences=Qi(ua.globalPreferences),this.haxUiTheme=(this.globalPreferences||{}).haxUiTheme||"hax",document.body.setAttribute("hax-ui-theme",this.haxUiTheme)})),Di((()=>{this.editMode=Qi(ua.editMode)}))}_expandSettingsPanel(t){this.shadowRoot.querySelector("#content-edit").click()}_redoChanged(t){this.canRedo=t.detail.value}_undoChanged(t){this.canUndo=t.detail.value}static get styles(){return[...super.styles||[],...nn,...an,a`:host{z-index:var(--hax-ui-focus-z-index - 1);top:0;font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size);color:var(--hax-ui-color);transition:0s color linear 0s}:host(:focus-within),:host(:hover){z-index:var(--hax-ui-focus-z-index)}.wrapper{position:fixed;display:none;align-items:stretch;flex-direction:row-reverse;opacity:0;visibility:visible;pointer-events:none;overflow:hidden;top:0;bottom:0;width:var(--hax-tray-width);height:100vh;max-height:100vh;transition:.2s opacity ease-in-out 0s;z-index:var(--hax-ui-focus-z-index)}:host([element-align=left]) .wrapper{left:-1000px;flex-direction:row}:host([edit-mode]) .wrapper{opacity:1;visibility:visible;pointer-events:all;display:flex}:host([edit-mode][element-align=left]) .wrapper{left:0}:host([edit-mode][element-align=right]) .wrapper{right:0}:host([edit-mode][collapsed]) .wrapper{width:unset}:host([edit-mode]) .wrapper.full-panel{width:unset;left:0;right:0}:host([edit-mode]) .wrapper.full-panel .detail{max-width:unset}#menubar{display:inline-flex;flex-direction:column;align-items:stretch;width:var(--hax-tray-menubar-min-width);overflow:visible;flex:0 0 auto;z-index:6;background-color:var(--hax-ui-background-color)}:host([collapsed]) #menubar{width:unset}#menubar>*{background-color:var(--hax-ui-background-color)}#menubar>::part(button){padding:var(--hax-ui-spacing-xs)}#menubar>::part(label){opacity:0;margin:0;width:0%;font-size:10px;padding:0;visibility:hidden;overflow:hidden;display:inline-block;text-align:left;transition:.2s width ease-in-out 0s,.2s margin ease-in-out 0s,.2s padding ease-in-out 0s,0s opacity linear .2s,0s visibility linear .2s}:host([collapsed]) #menubar>::part(label){opacity:1;width:100%;visibility:visible;padding:0 var(--hax-ui-spacing-sm);overflow:unset;transition:.2s width ease-in-out 0s,.2s margin ease-in-out 0s,.2s padding ease-in-out 0s,0s opacity linear 0s,0s visibility linear 0s,0s overflow linear .2s}loading-indicator{--loading-indicator-background-color:var(
            --simple-colors-default-theme-accent-2,
            grey
          );--loading-indicator-color:var(
            --simple-colors-default-theme-accent-10,
            black
          )}#tray-detail,.detail{flex:1 1 auto;display:flex;flex-direction:column;align-items:stretch}.detail{opacity:1;visibility:visible;pointer-events:all;transition:.2s opacity ease-in-out 0s,.2s width ease-in-out 0s,.2s visibility ease-in-out 0s,0s border linear;border:1px solid var(--hax-ui-border-color);background-color:var(--hax-ui-background-color);transition:.2s width ease-in-out 0s;max-height:100vh;max-width:calc(var(--hax-tray-width) - var(--hax-tray-menubar-min-width));overflow-x:auto}:host([collapsed]) .detail{width:0;overflow:hidden;opacity:0;visibility:hidden;pointer-events:none;max-height:100vh;overflow-y:auto}#tray-detail{width:auto;padding:0 var(--hax-ui-spacing) var(--hax-ui-spacing);overflow-y:auto}#haxcancelbutton::part(dropdown-icon){display:none}.tray-detail-titlebar{background-color:var(--hax-ui-color-accent);padding:var(--hax-ui-spacing-sm) var(--hax-ui-spacing);margin:0 calc(0px - var(--hax-ui-spacing)) var(--hax-ui-spacing);display:flex;align-items:center;justify-content:space-between;height:var(--simple-modal-titlebar-height,unset);line-height:var(--simple-modal-titlebar-line-height,unset);position:sticky;z-index:2;top:0}.tray-detail-titlebar h4{flex:1 1 auto;font-size:var(--hax-ui-font-size);font-family:var(--hax-ui-font-family)}#toggle-tray-size{flex:0 0 auto}hax-app-browser,hax-gizmo-browser,hax-tray-button{transition:.2s all ease-in-out;transition:0s color linear!important;transition:0s background-color linear!important;transition:0s border-color linear!important;visibility:visible}hax-app-browser:not(:defined),hax-gizmo-browser:not(:defined),hax-tray-button:not(:defined){visibility:hidden}hax-tray-upload{flex:0 0 auto}[hidden]{display:none}:host([element-align=right]) #button{right:0}:host([element-align=left]) #button{left:0}#button{position:fixed;top:0;visibility:visible;margin:var(--hax-ui-spacing-xs)}:host([edit-mode]) #button{visibility:hidden;opacity:0}#button:hover{opacity:1}@media screen and (max-width:800px){:host{width:100%;z-index:calc(var(--hax-ui-focus-z-index) + 3)}.wrapper{width:unset;top:-1000px;left:0;right:0;flex-direction:column}:host([edit-mode]) .wrapper{top:0}:host([collapsed]) .wrapper{height:var(--hax-tray-menubar-min-height);overflow-y:visible}:host([element-align=left]) .wrapper{left:-1000px;flex-direction:column}#menubar{position:sticky;flex-direction:row;left:0;top:0;height:auto;flex:0 0 auto;width:100%}#menubar>*{flex:1 0 auto;min-width:var(--hax-tray-menubar-min-width)}#menubar>::part(button){min-width:var(--hax-tray-menubar-min-width);justify-content:space-around}#menubar>::part(label){display:none}#haxMenuAlign{display:none}.detail{width:100%;position:relative;flex:1 1 100%}:host([collapsed]) .detail{flex:0 0 0px}}@media screen and (max-width:600px){:host([edit-mode]) .hide-small{display:none}}`]}get trayStatus(){let t=this.collapsed?"collapsed":"view-source"==this.trayDetail?"full-panel":"side-panel";return ua.trayStatus=t,ua.trayDetail=this.trayDetail,t}render(){return n` ${this.panelOpsTemplate} <div class="wrapper ${this.trayStatus}"> ${this.menuToolbarTemplate} <div class="detail"> <loading-indicator ?loading="${!this.appStoreLoaded}"></loading-indicator> ${this.trayDetailTemplate} </div> </div> `}get panelOpsTemplate(){return this.hidePanelOps?"":n` <hax-tray-button large voice-command="edit page" .data-opened="${this.editMode}" @click="${this._clickEditButton}" icon="create" id="button" feature show-text-label show-tooltip label="${this.editMode?this.t.save:this.t.edit}"></hax-tray-button> `}get toolbarsTemplate(){return n`${this.opsToolbarTemplate}${this.trayToolbarTemplate}`}get menuToolbarTemplate(){return n` <div id="menubar" class="collapse-menu"> ${this.saveButtons} ${this.doButtons} ${this.contentButtons} <slot name="tray-buttons-pre"></slot> ${this.moreButtons}${this.menuButtons} </div>`}get menuButtons(){return n` <hax-tray-button show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}" id="haxMenuAlign" event-name="toggle-element-align" icon="arrow-${"left"==this.elementAlign?"forward":"back"}" label="${"left"==this.elementAlign?this.t.menuRight:this.t.menuLeft}" index="${"left"==this.elementAlign?"1":"0"}" tooltip="${this.t.moveMenu} ${"left"==this.elementAlign?this.t.right:this.t.left}"> </hax-tray-button> `}get saveButtons(){return this.hidePanelOps?"":n` <hax-tray-button @click="${this._clickSaveButton}" icon="save" icon-position="left" id="haxsavebutton" label="${this.editMode?this.t.save:this.t.edit}" event-name="save" voice-command="save page" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"></hax-tray-button> <hax-tray-button icon="cancel" id="haxcancelbutton" label="${this.t.cancel}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"></hax-tray-button> `}get doButtons(){return n` <hax-tray-button icon="icons:undo" ?disabled="${!this.canUndo}" label="${this.t.undo}" event-name="undo" voice-command="undo" data-simple-tour-stop data-stop-title="label" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> Undo the previous operation in the content, whether typing or adding a widget. </div> </hax-tray-button> <hax-tray-button icon="icons:redo" ?disabled="${!this.canRedo}" label="${this.t.redo}" event-name="redo" voice-command="redo" data-simple-tour-stop data-stop-title="label" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> Redo the last action that you hit Undo on. </div> </hax-tray-button>`}get contentButtons(){return n` <hax-tray-button event-name="content-add" icon="add-box" id="content-add" label="${this.t.blocks}" voice-command="select blocks (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"content-add"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> When you want to add any content to the page from text, to images, to anything more advanced; you can always find items to add under the Add content menu. Click to expand, then either drag and drop items into the page or click and have them placed near whatever you are actively working on. </div> </hax-tray-button> <hax-tray-button event-name="media-add" icon="image:collections" id="media-add" label="${this.t.media}" voice-command="select media (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"media-add"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> Search for media and content anywhere that your copy of HAX has access to. Pick what to search, perform the search and then click or drag the item into the contnet. </div> </hax-tray-button> <hax-tray-button event-name="content-edit" icon="build" id="content-edit" label="${this.t.edit}" ?disabled="${!this.activeTagName||""==this.activeTagName||!this.activeNode||!this.activeNode.tagName}" voice-command="(modify)(configure)(edit) selected" data-simple-tour-stop data-stop-title="label" controls="tray-detail" tooltip="${this.t.editSelected} ${this.activeTagName}" toggles ?toggled="${!this.collapsed&&"content-edit"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> When you want to add any content to the page from text, to images, to anything more advanced; you can always find items to add under the Add content menu. Click to expand, then either drag and drop items into the page or click and have them placed near whatever you are actively working on. </div> </hax-tray-button> <hax-tray-button event-name="content-map" icon="icons:toc" id="content-map" label="${this.t.structure}" voice-command="select structure (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"content-map"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div data-stop-content> This is a simple list of all the block areas of the page that are clickable to jump through items quickly as well as review some simple overview stats. </div> </hax-tray-button>`}get moreButtons(){return n`<hax-tray-button id="exportbtn" icon="code" label="${this.t.source}" event-name="view-source" voice-command="view (page) source" data-simple-tour-stop data-stop-title="label" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div data-stop-content> Every change you make in HAX is ultimately writing HTML. Know HTML? Awesome, pop open the source view and make any changes you like. HTML is always behind the scenes ensuring that content is portable, well formatted and easy to read. </div> </hax-tray-button> <hax-tray-button ?hidden="${this.hidePreferencesButton}" id="advanced-settings" event-name="advanced-settings" icon="settings" label="${this.t.settings}" voice-command="select settings (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"advanced-settings"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div data-stop-content>User preferences for customizing HAX</div> </hax-tray-button> <hax-tray-button event-name="${this.tourOpened?"stop-tour":"start-tour"}" icon="help" label="${this.t.takeATour}" voice-command="start tour" toggles ?toggled="${!this.collapsed&&this.tourOpened}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"></hax-tray-button> `}get trayDetailTemplate(){return n` <div id="tray-detail" aria-live="polite" aria-disabled="${this.collapsed?"true":"false"}" tabindex="${this.collapsed?"-1":"0"}" selected-detail="${this.trayDetail}"> <div class="tray-detail-titlebar"> <h4> ${this.trayLabel||`${this.t.editSelected} ${this.activeTagName}`} </h4> <hax-tray-button voice-command="collapse menu" id="toggle-tray-size" event-name="toggle-tray-size" icon="close" label="${this.t.close}"> </hax-tray-button> </div> ${this.viewSourceTemplate} ${this.advancedSettingsTemplate} ${this.contentMapTemplate} ${this.contentEditTemplate} ${this.contentAddTemplate} ${this.mediaTemplate} </div>`}get viewSourceTemplate(){return n` <hax-view-source id="view-source" ?hidden="${"view-source"!==this.trayDetail}"></hax-view-source>`}get advancedSettingsTemplate(){return n` <hax-preferences-dialog ?hidden="${"advanced-settings"!==this.trayDetail}"></hax-preferences-dialog>`}get contentEditTemplate(){return n` <simple-fields id="settingsform" disable-responsive code-theme="${"system"==this.haxUiTheme?"auto":"haxdark"==this.haxUiTheme?"vs-dark":"vs"}" ?hidden="${"content-edit"!==this.trayDetail}"></simple-fields>`}get contentAddTemplate(){let t="content-add"!==this.trayDetail;return n` <hax-gizmo-browser id="gizmobrowser" ?hidden="${t}"></hax-gizmo-browser> <h5 ?hidden="${t}">${this.t.templates}</h5> <hax-stax-browser id="staxbrowser" ?hidden="${t}"></hax-stax-browser>`}get contentMapTemplate(){return n`<hax-map controls="content-map" ?hidden="${"content-map"!==this.trayDetail}"></hax-map>`}get mediaTemplate(){let t="media-add"!==this.trayDetail;return n` <hax-tray-upload ?hidden="${t}"></hax-tray-upload> <h5 ?hidden="${t}">${this.t.search}</h5> <hax-app-browser id="appbrowser" ?hidden="${t}"></hax-app-browser>`}__simpleFieldsClick(t){try{this.activeTab=this.shadowRoot.querySelector("#settingsform").shadowRoot.querySelector("simple-fields").activeTab}catch(t){this.activeTab="item-0"}}_refreshAddData(){this.shadowRoot.querySelector("#gizmobrowser").resetList(Qi(ua.gizmoList)),this.shadowRoot.querySelector("#staxbrowser").staxList=[...Qi(ua.staxList)]}_processTrayEvent(t){var e=b(t)[0],i=t.detail.eventName;switch(this.collapsed||this.trayDetail!==i||(i="toggle-tray-size"),i){case"insert-stax":this.dispatchEvent(new CustomEvent("hax-insert-content-array",{bubbles:!0,cancelable:!0,composed:!0,detail:e.stax}));break;case"insert-tag":let i,o={tag:t.detail.value},a=ua.haxSchemaFromTag(t.detail.value);if(e.getAttribute("data-demo-schema")&&a&&a.demoSchema&&a.demoSchema[0])i=a.demoSchema[0];else{let t=JSON.parse(e.getAttribute("event-properties")),a=e.getAttribute("event-content");null==t&&(t={}),null==a&&(a=""),i=ua.haxElementPrototype(o,t,a)}this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:i}));break;case"advanced-settings":case"content-map":case"content-edit":case"content-add":case"media-add":this.trayDetail=t.detail.eventName,this.collapsed=!1;break;case"toggle-element-align":let n=["left","right"],s=n[t.detail.index]?n[t.detail.index]:"right";t.detail.index>1&&(this.collapsed=!0),this.style.setProperty("--hax-tray-custom-y",null),this.style.setProperty("--hax-tray-custom-x",null),ua.elementAlign=s,localStorage.setItem("hax-tray-elementAlign",s);break;case"toggle-tray-size":this.collapsed=!this.collapsed;break;case"start-tour":this.startTour();break;case"stop-tour":window.SimpleTourManager.requestAvailability().stopTour("hax");break;case"undo":ua.activeHaxBody.undo();break;case"redo":ua.activeHaxBody.redo();break;case"view-source":this.trayDetail=t.detail.eventName,ua.haxViewSource.openSource(),this.collapsed=!1}}startTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),window.addEventListener("tour-changed",this._handleTourChanged.bind(this)),this.__tour.startTour("hax")}stopTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),this.__tour.stopTour("hax"),window.removeEventListener("tour-changed",this._handleTourChanged.bind(this))}_handleTourChanged(t){this.tourOpened=t.detail.active==this.tourName}static get properties(){return{...super.properties,offsetMargin:{type:String,attribute:"offset-margin"},collapsed:{type:Boolean,reflect:!0},traySizeIcon:{type:String},appStoreLoaded:{type:Boolean},activeValue:{type:Object},activeSchema:{type:Object},elementAlign:{type:String,reflect:!0,attribute:"element-align"},light:{type:Boolean,reflect:!0},canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},haxUiTheme:{type:String},hidePreferencesButton:{type:Boolean,reflect:!0,attribute:"hide-preferences-button"},hidePanelOps:{type:Boolean,reflect:!0,attribute:"hide-panel-ops"},globalPreferences:{type:Object},activeNode:{type:Object},activeTagName:{type:String},activeGizmo:{type:Object},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayLabel:{type:String},tourOpened:{type:String},__tour:{type:Object}}}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.__setup||(this.shadowRoot.querySelector("#settingsform").schematizer=Zo,this.shadowRoot.querySelector("#settingsform").elementizer=ta,setTimeout((()=>{this.shadowRoot.querySelector(".wrapper").style.margin=this.offsetMargin}),1e3),this.__setup=!0,this.shadowRoot.querySelector("#settingsform").addEventListener("click",this.__simpleFieldsClick.bind(this)),this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this)),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxTray",object:this}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) Blocks (menu)",context:this.shadowRoot.querySelector("#content-add"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) element settings (menu)",context:this.shadowRoot.querySelector("#advanced-settings"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) search (menu)",context:this.shadowRoot.querySelector("#media-add"),callback:"click"}})))}async updated(t){super.updated&&super.updated(t),t.forEach((async(t,e)=>{"editMode"==e&&(this.editMode&&await ua.refreshActiveNodeForm(),this._editModeChanged(this.editMode)),"offsetMargin"==e&&setTimeout((()=>{this.shadowRoot.querySelector(".wrapper").style.margin=this.offsetMargin}),0),"trayDetail"==e&&this._updateTrayDetail(this[e]),"collapsed"==e&&this[e]&&this._editModeChanged(this.editMode),"activeGizmo"==e&&"view-source"!==this.trayDetail&&(this.activeGizmo?(this.activeTagName=this.activeGizmo.title,t&&"content-edit"===this.trayDetail||"content-map"===this.trayDetail||(this.trayDetail="content-edit")):["content-add","content-map"].includes(this.trayDetail)||(this.trayDetail="content-add")),"activeNode"==e&&this.activeNode&&this.activeNode.tagName&&this.editMode&&await ua.refreshActiveNodeForm()}))}async _setupForm(){let t=this.activeNode;if(this._initial=!0,this.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},this.shadowRoot.querySelector("#settingsform").fields=[],this.shadowRoot.querySelector("#settingsform").value={},t&&t.tagName&&ua.elementList[t.tagName.toLowerCase()]){let i={...ua.elementList[t.tagName.toLowerCase()]};for(var e in void 0===i.gizmo.title?this.humanName=t.tagName.replace("-"," ").toLowerCase():this.humanName=i.gizmo.title,this.activeHaxElement.properties)i.settings.configure.forEach((t=>{t.property===e&&(this.activeValue.settings.configure[e]=this.activeHaxElement.properties[e]),t.attribute===e&&(this.activeValue.settings.configure[e]=this.activeHaxElement.properties[e]),t.slot===e&&(this.activeValue.settings.configure[e]=this.activeHaxElement.properties[e])})),i.settings.advanced.forEach((t=>{t.property===e&&(this.activeValue.settings.advanced[e]=this.activeHaxElement.properties[e]),t.attribute===e&&(this.activeValue.settings.advanced[e]=this.activeHaxElement.properties[e]),t.slot===e&&(this.activeValue.settings.advanced[e]=this.activeHaxElement.properties[e])}));let o=document.createElement("div");o.innerHTML=this.activeHaxElement.content,o.childNodes.forEach((t=>{1===t.nodeType&&"undefined"!==t.innerHTML&&(i.settings.configure.forEach((e=>{e.slot===t.getAttribute("slot")?this.activeValue.settings.configure[e.slot]=t.innerHTML:""!=e.slot||null!=t.getAttribute("slot")&&"null"!=t.getAttribute("slot")||(this.activeValue.settings.configure[e.slot]=t.innerHTML)})),i.settings.advanced.forEach((e=>{e.slot===t.getAttribute("slot")?this.activeValue.settings.advanced[e.slot]=t.innerHTML:""!=e.slot||null!=t.getAttribute("slot")&&"null"!=t.getAttribute("slot")||(this.activeValue.settings.advanced[e.slot]=t.innerHTML)})))})),""!=t.style.width?this.activeValue.settings.layout.__scale=t.style.width.replace("%",""):this.activeValue.settings.layout.__scale=100,"block"==t.style.display&&"0px auto"==t.style.margin&&"right"==t.style.float?this.activeValue.settings.layout.__position="hax-align-right":"block"==t.style.display&&"0px auto"==t.style.margin?this.activeValue.settings.layout.__position="hax-align-center":this.activeValue.settings.layout.__position="hax-align-left",this.activeHaxElement.properties.__scale=this.activeValue.settings.layout.__scale,this.activeHaxElement.properties.__position=this.activeValue.settings.layout.__position;let a=!!i.type&&"grid"===i.type;i.settings.configure.forEach(((t,e)=>{i.settings.configure[e].attribute&&(i.settings.configure[e].property=i.settings.configure[e].attribute),i.settings.configure[e].slot&&(i.settings.configure[e].property=i.settings.configure[e].slot)})),i.settings.advanced.forEach(((t,e)=>{i.settings.advanced[e].attribute&&(i.settings.advanced[e].property=i.settings.advanced[e].attribute),i.settings.advanced[e].slot&&(i.settings.advanced[e].property=i.settings.advanced[e].slot)})),i.settings.layout=[],i.canPosition&&i.settings.layout.push({property:"__position",title:this.t.alignment,inputMethod:"select",value:this.activeValue.settings.layout.__position,options:{"hax-align-left":this.t.left,"hax-align-center":this.t.center,"hax-align-right":this.t.right}}),i.canScale&&i.settings.layout.push({property:"__scale",title:this.t.width,inputMethod:"slider",value:this.activeValue.settings.layout.__scale,min:i.canScale.min?i.canScale.min:12.5,max:i.canScale.max?i.canScale.max:100,step:i.canScale.step?i.canScale.step:12.5}),this.activeSchema=[{property:"settings",inputMethod:"tabs",properties:[]}];let n=(t,e,i=[])=>{let o=a?i.filter((t=>!(""===t.slot||t.slot||t.attribute&&"slot"==t.attribute))):i;this.activeSchema[0].properties.push({property:t,title:e,properties:o.length>0?o:void 0,disabled:o.length<1})};ua.testHook(t,"setupActiveElementForm")&&await ua.runHook(t,"setupActiveElementForm",[i]),n("configure",this.t.configure,i.settings.configure),n("layout",this.t.layout,i.settings.layout),n("advanced",this.t.advanced,i.settings.advanced),this.__activePropSchema=i,this.shadowRoot.querySelector("#settingsform").fields=this.activeSchema,this.shadowRoot.querySelector("#settingsform").value=this.activeValue}}_toArray(t){return null==t?[]:Object.keys(t).map((function(e){return t[e]}))}updateMap(){this.shadowRoot&&this.shadowRoot.querySelector("hax-map")&&"content-map"==this.trayDetail&&this.shadowRoot.querySelector("hax-map").updateHAXMap()}_updateTrayDetail(t){"content-add"==t?(this.trayLabel=this.t.blocks,this._refreshAddData()):"media-add"==t?this.trayLabel=this.t.media:"content-map"==t?(this.trayLabel=this.t.structure,this.shadowRoot.querySelector("hax-map").updateHAXMap()):"advanced-settings"==t?(this.trayLabel=this.t.settings,this.shadowRoot.querySelector("hax-preferences-dialog").reloadPreferencesForm()):"content-edit"!=t||this.activeTagName&&""!=this.activeTagName&&this.activeNode&&this.activeNode.tagName?t&&""!=t?this.trayLabel=void 0:this.trayDetail="content-edit":this.trayDetail="content-add",this.requestUpdate()}__valueChangedEvent(t){if(this.editMode&&t.detail.value&&t.detail.value.settings){let i=t.detail.value.settings,o="grid"=={...ua.elementList[this.activeNode.tagName.toLowerCase()]}.type,a={advanced:"advanced",configure:"configure",layout:"layout"};var e;clearTimeout(this.__contextPropDebounce),this.__contextPropDebounce=setTimeout((()=>{for(let r in a)for(let a in i[r])if(e=!1,null==i[r][a]||i[r][a].readOnly)"data-hax-lock"===a&&(this.dispatchEvent(new CustomEvent("hax-toggle-active-node-lock",{bubbles:!0,composed:!0,cancelable:!0,detail:{lock:!1,node:this.activeNode}})),this.__lockAllSettings(!1)),this.activeNode.removeAttribute(C(a));else{if("prefix"===a&&""!=i[r][a])this.activeNode.setAttribute("prefix",i[r][a]),e=!0;else if("data-hax-lock"===a)this.dispatchEvent(new CustomEvent("hax-toggle-active-node-lock",{bubbles:!0,composed:!0,cancelable:!0,detail:{lock:i[r][a],node:this.activeNode}})),this.__lockAllSettings(i[r][a]);else if("innerText"===a)this.activeNode.innerText=i[r][a],e=!0;else if("layout"===r&&"__position"===a)e=!0,this._initial||(clearTimeout(this.__contextValueDebounce),this.__contextValueDebounce=setTimeout((()=>{this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:i[r][a],value:i[r][a]}}))}),50));else if("layout"===r&&"__scale"===a)e=!0,this._initial||(clearTimeout(this.__contextSizeDebounce),this.__contextSizeDebounce=setTimeout((()=>{this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:"hax-size-change",value:i[r][a]}}))}),50));else if(this.activeNode.hasOwnProperty(a)||this.activeNode.properties&&this.activeNode.properties.hasOwnProperty(a)||null!=i[r][a]&&i[r][a].constructor===Array||null!=i[r][a]&&i[r][a].constructor===Object)try{i[r][a].constructor===Array?this.activeNode[a]=[...i[r][a]]:i[r][a].constructor===Object?this.activeNode[a]={...i[r][a]}:this.activeNode[a]=i[r][a],e=!0}catch(t){console.warn(t),e=!1}else if(!o)for(var t in this.__activePropSchema.settings[r])if(this.__activePropSchema.settings[r][t].slot==a){let o="span";if(this.__activePropSchema.settings[r][t].slotWrapper)o=this.__activePropSchema.settings[r][t].slotWrapper;else if(this.__activePropSchema.settings[r][t].allowedSlotWrappers&&this.__activePropSchema.settings[r][t].allowedSlotWrappers[0])o=this.__activePropSchema.settings[r][t].allowedSlotWrappers[0];else if("code-editor"===this.activeNode.tagName.toLowerCase())o="template";else{let e=["span","div","p"],i=this.__activePropSchema.settings[r][t].excludedSlotWrappers||[];i&&(e=e.filter((t=>!i.includes(t))))}var n=document.createElement(o);if(this.__activePropSchema.settings[r][t].slotAttributes)for(var s in this.__activePropSchema.settings[r][t].slotAttributes)n.setAttribute(s,this.__activePropSchema.settings[r][t].slotAttributes[s]);""!==this.__activePropSchema.settings[r][t].slot&&(n.slot=this.__activePropSchema.settings[r][t].slot),n.innerHTML=i[r][a];const l=n.cloneNode(!0);e=!0,ua.isTextElement(this.activeNode)?this.activeNode.innerHTML=n.innerHTML:(f(this.activeNode,this.__activePropSchema.settings[r][t].slot),this.activeNode.appendChild(l))}if(!e)try{!0===i[r][a]?this.activeNode.setAttribute(C(a),C(a)):!1===i[r][a]||""===i[r][a]?this.activeNode.removeAttribute(C(a)):this.activeNode.setAttribute(C(a),i[r][a])}catch(t){console.warn(t),console.warn(a,i[r][a])}}}),100)}setTimeout((()=>{this._initial&&(this._initial=!1)}),51)}__lockAllSettings(t){this.shadowRoot.querySelectorAll("simple-fields-tab *[is-simple-field-type]:not([name='settings.advanced.data-hax-lock'])").forEach((e=>{e.disabled=t}))}_editModeChanged(t){!this.hidePanelOps&&this.shadowRoot&&this.shadowRoot.querySelector("#button")&&(this.shadowRoot.querySelector("#button").icon=t?"save":"create")}_clickEditButton(t){ua.editMode=!0,window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}_clickSaveButton(t){ua.editMode=!1,this.dispatchEvent(new CustomEvent("hax-save",{bubbles:!0,cancelable:!0,composed:!0,detail:t.detail})),window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}window.customElements.define(sc.tag,sc);class rc extends(ia(o)){static get styles(){return[a`:host{display:none}`]}render(){return n`<slot></slot>`}static get tag(){return"hax-autoloader"}static get properties(){return{...super.properties,processedList:{type:Object}}}constructor(){super(),this.processedList={}}firstUpdated(t){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxAutoloader",object:this}}))}connectedCallback(){super.connectedCallback(),this.observer=new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{this.processNewElements(t)}))}))})),this.observer.observe(this,{childList:!0})}disconnectedCallback(){this.observer.disconnect(),super.disconnectedCallback()}processNewElements(t){let e=this.childNodes;for(var i=0;i<e.length;i++){if(void 0!==e[i].tagName&&void 0===this.processedList[e[i].tagName])try{let a=e[i].tagName.toLowerCase();if("function"==typeof e[i].getHaxProperties){const t=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:a,properties:e[i].getHaxProperties(),polymer:!0}});context.dispatchEvent(t)}else if("function"==typeof e[i].HAXWiring){const t=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,composed:!0,detail:{tag:a,properties:e[i].HAXWiring.getHaxProperties(),polymer:!1}});context.dispatchEvent(t)}else if(window.customElements.get(a)){let e=window.customElements.get(a);if(e)if("function"==typeof e.getHaxProperties)this.setHaxProperties(e.getHaxProperties(),a);else if("function"==typeof e.HAXWiring)this.setHaxProperties(e.HAXWiring.getHaxProperties(),a);else if(e.haxProperties)this.setHaxProperties(e.haxProperties,a);else{console.warn(`${a} didn't have hax wiring so HAX guessed as best it can. See https://haxtheweb.org/documentation-1/hax-development/hax-schema for documentation on adding custom wiring for better UX.`);try{let t,e=new ea,n=e.prototypeHaxProperties();if(n.gizmo.title=a,n.gizmo.handles=[],n.settings.configure=[],n.settings.advanced=[],n=e.standardAdvancedProps(n),n.saveOptions={},n.demoSchema=[],customElements.get(a)&&(t=customElements.get(a).properties),t){for(var o in t)if(t[o].type&&t[o].type.name)switch(t[o].type.name){case"String":n.settings.configure.push({property:o,title:o,description:"",inputMethod:"textfield"});break;case"Number":n.settings.configure.push({property:o,title:o,description:"",inputMethod:"number"});break;case"Boolean":n.settings.configure.push({property:o,title:o,description:"",inputMethod:"boolean"})}}else{let t=document.createElement(a).getAttributeNames();for(i=0;i<t.length;i++)n.settings.configure.push({attribute:t[i],title:t[i],description:"",inputMethod:"textfield"})}e.readyToFireHAXSchema(a,n,this)}catch(t){console.warn("HAX failed to create wiring that worked")}}else console.error(`${a} was not a valid custom element yet a load was attempted`)}else{let t=N(ua,`__appStoreData.autoloader.${a}.import`,N(ua,`__appStoreData.autoloader.${a}`,`@lrnwebcomponents/${a}/${a}.js`));import(`${new URL("./../../../",import.meta.url).href}${t}`).then((t=>{let e=window.customElements.get(a);e?"function"==typeof e.getHaxProperties?this.setHaxProperties(e.getHaxProperties(),a):"function"==typeof e.HAXWiring?this.setHaxProperties(e.HAXWiring.getHaxProperties(),a):e.haxProperties?this.setHaxProperties(e.haxProperties,a):N(ua,`__appStoreData.autoloader.${a}.haxProperties`,!1)?this.setHaxProperties(N(ua,`__appStoreData.autoloader.${a}.haxProperties`,!1),a):console.warn(`${a} didn't have hax wiring in the end`):console.error(`${a} was not a valid custom element yet a load was attempted`)})).catch((t=>{console.warn(t)}))}this.processedList[a]=a}catch(t){}e[i].remove()}}}window.customElements.define(rc.tag,rc);
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class lc extends o{static get styles(){return[a`:host{display:none}`]}static get tag(){return"simple-modal-template"}constructor(){super(),this.title="",this.modal=window.SimpleModal.requestAvailability()}static get properties(){return{modal:{type:Object},title:{type:String},mode:{type:String}}}render(){return n` <slot name="header"></slot> <slot name="content"></slot> <slot name="buttons"></slot> `}associateEvents(t,e="click",i=!0,o=!0){return t.addEventListener(e,(e=>{this.openModal(t,i,o)})),this.modal}openModal(t,e=!0,i=!0){let o=getComputedStyle(this),a={};F.forEach((t=>{a[t]=o.getPropertyValue(t),"--simple-modal-z-index"==t&&(a[t]=Number(a[t]))}));const n=new CustomEvent("simple-modal-show",{bubbles:e,cancelable:i,composed:!0,detail:{id:this.getAttribute("modal-id"),elements:{header:this._getSlot("header"),content:this._getSlot("content"),buttons:this._getSlot("buttons"),custom:this._getCustom()},resize:this.resize,invokedBy:t,modalClass:this.getAttribute("class"),styles:a,clone:!1,mode:null!==this.mode&&this.mode,title:null!==this.title&&this.title}});window.dispatchEvent(n)}_getCustom(){let t=this.querySelectorAll('[slot="custom"]');return 1==t.length?t[0].cloneNode(!0):this._getSlot("custom")}_getSlot(t){let e=this.querySelectorAll('[slot="'+t+'"]');e&&e[0]&&"SLOT"==e[0].tagName&&(e=e[0].assignedNodes({flatten:!0}));let i=document.createElement("div");return e.forEach((t=>{i.appendChild(t.cloneNode(!0))})),null!==e&&i.cloneNode(!0)}}window.customElements.define(lc.tag,lc);class dc extends o{static get styles(){return[...an,a`simple-button-grid{overflow-y:auto;margin:var(--hax-ui-spacing-sm);--simple-button-grid-cols:100px}#filters{min-height:24px}simple-icon-button-lite{float:right;margin-left:-24px}simple-fields-field::part(fieldset-legend){line-height:24px}simple-fields-field::part(fieldset-options){display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}simple-fields-field::part(option){display:flex;flex-wrap:no-wrap;align-items:center;justify-content:space-between;margin:0 var(--simple-fields-margin-small,8px);flex-direction:row-reverse}simple-fields-field::part(option-inner){flex:0 0 auto;margin:0 calc(var(--simple-fields-margin-small,8px) * .5) 0 0}simple-fields-field::part(option-label){flex:1 1 auto;margin:0;font-size:var(--hax-ui-font-size-sm,13px)}:host([filter-on]) simple-button-grid{margin-bottom:var(--simple-fields-margin-small,8px)}:host([filter-on]) #hax-gizmo-filters{margin-bottom:0}:host([filter-on]) ::part(fieldset-options){padding-bottom:var(--simple-fields-margin-small,8px)}`]}constructor(){super(),this._elements=[],this.selectionList=[],this.pickerType="gizmo"}render(){return n` ${this.keywords?n` <div id="filters"> <simple-icon-button-lite icon="editable-table:filter${this.filterOn?"-off":""}" label="Toggle Filters" tooltip-position="right" @click="${t=>this.filterOn=!this.filterOn}"> </simple-icon-button-lite> <simple-fields-field ?hidden="${!this.filterOn}" id="hax-gizmo-filters" label="Filters" type="checkbox" .options="${this.keywords}" @value-changed="${this._handleFilters}"> </simple-fields-field> </div>`:""} <simple-button-grid cols="100px"> ${this.selectionList.map(((t,e)=>this._isFiltered(t.keywords)?n` <hax-tray-button show-text-label id="picker-item-${e}" @click="${this._selected}" data-selected="${e}" ?disabled="${ua.activeGizmo&&ua.activeGizmo.tag==t.tag}" label="${t.title}" icon="${t.icon}" icon-position="top"></hax-tray-button> `:""))} </simple-button-grid> `}static get tag(){return"hax-picker"}static get properties(){return{_elements:{type:Array},keywords:{type:Object},selectionList:{type:Array},pickerType:{type:String,attribute:"picker-type"},filters:{type:Array},filterOn:{type:Boolean,attribute:"filter-on",reflect:!0}}}buildOptions(t,e="element",i="Select an option",o="gizmo"){this.pickerType=o;var a=[],n=e=>{"gizmo"===o?t[e].gizmo.keywords.forEach((t=>{(t=(t||"").toLowerCase()).replace(/[\s\W]*/,"").length>0&&(this.keywords[t]=t)})):"app"===o&&t[e].details.tag.forEach((t=>{(t=(t||"").toLowerCase()).replace(/[\s\W]*/,"").length>0&&(this.keywords[t]=t)}))};switch(this.keywords={},o){case"gizmo":for(var s in t)t[s].__type=e,a.push({icon:t[s].gizmo.icon,title:t[s].gizmo.title,color:t[s].gizmo.color,tag:t[s].gizmo.tag,keywords:t[s].gizmo.keywords}),n(s);break;case"app":for(var s in t)a.push({icon:t[s].details.icon,title:t[s].details.title,color:t[s].details.color,tag:t[s].details.tags||[],keywords:t[s].details.tags||[]}),n(s);break;default:a=t}this._elements=t,this.selectionList=[...a],setTimeout((()=>{this.shadowRoot.querySelector("#picker-item-0").focus()}),50)}_handleFilters(t){let e=this.shadowRoot&&this.shadowRoot.querySelector("#hax-gizmo-filters")?this.shadowRoot.querySelector("#hax-gizmo-filters"):void 0;e&&(this.filters=e.value)}_isFiltered(t){let e=0,i=!this.filterOn||!this.filters||this.filters.length<1;for(;!i&&e<this.filters.length;)t.includes(this.filters[e])&&(i=!0),e++;return i}_selected(t){let e=t.target.getAttribute("data-selected");t.preventDefault(),t.stopPropagation(),void 0!==this._elements[e]&&("gizmo"==this.pickerType?(this._elements[e].replace=!0,this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[e]}))):this.dispatchEvent(new CustomEvent("hax-app-picker-selection",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[e]}))),this.close()}close(){window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}window.customElements.define(dc.tag,dc);class cc extends o{static get styles(){return[...an,a`:host{display:none}`]}constructor(){super(),this.title="Select an option"}connectedCallback(){super.connectedCallback(),window.addEventListener("simple-modal-show",this.modalToggle.bind(this))}disconnectedCallback(){window.removeEventListener("simple-modal-show",this.modalToggle.bind(this)),super.disconnectedCallback()}modalToggle(t){"hax-picker"==t.detail.id&&t.detail.elements.content.children[0].buildOptions(this.elements,this.type,this.title,this.pickerType,this.target)}static get properties(){return{title:{type:String}}}presentOptions(t,e="element",i="Select an option",o="gizmo",a=window){this.elements=t,this.type=e,this.title=i,this.pickerType=o,this.target=a,setTimeout((()=>{this.shadowRoot.querySelector('[modal-id="hax-picker"]').openModal(a)}),0)}render(){return n` <simple-modal-template .title="${this.title}" modal-id="hax-picker" mode="hax-ui"> <hax-picker slot="content"></hax-picker> </simple-modal-template> `}static get tag(){return"hax-app-picker"}firstUpdated(){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxAppPicker",object:this}}))}}window.customElements.define(cc.tag,cc);class hc extends($(o)){static get styles(){return[...an,a`:host{display:none;--simple-modal-resize:none;--simple-modal-width:200px;--simple-modal-height:auto;margin:0;padding:0}`]}render(){return n` <simple-modal-template modal-id="hax-cancel" mode="hax-ui" id="dialog" .title="${this.t.cancelTitle}"> <div slot="content">${this.t.cancelWithoutSaving}</div> <hax-toolbar id="hax-cancel-buttons" always-expanded slot="buttons"> <hax-tray-button id="hax-cancel-no" label="${this.t.cancelNo}" dialog-dismiss show-text-label> </hax-tray-button> <hax-tray-button id="hax-cancel-yes" dialog-confirm @click="${t=>console.log(t)}" label="${this.t.cancelYes}" show-text-label> </hax-tray-button> </hax-toolbar> </simple-modal-template> `}static get tag(){return"hax-cancel-dialog"}firstUpdated(){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxCancel",object:this}}))}constructor(){super(),this.t={cancelTitle:"Confirm Cancel",cancelWithoutSaving:"Any changes since your last save will be lost. Cancel anyway?",cancelYes:"Yes",cancelNo:"No"},this.registerLocalization({context:this,namespace:"hax"})}}window.customElements.define(hc.tag,hc);class uc extends HTMLElement{get html(){return`\n    <style>\n    ${["red","blue","green","orange","purple"].map((t=>`\n        [data-style-decoration~="highlight"] {\n          color: var(--haxcms-style-element-color, white);\n          background-color: var(--haxcms-style-element-background-color, black);\n          font-weight: 400;\n          word-wrap: break-word;\n          padding: 4px 8px;\n          text-transform: uppercase;\n          text-decoration: none;\n        }\n        [data-style-decoration~="${t}"] {\n          --haxcms-style-element-background-color: var(--simple-colors-default-theme-${t}-7, ${t});\n        }\n        `)).join("\n")}\n\n    :host,h-a-x {\n      display: block;\n      font-size: var(--haxcms-base-styles-body-font-size);\n      font-family: var(--haxcms-base-styles-body-font-family);\n      line-height: var(--haxcms-base-styles-body-line-height);\n      letter-spacing: var(--haxcms-base-styles-body-letter-spacing);\n    }\n\n    :host([hidden]),h-a-x([hidden]) {\n      display: none;\n    }\n\n    :host hax-body, h-a-x hax-body {\n      font-size: var(--haxcms-base-styles-body-font-size);\n      font-family: var(--haxcms-base-styles-body-font-family);\n      line-height: var(--haxcms-base-styles-body-line-height);\n      letter-spacing: var(--haxcms-base-styles-body-letter-spacing);\n    }\n\n    :host img, h-a-x img {\n      max-width: 100%;\n      max-width: -moz-available;\n      max-width: -webkit-fill-available;\n      max-width: fill-available;\n    }\n\n    hax-body h1 {\n      font-size: var(--hax-base-styles-h1-font-size);\n      line-height: var(--hax-base-styles-h1-line-height);\n    }\n\n    hax-body h2 {\n      font-size: var(--hax-base-styles-h2-font-size);\n    }\n\n    hax-body h3 {\n      font-size: var(--hax-base-styles-h3-font-size);\n    }\n\n    hax-body h4 {\n      font-size: var(--hax-base-styles-h4-font-size);\n    }\n\n    hax-body h5 {\n      font-size: var(--hax-base-styles-h5-font-size);  \n    }\n\n    hax-body h6 {\n      font-size: var(--hax-base-styles-h6-font-size);\n    }\n\n    hax-body p {\n      min-height: var(--hax-base-styles-p-min-height);\n      font-size: var(--hax-base-styles-p-font-size);\n      line-height: var(--hax-base-styles-p-line-height);\n      letter-spacing: var(--hax-base-styles-p-letter-spacing);\n    }\n    hax-body p code {\n      padding: 0.2em 0.4em;\n      margin: 0;\n      font-size: 12px;\n      background-color: var(--hax-base-styles-code-background-color,rgba(175, 184, 193, 0.2));\n      border-radius: 6px;\n      font-family: var(--hax-base-styles-code-font-family, ui-monospace,monospace);\n    }\n    hax-body pre {\n      padding: 16px;\n      overflow: auto;\n      line-height: 1.45;\n      background-color: var(--hax-base-styles-pre-background-color,rgba(175, 184, 193, 0.2));\n      border-radius: 6px;\n      margin-bottom: 0;\n      word-break: normal;\n      word-wrap: normal;\n      margin-top: 0;\n      font-family: var(--hax-base-styles-pre-font-family, ui-monospace,monospace);\n      font-size: 12px;\n    }\n\n    hax-body a,\n    hax-body a:-webkit-any-link,\n    hax-body a,\n    hax-body a:-webkit-any-link    {\n      font-size: var(--hax-base-styles-a-font-size,var(--hax-base-styles-p-font-size));\n    }\n\n    hax-body ol,\n    hax-body ul\n    hax-body ol li,\n    hax-body ul li,\n    hax-body li {\n      line-height: var(--hax-base-styles-list-line-height,var(--hax-base-styles-p-line-height));\n      font-size: var(--hax-base-styles-list-font-size,var(--hax-base-styles-p-font-size));\n    }\n\n    hax-body  ul,\n    hax-body  ul ol,\n    hax-body  ol ul,\n    hax-body  ol ol {\n      padding-bottom: unset;\n    }\n    hax-body table {\n      min-width: 300px;\n      border-collapse: collapse;\n      margin: 0 0 15px;\n      display: table!important;\n    }\n    hax-body table caption,\n    hax-body table th,\n    hax-body table td {\n      border: 1px solid #888;\n      padding: 5px 10px;\n      text-align: left;\n      vertical-align: middle;\n    }\n    figure {\n      margin-left: 0;\n      margin-right: 0;\n    }\n    figure > *:first-child, \n    figcaption > *:first-child{\n      margin-top: 0;\n    }\n    figure > *:last-child.\n    figcaption > *:last-child {\n      margin-bottom: 0;\n    }\n    </style>\n    <hax-body>\n        <slot></slot>\n    </hax-body>`}static get tag(){return"h-a-x"}constructor(t=!1){super(),this.__rendered=!1,this.tag=uc.tag,this.template=document.createElement("template"),this.attachShadow({mode:"open"}),t||this.render(),window.addEventListener("hax-store-ready",this.storeReady.bind(this),{once:!0,passive:!0}),window.addEventListener("hax-store-app-store-loaded",this.appStoreReady.bind(this),{once:!0,passive:!0}),window.addEventListener("hax-cancel",this.cancelEvent.bind(this)),window.addEventListener("hax-save",this.saveEvent.bind(this))}cancelEvent(t){this.importSlotToHaxBody()}async saveEvent(t){const e=await ua.activeHaxBody.haxToContent();this.innerHTML=e,this.dispatchEvent(new CustomEvent("hax-save-body-value",{composed:!0,bubbles:!0,cancelable:!0,detail:{value:e}}))}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.__HAXApplied||window.__HAXApplied||(window.__HAXApplied=this.__HAXApplied=this.applyHAX())}storeReady(t){t.detail&&(setTimeout((()=>{try{let t={...JSON.parse(this.getAttribute("app-store"))};"object"==typeof t&&(ua.appStore=t)}catch(t){console.warn(t)}"hide-panel-ops"===this.hidePanelOps&&(this.hidePanelOps=!0),ua.haxTray.hidePanelOps=this.hidePanelOps,ua.haxTray.offsetMargin=this.offsetMargin,ua.elementAlign=this.elementAlign}),0),window.removeEventListener("hax-store-ready",this.storeReady.bind(this),{once:!0,passive:!0}))}importSlotToHaxBody(){var t=[];t=this.shadowRoot.querySelector("slot")?this.shadowRoot.querySelector("slot").assignedNodes():this.children;let e="";for(let i in t)void 0!==t[i].outerHTML&&(e+=t[i].outerHTML);ua.activeHaxBody.importContent(e)}appStoreReady(t){t.detail&&(this.importSlotToHaxBody(),window.removeEventListener("hax-store-app-store-loaded",this.appStoreReady.bind(this),{once:!0,passive:!0}))}render(){this.__rendered=!0,this.shadowRoot.innerHTML=null,this.template.innerHTML=this.html,this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}applyHAX(){let t=window.HaxStore.requestAvailability(),e=document.createElement("hax-tray");return e.hidePanelOps=this.hidePanelOps,this.elementAlign=
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
function(t){try{return localStorage.getItem(t)}catch(t){return!1}}("hax-tray-elementAlign"),this.elementAlign&&null!=this.elementAlign||(this.elementAlign="right"),t.elementAlign=this.elementAlign,document.body.appendChild(e),document.body.appendChild(document.createElement("hax-app-picker")),document.body.appendChild(document.createElement("hax-export-dialog")),document.body.appendChild(document.createElement("hax-autoloader")),document.body.appendChild(document.createElement("hax-cancel-dialog")),!0}disconnectedCallback(){window.removeEventListener("hax-store-ready",this.storeReady.bind(this),{once:!0,passive:!0}),window.removeEventListener("hax-store-app-store-loaded",this.appStoreReady.bind(this),{once:!0,passive:!0}),window.removeEventListener("hax-cancel",this.cancelEvent.bind(this)),window.removeEventListener("hax-save",this.saveEvent.bind(this)),super.disconnectedCallback&&super.disconnectedCallback()}static get observedAttributes(){return["element-align","offset-margin","app-store","hide-panel-ops"]}get elementAlign(){return this.getAttribute("element-align")}set elementAlign(t){this.__rendered&&(this.setAttribute("element-align",t),ua.elementAlign=t)}get offsetMargin(){return this.getAttribute("offset-margin")}set offsetMargin(t){this.setAttribute("offset-margin",t),this.__rendered&&(ua.haxTray.offsetMargin=t)}get hidePanelOps(){return this.getAttribute("hide-panel-ops")}set hidePanelOps(t){t&&(this.setAttribute("hide-panel-ops","hide-panel-ops"),this.__rendered&&(ua.haxTray.hidePanelOps=t))}get appStore(){return this.getAttribute("app-store")}set appStore(t){this.setAttribute("app-store",t),this.__rendered&&(ua.appStore={...JSON.parse(this.getAttribute("app-store"))})}attributeChangedCallback(t,e,i){}}window.customElements.define("h-a-x",uc);var pc=Object.freeze({__proto__:null,HAX:uc});export{ua as H,$a as R,_a as a,wa as b,xa as c,Di as d,Aa as e,Fa as f,sn as g,Zo as h,ta as i,cn as j,pc as k,qd as s,Qi as t};
