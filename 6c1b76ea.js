import{S as t,r as i,$ as o,u as a,x as n,z as r,C as s,E as l,F as d,G as c,H as h,I as u,s as p,q as m,J as g,p as b,K as f,L as v,M as y,g as _,o as x,N as w,O as A,P as E,Q as S,T as C,U as N,V as T,w as k,X as O,v as P}from"./ad13e776.js";import{S as L,a as B,b as M,c as H,d as D}from"./191932e4.js";import{I18NMixin as R,I18NManagerStore as z}from"./5c68dd7f.js";import"./065fd586.js";import"./44fa54c7.js";import"./4630528c.js";import"./cb5f67cd.js";import{SimpleModalCssVars as I}from"./4065c063.js";var $="production"!==process.env.NODE_ENV?{0:"Invalid value for configuration 'enforceActions', expected 'never', 'always' or 'observed'",1:function(e,t){return"Cannot apply '"+e+"' to '"+t.toString()+"': Field not found."},5:"'keys()' can only be used on observable objects, arrays, sets and maps",6:"'values()' can only be used on observable objects, arrays, sets and maps",7:"'entries()' can only be used on observable objects, arrays and maps",8:"'set()' can only be used on observable objects, arrays and maps",9:"'remove()' can only be used on observable objects, arrays and maps",10:"'has()' can only be used on observable objects, arrays and maps",11:"'get()' can only be used on observable objects, arrays and maps",12:"Invalid annotation",13:"Dynamic observable objects cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",14:"Intercept handlers should return nothing or a change object",15:"Observable arrays cannot be frozen. If you're passing observables to 3rd party component/function that calls Object.freeze, pass copy instead: toJS(observable)",16:"Modification exception: the internal structure of an observable array was changed.",17:function(e,t){return"[mobx.array] Index out of bounds, "+e+" is larger than "+t},18:"mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js",19:function(e){return"Cannot initialize from classes that inherit from Map: "+e.constructor.name},20:function(e){return"Cannot initialize map from "+e},21:function(e){return"Cannot convert to map from '"+e+"'"},22:"mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js",23:"It is not possible to get index atoms from arrays",24:function(e){return"Cannot obtain administration from "+e},25:function(e,t){return"the entry '"+e+"' does not exist in the observable map '"+t+"'"},26:"please specify a property",27:function(e,t){return"no observable property '"+e.toString()+"' found on the observable object '"+t+"'"},28:function(e){return"Cannot obtain atom from "+e},29:"Expecting some object",30:"invalid action stack. did you forget to finish an action?",31:"missing option for computed: get",32:function(e,t){return"Cycle detected in computation "+e+": "+t},33:function(e){return"The setter of computed value '"+e+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"},34:function(e){return"[ComputedValue '"+e+"'] It is not possible to assign a new value to a computed value."},35:"There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`",36:"isolateGlobalState should be called before MobX is running any reactions",37:function(e){return"[mobx] `observableArray."+e+"()` mutates the array in-place, which is not allowed inside a derivation. Use `array.slice()."+e+"()` instead"},38:"'ownKeys()' can only be used on observable objects",39:"'defineProperty()' can only be used on observable objects"}:{};function j(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];if("production"!==process.env.NODE_ENV){var a="string"==typeof e?e:$[e];throw"function"==typeof a&&(a=a.apply(null,i)),new Error("[MobX] "+a)}throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(i.length?" "+i.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var F={};function V(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:F}var U=Object.assign,q=Object.getOwnPropertyDescriptor,G=Object.defineProperty,X=Object.prototype,W=[];Object.freeze(W);var Y={};Object.freeze(Y);var J="undefined"!=typeof Proxy,K=Object.toString();function Q(){J||j("production"!==process.env.NODE_ENV?"`Proxy` objects are not available in the current environment. Please configure MobX to enable a fallback implementation.`":"Proxy not available")}function Z(e){"production"!==process.env.NODE_ENV&&Wt.verifyProxies&&j("MobX is currently configured to be able to run in ES5 mode, but in ES5 MobX won't be able to "+e)}function ee(){return++Wt.mobxGuid}function te(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var ie=function(){};function oe(e){return"function"==typeof e}function ae(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function ne(e){return null!==e&&"object"==typeof e}function re(e){if(!ne(e))return!1;var t=Object.getPrototypeOf(e);if(null==t)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i.toString()===K}function se(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function le(e,t,i){G(e,t,{enumerable:!1,writable:!0,configurable:!0,value:i})}function de(e,t,i){G(e,t,{enumerable:!1,writable:!1,configurable:!0,value:i})}function ce(e,t){var i="isMobX"+e;return t.prototype[i]=!0,function(e){return ne(e)&&!0===e[i]}}function he(e){return e instanceof Map}function ue(e){return e instanceof Set}var pe=void 0!==Object.getOwnPropertySymbols;var me="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:pe?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function ge(e){return"string"==typeof e?e:"symbol"==typeof e?e.toString():new String(e).toString()}function be(e){return null===e?null:"object"==typeof e?""+e:e}function fe(e,t){return X.hasOwnProperty.call(e,t)}var ve=Object.getOwnPropertyDescriptors||function(e){var t={};return me(e).forEach((function(i){t[i]=q(e,i)})),t};function ye(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _e(e,t,i){return t&&ye(e.prototype,t),i&&ye(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function xe(){return xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o])}return e},xe.apply(this,arguments)}function we(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ae(e,t)}function Ae(e,t){return Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ae(e,t)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}function Ce(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return Se(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Se(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ne=Symbol("mobx-stored-annotations");function Te(e){return Object.assign((function(t,i){ke(t,i,e)}),e)}function ke(e,t,i){(fe(e,Ne)||le(e,Ne,xe({},e[Ne])),"production"!==process.env.NODE_ENV&&Re(i)&&!fe(e[Ne],t))&&j("'"+(e.constructor.name+".prototype."+t.toString())+"' is decorated with 'override', but no such decorated member was found on prototype.");!function(e,t,i){if("production"!==process.env.NODE_ENV&&!Re(t)&&fe(e[Ne],i)){var o=e.constructor.name+".prototype."+i.toString(),a=e[Ne][i].annotationType_;j("Cannot apply '@"+t.annotationType_+"' to '"+o+"':\nThe field is already decorated with '@"+a+"'.\nRe-decorating fields is not allowed.\nUse '@override' decorator for methods overriden by subclass.")}}(e,i,t),Re(i)||(e[Ne][t]=i)}var Oe=Symbol("mobx administration"),Pe=function(){function e(e){void 0===e&&(e="production"!==process.env.NODE_ENV?"Atom@"+ee():"Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Nt.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return ei(this)},t.reportChanged=function(){Qt(),ti(this),Zt()},t.toString=function(){return this.name_},e}(),Le=ce("Atom",Pe);function Be(e,t,i){void 0===t&&(t=ie),void 0===i&&(i=ie);var o,a=new Pe(e);return t!==ie&&Ci("onBO",a,t,o),i!==ie&&Si(a,i),a}var Me={identity:function(e,t){return e===t},structural:function(e,t){return Mo(e,t)},default:function(e,t){return Object.is?Object.is(e,t):e===t?0!==e||1/e==1/t:e!=e&&t!=t},shallow:function(e,t){return Mo(e,t,1)}};function He(e,t,i){return Di(e)?e:Array.isArray(e)?mt.array(e,{name:i}):re(e)?mt.object(e,void 0,{name:i}):he(e)?mt.map(e,{name:i}):ue(e)?mt.set(e,{name:i}):"function"!=typeof e||wi(e)||Mi(e)?e:se(e)?Li(e):xi(i,e)}function De(e){return e}function Re(e){return"override"===e.annotationType_}function ze(e,t){return{annotationType_:e,options_:t,make_:Ie,extend_:$e}}function Ie(e,t,i,o){var a;if(null!=(a=this.options_)&&a.bound)return null===this.extend_(e,t,i,!1)?0:1;if(o===e.target_)return null===this.extend_(e,t,i,!1)?0:2;if(wi(i.value))return 1;var n=je(e,this,t,i,!1);return G(o,t,n),2}function $e(e,t,i,o){var a=je(e,this,t,i);return e.defineProperty_(t,a,o)}function je(e,t,i,o,a){var n,r,s,l,d,c,h;void 0===a&&(a=Wt.safeDescriptors),function(e,t,i,o){var a=t.annotationType_,n=o.value;"production"===process.env.NODE_ENV||oe(n)||j("Cannot apply '"+a+"' to '"+e.name_+"."+i.toString()+"':\n'"+a+"' can only be used on properties with a function value.")}(e,t,i,o);var u,p=o.value;null!=(n=t.options_)&&n.bound&&(p=p.bind(null!=(u=e.proxy_)?u:e.target_));return{value:At(null!=(r=null==(s=t.options_)?void 0:s.name)?r:i.toString(),p,null!=(l=null==(d=t.options_)?void 0:d.autoAction)&&l,null!=(c=t.options_)&&c.bound?null!=(h=e.proxy_)?h:e.target_:void 0),configurable:!a||e.isPlainObject_,enumerable:!1,writable:!a}}function Fe(e,t){return{annotationType_:e,options_:t,make_:Ve,extend_:Ue}}function Ve(e,t,i,o){var a;if(o===e.target_)return null===this.extend_(e,t,i,!1)?0:2;if(null!=(a=this.options_)&&a.bound&&(!fe(e.target_,t)||!Mi(e.target_[t]))&&null===this.extend_(e,t,i,!1))return 0;if(Mi(i.value))return 1;var n=qe(e,this,t,i,!1,!1);return G(o,t,n),2}function Ue(e,t,i,o){var a,n=qe(e,this,t,i,null==(a=this.options_)?void 0:a.bound);return e.defineProperty_(t,n,o)}function qe(e,t,i,o,a,n){void 0===n&&(n=Wt.safeDescriptors),function(e,t,i,o){var a=t.annotationType_,n=o.value;"production"===process.env.NODE_ENV||oe(n)||j("Cannot apply '"+a+"' to '"+e.name_+"."+i.toString()+"':\n'"+a+"' can only be used on properties with a generator function value.")}(e,t,i,o);var r,s=o.value;(Mi(s)||(s=Li(s)),a)&&((s=s.bind(null!=(r=e.proxy_)?r:e.target_)).isMobXFlow=!0);return{value:s,configurable:!n||e.isPlainObject_,enumerable:!1,writable:!n}}function Ge(e,t){return{annotationType_:e,options_:t,make_:Xe,extend_:We}}function Xe(e,t,i){return null===this.extend_(e,t,i,!1)?0:1}function We(e,t,i,o){return function(e,t,i,o){var a=t.annotationType_,n=o.get;"production"===process.env.NODE_ENV||n||j("Cannot apply '"+a+"' to '"+e.name_+"."+i.toString()+"':\n'"+a+"' can only be used on getter(+setter) properties.")}(e,this,t,i),e.defineComputedProperty_(t,xe({},this.options_,{get:i.get,set:i.set}),o)}function Ye(e,t){return{annotationType_:e,options_:t,make_:Je,extend_:Ke}}function Je(e,t,i){return null===this.extend_(e,t,i,!1)?0:1}function Ke(e,t,i,o){var a,n;return function(e,t,i,o){var a=t.annotationType_;"production"===process.env.NODE_ENV||"value"in o||j("Cannot apply '"+a+"' to '"+e.name_+"."+i.toString()+"':\n'"+a+"' cannot be used on getter/setter properties")}(e,this,t,i),e.defineObservableProperty_(t,i.value,null!=(a=null==(n=this.options_)?void 0:n.enhancer)?a:He,o)}var Qe=Ze();function Ze(e){return{annotationType_:"true",options_:e,make_:et,extend_:tt}}function et(e,t,i,o){var a,n,r,s;if(i.get)return ft.make_(e,t,i,o);if(i.set){var l=At(t.toString(),i.set);return o===e.target_?null===e.defineProperty_(t,{configurable:!Wt.safeDescriptors||e.isPlainObject_,set:l})?0:2:(G(o,t,{configurable:!0,set:l}),2)}if(o!==e.target_&&"function"==typeof i.value)return se(i.value)?(null!=(s=this.options_)&&s.autoBind?Li.bound:Li).make_(e,t,i,o):(null!=(r=this.options_)&&r.autoBind?xi.bound:xi).make_(e,t,i,o);var d,c=!1===(null==(a=this.options_)?void 0:a.deep)?mt.ref:mt;"function"==typeof i.value&&null!=(n=this.options_)&&n.autoBind&&(i.value=i.value.bind(null!=(d=e.proxy_)?d:e.target_));return c.make_(e,t,i,o)}function tt(e,t,i,o){var a,n,r;if(i.get)return ft.extend_(e,t,i,o);if(i.set)return e.defineProperty_(t,{configurable:!Wt.safeDescriptors||e.isPlainObject_,set:At(t.toString(),i.set)},o);"function"==typeof i.value&&null!=(a=this.options_)&&a.autoBind&&(i.value=i.value.bind(null!=(r=e.proxy_)?r:e.target_));return(!1===(null==(n=this.options_)?void 0:n.deep)?mt.ref:mt).extend_(e,t,i,o)}var it={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function ot(e){return e||it}Object.freeze(it);var at=Ye("observable"),nt=Ye("observable.ref",{enhancer:De}),rt=Ye("observable.shallow",{enhancer:function(e,t,i){return null==e||xo(e)||so(e)||uo(e)||go(e)?e:Array.isArray(e)?mt.array(e,{name:i,deep:!1}):re(e)?mt.object(e,void 0,{name:i,deep:!1}):he(e)?mt.map(e,{name:i,deep:!1}):ue(e)?mt.set(e,{name:i,deep:!1}):void("production"!==process.env.NODE_ENV&&j("The shallow modifier / decorator can only used in combination with arrays, objects, maps and sets"))}}),st=Ye("observable.struct",{enhancer:function(e,t){return"production"!==process.env.NODE_ENV&&Di(e)&&j("observable.struct should not be used with observable values"),Mo(e,t)?t:e}}),lt=Te(at);function dt(e){return!0===e.deep?He:!1===e.deep?De:(t=e.defaultDecorator)&&null!=(i=null==(o=t.options_)?void 0:o.enhancer)?i:He;var t,i,o}function ct(e,t,i){if(!ae(t))return Di(e)?e:re(e)?mt.object(e,t,i):Array.isArray(e)?mt.array(e,t):he(e)?mt.map(e,t):ue(e)?mt.set(e,t):"object"==typeof e&&null!==e?e:mt.box(e,t);ke(e,t,at)}Object.assign(ct,lt);var ht,ut,pt={box:function(e,t){var i=ot(t);return new kt(e,dt(i),i.name,!0,i.equals)},array:function(e,t){var i=ot(t);return(!1===Wt.useProxies||!1===i.proxy?ko:eo)(e,dt(i),i.name)},map:function(e,t){var i=ot(t);return new ho(e,dt(i),i.name)},set:function(e,t){var i=ot(t);return new mo(e,dt(i),i.name)},object:function(e,t,i){return function(e,t,i,o){"production"!==process.env.NODE_ENV&&(arguments.length>4&&j("'extendObservable' expected 2-4 arguments"),"object"!=typeof e&&j("'extendObservable' expects an object as first argument"),uo(e)&&j("'extendObservable' should not be used on maps, use map.merge instead"),re(t)||j("'extendObservable' only accepts plain objects as second argument"),(Di(t)||Di(i))&&j("Extending an object with another observable (object) is not supported"));var a=ve(t),n=vo(e,o)[Oe];Qt();try{me(a).forEach((function(e){n.extend_(e,a[e],!i||(!(e in i)||i[e]))}))}finally{Zt()}return e}(!1===Wt.useProxies||!1===(null==i?void 0:i.proxy)?vo({},i):function(e,t){var i,o;return Q(),e=vo(e,t),null!=(o=(i=e[Oe]).proxy_)?o:i.proxy_=new Proxy(e,Vi)}({},i),e,t)},ref:Te(nt),shallow:Te(rt),deep:lt,struct:Te(st)},mt=U(ct,pt),gt=Ge("computed"),bt=Ge("computed.struct",{equals:Me.structural}),ft=function(e,t){if(ae(t))return ke(e,t,gt);if(re(e))return Te(Ge("computed",e));"production"!==process.env.NODE_ENV&&(oe(e)||j("First argument to `computed` should be an expression."),oe(t)&&j("A setter as second argument is no longer supported, use `{ set: fn }` option instead"));var i=re(t)?t:{};return i.get=e,i.name||(i.name=e.name||""),new Pt(i)};Object.assign(ft,gt),ft.struct=Te(bt);var vt,yt=0,_t=1,xt=null!=(ht=null==(ut=q((function(){}),"name"))?void 0:ut.configurable)&&ht,wt={value:"action",configurable:!0,writable:!1,enumerable:!1};function At(e,t,i,o){function a(){return Et(e,i,t,o||this,arguments)}return void 0===i&&(i=!1),"production"!==process.env.NODE_ENV&&(oe(t)||j("`action` can only be invoked on functions"),"string"==typeof e&&e||j("actions should have valid names, got: '"+e+"'")),a.isMobxAction=!0,xt&&(wt.value=e,Object.defineProperty(a,"name",wt)),a}function Et(e,t,i,o,a){var n=function(e,t,i,o){var a="production"!==process.env.NODE_ENV&&di()&&!!e,n=0;if("production"!==process.env.NODE_ENV&&a){n=Date.now();var r=o?Array.from(o):W;hi({type:mi,name:e,object:i,arguments:r})}var s=Wt.trackingDerivation,l=!t||!s;Qt();var d=Wt.allowStateChanges;l&&($t(),d=St(!0));var c=Ft(!0),h={runAsAction_:l,prevDerivation_:s,prevAllowStateChanges_:d,prevAllowStateReads_:c,notifySpy_:a,startTime_:n,actionId_:_t++,parentActionId_:yt};return yt=h.actionId_,h}(e,t,o,a);try{return i.apply(o,a)}catch(e){throw n.error_=e,e}finally{!function(e){yt!==e.actionId_&&j(30);yt=e.parentActionId_,void 0!==e.error_&&(Wt.suppressReactionErrors=!0);Ct(e.prevAllowStateChanges_),Vt(e.prevAllowStateReads_),Zt(),e.runAsAction_&&jt(e.prevDerivation_);"production"!==process.env.NODE_ENV&&e.notifySpy_&&pi({time:Date.now()-e.startTime_});Wt.suppressReactionErrors=!1}(n)}}function St(e){var t=Wt.allowStateChanges;return Wt.allowStateChanges=e,t}function Ct(e){Wt.allowStateChanges=e}vt=Symbol.toPrimitive;var Nt,Tt,kt=function(e,t){function i(t,i,o,a,n){var r;return void 0===o&&(o="production"!==process.env.NODE_ENV?"ObservableValue@"+ee():"ObservableValue"),void 0===a&&(a=!0),void 0===n&&(n=Me.default),(r=e.call(this,o)||this).enhancer=void 0,r.name_=void 0,r.equals=void 0,r.hasUnreportedChange_=!1,r.interceptors_=void 0,r.changeListeners_=void 0,r.value_=void 0,r.dehancer=void 0,r.enhancer=i,r.name_=o,r.equals=n,r.value_=i(t,void 0,o),"production"!==process.env.NODE_ENV&&a&&di()&&ci({type:"create",object:Ee(r),observableKind:"value",debugObjectName:r.name_,newValue:""+r.value_}),r}we(i,e);var o=i.prototype;return o.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},o.set=function(e){var t=this.value_;if((e=this.prepareNewValue_(e))!==Wt.UNCHANGED){var i=di();"production"!==process.env.NODE_ENV&&i&&hi({type:Ki,object:this,observableKind:"value",debugObjectName:this.name_,newValue:e,oldValue:t}),this.setNewValue_(e),"production"!==process.env.NODE_ENV&&i&&pi()}},o.prepareNewValue_=function(e){if(Dt(this),Ui(this)){var t=Gi(this,{object:this,type:Ki,newValue:e});if(!t)return Wt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?Wt.UNCHANGED:e},o.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),Xi(this)&&Yi(this,{type:Ki,object:this,newValue:e,oldValue:t})},o.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},o.intercept_=function(e){return qi(this,e)},o.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:Ki,newValue:this.value_,oldValue:void 0}),Wi(this,e)},o.raw=function(){return this.value_},o.toJSON=function(){return this.get()},o.toString=function(){return this.name_+"["+this.value_+"]"},o.valueOf=function(){return be(this.get())},o[t]=function(){return this.valueOf()},i}(Pe,vt),Ot=ce("ObservableValue",kt),Pt=function(e){function t(e){this.dependenciesState_=Nt.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Nt.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Bt(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Tt.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,e.get||j(31),this.derivation=e.get,this.name_=e.name||("production"!==process.env.NODE_ENV?"ComputedValue@"+ee():"ComputedValue"),e.set&&(this.setter_=At("production"!==process.env.NODE_ENV?this.name_+"-setter":"ComputedValue-setter",e.set)),this.equals_=e.equals||(e.compareStructural||e.struct?Me.structural:Me.default),this.scope_=e.context,this.requiresReaction_=e.requiresReaction,this.keepAlive_=!!e.keepAlive}var i=t.prototype;return i.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Nt.UP_TO_DATE_)return;e.lowestObserverState_=Nt.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Nt.UP_TO_DATE_&&(e.dependenciesState_=Nt.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},i.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},i.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},i.get=function(){if(this.isComputing_&&j(32,this.name_,this.derivation),0!==Wt.inBatch||0!==this.observers_.size||this.keepAlive_){if(ei(this),Ht(this)){var e=Wt.trackingContext;this.keepAlive_&&!e&&(Wt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Nt.STALE_)return;e.lowestObserverState_=Nt.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Nt.POSSIBLY_STALE_?(t.dependenciesState_=Nt.STALE_,"production"!==process.env.NODE_ENV&&t.isTracing_!==Tt.NONE&&ii(t,e)):t.dependenciesState_===Nt.UP_TO_DATE_&&(e.lowestObserverState_=Nt.UP_TO_DATE_)}))}(this),Wt.trackingContext=e}}else Ht(this)&&(this.warnAboutUntrackedRead_(),Qt(),this.value_=this.computeValue_(!1),Zt());var t=this.value_;if(Mt(t))throw t.cause;return t},i.set=function(e){if(this.setter_){this.isRunningSetter_&&j(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,e)}finally{this.isRunningSetter_=!1}}else j(34,this.name_)},i.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Nt.NOT_TRACKING_,i=this.computeValue_(!0),o=t||Mt(e)||Mt(i)||!this.equals_(e,i);return o&&(this.value_=i,"production"!==process.env.NODE_ENV&&di()&&ci({observableKind:"computed",debugObjectName:this.name_,object:this.scope_,type:"update",oldValue:e,newValue:i})),o},i.computeValue_=function(e){this.isComputing_=!0;var t,i=St(!1);if(e)t=Rt(this,this.derivation,this.scope_);else if(!0===Wt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new Bt(e)}return Ct(i),this.isComputing_=!1,t},i.suspend_=function(){this.keepAlive_||(zt(this),this.value_=void 0,"production"!==process.env.NODE_ENV&&this.isTracing_!==Tt.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' was suspended and it will recompute on the next access."))},i.observe_=function(e,t){var i=this,o=!0,a=void 0;return Ai((function(){var n=i.get();if(!o||t){var r=$t();e({observableKind:"computed",debugObjectName:i.name_,type:Ki,object:i,newValue:n,oldValue:a}),jt(r)}o=!1,a=n}))},i.warnAboutUntrackedRead_=function(){"production"!==process.env.NODE_ENV&&(this.isTracing_!==Tt.NONE&&console.log("[mobx.trace] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."),("boolean"==typeof this.requiresReaction_?this.requiresReaction_:Wt.computedRequiresReaction)&&console.warn("[mobx] Computed value '"+this.name_+"' is being read outside a reactive context. Doing a full recompute."))},i.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},i.valueOf=function(){return be(this.get())},i[e]=function(){return this.valueOf()},t}(Symbol.toPrimitive),Lt=ce("ComputedValue",Pt);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Nt||(Nt={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(Tt||(Tt={}));var Bt=function(e){this.cause=void 0,this.cause=e};function Mt(e){return e instanceof Bt}function Ht(e){switch(e.dependenciesState_){case Nt.UP_TO_DATE_:return!1;case Nt.NOT_TRACKING_:case Nt.STALE_:return!0;case Nt.POSSIBLY_STALE_:for(var t=Ft(!0),i=$t(),o=e.observing_,a=o.length,n=0;n<a;n++){var r=o[n];if(Lt(r)){if(Wt.disableErrorBoundaries)r.get();else try{r.get()}catch(e){return jt(i),Vt(t),!0}if(e.dependenciesState_===Nt.STALE_)return jt(i),Vt(t),!0}}return Ut(e),jt(i),Vt(t),!1}}function Dt(e){if("production"!==process.env.NODE_ENV){var t=e.observers_.size>0;Wt.allowStateChanges||!t&&"always"!==Wt.enforceActions||console.warn("[MobX] "+(Wt.enforceActions?"Since strict-mode is enabled, changing (observed) observable values without using an action is not allowed. Tried to modify: ":"Side effects like changing state are not allowed at this point. Are you trying to modify state from, for example, a computed value or the render function of a React component? You can wrap side effects in 'runInAction' (or decorate functions with 'action') if needed. Tried to modify: ")+e.name_)}}function Rt(e,t,i){var o=Ft(!0);Ut(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++Wt.runId;var a,n=Wt.trackingDerivation;if(Wt.trackingDerivation=e,Wt.inBatch++,!0===Wt.disableErrorBoundaries)a=t.call(i);else try{a=t.call(i)}catch(e){a=new Bt(e)}return Wt.inBatch--,Wt.trackingDerivation=n,function(e){for(var t=e.observing_,i=e.observing_=e.newObserving_,o=Nt.UP_TO_DATE_,a=0,n=e.unboundDepsCount_,r=0;r<n;r++){var s=i[r];0===s.diffValue_&&(s.diffValue_=1,a!==r&&(i[a]=s),a++),s.dependenciesState_>o&&(o=s.dependenciesState_)}i.length=a,e.newObserving_=null,n=t.length;for(;n--;){var l=t[n];0===l.diffValue_&&Jt(l,e),l.diffValue_=0}for(;a--;){var d=i[a];1===d.diffValue_&&(d.diffValue_=0,Yt(d,e))}o!==Nt.UP_TO_DATE_&&(e.dependenciesState_=o,e.onBecomeStale_())}(e),function(e){if("production"===process.env.NODE_ENV)return;if(0!==e.observing_.length)return;(Wt.reactionRequiresObservable||e.requiresObservable_)&&console.warn("[mobx] Derivation '"+e.name_+"' is created/updated without reading any observable value.")}(e),Vt(o),a}function zt(e){var t=e.observing_;e.observing_=[];for(var i=t.length;i--;)Jt(t[i],e);e.dependenciesState_=Nt.NOT_TRACKING_}function It(e){var t=$t();try{return e()}finally{jt(t)}}function $t(){var e=Wt.trackingDerivation;return Wt.trackingDerivation=null,e}function jt(e){Wt.trackingDerivation=e}function Ft(e){var t=Wt.allowStateReads;return Wt.allowStateReads=e,t}function Vt(e){Wt.allowStateReads=e}function Ut(e){if(e.dependenciesState_!==Nt.UP_TO_DATE_){e.dependenciesState_=Nt.UP_TO_DATE_;for(var t=e.observing_,i=t.length;i--;)t[i].lowestObserverState_=Nt.UP_TO_DATE_}}var qt=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},Gt=!0,Xt=!1,Wt=function(){var e=V();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(Gt=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==(new qt).version&&(Gt=!1),Gt?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new qt):(setTimeout((function(){Xt||j(35)}),1),new qt)}();function Yt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function Jt(e,t){e.observers_.delete(t),0===e.observers_.size&&Kt(e)}function Kt(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,Wt.pendingUnobservations.push(e))}function Qt(){Wt.inBatch++}function Zt(){if(0==--Wt.inBatch){ri();for(var e=Wt.pendingUnobservations,t=0;t<e.length;t++){var i=e[t];i.isPendingUnobservation_=!1,0===i.observers_.size&&(i.isBeingObserved_&&(i.isBeingObserved_=!1,i.onBUO()),i instanceof Pt&&i.suspend_())}Wt.pendingUnobservations=[]}}function ei(e){!function(e){"production"!==process.env.NODE_ENV&&!Wt.allowStateReads&&Wt.observableRequiresReaction&&console.warn("[mobx] Observable '"+e.name_+"' being read outside a reactive context.")}(e);var t=Wt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&Wt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&Wt.inBatch>0&&Kt(e),!1)}function ti(e){e.lowestObserverState_!==Nt.STALE_&&(e.lowestObserverState_=Nt.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Nt.UP_TO_DATE_&&("production"!==process.env.NODE_ENV&&t.isTracing_!==Tt.NONE&&ii(t,e),t.onBecomeStale_()),t.dependenciesState_=Nt.STALE_})))}function ii(e,t){if(console.log("[mobx.trace] '"+e.name_+"' is invalidated due to a change in: '"+t.name_+"'"),e.isTracing_===Tt.BREAK){var i=[];oi(Ni(Oo(e,o)),i,1),new Function("debugger;\n/*\nTracing '"+e.name_+"'\n\nYou are entering this break point because derivation '"+e.name_+"' is being traced and '"+t.name_+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(e instanceof Pt?e.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+i.join("\n")+"\n*/\n    ")()}var o}function oi(e,t,i){t.length>=1e3?t.push("(and many more)"):(t.push(""+"\t".repeat(i-1)+e.name),e.dependencies&&e.dependencies.forEach((function(e){return oi(e,t,i+1)})))}var ai=function(){function e(e,t,i,o){void 0===e&&(e="production"!==process.env.NODE_ENV?"Reaction@"+ee():"Reaction"),void 0===o&&(o=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Nt.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=Tt.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=i,this.requiresObservable_=o}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,Wt.pendingReactions.push(this),ri())},t.isScheduled=function(){return this.isScheduled_},t.runReaction_=function(){if(!this.isDisposed_){Qt(),this.isScheduled_=!1;var e=Wt.trackingContext;if(Wt.trackingContext=this,Ht(this)){this.isTrackPending_=!0;try{this.onInvalidate_(),"production"!==process.env.NODE_ENV&&this.isTrackPending_&&di()&&ci({name:this.name_,type:"scheduled-reaction"})}catch(e){this.reportExceptionInDerivation_(e)}}Wt.trackingContext=e,Zt()}},t.track=function(e){if(!this.isDisposed_){Qt();var t,i=di();"production"!==process.env.NODE_ENV&&i&&(t=Date.now(),hi({name:this.name_,type:"reaction"})),this.isRunning_=!0;var o=Wt.trackingContext;Wt.trackingContext=this;var a=Rt(this,e,void 0);Wt.trackingContext=o,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&zt(this),Mt(a)&&this.reportExceptionInDerivation_(a.cause),"production"!==process.env.NODE_ENV&&i&&pi({time:Date.now()-t}),Zt()}},t.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(Wt.disableErrorBoundaries)throw e;var i="production"!==process.env.NODE_ENV?"[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'":"[mobx] uncaught error in '"+this+"'";Wt.suppressReactionErrors?"production"!==process.env.NODE_ENV&&console.warn("[mobx] (error in reaction '"+this.name_+"' suppressed, fix error of causing action below)"):console.error(i,e),"production"!==process.env.NODE_ENV&&di()&&ci({type:"error",name:this.name_,message:i,error:""+e}),Wt.globalReactionErrorHandlers.forEach((function(i){return i(e,t)}))}},t.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(Qt(),zt(this),Zt()))},t.getDisposer_=function(){var e=this.dispose.bind(this);return e[Oe]=this,e},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(e){void 0===e&&(e=!1),function(){"production"===process.env.NODE_ENV&&j("trace() is not available in production builds");for(var e=!1,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];"boolean"==typeof i[i.length-1]&&(e=i.pop());var a=$i(i);if(!a)return j("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");a.isTracing_===Tt.NONE&&console.log("[mobx.trace] '"+a.name_+"' tracing enabled");a.isTracing_=e?Tt.BREAK:Tt.LOG}(this,e)},e}(),ni=function(e){return e()};function ri(){Wt.inBatch>0||Wt.isRunningReactions||ni(si)}function si(){Wt.isRunningReactions=!0;for(var e=Wt.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("production"!==process.env.NODE_ENV?"Reaction doesn't converge to a stable state after 100 iterations. Probably there is a cycle in the reactive function: "+e[0]:"[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var i=e.splice(0),o=0,a=i.length;o<a;o++)i[o].runReaction_()}Wt.isRunningReactions=!1}var li=ce("Reaction",ai);function di(){return"production"!==process.env.NODE_ENV&&!!Wt.spyListeners.length}function ci(e){if("production"!==process.env.NODE_ENV&&Wt.spyListeners.length)for(var t=Wt.spyListeners,i=0,o=t.length;i<o;i++)t[i](e)}function hi(e){"production"!==process.env.NODE_ENV&&ci(xe({},e,{spyReportStart:!0}))}var ui={type:"report-end",spyReportEnd:!0};function pi(e){"production"!==process.env.NODE_ENV&&ci(e?xe({},e,{type:"report-end",spyReportEnd:!0}):ui)}var mi="action",gi=ze(mi),bi=ze("action.bound",{bound:!0}),fi=ze("autoAction",{autoAction:!0}),vi=ze("autoAction.bound",{autoAction:!0,bound:!0});function yi(e){return function(t,i){return oe(t)?At(t.name||"<unnamed action>",t,e):oe(i)?At(t,i,e):ae(i)?ke(t,i,e?fi:gi):ae(t)?Te(ze(e?"autoAction":mi,{name:t,autoAction:e})):void("production"!==process.env.NODE_ENV&&j("Invalid arguments for `action`"))}}var _i=yi(!1);Object.assign(_i,gi);var xi=yi(!0);function wi(e){return oe(e)&&!0===e.isMobxAction}function Ai(e,t){var i,o;void 0===t&&(t=Y),"production"!==process.env.NODE_ENV&&(oe(e)||j("Autorun expects a function as first argument"),wi(e)&&j("Autorun does not accept actions since actions are untrackable"));var a,n=null!=(i=null==(o=t)?void 0:o.name)?i:"production"!==process.env.NODE_ENV?e.name||"Autorun@"+ee():"Autorun";if(!t.scheduler&&!t.delay)a=new ai(n,(function(){this.track(l)}),t.onError,t.requiresObservable);else{var r=function(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:Ei}(t),s=!1;a=new ai(n,(function(){s||(s=!0,r((function(){s=!1,a.isDisposed_||a.track(l)})))}),t.onError,t.requiresObservable)}function l(){e(a)}return a.schedule_(),a.getDisposer_()}Object.assign(xi,fi),_i.bound=Te(bi),xi.bound=Te(vi);var Ei=function(e){return e()};function Si(e,t,i){return Ci("onBUO",e,t,i)}function Ci(e,t,i,o){var a="function"==typeof o?Oo(t,i):Oo(t),n=oe(o)?o:i,r=e+"L";return a[r]?a[r].add(n):a[r]=new Set([n]),function(){var e=a[r];e&&(e.delete(n),0===e.size&&delete a[r])}}function Ni(e){var t,i={name:e.name_};return e.observing_&&e.observing_.length>0&&(i.dependencies=(t=e.observing_,Array.from(new Set(t))).map(Ni)),i}var Ti=0;function ki(){this.message="FLOW_CANCELLED"}ki.prototype=Object.create(Error.prototype);var Oi=Fe("flow"),Pi=Fe("flow.bound",{bound:!0}),Li=Object.assign((function(e,t){if(ae(t))return ke(e,t,Oi);"production"!==process.env.NODE_ENV&&1!==arguments.length&&j("Flow expects single argument with generator function");var i=e,o=i.name||"<unnamed flow>",a=function(){var e,t=this,a=arguments,n=++Ti,r=_i(o+" - runid: "+n+" - init",i).apply(t,a),s=void 0,l=new Promise((function(t,i){var a=0;function l(e){var t;s=void 0;try{t=_i(o+" - runid: "+n+" - yield "+a++,r.next).call(r,e)}catch(e){return i(e)}c(t)}function d(e){var t;s=void 0;try{t=_i(o+" - runid: "+n+" - yield "+a++,r.throw).call(r,e)}catch(e){return i(e)}c(t)}function c(e){if(!oe(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(l,d);e.then(c,i)}e=i,l(void 0)}));return l.cancel=_i(o+" - runid: "+n+" - cancel",(function(){try{s&&Bi(s);var t=r.return(void 0),i=Promise.resolve(t.value);i.then(ie,ie),Bi(i),e(new ki)}catch(t){e(t)}})),l};return a.isMobXFlow=!0,a}),Oi);function Bi(e){oe(e.cancel)&&e.cancel()}function Mi(e){return!0===(null==e?void 0:e.isMobXFlow)}function Hi(e,t){return!!e&&(void 0!==t?"production"!==process.env.NODE_ENV&&(uo(e)||so(e))?j("isObservable(object, propertyName) is not supported for arrays and maps. Use map.has or array.length instead."):!!xo(e)&&e[Oe].values_.has(t):xo(e)||!!e[Oe]||Le(e)||li(e)||Lt(e))}function Di(e){return"production"!==process.env.NODE_ENV&&1!==arguments.length&&j("isObservable expects only 1 argument. Use isObservableProp to inspect the observability of a property"),Hi(e)}function Ri(e,t,i){return e.set(t,i),i}function zi(e,t){if(null==e||"object"!=typeof e||e instanceof Date||!Di(e))return e;if(Ot(e)||Lt(e))return zi(e.get(),t);if(t.has(e))return t.get(e);if(so(e)){var i=Ri(t,e,new Array(e.length));return e.forEach((function(e,o){i[o]=zi(e,t)})),i}if(go(e)){var o=Ri(t,e,new Set);return e.forEach((function(e){o.add(zi(e,t))})),o}if(uo(e)){var a=Ri(t,e,new Map);return e.forEach((function(e,i){a.set(i,zi(e,t))})),a}var n=Ri(t,e,{});return function(e){if(xo(e))return e[Oe].ownKeys_();j(38)}(e).forEach((function(i){X.propertyIsEnumerable.call(e,i)&&(n[i]=zi(e[i],t))})),n}function Ii(e,t){return"production"!==process.env.NODE_ENV&&t&&j("toJS no longer supports options"),zi(e,new Map)}function $i(e){switch(e.length){case 0:return Wt.trackingDerivation;case 1:return Oo(e[0]);case 2:return Oo(e[0],e[1])}}function ji(e,t){void 0===t&&(t=void 0),Qt();try{return e.apply(t)}finally{Zt()}}function Fi(e){return e[Oe]}Li.bound=Te(Pi);var Vi={has:function(e,t){return"production"!==process.env.NODE_ENV&&Wt.trackingDerivation&&Z("detect new properties using the 'in' operator. Use 'has' from 'mobx' instead."),Fi(e).has_(t)},get:function(e,t){return Fi(e).get_(t)},set:function(e,t,i){var o;return!!ae(t)&&("production"===process.env.NODE_ENV||Fi(e).values_.has(t)||Z("add a new observable property through direct assignment. Use 'set' from 'mobx' instead."),null==(o=Fi(e).set_(t,i,!0))||o)},deleteProperty:function(e,t){var i;return"production"!==process.env.NODE_ENV&&Z("delete properties from an observable object. Use 'remove' from 'mobx' instead."),!!ae(t)&&(null==(i=Fi(e).delete_(t,!0))||i)},defineProperty:function(e,t,i){var o;return"production"!==process.env.NODE_ENV&&Z("define property on an observable object. Use 'defineProperty' from 'mobx' instead."),null==(o=Fi(e).defineProperty_(t,i))||o},ownKeys:function(e){return"production"!==process.env.NODE_ENV&&Wt.trackingDerivation&&Z("iterate keys to detect added / removed properties. Use 'keys' from 'mobx' instead."),Fi(e).ownKeys_()},preventExtensions:function(e){j(13)}};function Ui(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function qi(e,t){var i=e.interceptors_||(e.interceptors_=[]);return i.push(t),te((function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}))}function Gi(e,t){var i=$t();try{for(var o=[].concat(e.interceptors_||[]),a=0,n=o.length;a<n&&((t=o[a](t))&&!t.type&&j(14),t);a++);return t}finally{jt(i)}}function Xi(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function Wi(e,t){var i=e.changeListeners_||(e.changeListeners_=[]);return i.push(t),te((function(){var e=i.indexOf(t);-1!==e&&i.splice(e,1)}))}function Yi(e,t){var i=$t(),o=e.changeListeners_;if(o){for(var a=0,n=(o=o.slice()).length;a<n;a++)o[a](t);jt(i)}}function Ji(e,t,i){var o=vo(e,i)[Oe];Qt();try{"production"!==process.env.NODE_ENV&&t&&e[Ne]&&j("makeObservable second arg must be nullish when using decorators. Mixing @decorator syntax with annotations is not supported."),null!=t||(t=function(e){return fe(e,Ne)||("production"===process.env.NODE_ENV||e[Ne]||j("No annotations were passed to makeObservable, but no decorated members have been found either"),le(e,Ne,xe({},e[Ne]))),e[Ne]}(e)),me(t).forEach((function(e){return o.make_(e,t[e])}))}finally{Zt()}return e}var Ki="update",Qi={get:function(e,t){var i=e[Oe];return t===Oe?i:"length"===t?i.getArrayLength_():"string"!=typeof t||isNaN(t)?fe(to,t)?to[t]:e[t]:i.get_(parseInt(t))},set:function(e,t,i){var o=e[Oe];return"length"===t&&o.setArrayLength_(i),"symbol"==typeof t||isNaN(t)?e[t]=i:o.set_(parseInt(t),i),!0},preventExtensions:function(){j(15)}},Zi=function(){function e(e,t,i,o){void 0===e&&(e="production"!==process.env.NODE_ENV?"ObservableArray@"+ee():"ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=i,this.legacyMode_=o,this.atom_=new Pe(e),this.enhancer_=function(i,o){return t(i,o,"production"!==process.env.NODE_ENV?e+"[..]":"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},t.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},t.intercept_=function(e){return qi(this,e)},t.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),Wi(this,e)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(e){("number"!=typeof e||isNaN(e)||e<0)&&j("Out of range: "+e);var t=this.values_.length;if(e!==t)if(e>t){for(var i=new Array(e-t),o=0;o<e-t;o++)i[o]=void 0;this.spliceWithArray_(t,0,i)}else this.spliceWithArray_(e,t-e)},t.updateArrayLength_=function(e,t){e!==this.lastKnownLength_&&j(16),this.lastKnownLength_+=t,this.legacyMode_&&t>0&&To(e+t+1)},t.spliceWithArray_=function(e,t,i){var o=this;Dt(this.atom_);var a=this.values_.length;if(void 0===e?e=0:e>a?e=a:e<0&&(e=Math.max(0,a+e)),t=1===arguments.length?a-e:null==t?0:Math.max(0,Math.min(t,a-e)),void 0===i&&(i=W),Ui(this)){var n=Gi(this,{object:this.proxy_,type:"splice",index:e,removedCount:t,added:i});if(!n)return W;t=n.removedCount,i=n.added}if(i=0===i.length?i:i.map((function(e){return o.enhancer_(e,void 0)})),this.legacyMode_||"production"!==process.env.NODE_ENV){var r=i.length-t;this.updateArrayLength_(a,r)}var s=this.spliceItemsIntoValues_(e,t,i);return 0===t&&0===i.length||this.notifyArraySplice_(e,i,s),this.dehanceValues_(s)},t.spliceItemsIntoValues_=function(e,t,i){var o;if(i.length<1e4)return(o=this.values_).splice.apply(o,[e,t].concat(i));var a=this.values_.slice(e,e+t),n=this.values_.slice(e+t);this.values_.length+=i.length-t;for(var r=0;r<i.length;r++)this.values_[e+r]=i[r];for(var s=0;s<n.length;s++)this.values_[e+i.length+s]=n[s];return a},t.notifyArrayChildUpdate_=function(e,t,i){var o=!this.owned_&&di(),a=Xi(this),n=a||o?{observableKind:"array",object:this.proxy_,type:Ki,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:i}:null;"production"!==process.env.NODE_ENV&&o&&hi(n),this.atom_.reportChanged(),a&&Yi(this,n),"production"!==process.env.NODE_ENV&&o&&pi()},t.notifyArraySplice_=function(e,t,i){var o=!this.owned_&&di(),a=Xi(this),n=a||o?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:e,removed:i,added:t,removedCount:i.length,addedCount:t.length}:null;"production"!==process.env.NODE_ENV&&o&&hi(n),this.atom_.reportChanged(),a&&Yi(this,n),"production"!==process.env.NODE_ENV&&o&&pi()},t.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("production"!==process.env.NODE_ENV?"[mobx] Out of bounds read: "+e:"[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},t.set_=function(e,t){var i=this.values_;if(e<i.length){Dt(this.atom_);var o=i[e];if(Ui(this)){var a=Gi(this,{type:Ki,object:this.proxy_,index:e,newValue:t});if(!a)return;t=a.newValue}(t=this.enhancer_(t,o))!==o&&(i[e]=t,this.notifyArrayChildUpdate_(e,t,o))}else e===i.length?this.spliceWithArray_(e,0,[t]):j(17,e,i.length)},e}();function eo(e,t,i,o){void 0===i&&(i="production"!==process.env.NODE_ENV?"ObservableArray@"+ee():"ObservableArray"),void 0===o&&(o=!1),Q();var a=new Zi(i,t,o,!1);de(a.values_,Oe,a);var n=new Proxy(a.values_,Qi);if(a.proxy_=n,e&&e.length){var r=St(!0);a.spliceWithArray_(0,0,e),Ct(r)}return n}var to={clear:function(){return this.splice(0)},replace:function(e){var t=this[Oe];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];var n=this[Oe];switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(e);case 2:return n.spliceWithArray_(e,t)}return n.spliceWithArray_(e,t,o)},spliceWithArray:function(e,t,i){return this[Oe].spliceWithArray_(e,t,i)},push:function(){for(var e=this[Oe],t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.spliceWithArray_(e.values_.length,0,i),e.values_.length},pop:function(){return this.splice(Math.max(this[Oe].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[Oe],t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e.spliceWithArray_(0,0,i),e.values_.length},reverse:function(){return Wt.trackingDerivation&&j(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){Wt.trackingDerivation&&j(37,"sort");var e=this.slice();return e.sort.apply(e,arguments),this.replace(e),this},remove:function(e){var t=this[Oe],i=t.dehanceValues_(t.values_).indexOf(e);return i>-1&&(this.splice(i,1),!0)}};function io(e,t){"function"==typeof Array.prototype[e]&&(to[e]=t(e))}function oo(e){return function(){var t=this[Oe];t.atom_.reportObserved();var i=t.dehanceValues_(t.values_);return i[e].apply(i,arguments)}}function ao(e){return function(t,i){var o=this,a=this[Oe];return a.atom_.reportObserved(),a.dehanceValues_(a.values_)[e]((function(e,a){return t.call(i,e,a,o)}))}}function no(e){return function(){var t=this,i=this[Oe];i.atom_.reportObserved();var o=i.dehanceValues_(i.values_),a=arguments[0];return arguments[0]=function(e,i,o){return a(e,i,o,t)},o[e].apply(o,arguments)}}io("concat",oo),io("flat",oo),io("includes",oo),io("indexOf",oo),io("join",oo),io("lastIndexOf",oo),io("slice",oo),io("toString",oo),io("toLocaleString",oo),io("every",ao),io("filter",ao),io("find",ao),io("findIndex",ao),io("flatMap",ao),io("forEach",ao),io("map",ao),io("some",ao),io("reduce",no),io("reduceRight",no);var ro=ce("ObservableArrayAdministration",Zi);function so(e){return ne(e)&&ro(e[Oe])}var lo={},co="add",ho=function(e,t){function i(e,t,i){var o=this;void 0===t&&(t=He),void 0===i&&(i="production"!==process.env.NODE_ENV?"ObservableMap@"+ee():"ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Oe]=lo,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=t,this.name_=i,oe(Map)||j(18),this.keysAtom_=Be("production"!==process.env.NODE_ENV?this.name_+".keys()":"ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,function(e,t){var i=St(e);try{t()}finally{Ct(i)}}(!0,(function(){o.merge(e)}))}var o=i.prototype;return o.has_=function(e){return this.data_.has(e)},o.has=function(e){var t=this;if(!Wt.trackingDerivation)return this.has_(e);var i=this.hasMap_.get(e);if(!i){var o=i=new kt(this.has_(e),De,"production"!==process.env.NODE_ENV?this.name_+"."+ge(e)+"?":"ObservableMap.key?",!1);this.hasMap_.set(e,o),Si(o,(function(){return t.hasMap_.delete(e)}))}return i.get()},o.set=function(e,t){var i=this.has_(e);if(Ui(this)){var o=Gi(this,{type:i?Ki:co,object:this,newValue:t,name:e});if(!o)return this;t=o.newValue}return i?this.updateValue_(e,t):this.addValue_(e,t),this},o.delete=function(e){var t=this;if((Dt(this.keysAtom_),Ui(this))&&!Gi(this,{type:"delete",object:this,name:e}))return!1;if(this.has_(e)){var i=di(),o=Xi(this),a=o||i?{observableKind:"map",debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(e).value_,name:e}:null;return"production"!==process.env.NODE_ENV&&i&&hi(a),ji((function(){var i;t.keysAtom_.reportChanged(),null==(i=t.hasMap_.get(e))||i.setNewValue_(!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),o&&Yi(this,a),"production"!==process.env.NODE_ENV&&i&&pi(),!0}return!1},o.updateValue_=function(e,t){var i=this.data_.get(e);if((t=i.prepareNewValue_(t))!==Wt.UNCHANGED){var o=di(),a=Xi(this),n=a||o?{observableKind:"map",debugObjectName:this.name_,type:Ki,object:this,oldValue:i.value_,name:e,newValue:t}:null;"production"!==process.env.NODE_ENV&&o&&hi(n),i.setNewValue_(t),a&&Yi(this,n),"production"!==process.env.NODE_ENV&&o&&pi()}},o.addValue_=function(e,t){var i=this;Dt(this.keysAtom_),ji((function(){var o,a=new kt(t,i.enhancer_,"production"!==process.env.NODE_ENV?i.name_+"."+ge(e):"ObservableMap.key",!1);i.data_.set(e,a),t=a.value_,null==(o=i.hasMap_.get(e))||o.setNewValue_(!0),i.keysAtom_.reportChanged()}));var o=di(),a=Xi(this),n=a||o?{observableKind:"map",debugObjectName:this.name_,type:co,object:this,name:e,newValue:t}:null;"production"!==process.env.NODE_ENV&&o&&hi(n),a&&Yi(this,n),"production"!==process.env.NODE_ENV&&o&&pi()},o.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},o.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},o.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},o.values=function(){var e=this,t=this.keys();return Ro({next:function(){var i=t.next(),o=i.done,a=i.value;return{done:o,value:o?void 0:e.get(a)}}})},o.entries=function(){var e=this,t=this.keys();return Ro({next:function(){var i=t.next(),o=i.done,a=i.value;return{done:o,value:o?void 0:[a,e.get(a)]}}})},o[e]=function(){return this.entries()},o.forEach=function(e,t){for(var i,o=Ce(this);!(i=o()).done;){var a=i.value,n=a[0],r=a[1];e.call(t,r,n,this)}},o.merge=function(e){var t=this;return uo(e)&&(e=new Map(e)),ji((function(){re(e)?function(e){var t=Object.keys(e);if(!pe)return t;var i=Object.getOwnPropertySymbols(e);return i.length?[].concat(t,i.filter((function(t){return X.propertyIsEnumerable.call(e,t)}))):t}(e).forEach((function(i){return t.set(i,e[i])})):Array.isArray(e)?e.forEach((function(e){var i=e[0],o=e[1];return t.set(i,o)})):he(e)?(e.constructor!==Map&&j(19,e),e.forEach((function(e,i){return t.set(i,e)}))):null!=e&&j(20,e)})),this},o.clear=function(){var e=this;ji((function(){It((function(){for(var t,i=Ce(e.keys());!(t=i()).done;){var o=t.value;e.delete(o)}}))}))},o.replace=function(e){var t=this;return ji((function(){for(var i,o=function(e){if(he(e)||uo(e))return e;if(Array.isArray(e))return new Map(e);if(re(e)){var t=new Map;for(var i in e)t.set(i,e[i]);return t}return j(21,e)}(e),a=new Map,n=!1,r=Ce(t.data_.keys());!(i=r()).done;){var s=i.value;if(!o.has(s))if(t.delete(s))n=!0;else{var l=t.data_.get(s);a.set(s,l)}}for(var d,c=Ce(o.entries());!(d=c()).done;){var h=d.value,u=h[0],p=h[1],m=t.data_.has(u);if(t.set(u,p),t.data_.has(u)){var g=t.data_.get(u);a.set(u,g),m||(n=!0)}}if(!n)if(t.data_.size!==a.size)t.keysAtom_.reportChanged();else for(var b=t.data_.keys(),f=a.keys(),v=b.next(),y=f.next();!v.done;){if(v.value!==y.value){t.keysAtom_.reportChanged();break}v=b.next(),y=f.next()}t.data_=a})),this},o.toString=function(){return"[object ObservableMap]"},o.toJSON=function(){return Array.from(this)},o.observe_=function(e,t){return"production"!==process.env.NODE_ENV&&!0===t&&j("`observe` doesn't support fireImmediately=true in combination with maps."),Wi(this,e)},o.intercept_=function(e){return qi(this,e)},_e(i,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Map"}}]),i}(Symbol.iterator,Symbol.toStringTag),uo=ce("ObservableMap",ho);var po={},mo=function(e,t){function i(e,t,i){void 0===t&&(t=He),void 0===i&&(i="production"!==process.env.NODE_ENV?"ObservableSet@"+ee():"ObservableSet"),this.name_=void 0,this[Oe]=po,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=i,oe(Set)||j(22),this.atom_=Be(this.name_),this.enhancer_=function(e,o){return t(e,o,i)},e&&this.replace(e)}var o=i.prototype;return o.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},o.clear=function(){var e=this;ji((function(){It((function(){for(var t,i=Ce(e.data_.values());!(t=i()).done;){var o=t.value;e.delete(o)}}))}))},o.forEach=function(e,t){for(var i,o=Ce(this);!(i=o()).done;){var a=i.value;e.call(t,a,a,this)}},o.add=function(e){var t=this;if((Dt(this.atom_),Ui(this))&&!Gi(this,{type:co,object:this,newValue:e}))return this;if(!this.has(e)){ji((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var i="production"!==process.env.NODE_ENV&&di(),o=Xi(this),a=o||i?{observableKind:"set",debugObjectName:this.name_,type:co,object:this,newValue:e}:null;i&&"production"!==process.env.NODE_ENV&&hi(a),o&&Yi(this,a),i&&"production"!==process.env.NODE_ENV&&pi()}return this},o.delete=function(e){var t=this;if(Ui(this)&&!Gi(this,{type:"delete",object:this,oldValue:e}))return!1;if(this.has(e)){var i="production"!==process.env.NODE_ENV&&di(),o=Xi(this),a=o||i?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:e}:null;return i&&"production"!==process.env.NODE_ENV&&hi(a),ji((function(){t.atom_.reportChanged(),t.data_.delete(e)})),o&&Yi(this,a),i&&"production"!==process.env.NODE_ENV&&pi(),!0}return!1},o.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},o.entries=function(){var e=0,t=Array.from(this.keys()),i=Array.from(this.values());return Ro({next:function(){var o=e;return e+=1,o<i.length?{value:[t[o],i[o]],done:!1}:{done:!0}}})},o.keys=function(){return this.values()},o.values=function(){this.atom_.reportObserved();var e=this,t=0,i=Array.from(this.data_.values());return Ro({next:function(){return t<i.length?{value:e.dehanceValue_(i[t++]),done:!1}:{done:!0}}})},o.replace=function(e){var t=this;return go(e)&&(e=new Set(e)),ji((function(){Array.isArray(e)||ue(e)?(t.clear(),e.forEach((function(e){return t.add(e)}))):null!=e&&j("Cannot initialize set from "+e)})),this},o.observe_=function(e,t){return"production"!==process.env.NODE_ENV&&!0===t&&j("`observe` doesn't support fireImmediately=true in combination with sets."),Wi(this,e)},o.intercept_=function(e){return qi(this,e)},o.toJSON=function(){return Array.from(this)},o.toString=function(){return"[object ObservableSet]"},o[e]=function(){return this.values()},_e(i,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:t,get:function(){return"Set"}}]),i}(Symbol.iterator,Symbol.toStringTag),go=ce("ObservableSet",mo),bo=Object.create(null),fo=function(){function e(e,t,i,o){void 0===t&&(t=new Map),void 0===o&&(o=Qe),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=i,this.defaultAnnotation_=o,this.keysAtom_=new Pe("production"!==process.env.NODE_ENV?this.name_+".keys":"ObservableObject.keys"),this.isPlainObject_=re(this.target_),"production"===process.env.NODE_ENV||Io(this.defaultAnnotation_)||j("defaultAnnotation must be valid annotation"),"production"!==process.env.NODE_ENV&&(this.appliedAnnotations_={})}var t=e.prototype;return t.getObservablePropValue_=function(e){return this.values_.get(e).get()},t.setObservablePropValue_=function(e,t){var i=this.values_.get(e);if(i instanceof Pt)return i.set(t),!0;if(Ui(this)){var o=Gi(this,{type:Ki,object:this.proxy_||this.target_,name:e,newValue:t});if(!o)return null;t=o.newValue}if((t=i.prepareNewValue_(t))!==Wt.UNCHANGED){var a=Xi(this),n="production"!==process.env.NODE_ENV&&di(),r=a||n?{type:Ki,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:i.value_,name:e,newValue:t}:null;"production"!==process.env.NODE_ENV&&n&&hi(r),i.setNewValue_(t),a&&Yi(this,r),"production"!==process.env.NODE_ENV&&n&&pi()}return!0},t.get_=function(e){return Wt.trackingDerivation&&!fe(this.target_,e)&&this.has_(e),this.target_[e]},t.set_=function(e,t,i){return void 0===i&&(i=!1),fe(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):i?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,i)},t.has_=function(e){if(!Wt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new kt(e in this.target_,De,"production"!==process.env.NODE_ENV?this.name_+"."+ge(e)+"?":"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},t.make_=function(e,t){if(!0===t&&(t=this.defaultAnnotation_),!1!==t){if(Ao(this,t,e),!(e in this.target_)){var i;if(null!=(i=this.target_[Ne])&&i[e])return;j(1,t.annotationType_,this.name_+"."+e.toString())}for(var o=this.target_;o&&o!==X;){var a=q(o,e);if(a){var n=t.make_(this,e,a,o);if(0===n)return;if(1===n)break}o=Object.getPrototypeOf(o)}wo(this,t,e)}},t.extend_=function(e,t,i,o){if(void 0===o&&(o=!1),!0===i&&(i=this.defaultAnnotation_),!1===i)return this.defineProperty_(e,t,o);Ao(this,i,e);var a=i.extend_(this,e,t,o);return a&&wo(this,i,e),a},t.defineProperty_=function(e,t,i){void 0===i&&(i=!1);try{Qt();var o=this.delete_(e);if(!o)return o;if(Ui(this)){var a=Gi(this,{object:this.proxy_||this.target_,name:e,type:co,newValue:t.value});if(!a)return null;var n=a.newValue;t.value!==n&&(t=xe({},t,{value:n}))}if(i){if(!Reflect.defineProperty(this.target_,e,t))return!1}else G(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{Zt()}return!0},t.defineObservableProperty_=function(e,t,i,o){void 0===o&&(o=!1);try{Qt();var a=this.delete_(e);if(!a)return a;if(Ui(this)){var n=Gi(this,{object:this.proxy_||this.target_,name:e,type:co,newValue:t});if(!n)return null;t=n.newValue}var r=_o(e),s={configurable:!Wt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:r.get,set:r.set};if(o){if(!Reflect.defineProperty(this.target_,e,s))return!1}else G(this.target_,e,s);var l=new kt(t,i,"production"!==process.env.NODE_ENV?this.name_+"."+e.toString():"ObservableObject.key",!1);this.values_.set(e,l),this.notifyPropertyAddition_(e,l.value_)}finally{Zt()}return!0},t.defineComputedProperty_=function(e,t,i){void 0===i&&(i=!1);try{Qt();var o=this.delete_(e);if(!o)return o;if(Ui(this))if(!Gi(this,{object:this.proxy_||this.target_,name:e,type:co,newValue:void 0}))return null;t.name||(t.name="production"!==process.env.NODE_ENV?this.name_+"."+e.toString():"ObservableObject.key"),t.context=this.proxy_||this.target_;var a=_o(e),n={configurable:!Wt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:a.get,set:a.set};if(i){if(!Reflect.defineProperty(this.target_,e,n))return!1}else G(this.target_,e,n);this.values_.set(e,new Pt(t)),this.notifyPropertyAddition_(e,void 0)}finally{Zt()}return!0},t.delete_=function(e,t){if(void 0===t&&(t=!1),!fe(this.target_,e))return!0;if(Ui(this)&&!Gi(this,{object:this.proxy_||this.target_,name:e,type:"remove"}))return null;try{var i,o;Qt();var a,n=Xi(this),r="production"!==process.env.NODE_ENV&&di(),s=this.values_.get(e),l=void 0;if(!s&&(n||r))l=null==(a=q(this.target_,e))?void 0:a.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if("production"!==process.env.NODE_ENV&&delete this.appliedAnnotations_[e],s&&(this.values_.delete(e),s instanceof kt&&(l=s.value_),ti(s)),this.keysAtom_.reportChanged(),null==(i=this.pendingKeys_)||null==(o=i.get(e))||o.set(e in this.target_),n||r){var d={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:l,name:e};"production"!==process.env.NODE_ENV&&r&&hi(d),n&&Yi(this,d),"production"!==process.env.NODE_ENV&&r&&pi()}}finally{Zt()}return!0},t.observe_=function(e,t){return"production"!==process.env.NODE_ENV&&!0===t&&j("`observe` doesn't support the fire immediately property for observable objects."),Wi(this,e)},t.intercept_=function(e){return qi(this,e)},t.notifyPropertyAddition_=function(e,t){var i,o,a=Xi(this),n="production"!==process.env.NODE_ENV&&di();if(a||n){var r=a||n?{type:co,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;"production"!==process.env.NODE_ENV&&n&&hi(r),a&&Yi(this,r),"production"!==process.env.NODE_ENV&&n&&pi()}null==(i=this.pendingKeys_)||null==(o=i.get(e))||o.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),me(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function vo(e,t){var i;if("production"!==process.env.NODE_ENV&&t&&xo(e)&&j("Options can't be provided for already observable objects."),fe(e,Oe))return"production"===process.env.NODE_ENV||Po(e)instanceof fo||j("Cannot convert '"+Lo(e)+"' into observable object:\nThe target is already observable of different type.\nExtending builtins is not supported."),e;"production"===process.env.NODE_ENV||Object.isExtensible(e)||j("Cannot make the designated object observable; it is not extensible");var o=null!=(i=null==t?void 0:t.name)?i:"production"!==process.env.NODE_ENV?(re(e)?"ObservableObject":e.constructor.name)+"@"+ee():"ObservableObject",a=new fo(e,new Map,String(o),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:Ze(e):void 0}(t));return le(e,Oe,a),e}var yo=ce("ObservableObjectAdministration",fo);function _o(e){return bo[e]||(bo[e]={get:function(){return this[Oe].getObservablePropValue_(e)},set:function(t){return this[Oe].setObservablePropValue_(e,t)}})}function xo(e){return!!ne(e)&&yo(e[Oe])}function wo(e,t,i){var o;"production"!==process.env.NODE_ENV&&(e.appliedAnnotations_[i]=t),null==(o=e.target_[Ne])||delete o[i]}function Ao(e,t,i){if("production"===process.env.NODE_ENV||Io(t)||j("Cannot annotate '"+e.name_+"."+i.toString()+"': Invalid annotation."),"production"!==process.env.NODE_ENV&&!Re(t)&&fe(e.appliedAnnotations_,i)){var o=e.name_+"."+i.toString(),a=e.appliedAnnotations_[i].annotationType_;j("Cannot apply '"+t.annotationType_+"' to '"+o+"':\nThe field is already annotated with '"+a+"'.\nRe-annotating fields is not allowed.\nUse 'override' annotation for methods overriden by subclass.")}}var Eo=0,So=function(){};!function(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):void 0!==e.prototype.__proto__?e.prototype.__proto__=t:e.prototype=t}(So,Array.prototype);var Co=function(e,t,i){function o(t,i,o,a){var n;void 0===o&&(o="production"!==process.env.NODE_ENV?"ObservableArray@"+ee():"ObservableArray"),void 0===a&&(a=!1),n=e.call(this)||this;var r=new Zi(o,i,a,!0);if(r.proxy_=Ee(n),de(Ee(n),Oe,r),t&&t.length){var s=St(!0);n.spliceWithArray(0,0,t),Ct(s)}return n}we(o,e);var a=o.prototype;return a.concat=function(){this[Oe].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return so(e)?e.slice():e})))},a[i]=function(){var e=this,t=0;return Ro({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},_e(o,[{key:"length",get:function(){return this[Oe].getArrayLength_()},set:function(e){this[Oe].setArrayLength_(e)}},{key:t,get:function(){return"Array"}}]),o}(So,Symbol.toStringTag,Symbol.iterator);function No(e){G(Co.prototype,""+e,function(e){return{enumerable:!1,configurable:!0,get:function(){return this[Oe].get_(e)},set:function(t){this[Oe].set_(e,t)}}}(e))}function To(e){if(e>Eo){for(var t=Eo;t<e+100;t++)No(t);Eo=e}}function ko(e,t,i){return new Co(e,t,i)}function Oo(e,t){if("object"==typeof e&&null!==e){if(so(e))return void 0!==t&&j(23),e[Oe].atom_;if(go(e))return e[Oe];if(uo(e)){if(void 0===t)return e.keysAtom_;var i=e.data_.get(t)||e.hasMap_.get(t);return i||j(25,t,Lo(e)),i}if(xo(e)){if(!t)return j(26);var o=e[Oe].values_.get(t);return o||j(27,t,Lo(e)),o}if(Le(e)||Lt(e)||li(e))return e}else if(oe(e)&&li(e[Oe]))return e[Oe];j(28)}function Po(e,t){return e||j(29),void 0!==t?Po(Oo(e,t)):Le(e)||Lt(e)||li(e)||uo(e)||go(e)?e:e[Oe]?e[Oe]:void j(24,e)}function Lo(e,t){var i;if(void 0!==t)i=Oo(e,t);else{if(wi(e))return e.name;i=xo(e)||uo(e)||go(e)?Po(e):Oo(e)}return i.name_}Object.entries(to).forEach((function(e){var t=e[0],i=e[1];"concat"!==t&&le(Co.prototype,t,i)})),To(1e3);var Bo=X.toString;function Mo(e,t,i){return void 0===i&&(i=-1),Ho(e,t,i)}function Ho(e,t,i,o,a){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var n=typeof e;if("function"!==n&&"object"!==n&&"object"!=typeof t)return!1;var r=Bo.call(e);if(r!==Bo.call(t))return!1;switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":i>=0&&i++}e=Do(e),t=Do(t);var s="[object Array]"===r;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var l=e.constructor,d=t.constructor;if(l!==d&&!(oe(l)&&l instanceof l&&oe(d)&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}if(0===i)return!1;i<0&&(i=-1),a=a||[];for(var c=(o=o||[]).length;c--;)if(o[c]===e)return a[c]===t;if(o.push(e),a.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!Ho(e[c],t[c],i-1,o,a))return!1}else{var h,u=Object.keys(e);if(c=u.length,Object.keys(t).length!==c)return!1;for(;c--;)if(!fe(t,h=u[c])||!Ho(e[h],t[h],i-1,o,a))return!1}return o.pop(),a.pop(),!0}function Do(e){return so(e)?e.slice():he(e)||uo(e)||ue(e)||go(e)?Array.from(e.entries()):e}function Ro(e){return e[Symbol.iterator]=zo,e}function zo(){return this}function Io(e){return e instanceof Object&&"string"==typeof e.annotationType_&&oe(e.make_)&&oe(e.extend_)}["Symbol","Map","Set"].forEach((function(e){void 0===V()[e]&&j("MobX requires global '"+e+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return"production"===process.env.NODE_ENV?(console.warn("[mobx.spy] Is a no-op in production builds"),function(){}):(Wt.spyListeners.push(e),te((function(){Wt.spyListeners=Wt.spyListeners.filter((function(t){return t!==e}))})))},extras:{getDebugName:Lo},$mobx:Oe});const $o={defaultSettings:{type:"string"},format:{"simple-fields":{defaultSettings:{type:"object",format:"simple-fields"}}},inputMethod:{alt:{defaultSettings:{type:"string",format:"alt"}},array:{defaultSettings:{type:"array"},properties:{label:"itemLabel"}},boolean:{defaultSettings:{type:"boolean"}},code:{defaultSettings:{type:"markup"}},"code-editor":{defaultSettings:{type:"markup"}},color:{defaultSettings:{type:"string",format:"color"}},colorpicker:{defaultSettings:{type:"string",format:"colorpicker"}},"date-time":{defaultSettings:{type:"string",format:"date-time"}},datepicker:{defaultSettings:{type:"string",format:"date"}},fieldset:{defaultSettings:{type:"object"}},fileupload:{defaultSettings:{type:"string",format:"fileupload"}},haxupload:{defaultSettings:{type:"string",format:"fileupload"}},iconpicker:{defaultSettings:{type:"string",format:"iconpicker"}},markup:{defaultSettings:{type:"markup"}},"md-block":{defaultSettings:{type:"markup",format:"md-block"}},monthpicker:{defaultSettings:{type:"string",format:"month"}},number:{defaultSettings:{type:"number"}},object:{defaultSettings:{type:"object"}},select:{defaultSettings:{type:"string",format:"select"}},slider:{defaultSettings:{type:"number",format:"slider"}},tabs:{defaultSettings:{type:"object",format:"tabs"}},textarea:{defaultSettings:{type:"string",format:"textarea"}},timepicker:{defaultSettings:{type:"string",format:"time"}},weekpicker:{defaultSettings:{type:"string",format:"week"}}}},jo={defaultSettings:{element:"simple-fields-field",errorProperty:"errorMessage",invalidProperty:"invalid",noWrap:!0,attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},format:{radio:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"radio"},properties:{options:"options"},child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},select:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"select"},properties:{options:"options",items:"itemsList"}}},"simple-picker":{defaultSettings:{element:"simple-picker",attributes:{autofocus:!0},properties:{options:"options"}}}},type:{array:{defaultSettings:{element:"simple-fields-array",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},boolean:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"checkbox",value:!1}}},file:{defaultSettings:{import:"@lrnwebcomponents/hax-body/lib/hax-upload-field.js",element:"hax-upload-field",noWrap:!0,attributes:{autofocus:!0,type:"file"},properties:{accepts:"accepts"}}},integer:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},markup:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-code.js",element:"simple-fields-code",setValueProperty:"editorValue",noWrap:!0},format:{"md-block":{defaultSettings:{element:"md-block",setValueProperty:"source",noWrap:!0}}}},number:{defaultSettings:{element:"simple-fields-field",noWrap:!0,type:"number",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0},format:{cardlist:{defaultSettings:{element:"hax-element-card-list",noWrap:!0}},tabs:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tabs.js",element:"simple-fields-tabs",noWrap:!0,child:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tab.js",element:"simple-fields-tab",noWrap:!0,labelSlot:"label",descriptionSlot:""},properties:{layoutBreakpoint:"layoutBreakpoint",iconBreakpoint:"iconBreakpoint",sticky:"sticky"}}},fields:{defaultSettings:{element:"simple-fields",noWrap:!0,descriptionProperty:"description",properties:{schema:"schema"}}}}},string:{format:{alt:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,required:!0}}},color:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"color"}}},colorpicker:{defaultSettings:{import:"@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js",element:"simple-colors-picker",attributes:{autofocus:!0}}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},"date-time":{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"datetime-local"}}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},email:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"email"}}},fileupload:{defaultSettings:{import:"@lrnwebcomponents/hax-body/lib/hax-upload-field.js",element:"hax-upload-field",noWrap:!0,attributes:{autofocus:!0},properties:{accepts:"accepts"}}},iconpicker:{defaultSettings:{import:"@lrnwebcomponents/simple-icon-picker/simple-icon-picker.js",element:"simple-icon-picker",attributes:{autofocus:!0}}},month:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"month"}}},textarea:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"textarea"}}},time:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"time"}}},uri:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"},properties:{accepts:"accepts"}}}}}}};
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Fo{constructor(){this.haxProperties={type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,settings:{configure:[],advanced:[]},wipeSlot:{}},this.setup=(e,t="",i=this)=>(void 0!==this.tagName&&(t=this.tagName.toLowerCase()),window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),void 0!==window.HaxStore&&null!=window.HaxStore.instance&&window.HaxStore.instance.ready?this.setHaxProperties(e,t,i,!0):this.setHaxProperties(e,t,i,!1)),this._haxStoreReady=e=>{if(e.detail&&void 0!==this.tagName&&void 0!==this.haxProperties){let e=this.tagName,t=this.haxProperties,i=this;if(""!=e&&void 0===window.HaxStore){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:e.toLowerCase(),properties:t}});i.dispatchEvent(o)}else if(""!=e&&void 0===window.HaxStore.instance.elementList[e.toLowerCase()]){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:e.toLowerCase(),properties:t}});i.dispatchEvent(o)}else if(void 0!==this.tagName&&void 0===window.HaxStore.instance.elementList[this.tagName.toLowerCase()]){const e=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:this.tagName.toLowerCase(),properties:t}});i.dispatchEvent(e)}}},this.setHaxProperties=async(e={},t="",i=document,o=!1)=>{if("string"==typeof e&&(e=await fetch(e).then((e=>!(!e||!e.json)&&e.json()))),void 0===e.api&&(e.api="1"),"1"==e.api){var a;if(void 0===e.type&&(e.type="element"),void 0===e.editingElement&&(e.editingElement="core"),void 0===e.canPosition&&(e.canPosition=!0),void 0===e.canScale&&(e.canScale=!0),void 0===e.canEditSource&&(e.canEditSource=!1),void 0===e.contentEditable&&(e.contentEditable=!1),void 0===e.gizmo)e.gizmo=!1;else if(void 0!==e.gizmo.iconLib)a=window.WCGlobalBasePath?window.WCGlobalBasePath:new URL("./../../../",import.meta.url).href,import(`${a}${e.gizmo.iconLib}`);if(void 0!==e.settings){void 0===e.settings.configure&&(e.settings.configure=[]);for(let t=0;t<e.settings.configure.length;t++)e.settings.configure[t]=this.validateSetting(e.settings.configure[t]),e.settings.configure[t]||e.settings.configure.splice(t,1);void 0===e.settings.advanced&&(e.settings.advanced=[]);for(let t=0;t<e.settings.advanced.length;t++)e.settings.advanced[t]=this.validateSetting(e.settings.advanced[t]),e.settings.advanced[t]||e.settings.advanced.splice(t,1);e=this.standardAdvancedProps(e)}void 0===e.saveOptions&&(e.saveOptions={wipeSlot:!1}),void 0===e.demoSchema&&(e.demoSchema=[]),o&&this.readyToFireHAXSchema(t,e,i),""===t&&("function"==typeof this._setHaxProperties?this._setHaxProperties(e):this.haxProperties=e)}else console.warn("This is't a valid usage of hax API. See hax-body-behaviors/lib/HAXWiring.js for more details on how to implement the API. https://haxtheweb.org/hax-schema for details but we will try and guess the wiring")},this.readyToFireHAXSchema=(e,t,i)=>{if(""!=e&&void 0===window.HaxStore){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:e.toLowerCase(),properties:t}});i.dispatchEvent(o)}else if(""!=e){const o=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:e.toLowerCase(),properties:t}});i.dispatchEvent(o)}else if(void 0!==this.tagName){const e=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:this.tagName.toLowerCase(),properties:t}});i.dispatchEvent(e)}else if(void 0!==i.tagName){const e=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:i.tagName.toLowerCase(),properties:t}});i.dispatchEvent(e)}else console.warn(i),console.warn(`${e} missed our checks and has an issue in implementation with HAX`)},this.standardAdvancedProps=e=>(e.settings.advanced.push({attribute:"data-hax-lock",title:"Lock editing",description:"Prevent changes to this element and all its content",inputMethod:"boolean"}),e.settings.advanced.push({attribute:"class",title:"Classes",description:"CSS classes applied manually to the element",inputMethod:"textfield"}),e.settings.advanced.push({attribute:"style",title:"Styles",description:"Custom CSS styles as applied to the element",inputMethod:"textfield"}),e.settings.advanced.push({attribute:"prefix",title:"Schema: prefix",description:"Schema prefixes",inputMethod:"textfield"}),e.settings.advanced.push({attribute:"typeof",title:"Schema: TypeOf",description:"typeof definition for Schema usage",inputMethod:"textfield"}),e.settings.advanced.push({attribute:"property",title:"Schema: Property",description:"typeof definition for Schema usage",inputMethod:"textfield"}),e.settings.advanced.push({attribute:"resource",title:"Schema: Resource ID",description:"Schema resource identifier",inputMethod:"textfield"}),e.settings.advanced.push({attribute:"id",title:"ID",description:"element ID, only set this if you know why",inputMethod:"textfield"}),e.settings.advanced.push({attribute:"slot",title:"slot",description:"DOM slot area",inputMethod:"textfield"}),e),this.validateSetting=e=>(void 0!==e.property||void 0!==e.slot||void 0!==e.attribute)&&(void 0===e.title&&(void 0===e.attribute?e.title=e.property:e.title=e.attribute),void 0===e.description&&(e.description=""),void 0===e.inputMethod&&(e.inputMethod="textfield"),void 0===e.type&&(e.type="settings"),void 0===e.icon&&(e.icon="android"),void 0===e.options&&(e.options={}),void 0===e.required&&(e.required=!1),void 0===e.disabled&&(e.disabled=!1),void 0===e.validation&&(e.validation=".*"),void 0===e.validationType&&(e.validationType=""),void 0!==e.slot&&(void 0===e.slotWrapper&&(e.slotWrapper="span"),void 0===e.slotAttributes&&(e.slotAttributes={})),e),this.getHaxProperties=()=>this.haxProperties,this.getHaxJSONSchema=(e,t,i=this)=>{void 0===e&&(e="configure"),void 0===t&&(t=i.haxProperties);let o=t.settings[e];var a={$schema:"http://json-schema.org/schema#",title:"HAX "+e+" form schema",type:"object",properties:{}};if(a.properties=(new L).fieldsToSchema(o),t.gizmo&&t.gizmo.tag&&window.customElements.get(t.gizmo.tag)){let e=document.createElement(t.gizmo.tag);a="function"==typeof e.postProcessgetHaxJSONSchema?e.postProcessgetHaxJSONSchema(a):i.postProcessgetHaxJSONSchema(a)}else a=i.postProcessgetHaxJSONSchema(a);return a},this.postProcessgetHaxJSONSchema=e=>e,this._getHaxJSONSchemaProperty=e=>(new L).fieldsToSchema(e),this.getHaxJSONSchemaType=e=>{var t=(new L).fieldsConversion.inputMethod[e]||(new L).fieldsConversion;return t&&t.defaultSettings&&t.defaultSettings.type?t.defaultSettings.type:"string"},this.validHAXPropertyInputMethod=()=>Object.keys((new L).fieldsConversion.inputMethod),this.prototypeHaxProperties=()=>({api:"1",canScale:!0,canPosition:!0,canEditSource:!0,contentEditable:!1,gizmo:{title:"Tag name",description:"",icon:"icons:android",color:"purple",groups:["Content"],handles:[{type:"data",type_exclusive:!1,url:"src"}],meta:{author:"auto"},requiresChildren:!1,requiresParent:!1},settings:{configure:[{slot:"",title:"Inner content",description:"The slotted content that lives inside the tag",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{slot:"button",title:"Button content",description:"The content that can override the button",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"title",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"primaryColor",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!1,validation:".*",validationType:"text"}],advanced:[{property:"secondaryColor",title:"Secondary color",description:"An optional secondary color used in certain edge cases.",inputMethod:"colorpicker",icon:"color"},{property:"endPoint",title:"API endpoint",description:"An optional endpoint to hit and load in more data dymaically.",inputMethod:"textfield",icon:"android",validation:"[a-z0-9]",validationType:"url"}]},saveOptions:{wipeSlot:!1,unsetAttributes:["end-point","secondary-color"]},demoSchema:[{tag:"my-tag",content:"<p>inner html</p>",properties:{endPoint:"https://cdn2.thecatapi.com/images/9j5.jpg",primaryColor:"yellow",title:"A cat"}}]})}}const Vo=function(e){return class extends e{constructor(){super(),this.HAXWiring=new Fo}static get properties(){return{...super.properties,haxProperties:window.HAXWiring.haxProperties}}setHaxProperties(e,t="",i=this){return""==t&&void 0!==this.tagName&&(t=this.tagName.toLowerCase()),window.HaxStore&&null!=window.HaxStore.instance&&window.HaxStore.instance.ready?this.HAXWiring.setHaxProperties(e,t,i,!0):(window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),this.HAXWiring.setHaxProperties(e,t,i,!1))}disconnectedCallback(){window.removeEventListener("hax-store-ready",this._haxStoreReady.bind(this)),super.disconnectedCallback&&super.disconnectedCallback()}setup(e,t="",i=this){return this.HAXWiring.setup(e,"",this)}_haxStoreReady(e){return this.HAXWiring._haxStoreReady(e)}validateSetting(e){return this.HAXWiring.validateSetting(e)}getHaxProperties(){return this.haxProperties}getHaxJSONSchema(e,t,i=this){return this.HAXWiring.getHaxJSONSchema(e,t,i)}postProcessgetHaxJSONSchema(e){return this.HAXWiring.postProcessgetHaxJSONSchema(e)}_getHaxJSONSchemaProperty(e){return(new L).fieldsToSchema(e)}getHaxJSONSchemaType(e){return this.HAXWiring.getHaxJSONSchemaType(e)}validHAXPropertyInputMethod(){return this.HAXWiring.validHAXPropertyInputMethod()}prototypeHaxProperties(){return this.HAXWiring.prototypeHaxProperties()}}};window.HAXWiring=new Fo,window.HAXBehaviors=window.HAXBehaviors||{},window.HAXBehaviors.PropertiesBehaviors={properties:{haxProperties:window.HAXWiring.haxProperties},setHaxProperties:function(e,t="",i=this){return""==t&&void 0!==this.tagName&&(t=this.tagName.toLowerCase()),window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),void 0!==window.HaxStore&&null!=window.HaxStore.instance&&window.HaxStore.instance.ready?window.HAXWiring.setHaxProperties(e,t,i,!0):window.HAXWiring.setHaxProperties(e,t,i,!1)},_haxStoreReady:function(e){return window.HAXWiring._haxStoreReady(e)},validateSetting:function(e){return window.HAXWiring.validateSetting(e)},getHaxProperties:function(){return this.haxProperties},getHaxJSONSchema:function(e,t,i=this){return window.HAXWiring.getHaxJSONSchema(e,t,i)},postProcessgetHaxJSONSchema:function(e){return window.HAXWiring.postProcessgetHaxJSONSchema(e)},_getHaxJSONSchemaProperty:function(e){return(new L).fieldsToSchema(e)},getHaxJSONSchemaType:function(e){return window.HAXWiring.getHaxJSONSchemaType(e)},validHAXPropertyInputMethod:function(){return window.HAXWiring.validHAXPropertyInputMethod()},prototypeHaxProperties:function(){return window.HAXWiring.prototypeHaxProperties()}},window.MediaBehaviors=window.MediaBehaviors||{},window.MediaBehaviors.Video={_sourceIsIframe(e){return"local"!=this.getVideoType(e)},cleanVideoSource(e,t){if("local"!=t&&"string"==typeof e){var i=e.split("?"),o="";if(e=i[0],2==i.length){let e=i[1].split("&"),t=e[0].split("="),a=Array.isArray(e.shift())?e.shift().join(""):e.shift();if("v"==t[0]){let e=void 0!==a&&""!==a?"?"+a:"";o=t[1]+e}}if(-1==e.indexOf("player.vimeo.com")&&-1!=e.indexOf("vimeo.com"))return-1!=e.indexOf("/videos/")&&(e=e.replace("/videos/","/")),e.replace("vimeo.com/","player.vimeo.com/video/");if(-1!=e.indexOf("youtube.com/watch"))return e.replace("youtube.com/watch","youtube.com/embed/")+o;if(-1!=e.indexOf("youtube-no-cookie.com/"))return e.replace("youtube-no-cookie.com/","youtube.com/")+o;if(-1!=e.indexOf("youtu.be"))return e.replace("youtu.be/","www.youtube.com/embed/")+o;if(-1!=e.indexOf("sketchfab.com")&&-1==e.indexOf("/embed"))return e+"/embed";if(-1!=e.indexOf("dailymotion.com")&&-1==e.indexOf("/embed"))return e.replace("/video/","/embed/video/")}return e},getVideoType(e){let t=["aac","flac","mov","mp3","mp4","oga","ogg","ogv","wav","webm"],i=!1;if(-1!=e.indexOf("vimeo"))return"vimeo";if(-1!=e.indexOf("youtube")||-1!=e.indexOf("youtu.be"))return"youtube";if(-1!=e.indexOf("sketchfab.com"))return"sketchfab";if(-1!=e.indexOf("dailymotion.com"))return"dailymotion";for(let o=0;o<t.length;o++)!i&&e.toLowerCase().indexOf("."+t[o])>-1&&(i=!0);return i?"local":"external"}},
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
window.SimpleToast=window.SimpleToast||{},window.SimpleToast.requestAvailability=()=>(window.SimpleToast.instance||(window.SimpleToast.instance=document.createElement("simple-toast"),document.body.appendChild(window.SimpleToast.instance)),window.SimpleToast.instance),window.SimpleToast.requestAvailability();class Uo extends t{static get styles(){return[...super.styles,i`:host{display:block}:host([hidden]){display:none}simple-toast-el{box-shadow:0 2px 5px 0 rgba(0,0,0,.26);width:var(--simple-toast-width,auto);color:var(--simple-toast-color,var(--simple-colors-default-theme-accent-1,#fff));background-color:var(--simple-toast-bg,var(--simple-colors-default-theme-accent-12,#000));top:var(--simple-toast-top);margin:var(--simple-toast-margin,8px);padding:var(--simple-toast-padding,16px);left:var(--simple-toast-left,36px);bottom:var(--simple-toast-bottom,36px);right:var(--simple-toast-right);border:var(--simple-toast-border);z-index:var(--simple-toast-z-index,1000);font-size:var(--simple-toast-font-size)}button{margin-left:8px}`]}render(){return o` <simple-toast-el id="toast" accent-color="${this.accentColor}" ?dark="${this.dark}" text="${this.text}" duration="${this.duration}" ?opened="${this.opened}" @opened-changed="${this.openedChanged}" .class="${this.classStyle}"> <slot></slot> <button .hidden="${!this.closeButton}" @click="${this.hide}">${this.closeText}</button> </simple-toast-el>`}static get properties(){return{...super.properties,opened:{type:Boolean,reflect:!0},text:{type:String},classStyle:{type:String,attribute:"class-style"},closeText:{type:String,attribute:"close-text"},duration:{type:Number},eventCallback:{type:String,attribute:"event-callback"},closeButton:{type:Boolean,reflect:!0,attribute:"close-button"}}}static get tag(){return"simple-toast"}constructor(){super(),this.setDefaultToast()}connectedCallback(){super.connectedCallback(),window.addEventListener("simple-toast-hide",this.hideSimpleToast.bind(this)),window.addEventListener("simple-toast-show",this.showSimpleToast.bind(this))}disconnectedCallback(){window.removeEventListener("simple-toast-hide",this.hideSimpleToast.bind(this)),window.removeEventListener("simple-toast-show",this.showSimpleToast.bind(this)),super.disconnectedCallback()}hideSimpleToast(e){this.hide()}openedChanged(e){this.opened=e.detail.value}setDefaultToast(){for(this.opened=!1,this.text="Saved",this.classStyle="",this.closeText="Close",this.duration=3e3,this.accentColor="grey",this.dark=!1,this.eventCallback=null,this.closeButton=!0;null!==this.firstChild;)this.removeChild(this.firstChild)}showSimpleToast(e){this.setDefaultToast(),e.detail.duration&&(this.duration=e.detail.duration),e.detail.text&&(this.text=e.detail.text),e.detail.classStyle&&(this.classStyle=e.detail.classStyle),e.detail.closeText&&(this.closeText=e.detail.closeText),e.detail.closeButton&&(this.closeButton=e.detail.closeButton),e.detail.eventCallback&&(this.eventCallback=e.detail.eventCallback),e.detail.slot&&this.appendChild(e.detail.slot),e.detail.accentColor&&(this.accentColor=e.detail.accentColor),e.detail.dark&&(this.dark=e.detail.dark),this.show()}show(e){this.opened=!0}hide(e){if(this.eventCallback){const e=new CustomEvent(this.eventCallback,{bubbles:!0,cancelable:!0,detail:!0,composed:!0});this.dispatchEvent(e)}this.opened=!1}}window.customElements.define(Uo.tag,Uo);class qo extends HTMLElement{constructor(){super(),this.eventName="hax-register-app"}static get tag(){return"hax-app"}connectedCallback(){void 0!==this.data&&("string"==typeof this.data&&(this.data=JSON.parse(this.data)),this.dispatchEvent(new CustomEvent(this.eventName,{bubbles:!0,composed:!0,cancelable:!1,detail:this.data})))}}window.customElements.define(qo.tag,qo);class Go extends qo{constructor(){super(),this.eventName="hax-register-stax"}static get tag(){return"hax-stax"}}window.customElements.define(Go.tag,Go),function(e){!0===e.isolateGlobalState&&function(){if((Wt.pendingReactions.length||Wt.inBatch||Wt.isRunningReactions)&&j(36),Xt=!0,Gt){var e=V();0==--e.__mobxInstanceCount&&(e.__mobxGlobals=void 0),Wt=new qt}}();var t,i,o=e.useProxies,a=e.enforceActions;if(void 0!==o&&(Wt.useProxies="always"===o||"never"!==o&&"undefined"!=typeof Proxy),"ifavailable"===o&&(Wt.verifyProxies=!0),void 0!==a){var n="always"===a?"always":"observed"===a;Wt.enforceActions=n,Wt.allowStateChanges=!0!==n&&"always"!==n}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach((function(t){t in e&&(Wt[t]=!!e[t])})),Wt.allowStateReads=!Wt.observableRequiresReaction,"production"!==process.env.NODE_ENV&&!0===Wt.disableErrorBoundaries&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),e.reactionScheduler&&(t=e.reactionScheduler,i=ni,ni=function(e){return t((function(){return i(e)}))})}({enforceActions:!1,useProxies:"ifavailable"});function Xo(e){try{return localStorage.getItem(e)}catch(e){return!1}}function Wo(e,t){try{return localStorage.setItem(e,t)}catch(e){return!1}}function Yo(e){try{return sessionStorage.getItem(e)}catch(e){return!1}}function Jo(e,t){try{return sessionStorage.setItem(e,t)}catch(e){return!1}}const Ko={attribute:"data-style-decoration",title:"Decoration",description:"Some built in styles to offset the material",inputMethod:"select",options:{"":"","highlight red":"Highlight (red)","highlight blue":"Highlight (blue)","highlight green":"Highlight (green)","highlight orange":"Highlight (orange)","highlight purple":"Highlight (purple)"}};class Qo extends(R(n(Vo(p)))){testHook(e,t){return e&&"function"==typeof e.haxHooks&&e.haxHooks()[t]}async runHook(e,t,i=[]){return!!this.testHook(e,t)&&await e[e.haxHooks()[t]](...i)}getSelection(){if(this.activeHaxBody&&this.activeHaxBody.parentNode){if(this.activeHaxBody.parentNode.getSelection)return this.activeHaxBody.parentNode.getSelection();try{if(r(this.activeHaxBody.parentNode))return r(this.activeHaxBody.parentNode)}catch(e){}}return window.getSelection()}getRange(){let e=this.getSelection();return e.getRangeAt&&e.rangeCount?e.getRangeAt(0):e||void 0}guessGizmo(e,t,i=!1,o=!1){var a=[],n=[];if(void 0!==e&&this.validGizmoTypes.includes(e))for(var r in this.gizmoList){let d=this.gizmoList[r],c=t.innerHTML?{innerHTML:t.innerHTML}:{},h=!1;if(d&&d.handles)for(var s=0;s<d.handles.length;s++)if(e===d.handles[s].type||"*"===e&&!h){for(var l in d.handles[s])"type"!==l&&void 0!==t[l]&&("inline"!==e&&d.meta&&(!d.meta||d.meta.inlineOnly||d.meta.hidden)||(h=!0,c[d.handles[s][l]]=t[l]));if(h||i){if(o&&d.handles[s].type_exclusive)return[this.haxElementPrototype(d,c,"")];{let e={};[...d.handles].forEach((t=>{t&&t.type&&""!=t.type&&(e[t.type.toLowerCase()]=!0)})),[...d.groups].forEach((t=>{t&&""!=t&&(e[t.toLowerCase()]=!0)})),d.keywords=Object.keys(e),n.includes(d.tag)||(a.push(this.haxElementPrototype(d,c,"")),n.push(d.tag))}}}}return a}insertLogicFromValues(e,t,i=!1,o=!1){let a=this.guessGizmoType(e),n=a,r=!0;if("*"==a){if(i)return!1;r=!1,n="link"}let s=this.guessGizmo(a,e,!1,r);return s.length>0?(1===s.length||o?1===s.length&&void 0!==s[0].tag?t.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:s[0]})):o&&t.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:s.find((e=>"a"==e.tag))})):this.haxAppPicker.presentOptions(s,a,"Pick how to present this "+n,"gizmo"),!0):(this.toast("Sorry, HAX doesn't know how to handle that type of link yet."),!1)}write(e,t,i){i&&i.dispatchEvent(new CustomEvent("hax-store-write",{composed:!0,bubbles:!0,cancelable:!1,detail:{property:e,value:t,owner:i}}))}mimeTypeToGizmoType(e){let t=e.split("/");switch(t[0]){case"audio":return"audio";case"image":return"svg+xml"==t[1]?"svg":"image";case"video":return"video";case"text":return["csv","html","markdown"].includes(t[1])?t[1]:"document";case"application":return"pdf"==t[1]?"pdf":["zip","gzip","x-tar"].includes(t[1])?"archive":"document"}}guessGizmoType(e){if(void 0!==e.source){const t=e.source.toLowerCase();if(-1!=t.indexOf(".mp3")||-1!=t.indexOf(".midi")||-1!=t.indexOf(".mid"))return"audio";if(-1!=t.indexOf(".png")||-1!=t.indexOf(".jpg")||-1!=t.indexOf(".jpeg")||-1!=t.indexOf(".gif"))return"image";if(-1!=t.indexOf(".pdf"))return"pdf";if(-1!=t.indexOf(".svg"))return"svg";if(-1!=t.indexOf(".csv"))return"csv";if(-1!=t.indexOf(".md"))return"markdown";if(-1!=t.indexOf(".html")||-1!=t.indexOf(".htm"))return"html";if(-1!=t.indexOf(".txt")||-1!=t.indexOf(".doc")||-1!=t.indexOf(".docx")||-1!=t.indexOf(".xls")||-1!=t.indexOf(".xlsx")||-1!=t.indexOf(".vtt")||-1!=t.indexOf(".ppt"))return"document";if(-1!=t.indexOf(".zip")||-1!=t.indexOf(".tar.gz")||-1!=t.indexOf(".tar"))return"archive";if("external"!=window.MediaBehaviors.Video.getVideoType(t))return"video"}return"*"}render(){return o` <slot></slot> `}static get tag(){return"hax-store"}toast(e,t=2e3,i="capsule",o=this.t.close,a=null){window.dispatchEvent(new CustomEvent("simple-toast-show",{bubbles:!0,composed:!0,cancelable:!0,detail:{text:e,duration:t,classStyle:i,closeText:o,eventCallback:a}}))}static get properties(){return{...super.properties,voiceDebug:{type:Boolean,attribute:"voice-debug"},voiceRespondsTo:{type:String,attribute:"voice-responses-to"},skipHAXConfirmation:{type:Boolean,reflect:!0,attribute:"skip-hax-confirmation"},storageData:{type:Object},haxTray:{type:Object},haxCancel:{type:Object},haxAutoloader:{type:Object},haxBodies:{type:Array},activePlaceHolder:{type:Object},appStore:{type:Object},sessionObject:{type:Object},skipExitTrap:{type:Boolean},elementList:{type:Object},staxList:{type:Array},validTagList:{type:Array},validGridTagList:{type:Array},validGizmoTypes:{type:Array},_isSandboxed:{type:Boolean},__appStoreData:{type:Object},ready:{type:Boolean},connectionRewrites:{type:Object}}}_storageDataChanged(e){e&&this.ready&&this.__storageDataProcessed&&(Xo("haxConfirm")?Wo("haxUserData",JSON.stringify(e)):Yo("haxConfirm")&&Jo("haxUserData",JSON.stringify(e)))}isSingleSlotElement(e){let t=Object.keys(this.slotsSchemaFromNode(e));return 1==t.length&&0===t[0].length}isTextElement(e){let t;return null!=e&&e.tagName?t=e.tagName.toLowerCase():null!=e&&e.tag&&(t=e.tag.toLowerCase()),!!(t&&this.validTagList.includes(t)&&["p","ol","ul","li","a","h1","h2","h3","h4","h5","h6","strike","u","b","sub","sup","span","i","bold","em","strong","blockquote","code","figure"].includes(t))}isGridPlateElement(e){let t;return e&&e.tagName?t=e.tagName.toLowerCase():e&&e.tag&&(t=e.tag.toLowerCase()),!(!t||!this.validGridTagList.includes(t))}isLayoutElement(e){let t=e&&e.tagName&&this.haxSchemaFromTag(e.tagName)||{};return t.type&&"grid"===t.type}isLayoutSlot(e){return!(!e||!e.parentNode)&&this.isLayoutElement(e.parentNode)}isOriginalGridPlate(e){return!!e&&"GRID-PLATE"===e.tagName}activeSchema(){return this.activeNode?this.haxSchemaFromTag(this.activeNode.tagName):void 0}activeParentSchema(){return this.activeNode&&this.activeNode.parentNode?this.haxSchemaFromTag(this.activeNode.parentNode.tagName):void 0}slottedContentByNode(e){let t={...this.slotsSchemaFromNode(e)||{}};return e?([...e.children||[]].forEach((e=>{e.slot&&""!==e.slot&&t[e.slot]?(t[e.slot].items=t[e.slot].items||[],t[e.slot].items.push(e)):e.slot&&""!==e.slot||!t[""]||(t[""].items=t[""].items||[],t[""].items.push(e))})),t):t}slotsSchemaFromNode(e){if(!e||!e.tagName)return{};let t={},i=this.haxSchemaFromTag(e.tagName||{}),o=this.slotsFromSchema(i);if(this.isOriginalGridPlate(e)){(e.layout||"1-1-1-1").split("-").map(((e,t)=>{o.push({slot:`col-${t+1}`,title:`Column ${t+1}`,excludedSlotWrappers:["grid-plate"]})}))}return o.forEach((o=>{o.items=void 0,o.label=o.title||o.slot,o.editMode={...i.editMode,...o.editMode},o.grid=e,(o.slot||""===o.slot)&&(t[o.slot]=o)})),t}schemaBySlotId(e,t){return(this.slotsSchemaFromNode(e)||{})[t]}_appStoreChanged(e,t){e&&t&&(e.url&&!e.apps&&this.shadowRoot?this.loadAppStoreFromRemote():this.__appStoreData=e)}async _loadAppStoreData(e){if(null!=e){var t={};if(void 0!==e.autoloader)for(var i in e.autoloader=Object.assign({},e.autoloader),e.autoloader){let o=i,a=e.autoloader[i];isNaN(o)||(o=e.autoloader[i],a=`@lrnwebcomponents/${o}/${o}.js`),"string"!=typeof a&&(a.haxProperties&&this.setHaxProperties(e.autoloader[i].haxProperties,o),a=e.autoloader[i].import),this.validTagList.push(o),t[o]=a}if(void 0!==e.apps){var o=e.apps;for(i=0;i<o.length;i++){let e=document.createElement("hax-app");e.data=o[i],this.appendChild(e)}}if(void 0!==e.stax){var a=e.stax;for(i=0;i<a.length;i++){let e=document.createElement("hax-stax");e.data=a[i],this.appendChild(e)}}this.dispatchEvent(new CustomEvent("hax-store-app-store-loaded",{bubbles:!0,cancelable:!0,composed:!0,detail:!0})),await this._handleDynamicImports(t,this.haxAutoloader),this.appStoreLoaded=!0}}async _handleDynamicImports(e,t){let i=new URL("./../../../",import.meta.url).href;for(var o in window.WCGlobalBasePath&&(i=window.WCGlobalBasePath),e)if(window.customElements.get(o))if(window.customElements.get(o).haxProperties)this.setHaxProperties(window.customElements.get(o).haxProperties,o);else try{let e=document.createElement(o);t.appendChild(e)}catch(e){}else{let a=`${i}${e[o]}`;this.isExternalURLImport(e[o])&&(a=e[o]),await import(a).then((e=>{window.customElements.get(o)&&window.customElements.get(o).haxProperties?this.setHaxProperties(window.customElements.get(o).haxProperties,o):t.appendChild(document.createElement(o))})).catch((e=>{console.warn(e),t.appendChild(document.createElement(o))}))}}isExternalURLImport(e){let t;try{t=new URL(e)}catch(e){return!1}return new URL(t).origin!==location.origin}_editModeChanged(e){this.__hal&&(e&&this.globalPreferences.haxVoiceCommands?this.__hal.auto=!0:this.__hal.auto=!1),e&&!this.appStoreLoaded&&this.__appStoreData&&this.haxAutoloader&&(clearTimeout(this.__readyToProcessAppStoreData),this._loadAppStoreData(this.__appStoreData))}async _globalPreferencesChanged(e){if(this.__storageDataProcessed&&e&&void 0!==e.haxVoiceCommands&&this.ready){let t=this.storageData;t.globalPreferences=e,this.storageData=t,this._storageDataChanged(this.storageData),e.haxVoiceCommands&&!this.__hal&&import("./52437638.js").then((e=>{this._initVoiceCommands(),this.__hal=document.createElement("hal-9000"),this.__hal.respondsTo=this.voiceRespondsTo,this.__hal.debug=this.voiceDebug,this.__hal.auto=!0,this.shadowRoot.appendChild(this.__hal),this.__hal.commands={...this.voiceCommands}})),this.__hal&&(e.haxVoiceCommands&&this.editMode?this.__hal.auto=!0:this.__hal.auto=!1),e.haxLang&&Zo.editMode&&(clearTimeout(this._debounceLang),this._debounceLang=setTimeout((async()=>{for(var e in this.elementList){let t=this.elementList[e];t=await this.attemptGizmoTranslation(e,t),this.elementList[e]=t}this.gizmoList.forEach((e=>{this.elementList[e.tag].gizmo.title&&(e.title=this.elementList[e.tag].gizmo.title),this.elementList[e.tag].gizmo.description&&(e.description=this.elementList[e.tag].gizmo.description)}))}),100))}}_haxContextOperation(e){let t=e.detail;if(this.activeNode){let e=!1;switch(t.eventName){case"hax-align-left":this.activeNode.style.float=null,this.activeNode.style.margin=null,this.activeNode.style.display=null,e=!0;break;case"hax-align-center":this.activeNode.style.float=null,this.activeNode.style.margin="0 auto",this.activeNode.style.display="block",e=!0;break;case"hax-align-right":this.activeNode.style.float="right",this.activeNode.style.margin="0 auto",this.activeNode.style.display="block",e=!0;break;case"hax-size-change":100==t.value?this.activeNode.style.width=null:this.activeNode.style.width=t.value+"%",e=!0}e&&(clearTimeout(this.__repositionMenu),this.__repositionMenu=setTimeout((()=>{this.activeHaxBody.positionContextMenus()}),0))}}_haxConsentTap(e){Wo("haxConfirm",!0),Wo("haxUserData",JSON.stringify(this.storageData))}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"appStore"==t&&this[t]&&this._appStoreChanged(this[t],e),["ready","__appStoreData","haxAutoloader"].includes(t)&&this.ready&&this.__appStoreData&&this.haxAutoloader&&(clearTimeout(this.__readyToProcessAppStoreData),this.__readyToProcessAppStoreData=setTimeout((()=>{this._loadAppStoreData(this.__appStoreData)}),0)),["haxAutoloader","haxTray","haxCancel"].includes(t)&&(clearTimeout(this.__storeReady),this.__storeReady=setTimeout((()=>{this._storePiecesAllHere(this.haxAutoloader,this.activeHaxBody,this.haxTray,this.haxCancel)}),0))}))}_calculateActiveGizmo(e){if(null==e||!e.tagName)return null;for(var t in this.gizmoList){var i=this.gizmoList[t];if(i.tag===e.tagName.toLowerCase())return i}}loadAppStoreFromRemote(){const e=new URLSearchParams(this.appStore.params);let t=this.appStore.url;e&&(t+=`?${e}`),fetch(t,{method:this.method}).then((e=>{if(e.ok)return e.json()})).then((e=>{this.__appStoreData=e}))}firstUpdated(e){if(super.firstUpdated&&super.firstUpdated(e),this.skipHAXConfirmation&&(Jo("haxConfirm",!0),Wo("haxConfirm",!0)),Yo("haxConfirm")||Xo("haxConfirm"))if(Yo("haxConfirm")&&!Xo("haxConfirm"))try{let e=Yo("haxUserData")?JSON.parse(Yo("haxUserData")):{};this.storageData=e,this._storageDataChanged(this.storageData)}catch(e){}else try{let e=Xo("haxUserData")?JSON.parse(Xo("haxUserData")):{};this.storageData=e,this._storageDataChanged(this.storageData)}catch(e){}else{Jo("haxConfirm",!0);let e="\n    The HAX content editor keeps preferences in order to improve your experience.\n    This data is stored in your browser and is never sent anywhere.\n    Click to accept.\n    ";this.toast(e,"-1","fit-bottom","I Accept","hax-consent-tap")}setTimeout((()=>{this.__storageDataProcessed=!0,this.storageData.globalPreferences&&this.write("globalPreferences",this.storageData.globalPreferences,this)}),0)}_storePiecesAllHere(e,t,i,o){!this.ready&&t&&e&&i&&o&&(this.dispatchEvent(new CustomEvent("hax-store-ready",{bubbles:!0,cancelable:!1,composed:!0,detail:!0})),i.shadowRoot.querySelector("#haxcancelbutton")&&(o.shadowRoot.querySelector("#dialog").associateEvents(i.shadowRoot.querySelector("#haxcancelbutton")),o.shadowRoot.querySelector("#dialog")&&window.addEventListener("simple-modal-confirmed",this._handleConfirmCancel.bind(this))),this.ready=!0,this._buildPrimitiveDefinitions())}_handleConfirmCancel(e){e.detail.invokedBy===this.haxTray.shadowRoot.querySelector("#haxcancelbutton")&&(this.editMode=!1,this.dispatchEvent(new CustomEvent("hax-cancel",{bubbles:!0,composed:!0,cancelable:!1,detail:e.detail})))}_initVoiceCommands(){this.__voiceInit=!0,this.voiceCommands[`scroll up ${this.voiceRespondsTo}`]=()=>{window.scrollBy({top:-.5*window.innerHeight,left:0,behavior:"smooth"})},this.voiceCommands[`scroll (down) ${this.voiceRespondsTo}`]=()=>{window.scrollBy({top:.5*window.innerHeight,left:0,behavior:"smooth"})},this.voiceCommands[`scroll to bottom ${this.voiceRespondsTo}`]=()=>{window.scrollTo(0,document.body.scrollHeight)},this.voiceCommands[`scroll to top ${this.voiceRespondsTo}`]=()=>{window.scrollTo(0,0)},this.voiceCommands[`${this.voiceRespondsTo} (show)(focus) active (element)(content)`]=()=>{try{this._positionCursorInNode(this.activeNode)}catch(e){}},this.voiceCommands[`${this.voiceRespondsTo} (focus) previous (element)(content)`]=()=>{this.activeNode.previousElementSibling?(this.activeNode=this.activeNode.previousElementSibling,this.write("activeNode",this.activeNode,this),this._positionCursorInNode(this.activeNode)):this.speak("You are at the top of the document")},this.voiceCommands[`${this.voiceRespondsTo} (focus) next (element)(content)`]=()=>{this.activeNode.nextElementSibling?(this.activeNode=this.activeNode.nextElementSibling,this.write("activeNode",this.activeNode,this),this._positionCursorInNode(this.activeNode)):this.speak("You are at the bottom of the document")},this.voiceCommands[`${this.voiceRespondsTo} type *mycontent`]=e=>{if(this.isTextElement(this.activeNode))try{let t=this._positionCursorInNode(this.activeNode),i=document.createTextNode(e);t.deleteContents(),t.insertNode(i)}catch(e){this.speak("That didn't work"),console.warn(e)}else this.speak("I'm sorry but I can only type in text areas. Try saying Insert Paragraph and try again.")},this.voiceCommands[`hey ${this.voiceRespondsTo}`]=()=>{this.speak("Yeah what do you want")},this.voiceCommands[`${this.voiceRespondsTo} now your name is *splat`]=e=>{const t=this.voiceRespondsTo;this.speak(`I used to be named ${t} but you can call me ${e} now.`),this.voiceRespondsTo=`(${e})`}}speak(e){this.__hal&&this.__hal.speak&&this.__hal.speak(e),this.toast(`${this.voiceRespondsTo}: ${e}`)}addVoiceCommand(e,t,i){t&&(e=e.replace(":name:",this.voiceRespondsTo).toLowerCase(),this.voiceCommands[e]=t[i].bind(t),this.__voiceInit&&(this.__hal.commands={...this.voiceCommands}))}_addVoiceCommand(e){let t=e.detail.context;t||(t=e.target),this.addVoiceCommand(e.detail.command,t,e.detail.callback)}_positionCursorInNode(e,t=0){this.activeHaxBody.positionContextMenus();var i=document.createRange(),o=this.getSelection();return i.setStart(e,t),i.collapse(!0),o.removeAllRanges(),o.addRange(i),i}_onBeforeUnload(e){if(!this.skipExitTrap&&this.editMode)return"Are you sure you want to leave? Your work will not be saved!"}isBase64(e){try{return btoa(atob(e))==e}catch(e){return!1}}retrieveImageFromClipboardAsBlob(e,t){if(0==e.clipboardData&&"function"==typeof t)return t(void 0);var i=e.clipboardData.items;if(null==i&&"function"==typeof t)return t(void 0);for(var o=0;o<i.length;o++)if(-1!=i[o].type.indexOf("image")){var a=i[o].getAsFile();if("function"==typeof t)return t(a)}}async _onPaste(e){if(this.editMode&&"HAX-TRAY"!==document.activeElement.tagName&&"BODY"!==document.activeElement.tagName&&"SIMPLE-MODAL"!==document.activeElement.tagName){this.isTextElement(this.activeNode)||(this.activeNode=this.activeHaxBody.haxInsert("p","",{}));let r="",d="";if(e.clipboardData||e.originalEvent.clipboardData?(r=(e.originalEvent||e).clipboardData.getData("text/html"),""==r&&(r=(e.originalEvent||e).clipboardData.getData("text"))):window.clipboardData&&(r=window.clipboardData.getData("Text")),d=r,this.isBase64(d))return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.retrieveImageFromClipboardAsBlob(e,(t=>{if(t){var i=window.URL||window.webkitURL;let a=document.createElement("img");for(var o in a.src=i.createObjectURL(t),this.activeNode.parentNode.insertBefore(a,this.activeNode.nextElementSibling),e.clipboardData.items)!e.clipboardData.items[o].name&&e.clipboardData.items[o].type&&(e.clipboardData.items[o].name="image-"+Math.floor(Date.now()/1e3)+e.clipboardData.items[o].type.replace("image/","."));return e.dataTransfer=e.clipboardData,e.placeHolderElement=a,this.dispatchEvent(new CustomEvent("place-holder-file-drop",{bubbles:!0,cancelable:!0,composed:!0,detail:e})),a}return!1}));if(e.clipboardData.files.length>0){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let i=this.activeHaxBody.haxInsert("p","",{});for(var t in e.dataTransfer=e.clipboardData,e.clipboardData.files)!e.clipboardData.files[t].name&&e.clipboardData.files[t].type&&(e.clipboardData.files[t].name="image-"+Math.floor(Date.now()/1e3)+e.clipboardData.files[t].type.replace("image/","."));e.placeHolderElement=i,this.dispatchEvent(new CustomEvent("place-holder-file-drop",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}let c=!1,h="";r=r.replace(/<span>\s*?<\/span>/g," "),r=r.replace(/(?:style="(\S+:\s*[^;"]+;\s*)*)(\S+:\s*var\(--hax[^;"]+(?:[;"]\s*))+/g,""),r=r.replace(/<div/g,"<p"),r=r.replace(/<\/div>/g,"</p>"),r=s(r),r=r.replace(/<h1>/g,"<h2>"),r=r.replace(/<\/h1>/g,"</h2>"),r=r.replace(/<img src=\"file:(.*?)\/>/g,(function(e,t){return`<place-holder type="image" text="file:${t.split('"')[0]}"></place-holder>`}));let u=await this.htmlToHaxElements(r);if(1!==u.length||this.__validGridTags().includes(u[0].tag)||(u=await this.htmlToHaxElements(u[0].content)),0===u.length&&l(r)){""!=this.activeNode.innerText.trim()&&(c=!0);let e={source:r,title:r};if(!c&&!this.insertLogicFromValues(e,this,!1,!0))return!1}else if(0===u.length){if(c=!0,d==r)return!1;h=r}else if(1===u.length&&"p"===u[0].tag)h=r,c=!0;else if(1===u.length&&"a"===u[0].tag&&u[0].properties.href)if(""!=this.activeNode.innerText.trim())h=u[0].properties.href,c=!0;else{let e={source:u[0].properties.href,title:u[0].content};if(!this.insertLogicFromValues(e,this))return!1}else{if(!this.isGridPlateElement(u[0]))return!1;for(var t in u){"p"==u[t].tag&&["li","ol","ul"].includes(this.activeNode.tagName.toLowerCase())&&(u[t].tag="li"),delete u[t].properties.style,delete u[t].properties.start,delete u[t].properties.align;let e=a({tag:u[t].tag,content:u[t].content.replace(/<span>&nbsp;<\/span>/g," ").trim(),properties:u[t].properties});h+=await this.nodeToContent(e)}}e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();try{let e=this.getRange(),a=this.getSelection(),s=document.createElement("div");if(s.innerHTML=h,e&&a){for(var t in s.children)s.children[t].tagName&&this.isTextElement(s.children[t])&&""===s.children[t].innerHTML&&s.children[t].remove();if(c){let t;if(l(r))t=document.createElement("a"),t.setAttribute("href",r),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t.innerText=r;else if(s.children&&s.children.length>0){for(;s.childNodes.length>1;)e.insertNode(Array.from(s.childNodes).pop());t=Array.from(s.childNodes).pop()}else t=document.createTextNode(s.innerHTML);e.insertNode(t),setTimeout((()=>{this._positionCursorInNode(t,t.length)}),0)}else{var i,o,n;for(""!=this.activeNode.innerText.trim()&&e.endOffset!=this.activeNode.innerText.length&&(i=!0,document.execCommand("insertParagraph")),e.commonAncestorContainer&&e.commonAncestorContainer.parentNode&&(n||this.activeNode==e.commonAncestorContainer||(n=e.commonAncestorContainer.parentNode)||(n=e.commonAncestorContainer));s.firstElementChild;)o=s.firstElementChild,n?(n.getAttribute&&n.getAttribute("slot")&&o.setAttribute("slot",n.getAttribute("slot")),i?(this.activeHaxBody.haxReplaceNode(n.previousElementSibling,o),i=!1):n.parentNode.insertBefore(o,n.nextElementSibling)):this.activeNode?(this.activeNode.getAttribute("slot")&&o.setAttribute("slot",this.activeNode.getAttribute("slot")),""==this.activeNode.innerText.trim()?this.activeHaxBody.haxReplaceNode(this.activeNode,o):this.activeNode.parentNode.insertBefore(o,this.activeNode.nextElementSibling)):this.activeHaxBody.appendChild(o),n=o;setTimeout((()=>{o&&o.childNodes&&o.childNodes[0]&&(this._positionCursorInNode(o.childNodes[0],o.childNodes[0].length),o=null,n=null)}),0)}}}catch(e){console.warn(e)}}}__validGridTags(){return["p","ol","ul","li","div","h1","h2","h3","h4","h5","h6","blockquote","code","figure"]}__validTags(){return["p","div","span","table","caption","sup","sub","u","strike","tr","th","td","ol","ul","li","a","strong","kbd","tt","em","i","b","hr","h1","h2","h3","h4","h5","h6","blockquote","code","figure","figcaption","img","iframe","video","audio","section","template","webview"]}__validGizmoTypes(){return["data","video","audio","text","link","file","pdf","image","csv","doc","archive","markdown","html","content","text","inline","*"]}constructor(){super(),this.t={close:"Close"},this.__dragTarget=null,this.registerLocalization({context:this,namespace:"hax",basePath:import.meta.url+"/../../",locales:["es"]}),this.method="GET",this.haxSelectedText="",this.__winEvents={"hax-register-properties":"_haxStoreRegisterProperties","hax-consent-tap":"_haxConsentTap","hax-context-item-selected":"_haxContextOperation",onbeforeunload:"_onBeforeUnload",paste:"_onPaste","hax-register-app":"_haxStoreRegisterApp","hax-register-stax":"_haxStoreRegisterStax","hax-store-write":"_writeHaxStore","hax-register-core-piece":"_haxStorePieceRegistrationManager","hax-register-body":"_haxStoreRegisterBody","hax-insert-content":"_haxStoreInsertContent","hax-insert-content-array":"_haxStoreInsertMultiple","hax-add-voice-command":"_addVoiceCommand","hax-refresh-tray-form":"refreshActiveNodeForm"},window.onbeforeunload=e=>{if(!this.skipExitTrap&&this.editMode){var t="Are you sure you want to leave? Your work will not be saved!";return e.returnValue=t,t}},d.registerNewTour({key:"hax",name:"Let's learn HAX",style:"\n      simple-popover-manager::part(simple-popover) {\n        max-width: 250px;\n      }\n      simple-popover-manager button {\n        font-size: 12px;\n        margin: 0px 2px;\n      }\n      simple-popover-manager p {\n        --hax-base-styles-p-font-size: 14px;\n        padding: 0;\n        margin: 0;\n        font-size: 14px;\n        line-height: 20px;\n      }\n      simple-popover-manager h3 {\n        --hax-base-styles-h3-font-size: 18px;\n        margin: 8px 2px;\n      }"}),this.voiceRespondsTo="(worker)",this.voiceCommands={},this.skipHAXConfirmation=!1,this.storageData={},this.appStore={url:"",params:{}},this.activeNode=null,this.activeEditingElement=null,this.haxBodies=[],this.activePlaceHolder=null,this.sessionObject={},this.editMode=!1,this.skipExitTrap=!1,this.appStoreLoaded=!1,this.elementList={},this.elementAlign=Xo("hax-tray-elementAlign"),this.elementAlign&&null!=this.elementAlign||(this.elementAlign="right"),this.trayStatus="collapsed",this.trayDetail="content-edit",this.appList=[],this.gizmoList=[],this.haxAutoloader=null,this.activeHaxBody=null,this.haxTray=null,this.haxCancel=null,this.staxList=[],this.globalPreferences={},this.activeApp={},this.connectionRewrites={},this.voiceDebug=!1,this.keyboardShortcuts={"#":{tag:"h2",content:""},"##":{tag:"h3",content:""},"###":{tag:"h4",content:""},"####":{tag:"h5",content:""},"#####":{tag:"h6",content:""},"-":{tag:"ul",content:"<li></li>"},"1.":{tag:"ol",content:"<li></li>"},"---":{tag:"hr"},"```":{tag:"code",content:""},">":{tag:"blockquote",content:""}},this.validTagList=this.__validTags(),this.validGridTagList=this.__validGridTags(),this.validGizmoTypes=this.__validGizmoTypes();let e=document.createElement("webview");this._isSandboxed="function"==typeof e.reload,window.SimpleToast.requestAvailability(),document.body.style.setProperty("--hax-ui-headings","#d4ff77"),Ji(this,{gizmoList:mt,activeNode:mt,globalPreferences:mt,activeGizmo:ft,activeNodeIndex:ft,editMode:mt,elementAlign:mt,trayStatus:mt,trayDetail:mt,appList:mt,activeApp:mt,haxSelectedText:mt,activeEditingElement:mt,activeHaxBody:mt,appStoreLoaded:mt}),Ai((()=>{this._globalPreferencesChanged(Ii(this.globalPreferences))})),Ai((()=>{this._editModeChanged(Ii(this.editMode))}))}_buildPrimitiveDefinitions(){if(this._isSandboxed){let e={type:"element",editingElement:"core",canScale:!0,canPosition:!0,canEditSource:!0,settings:{configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],advanced:[]}};this.setHaxProperties(e,"webview")}this.setHaxProperties({type:"element",editingElement:"core",canScale:!0,canPosition:!0,canEditSource:!0,gizmo:{title:"Basic iframe",description:"A basic iframe",icon:"icons:fullscreen",color:"blue-grey",groups:["Content"],handles:[{type:"link",source:"src",height:"height",width:"width"},{type:"pdf",source:"src",height:"height",width:"width"},{type:"document",source:"src",height:"height",width:"width"},{type:"html",source:"src",height:"height",width:"width"}],meta:{author:"W3C"}},settings:{configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],advanced:[{attribute:"loading",title:"Loading method",description:"Whether or not to lazy load this",inputMethod:"select",options:{lazy:"Load when visible",auto:"Automatic"}}]},demoSchema:[{tag:"iframe",content:"",properties:{src:"https://haxtheweb.org/",loading:"lazy",style:"height:50vh;width:75%;margin: 0px auto; display: block;"}}]},"iframe");this.setHaxProperties({canScale:{min:10,step:5},type:"element",editingElement:"core",canPosition:!0,canEditSource:!0,gizmo:{title:"Image",description:"A basic img tag",icon:"image:image",color:"blue-grey",groups:["Image","Media"],handles:[{type:"link",source:"src"},{type:"image",type_exclusive:!0,source:"src",height:"height",width:"width"}],meta:{author:"W3C"}},settings:{configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"haxupload",icon:"link",required:!0,validationType:"url"},{attribute:"alt",title:"Alt text",description:"Useful for screen readers and improved SEO.",inputMethod:"alt",icon:"accessibility"},{attribute:"height",title:"Height",description:"height in pixels of the item. Leave blank to respond to the natural resolution",inputMethod:"textfield",icon:"icons:swap-vert"}],advanced:[{attribute:"aria-describedby",title:"Aria-describedby",description:"Space-separated list of IDs for elements that describe the image.",inputMethod:"textfield",icon:"accessibility"},{attribute:"loading",title:"Loading method",description:"Whether or not to lazy load this",inputMethod:"select",options:{lazy:"Load when visible",auto:"Automatic"}}]},demoSchema:[{tag:"img",content:"",properties:{src:"https://cdn2.thecatapi.com/images/9j5.jpg",loading:"lazy"}}]},"img");let e={canScale:{min:10,step:5},type:"grid",canPosition:!0,canEditSource:!0,gizmo:{title:"Figure",description:"A basic figure tag",icon:"hax:figure",color:"blue-grey",groups:["Image","Media","Layout"],requiresChildren:"figcaption",handles:[],meta:{author:"W3C"}},settings:{advanced:[Ko]},demoSchema:[{tag:"figure",properties:{},content:'<img src="https://dummyimage.com/300x200/000/fff" alt="image other media here">\n<figcaption><p>Image Caption Here</p></figcaption>'}]};this.setHaxProperties(e,"figure");let t={canScale:{min:10,step:5},type:"grid",editingElement:"core",canPosition:!0,canEditSource:!0,gizmo:{title:"Figure caption",description:"Used inside of a figure tag",icon:"image:image",color:"blue-grey",groups:["Image","Media"],handles:[],requiresParent:"figure",meta:{author:"W3C"}},settings:{configure:[{slot:"",title:"Figure Caption",description:"Caption for the figure",inputMethod:"code-editor"},Ko]},demoSchema:[{tag:"figcaption",properties:{},content:"Image Caption Here"}]};this.setHaxProperties(t,"figcaption");let i={type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,contentEditable:!0,gizmo:{title:"Basic link",description:"A basic a tag",icon:"icons:link",color:"blue-grey",groups:["Link"],handles:[],meta:{author:"W3C"}},settings:{configure:[{attribute:"innerText",title:"Text",description:"Text of the link",inputMethod:"textfield",required:!0},{attribute:"href",title:"Link",description:"The URL for this video.",inputMethod:"haxupload",required:!0,validationType:"url"},{attribute:"target",title:"Target",description:"Where to place the link.",inputMethod:"select",options:{"":"Same window",_blank:"New window - _blank",_top:"Top window - _top",_parent:"Parent window - _parent"}},{attribute:"title",title:"Title text",description:"Useful for screen readers and improved SEO.",inputMethod:"textfield"},Ko],advanced:[{attribute:"rel",title:"rel",description:"Specifies the relationship between this document and the opened document. Change as part of security or SEO policy.",inputMethod:"select",options:{noopener:"noopener","noopener noreferrer":"noopener noreferrer","nofollow ":"nofollow","noopener noreferrer nofollow":"noopener noreferrer nofollow",opener:"opener"}}]}};this.validGizmoTypes.forEach((e=>{i.gizmo.handles.push({type:e,source:"href",title:"innerText",alt:"title"})})),this.setHaxProperties(i,"a");let o={type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,contentEditable:!0,gizmo:{title:"Paragraph",description:"A basic text area",icon:"hax:paragraph",color:"blue-grey",groups:["Content"],handles:[{type:"content",source:"",title:"innerHTML",alt:"title"}],meta:{author:"W3C"}},settings:{configure:[],advanced:[Ko]},demoSchema:[{tag:"p",content:"Paragraph",properties:{}}]};this.setHaxProperties(o,"p");let a={caption:{title:"Caption",icon:"av:call-to-action"},video:{title:"Video",icon:"av:play-circle-filled"},audio:{title:"Audio",icon:"image:music-note"},section:{title:"Section",icon:"image:crop-landscape"},ol:{title:"Numbered list",icon:"editor:format-list-numbered"},ul:{title:"Bulleted list",icon:"editor:format-list-bulleted"},li:{title:"List item",icon:"editor:format-list-bulleted"},h1:{title:"Heading",icon:"hax:h1"},h2:{title:"Heading",icon:"hax:h2"},h3:{title:"Heading",icon:"hax:h3"},h4:{title:"Heading",icon:"hax:h4"},h5:{title:"Heading",icon:"hax:h5"},h6:{title:"Heading",icon:"hax:h6"},strike:{title:"Cross out",icon:"editor:format-strikethrough"},u:{title:"Underline",icon:"editor:format-underlined"},sub:{title:"Subscript",icon:"mdextra:subscript"},sup:{title:"Superscript",icon:"mdextra:superscript"},div:{title:"DIV",icon:"image:crop-landscape"},span:{title:"SPAN",icon:"editor:short-text",handles:[{type:"inline",text:"text"}]},i:{title:"Italic",icon:"editor:format-italic"},em:{title:"Emphasis",icon:"editor:format-italic"},strong:{title:"Bold",icon:"editor:format-bold"},b:{title:"Bold",icon:"editor:format-bold"},blockquote:{title:"Block quote",icon:"editor:format-quote"},code:{title:"Code",icon:"icons:code"},embed:{title:"Embedded object",icon:"icons:fullscreen"}};for(var n in a)this.setHaxProperties({type:"element",editingElement:"core",canScale:!1,canPosition:!1,canEditSource:!0,contentEditable:!0,gizmo:{title:a[n].title,icon:a[n].icon,meta:{hidden:"h2"!=n},groups:["Content"],handles:a[n].handles||[],meta:{author:"ELMS:LN",inlineOnly:!0}},settings:{configure:[],advanced:[Ko]},demoSchema:[{tag:n,content:"h2"==n?"Heading":"",properties:{}}]},n);let r={canScale:{min:25,step:25},type:"element",editingElement:"core",canPosition:!1,canEditSource:!1,contentEditable:!0,gizmo:{title:"Horizontal line",icon:"hax:hr",meta:{author:"W3C"}},settings:{configure:[],advanced:[Ko]},demoSchema:[{tag:"hr",content:"",properties:{style:"width:50%;"}}]};this.setHaxProperties(r,"hr")}_haxStorePieceRegistrationManager(e){e.detail&&e.detail.piece&&e.detail.object&&(this[e.detail.piece]=e.detail.object)}setupAutocomplete(e){e.triggers={"!":e=>{let t=[];return this.gizmoList.forEach((e=>{t.push({groups:e.groups&&e.groups.length?e.groups.join(" "):"",icon:e.icon,label:e.title,value:e.tag})})),t}}}async _haxStoreInsertContent(e){if(e.detail){let i=e.detail;if(window.customElements.get(i.tag)){let e=document.createElement(i.tag);this.testHook(e,"preProcessInsertContent")&&(i=await this.runHook(e,"preProcessInsertContent",[i,this.activeNode]))}var t={};if(void 0!==i.properties&&(t=i.properties),t.innerHTML&&(""==i.content&&(i.content=t.innerHTML),delete t.innerHTML),t.innerText&&(""==i.content&&(i.content=t.innerText),delete t.innerText),void 0!==i.__type&&"inline"===i.__type){let e=a({tag:i.tag,content:i.content,properties:t});null!==this.activePlaceHolder&&(this.activePlaceHolder.deleteContents(),this.activePlaceHolder.insertNode(e)),this.activePlaceHolder=null}else if(i.replace||i.replacement||i.nextToActive){let e=a({tag:i.tag,content:i.content,properties:t});this.activePlaceHolder?(this.activeHaxBody.haxReplaceNode(this.activePlaceHolder,e),this.activePlaceHolder=null):i.nextToActive&&this.activeNode?this.activeHaxBody.__slot&&this.activeNode.haxLayoutContainer?this.activeNode.appendChild(e):this.activeNode.parentNode.insertBefore(e,this.activeNode):this.activeHaxBody.haxReplaceNode(this.activeNode,e)}else if(this.activeNode.parentNode&&"HAX-BODY"!=this.activeNode.parentNode.tagName){let e=a({tag:i.tag,content:i.content,properties:t});this.activeNode.parentNode.haxLayoutContainer?(null!=this.activeNode.getAttribute("slot")&&e.setAttribute("slot",this.activeNode.getAttribute("slot")),this.activeHaxBody.haxInsert(i.tag,i.content,t)):this.activeHaxBody.haxInsert(i.tag,i.content,t)}else this.activeHaxBody.haxInsert(i.tag,i.content,t)}}slotsFromSchema(e,t=!1){let i=e?e.settings:{},o=[];return Object.keys({...i||{}}).map((e=>(i[e]||[]).filter((e=>{let i=!t||!e.required;return!(!e.slot&&""!==e.slot||o.includes(e.slot)||!i)&&(o.push(e.slot),!0)})))).flat()}haxSchemaFromTag(e){return e=e.toLowerCase(),this.elementList&&this.elementList[e]?this.elementList[e]:{}}_haxStoreInsertMultiple(e){var t;if(e.detail)for(var i in e.detail)t={},void 0!==e.detail[i].properties&&(t=e.detail[i].properties),this.activeHaxBody.haxInsert(e.detail[i].tag,e.detail[i].content,t)}_haxStoreRegisterBody(e){e.detail&&(this.haxBodies.push(e.detail),this.activeHaxBody=e.detail,this.write("activeHaxBody",this.activeHaxBody,this),this.write("editMode",this.editMode,this),clearTimeout(this.__storeReady),this.__storeReady=setTimeout((()=>{this._storePiecesAllHere(this.haxAutoloader,this.activeHaxBody,this.haxTray,this.haxCancel)}),0))}computePolyfillSafe(){return!(!document.head.createShadowRoot&&!document.head.attachShadow)||(console.warn("Shadow DOM missing, certain operations hidden"),!1)}_writeHaxStore(e){e.detail&&void 0!==e.detail.value&&e.detail.property&&e.detail.owner&&(e.detail.owner!==this&&(null==e.detail.value?this[e.detail.property]=null:"object"==typeof e.detail.value&&(this[e.detail.property]={}),this[e.detail.property]=e.detail.value),this.dispatchEvent(new CustomEvent("hax-store-property-updated",{bubbles:!0,composed:!0,cancelable:!1,detail:{property:e.detail.property,value:e.detail.value,owner:e.detail.owner}})))}_haxStoreRegisterApp(e){if(e.detail){if(e.detail.index=this.appList.length,this.appList=[...this.appList,e.detail],this.write("appList",Ii(this.appList),this),e.detail.connection&&e.detail.connection.protocol&&e.detail.connection.url){let t=document.createElement("link");t.rel="preconnect",t.href=e.detail.connection.protocol+"://"+e.detail.connection.url,document.head.appendChild(t)}void 0!==e.target.parentElement&&"HAX-STORE"===e.target.parentElement.tagName&&e.target.parentElement.removeChild(e.target)}}_haxStoreRegisterStax(e){e.detail&&(e.detail.index=this.staxList.length,this.staxList=[...this.staxList,e.detail],this.write("staxList",this.staxList,this),void 0!==e.target.parentElement&&"HAX-STORE"===e.target.parentElement.tagName&&e.target.parentElement.removeChild(e.target))}dashToCamel(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))}async htmlToHaxElements(e){let t=[];const i=this.validTagList;let o=document.createElement("div");o.innerHTML=e;const a=o.childNodes;for(var n=0;n<a.length;n++)void 0!==a[n].tagName&&i.includes(a[n].tagName.toLowerCase())&&t.push(await c(a[n],null));return t}async nodeToContent(e){this.testHook(e,"preProcessNodeToContent")&&(e=await this.runHook(e,"preProcessNodeToContent",[e]));let t=e.tagName.toLowerCase();this._isSandboxed&&"webview"===t&&(t="iframe");var i="";i+="<"+t;for(var o=this.elementList[t],a={},n=0,r=e.attributes.length;n<r;++n){var s=e.attributes.item(n).nodeName,l=e.attributes.item(n).value;"style"==s||typeof l!=typeof Object&&l.constructor!==Array?null!=l&&"null"!=l&&(!0===l||"true"===l?a[s]=!0:!1===l||("string"==typeof l&&""!==l?(l=l.replace(new RegExp('"',"g"),"&quot;"),a[s]=l):""===l?(""==l&&""!=e.attributes.item(n).value&&(l=e.attributes.item(n).value),a[s]=l):a[s]=l)):a[s]=JSON.stringify(l).replace(new RegExp('"',"g"),"&quot;")}let d;if(customElements.get(t)&&(d=customElements.get(t).properties),void 0===d&&(d=e.__data),void 0!==d)for(var n in d){s=h(n),l=null;void 0!==e[n]&&(l=e[n]),d[n].readOnly||d[n].computed||l===d[n].value||s.startsWith("__")||(null==l||"object"!=typeof l&&l.constructor!==Array?null!=l&&"null"!=l&&(!0===l||"true"===l?a[s]=!0:!1===l||("string"==typeof l&&""!==l?(l=l.replace(new RegExp('"',"g"),"&quot;"),a[s]=l):""===l?""==l&&""!=d[n].value?l=d[n].value:""===l&&d[n].value:a[s]=l)):(l.constructor===Array&&l!=[]||"object"==typeof l&&l!={})&&(a[s]=JSON.stringify(l).replace(new RegExp('"',"g"),"&quot;")))}if(void 0!==o&&void 0!==o.saveOptions.unsetAttributes)for(var c in o.saveOptions.unsetAttributes)delete a[o.saveOptions.unsetAttributes[c]];let p=["inner-text","inner-html","tabindex","guestinstance"];for(var m in p)void 0!==a[p[m]]&&delete a[p[m]];for(var c in void 0!==a.id&&""===a.id&&delete a.id,delete a.draggable,delete a.contenteditable,delete a["data-hax-ray"],delete a["data-hax-layout"],""!=a.class&&"hax-active"!=a.class||delete a.class,a)!0===a[c]?i+=" "+c:i+=" "+c+'="'+a[c]+'"';if(["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].includes(t)?i+="/>":i+=">",void 0===o||!o.saveOptions.wipeSlot){let t=e.childNodes;if(t.length>0){n=0;for(var g=t.length;n<g;n++)void 0!==t[n].tagName?this.HTMLPrimativeTest(t[n].tagName)||"TEMPLATE"===t[n].tagName?(t[n].removeAttribute("data-hax-ray"),t[n].contentEditable=!1,i+=t[n].outerHTML):i+=await this.nodeToContent(t[n]):8===t[n].nodeType?i+="\x3c!-- "+t[n].textContent+" --\x3e":1!==t[n].nodeType&&void 0!==t[n].textContent&&"undefined"!==t[n].textContent&&(i+=u(t[n].textContent))}}return this.testHook(e,"progressiveEnhancement")&&(i+=await this.runHook(e,"progressiveEnhancement",[e])),"span"===t?i+="</"+t+">":"hr"===t||"br"===t||"img"===t||(i+="</"+t+">\n"),i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=(i=i.replace(/&nbsp;/gm," ")).replace(/ data-hax-ray="(\s|.)*?"/gim,"")).replace(/ class=""/gim,"")).replace(/ class="hax-active"/gim,"")).replace(/ contenteditable="(\s|.)*?"/gim,"")).replace(/<span style="(.*?)">/gim,"<span>")).replace(/<span>\s*?<\/span>/g," ")).replace(/<span><br\/><\/span>/gm,"")).replace(/<strong style="(.*?)">/gim,"<strong>")).replace(/<b style="(.*?)">/gim,"<b>")).replace(/<strike style="(.*?)">/gim,"<strike>")).replace(/<em style="(.*?)">/gim,"<em>")).replace(/<i style="(.*?)">/gim,"<i>")).replace(/<p>(\s*)<\/p>/gm,"<p></p>")).replace(/<p>&nbsp;<\/p>/gm,"<p></p>")).replace(/<p><br\/><\/p>/gm,"<p></p>")).replace(/<p><br><\/p>/gm,"<p></p>")).replace(/<\/p>(\s*)<p>/gm,"</p><p>")).split("\n\r").join("\n").split("\r").join("\n").split("\n\n").join("\n").split("\n\n").join("\n").split("\n\n").join("\n"),this.testHook(e,"postProcessNodeToContent")&&(i=await this.runHook(e,"postProcessNodeToContent",[i])),i}HTMLPrimativeTest(e){return void 0!==e.tagName&&-1==e.tagName.indexOf("-")}getHaxAppStoreTargets(e){return Ii(this.appList).filter((t=>{if(void 0!==t.connection.operations.add){let i=t.connection.operations.add;if(void 0!==i.acceptsGizmoTypes&&i.acceptsGizmoTypes.includes(e))return!0}return!1}))}async refreshActiveNodeForm(){this.haxTray.activeHaxElement=await c(this.haxTray.activeNode,null),await this.haxTray._setupForm()}haxElementPrototype(e,t,i=""){return{tag:e.tag,properties:t,content:i,gizmo:e}}async getHAXSlot(e){if(this.isTextElement(e))return e.innerHTML;let t="";var i=e.childNodes;if(i.length>0)for(var o=0,a=i.length;o<a;o++){if(!i[o])return;void 0!==i[o].tagName?i[o].tagName.indexOf("-")>0?t+="  "+await this.nodeToContent(i[o])+"\n":t+="  "+i[o].outerHTML+"\n":8===i[o].nodeType?t+="\x3c!-- "+i[o].textContent+" --\x3e":1!==i[o].nodeType&&void 0!==i[o].textContent&&"undefined"!==i[o].textContent&&(t+=i[o].textContent)}return t}async _haxStoreRegisterProperties(e){if(e.detail&&e.detail.properties&&e.detail.tag){if(!this.elementList[e.detail.tag]){let t=e.detail;t.properties=await this.attemptGizmoTranslation(t.tag,t.properties);let i=t.properties.gizmo;if(i){i.tag=t.tag;let e=this.gizmoList;e.push(i),this.gizmoList=[...e],this.write("gizmoList",e,this)}this.elementList[t.tag]=t.properties,this.validTagList.find((e=>e===t.tag))||this.validTagList.push(t.tag),"grid"!=t.properties.type||this.validGridTagList.find((e=>e===t.tag))||this.validGridTagList.push(t.tag),window.customElements.get(e.detail.tag)&&this.testHook(document.createElement(e.detail.tag),"gizmoRegistration")&&await this.runHook(document.createElement(e.detail.tag),"gizmoRegistration",[this])}void 0!==e.target.parentElement&&"HAX-AUTOLOADER"===e.target.parentElement.tagName&&this.haxAutoloader.removeChild(e.target)}}get activeGizmo(){let e=Ii(this._calculateActiveGizmo(this.activeNode));return this.write("activeGizmo",e,this),e}get activeNodeIndex(){let e=null;return this.activeNode&&Array.from(Ii(this.activeHaxBody).children).map(((t,i)=>{Ii(this.activeNode)!==t&&Ii(this.activeNode).parentElement!==t||(e=i)})),e}async attemptGizmoTranslation(e,t){var i=await z.loadNamespaceFile(e+".haxProperties");if(!i&&"en"==this.globalPreferences.haxLang&&window.customElements.get(e)&&window.customElements.get(e).haxProperties&&"string"==typeof(i=window.customElements.get(e).haxProperties)&&(i=await fetch(i).then((e=>!(!e||!e.json)&&e.json()))),i){if(t.gizmo&&i.gizmo)for(var o in i.gizmo)t.gizmo[o]=i.gizmo[o];if(t.settings&&i.settings){let e={advanced:"advanced",configure:"configure"};for(var a in e)if(t.settings[a]&&i.settings[a])for(var o in i.settings[a])for(var n in i.settings[a][o])t.settings[a][o][n]=i.settings[a][o][n]}if(t.demoSchema&&i.demoSchema)for(var o in i.demoSchema)if(i.demoSchema[o].properties)for(var n in i.demoSchema[o].properties)t.demoSchema[o].properties[n]=i.demoSchema[o].properties[n]}return t}}window.customElements.define(Qo.tag,Qo),window.HaxStore=window.HaxStore||{},window.HaxStore.requestAvailability=function(){return window.HaxStore.instance||(window.HaxStore.instance=document.createElement("hax-store"),document.body.appendChild(window.HaxStore.instance)),window.HaxStore.instance};const Zo=window.HaxStore.requestAvailability();window.Hax=window.Hax||{},window.Hax.add=function(e){if(Zo.elementList[e]){let t,i=Zo.haxSchemaFromTag(e);t=i.gizmo.tag&&i.demoSchema&&i.demoSchema[0]?a(i.demoSchema[0]):document.createElement(e),Zo.activeHaxBody.haxReplaceNode(Zo.activeNode,t),Zo.activeHaxBody.__focusLogic(t)}else Zo.toast(`${e} is not a valid tag`)},window.Hax.delete=function(){null!=Zo.activeNode&&Zo.activeHaxBody.haxDeleteNode(Zo.activeNode)},window.Hax.duplicate=function(){Zo.activeHaxBody.haxDuplicateNode(Zo.activeNode)},window.Hax.move=function(e=!0){e?Zo.activeHaxBody.haxMoveGridPlate("up",Zo.activeNode):Zo.activeHaxBody.haxMoveGridPlate("down",Zo.activeNode)},window.Hax.grid=function(e=!0){Zo.activeHaxBody.haxGridPlateOps(e)},window.Hax.set=function(e,t){Zo.write(e,t,window)},window.Hax.get=function(e){return Zo[e]},window.Hax.export=async function(){return await Zo.activeHaxBody.haxToContent()},window.Hax.import=function(e="<p></p>"){return Zo.activeHaxBody.importContent(e)};
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const ea=function(e){return class extends e{static get properties(){return{...super.properties,canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},undoStackObserverProps:{type:Object},target:{type:Object},stack:{type:Object}}}constructor(){super(),this.__StackDebounce,this.undoStackLimit=20,this.undoStackTimer=300,this.undoStackIgnore=!1,this.undoStackObserver=null,this.undoStackObserverProps={attributes:!0,attributeOldValue:!0,childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0},this.undoStackInitialValue=this.innerHTML,this.undoStackPrevValue=this.undoStackInitialValue}connectedCallback(){this.undoStackObserver=new MutationObserver((e=>{clearTimeout(this.__StackDebounce),this.__StackDebounce=setTimeout((()=>{this.undoStackIgnore?this.undoStackIgnore=!1:this.undoManagerStackLogic(e)}),this.undoStackTimer)})),this.undoStackObserver.observe(this,this.undoStackObserverProps),this.undoManagerStackLogic({}),super.connectedCallback()}undoManagerStackLogic(e){const t=this.innerHTML;this.undoStack&&""!=t&&t!=this.undoStackPrevValue&&this.undoStackInitialValue!=t&&(this.undoStack.execute(new oa(this,this.undoStackPrevValue,t)),this.undoStackPrevValue=t,this.dispatchEvent(new CustomEvent("stack-changed",{detail:{value:this.undoStack},bubbles:!0,composed:!0})))}disconnectedCallback(){this.undoStackObserver&&this.undoStackObserver.disconnect(),super.disconnectedCallback()}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.undoStack=new ia,this.undoStack.undoStackLimit=this.undoStackLimit,this.undoStack.undoStackPosition=-1,this.undoStack.commands=[],this.undoStack.changed=e=>{this.canRedo=this.undoStack.canRedo(),this.canUndo=this.undoStack.canUndo()},this.undoStack.changed()}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"canUndo"==t&&this.dispatchEvent(new CustomEvent("can-undo-changed",{detail:{value:this[t]},bubbles:!0,composed:!0})),"canRedo"==t&&this.dispatchEvent(new CustomEvent("can-redo-changed",{detail:{value:this[t]},bubbles:!0,composed:!0}))}))}undo(){return this.undoStack.undo()}redo(){return this.undoStack.redo()}commands(){return this.undoStack.commands}}};class ta extends(ea(p)){static get tag(){return"undo-manager"}render(){return o`<slot></slot>`}}customElements.define("undo-manager",ta);class ia{constructor(){this.commands=[],this.undoStackPosition=-1,this.undoStackLimit=20}execute(e){this._clearRedo(),e.execute(),this.undoStackLimit==this.commands.length?this.commands.splice(Math.round(this.commands.length/3),1):this.undoStackPosition++,this.commands.push(e),this.changed()}undo(){this.commands[this.undoStackPosition]&&(this.commands[this.undoStackPosition].undo(),this.undoStackPosition--,this.changed())}canUndo(){return this.undoStackPosition>=0}redo(){this.commands[this.undoStackPosition+1]&&(this.undoStackPosition++,this.commands[this.undoStackPosition].redo(),this.changed())}canRedo(){return this.undoStackPosition<this.commands.length-1}_clearRedo(){this.commands=this.commands.slice(0,this.undoStackPosition+1)}changed(){}}class oa{constructor(e,t,i){this.el=e,this.oldValue=t,this.newValue=i}execute(){}undo(){this.el.undoStackIgnore=!0,this.el.undoStack.commands&&this.el.undoStack.commands[this.el.undoStack.undoStackPosition-1]?this.el.innerHTML=this.el.undoStack.commands[this.el.undoStack.undoStackPosition-1].newValue:this.el.undoStack.commands&&0===this.el.undoStack.undoStackPosition?this.el.innerHTML=this.el.undoStackInitialValue:this.el.innerHTML=this.oldValue}redo(){this.el.undoStackIgnore=!0,this.el.innerHTML=this.newValue}}
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class aa extends p{static get styles(){return[i`:host{outline:1px dotted currentColor}:host(:empty){outline:0;border-left:1px dotted currentColor;margin-right:-.2em}:host([hidden]){display:none!important}`]}static get properties(){return{hidden:{type:Boolean,reflect:!0},id:{type:String,reflect:!0},range:{type:Object}}}render(){return o`<slot></slot>`}static get tag(){return"rich-text-editor-highlight"}constructor(){super(),this.haxUIElement=!0;let e=Math.floor(65536*(1+Math.random())).toString(16).substring(1);this.id="rte-"+"ss-s-s-s-sss".replace(/s/g,e)}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e)}emptyContents(){[...this.childNodes].forEach((e=>{this.parentNode&&this.parentNode.insertBefore(e,this)})),document.body.append(this),this.hidden=!0,this.range=void 0}wrap(e){if(!e)return;this.hidden||e===this.range||this.emptyContents(),this.range=e;let t=e.extractContents();this.append(t);try{e.insertNode(this)}catch(e){}e.selectNodeContents(this),this.hidden=!1}unwrap(e){let t=[...this.childNodes].reverse();e&&e.setStartBefore(this),t.forEach(((t,i)=>{e&&e.insertNode(t)})),document.body.append(this),this.hidden=!0,this.range=e}}window.customElements.define(aa.tag,aa),window.RichTextEditorHighlight=window.RichTextEditorHighlight||{},window.RichTextEditorHighlight.requestAvailability=()=>(window.RichTextEditorHighlight.instance||(window.RichTextEditorHighlight.instance=document.createElement("rich-text-editor-highlight"),document.body.appendChild(window.RichTextEditorHighlight.instance)),window.RichTextEditorHighlight.instance);
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class na extends p{static get styles(){return[i`:host{display:none!important}textarea{position:absolute;left:-9999px;top:0;width:0;height:0;overflow:hidden}`]}static get properties(){return{__textarea:{type:Object}}}render(){return o`<textarea aria-hidden="true"></textarea>`}setClipboard(){this.__textarea=this.__textarea||this.shadowRoot.querySelector("textarea"),setTimeout((async()=>{this.__textarea.value=await navigator.clipboard.readText(),this.__textarea.focus(),this.__textarea.select(),document.execCommand("paste")}),1)}get value(){return this.__textarea=this.__textarea||this.shadowRoot.querySelector("textarea"),this.__textarea.value}static get tag(){return"rich-text-editor-clipboard"}constructor(){super(),this.haxUIElement=!0}}window.customElements.define(na.tag,na),window.RichTextEditorClipboard=window.RichTextEditorClipboard||{},window.RichTextEditorClipboard.requestAvailability=()=>(window.RichTextEditorClipboard.instance||(window.RichTextEditorClipboard.instance=document.createElement("rich-text-editor-clipboard"),document.body.appendChild(window.RichTextEditorClipboard.instance)),window.RichTextEditorClipboard.instance);
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class ra extends p{static get styles(){return[i`:host{display:block}:host([hidden]){display:none}:host([disabled]),:host([view-source]){outline:0!important}#container{display:flex;align-items:stretch;justify-content:space-between;width:100%}#source,#wysiwyg{margin:0;padding:0;min-height:var(--rich-text-editor-min-height,20px);cursor:pointer;outline:0;overflow:auto;resize:horizontal}#source{flex:1 1 auto;min-width:300px;padding-bottom:20px}#wysiwyg{flex:0 1 auto;display:block;margin-left:10px;max-height:70vh;overflow-x:hidden;resize:auto}#source:focus-within,#source:hover{outline:var(--rich-text-editor-border-width,1px) var(--rich-text-editor-focus-border-style,1px) var(--rich-text-editor-focus-color,#00f)}`]}render(){return o` <div id="container"> <div id="wysiwyg" part="wysiwyg"> <slot></slot> </div> <code-editor id="source" font-size="13" language="html" @value-changed="${this._handleSourceChange}" word-wrap part="source"> </code-editor> </div>`}static get properties(){return{...super.properties,id:{name:"id",type:String,reflect:!0,attribute:"id"},disabled:{name:"disabled",type:Boolean,attribute:"disabled",reflect:!0},hidden:{name:"hidden",type:Boolean,attribute:"hidden",reflect:!0},__target:{type:Object},__toolbar:{type:Object},__codeEditorValue:{type:String},__needsUpdate:{type:Boolean}}}static get tag(){return"rich-text-editor-source"}constructor(){if(super(),this.id="",import("./2232432d.js"),!window.RichTextEditorSource.instance)return window.RichTextEditorSource.instance=this,this}firstUpdated(){super.firstUpdated&&super.firstUpdated(),this.toggle()}updated(e){super.updated(e),e.forEach(((e,t)=>{}))}toggle(e){let t=this.shadowRoot?this.shadowRoot.querySelector("#source"):void 0;!t||!e||!e.target||this.__toolbar&&this.__toolbar===e?([...document.querySelectorAll("[data-rich-text-editor-view-source-mode]")].forEach((e=>e.removeAttribute("data-rich-text-editor-view-source-mode"))),this.__target&&this.__target.focus(),this.hidden=!0,this.__toolbar=void 0,this.__target=void 0,this.disabled=!0,this.__codeEditorValue="",this.innerHTML=this.__codeEditorValue,document.body.append(this)):(this.__toolbar=e,this.__target=e.target,this.disabled=this.__target.disabled,this.__target.setAttribute("data-rich-text-editor-view-source-mode",!0),this.__target.parentNode.insertBefore(this,this.__target),this.__codeEditorValue=this.__toolbar.targetHTML,this.innerHTML=this.__codeEditorValue,t.editorValue=this.__codeEditorValue,this.hidden=!1,t.focus())}_handleSourceChange(e){if(this.__toolbar&&this.__target&&!this.__needsUpdate){this.__needsUpdate=!e.detail||!e.detail.value||this.__toolbar.htmlMatchesTarget(`${e.detail.value}`);let t=()=>{this.__needsUpdate=!1,this.__codeEditorValue=e.detail.value,this.innerHTML=e.detail.value,this.__target.innerHTML=e.detail.value};this.__needsUpdate&&setTimeout(t.bind(this),300)}}}window.customElements.define(ra.tag,ra),window.RichTextEditorSource=window.RichTextEditorSource||{},window.RichTextEditorSource.requestAvailability=()=>(window.RichTextEditorSource.instance||(window.RichTextEditorSource.instance=document.createElement("rich-text-editor-source"),window.RichTextEditorSource.stylesheet=document.createElement("style"),window.RichTextEditorSource.stylesheet.innerHTML="rich-text-editor-source + [data-rich-text-editor-view-source-mode] { display: none }",document.body.appendChild(window.RichTextEditorSource.instance),document.head.appendChild(window.RichTextEditorSource.stylesheet)),window.RichTextEditorSource.instance);
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const sa=function(e){return class extends e{static get properties(){return{range:{name:"range",type:Object},__toolbar:{name:toolbar,type:Object},__highlight:{type:Object},__clipboard:{type:Object},__source:{type:Object}}}constructor(){super(),this.haxUIElement=!0,this.__highlight=window.RichTextEditorHighlight.requestAvailability(),this.__clipboard=window.RichTextEditorClipboard.requestAvailability()}get commandIsToggled(){return this.commandToggledForRange(this.range)}get hasBreadcrumbs(){return!1}get toggledCommands(){return this.toggledCommandsForRange()}get validCommands(){return["backColor","bold","copy","createLink","cut","decreaseFontSize","defaultParagraphSeparator","delete","fontName","fontSize","foreColor","formatBlock","forwardDelete","hiliteColor","increaseFontSize","indent","insertBrOnReturn","insertHorizontalRule","insertHTML","insertImage","insertLineBreak","insertOrderedList","insertUnorderedList","insertParagraph","insertText","italic","justifyCenter","justifyFull","justifyLeft","justifyRight","outdent","paste","redo","removeFormat","selectAll","strikeThrough","styleWithCss","subscript","superscript","underline","undo","unlink","useCSS","wrapRange"]}closeToolbar(e=this.__toolbar,t=this.__toolbar.target){t&&e.disableEditing(t),e.target=void 0,document.body.append(e)}sanitizeHTML(e){return this.__toolbar.sanitizeHTML(e)}trimHTML(e){let t=e?e.innerHTML:void 0;return this.trimString(t)}trimString(e){return(e||"").replace(/<!--[^(-->)]*-->/g,"").replace(/[\s\t\r\n]/gim,"")}outdentHTML(e=""){let t=(e=(this.sanitizeHTML(e)||"").replace(/[\s]*$/,"").replace(/^[\n\r]*/,"").replace(/[\n\r]+/gm,"\n")).match(/^\s+/),i=!!t&&t[0],o=!!i&&new RegExp(`\\n${i}`,"gm");return e=e.replace(/^\s+/,""),e=o?e.replace(o,"\n "):e}pasteFromClipboard(e=this.range){this.__clipboard.setClipboard(),setTimeout((async()=>{this.paste(this.__clipboard.value,e,!0)}),100)}paste(e,t=this.range,i=!0){this.dispatchEvent(new CustomEvent("paste",{bubbles:!0,cancelable:!0,composed:!0,detail:this.target}));let o=this.__toolbar.target;if(o){let t=this.range,a=document.createElement("div");if(o=t.commonAncestorContainer.parentNode.closest("[contenteditable=true]:not([disabled]),input:not([disabled]),textarea:not([disabled])")){for(a.innerHTML=i?this.sanitizeHTML(e||this.__clipboard.value):e,t&&t.extractContents&&t.extractContents(),t.insertNode(a);a.firstChild;)a.parentNode.insertBefore(a.firstChild,a);a.parentNode.removeChild(a)}o.normalize()}}get highlighted(){return!!this.__highlight&&!this.__highlight.hidden}getRange(){let e=this.getSelection();return this.__toolbar?this.__toolbar.getRange():e.getRangeAt(0)}getSelection(){return this.__toolbar?this.__toolbar.getSelection():window.getSelection()}getRoot(e){return e&&e!==document?e.parentNode?this.getRoot(e.parentNode):e:document}debugRange(e=this.getRange()){let t=!(!e||e.collapsed||!e.cloneContents)&&e.cloneContents();return{range:e,contents:t,text:!!t&&t.textContent}}commandToggledForRange(e=this.range||this.getRange(),t=this.command,i=this.commandVal){let o=!(!e||!t)&&document.queryCommandState(this.command);return!!("underline"===t?!!this.rangeOrMatchingAncestor("u"):"wrapRange"===t?!!this.rangeOrMatchingAncestor(i):o)}toggledCommandsForRange(e=this.range||this.getRange()){return this.validCommands.filter((t=>{this.commandToggledForRange(e,t)}))}rangeOrMatchingAncestor(e=this.tagsList||"",t=this.range||this.getRange()){let i=this.rangeElementOrParentElement(t);return i&&""!=e?i.matches(e)?i:i.closest(e):void 0}rangeElementOrParentElement(e=this.range||this.getRange()){return this.rangeIsElement(e)?e.startContainer:this.rangeParentElement(e)}rangeNodeOrParentNode(e=this.range||this.getRange()){return this.rangeIsNode(e)?e.startContainer:this.rangeParentNode(e)}rangeBreadcrumbs(e=this.range||this.getRange()){let t=[];return t.push({nodeName:!1}),t.reverse()}rangeIsNode(e=this.range||this.getRange()){let t=e?e.startContainer:void 0,i=e?e.startOffset:void 0,o=e?e.endContainer:void 0,a=e?e.endOffset:void 0;return!!t&&t===o&&a-i==1}rangeIsElement(e=this.range||this.getRange()){return this.rangeIsNode(e)&&1==e.startContainer.nodeType}rangeParentElement(e=this.range||this.getRange()){let t=e?e.commonAncestorContainer:void 0;return t?1==t.nodeType?t:t.parentElement:void 0}rangeParentNode(e=this.range||this.getRange()){let t=e?e.commonAncestorContainer:void 0;return t?t.parentNode:void 0}rangeNodes(e=this.range||this.getRange()){let t=this.rangeFirstNode(e),i=[];for(;t;)i.push(t),t=t.nextSibling;return i}rangeFirstNode(e=this.range||this.getRange()){return e&&e.startContainer&&e.startContainer.childNodes?e.startContainer.childNodes[e.startOffset-1]:void 0}rangeLastNode(e=this.range||this.getRange()){return e&&e.endContainer&&e.endContainer.childNodes?e.endContainer.childNodes[e.endOffset-1]:void 0}selectNode(e,t=this.range){if(e&&e.parentNode){if(!t){let e=this.getSelection();t=document.createRange(),e.removeAllRanges(),e.addRange(t)}t&&(t.selectNode(e),this._rangeChanged(t))}}selectNodeContents(e,t=this.range){if(e){if(!t){let e=this.getSelection();t=document.createRange(),e.removeAllRanges(),e.addRange(t)}t&&(t.selectNodeContents(e),this._rangeChanged(t))}}highlightNode(e,t=this.range){(e||this.rangeOrMatchingAncestor())&&this.selectNode(e,t),this.__toolbar.updateRange(),this.__highlight.wrap(t)}selectRange(e=this.range,t=!0){if(e)if(t){let t=this.getSelection();t.removeAllRanges(),t.addRange(e)}else e.isCollapsed||e.collapse();return e}surroundRange(e,t=this.range){t&&t.surroundContents(e)}_rangeChanged(e){this.dispatchEvent(new CustomEvent("rangechange",{bubbles:!0,composed:!0,cancelable:!0,detail:{element:this,range:e}}))}initViewSource(){this.__source=this.__source||window.RichTextEditorSource.requestAvailability()}_handleCommand(e,t,i=this.getRange()){let o=this.__toolbar,a=o.target;if(this.validCommands.includes(e)){if(t=o&&t?o.sanitizeHTML(t):t,"wrapRange"==e&&t){let e=this.commandToggledForRange(i,"wrapRange",t),o=this.rangeOrMatchingAncestor(t);if(e){if(e){let e=o?[...o.childNodes].reverse():[];i&&i.setStartBefore(o),e.forEach((e=>{i&&i.insertNode(e)})),o&&o.parentElement.normalize(),o&&i.selectNodeContents(o),o&&o.remove()}}else{this.__highlight.wrap(i);let e=this.__highlight.innerHTML;this.__highlight.innerHTML=`<${t}>${e.trim()}</${t}>`,o=this.__highlight.querySelector(t),i.selectNode(o),this.__highlight.unwrap(i)}a.normalize()}this.__highlight.parentNode===document.body&&this.__highlight.wrap(i),this.__highlight.unwrap(i),i=i||this.__highlight.range||this.range,this.selectRange(i),"paste"!=e&&"wrapRange"!=e?(document.execCommand(e,!1,t),a.normalize()):navigator.clipboard&&"paste"==e&&this.pasteFromClipboard()}else"cancel"===e?(a&&a.revert(),o.close(a)):"close"===e?o.close(a):"viewSource"===e&&this.__source.toggle(o)}}},la=[i`:host{--simple-toolbar-border-color:var(--rich-text-editor-border-color, #ddd);--simple-toolbar-border-width:var(--rich-text-editor-border-width, 1px);--simple-toolbar-button-bg:var(--rich-text-editor-bg, #ffffff);--simple-fields-focus-color:var(--rich-text-editor-focus-color, blue);--simple-fields-invalid-color:var(--rich-text-editor-error-color, #800)}`],da=[...la,i`:host{--simple-toolbar-border-color:var(--rich-text-editor-border-color, #ddd);--simple-toolbar-border-width:var(--rich-text-editor-border-width, 1px);--simple-toolbar-button-opacity:var(
        --rich-text-editor-button-opacity,
        1
      );--simple-toolbar-button-color:var(--rich-text-editor-button-color, #444);--simple-toolbar-button-bg:var(--rich-text-editor-button-bg, #ffffff);--simple-toolbar-button-border-color:var(
        --rich-text-editor-button-border-color,
        transparent
      );--simple-toolbar-button-toggled-opacity:var(
        --rich-text-editor-button-toggled-opacity,
        1
      );--simple-toolbar-button-toggled-color:var(
        --rich-text-editor-button-toggled-color,
        #222
      );--simple-toolbar-button-toggled-bg:var(
        --rich-text-editor-button-toggled-bg,
        #ddd
      );--simple-toolbar-button-toggled-border-color:var(
        --rich-text-editor-button-toggled-border-color,
        transparent
      );--simple-toolbar-button-hover-opacity:var(
        --rich-text-editor-button-hover-opacity,
        1
      );--simple-toolbar-button-hover-color:var(
        --rich-text-editor-button-hover-color,
        #000
      );--simple-toolbar-button-hover-bg:var(
        --rich-text-editor-button-hover-bg,
        #f0f0f0
      );--simple-toolbar-button-hover-border-color:var(
        --rich-text-editor-button-hover-border-color,
        unset
      );--simple-toolbar-button-disabled-opacity:var(
        --rich-text-editor-button-disabled-opacity,
        1
      );--simple-toolbar-button-disabled-color:var(
        --rich-text-editor-button-disabled-color,
        #666
      );--simple-toolbar-button-disabled-bg:var(
        --rich-text-editor-button-disabled-bg,
        transparent
      );--simple-toolbar-button-disabled-border-color:var(
        --rich-text-editor-button-disabled-border-color,
        transparent
      )}button[part=button]{border-radius:var(--rich-text-editor-button-disabled-border-radius,0)}`],ca=function(e){return class extends(sa(m(e))){static get tag(){return"rich-text-editor-button"}static get styles(){return[...super.styles,...da]}render(){return super.render()}static get properties(){return{...super.properties,disabled:{type:Boolean,reflect:!0,attribute:"disabled"},command:{type:String,reflect:!0,attribute:"command"},commandVal:{attribute:"command-val",type:Object},tagsList:{type:String},target:{type:Object},toggledCommand:{attribute:"toggled-command",type:String,reflect:!0},toggledCommandVal:{attribute:"toggled-command-val",type:Object},selectedNode:{type:Object},selectionAncestors:{type:Array}}}constructor(){super(),this.tagsList=""}get isToggled(){return this.commandIsToggled}get operationCommand(){return this.isToggled&&this.toggledCommand?this.toggledCommand:this.command}get operationCommandVal(){return this.isToggled&&this.toggledCommand?this.toggledCommandVal||"":this.commandVal}get tagsArray(){return(this.tagsList||"").replace(/\s*/g,"").toLowerCase().split(",")}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e)}updated(e){super.updated(e),e.forEach(((e,t)=>{"controls"===t&&this._editorChanged(this.controls,e),"range"===t&&this._rangeChanged(this.range,e),["shortcutKeys","tagsList","tagClickCallback"].includes(t)&&this.updateButtonRegistry()}))}connectedCallback(){super.connectedCallback()}connectedCallback(){super.connectedCallback()}disconnectedCallback(){super.disconnectedCallback()}commandCallback(e,t,i){}wrapSelection(e){this.dispatchEvent(new CustomEvent("wrapselection",{bubbles:!0,composed:!0,cancelable:!0,detail:e}))}sendCommand(e){this._handleCommand(this.operationCommand,this.operationCommandVal,this.range),this.commandCallback&&this.commandCallback(this.target,this.__toolbar,this),this.dispatchEvent(new CustomEvent("command",{bubbles:!0,cancelable:!0,composed:!0,detail:{command:this.operationCommand,commandVal:this.operationCommandVal,range:this.range,button:this}}))}setRange(){if(!this.tagsList||""===this.tagsList)return;let e=this.rangeOrMatchingAncestor();e&&this.selectNode(e)}_handleClick(e){e.preventDefault(),this.sendCommand(e)}_editorChanged(e,t){}_getSelection(){return"formatBlock"===this.command?this.rangeOrMatchingAncestor():this._getSelectedHtml()}_getSelectedHtml(){if(this.range){let e,t=document.createElement("div"),i=this.range.cloneContents();return t.appendChild(i),e=t.innerHTML,t.remove(),e?e.trim():void 0}}_getSelectedTag(){let e=this.rangeOrMatchingAncestor();return!(!e||!e.tagName)&&e.tagName.toLowerCase()}_getSelectionType(){return"formatBlock"===this.command?this._getSelectedTag():this._getSelectedHtml()}_rangeChanged(e,t){}}};
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */class ha extends(ca(p)){}window.customElements.define(ha.tag,ha);
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class ua extends(sa(p)){static get styles(){return[...da,i`#prompt{display:block;width:300px;max-width:300px;--simple-popover-padding:0px;z-index:2}#prompt[hidden]{display:none}#prompt #form{display:flex;flex-direction:column;align-items:center;justify-content:space-between;z-index:2}#formfields{width:calc(100% - 20px);padding:10px 10px 0;overflow:visible}#prompt simple-fields-field{padding:0}#cancel,#confirm{min-width:unset}#cancel{color:var(--rich-text-editor-button-color);background-color:var(--rich-text-editor-button-bg)}#cancel:focus,#cancel:hover{color:var(--rich-text-editor-button-hover-color);background-color:var(--rich-text-editor-button-hover-bg)}#confirm{color:var(--rich-text-editor-button-color);background-color:var(--rich-text-editor-button-bg)}#confirm:focus,#confirm:hover{color:var(--rich-text-editor-button-hover-color);background-color:var(--rich-text-editor-button-hover-bg)}.actions{width:calc(100% - 20px);padding:0 10px 3px;display:flex;align-items:center;justify-content:flex-end}.confirm-or-cancel{min-width:40px}`]}render(){return o` <simple-popover id="prompt" ?auto="${!this.hidden||!this.__highlight.hidden}" for="${this.__highlight?this.__highlight.id:""}" ?hidden="${this.hidden||this.__highlight.hidden}" position="bottom" position-align="center" .target="${this.__highlight}"> <form id="form" @blur="${this._handleBlur}" @focus="${this._handleFocus}"> <simple-fields id="formfields" hide-line-numbers .fields="${this.fields}" @fields-ready="${this._handleReady}" .value="${this.value}"></simple-fields> <div class="actions"> <simple-toolbar-button id="cancel" controls="${this.__highlight?this.__highlight.id:""}" label="Cancel" icon="clear" @click="${this._cancel}"> </simple-toolbar-button> <simple-toolbar-button id="confirm" controls="${this.__highlight?this.__highlight.id:""}" @click="${this._confirm}" icon="check" label="OK"> </simple-toolbar-button> </div> </form> </simple-popover> `}static get tag(){return"rich-text-editor-prompt"}static get properties(){return{fields:{type:Array},range:{type:Object},value:{type:Object},__focused:{type:Boolean},__hovered:{type:Boolean},__opened:{type:Boolean}}}constructor(){if(super(),window.addEventListener("rich-text-editor-prompt-open",this.open.bind(this)),!window.RichTextEditorPrompt.instance)return window.RichTextEditorPrompt.instance=this,this}get hidden(){return!this.__opened}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.__highlight.addEventListener("change",(e=>setTimeout(this._handleChange(e),300))),this.addEventListener("mousedown",(e=>this.__retainFocus=!0)),this.addEventListener("mouseup",(e=>this.__retainFocus=!1)),this.addEventListener("focusin",(e=>this.__retainFocusIn=!0)),this.addEventListener("focusout",(e=>this.__retainFocusIn=!1)),this.addEventListener("focus",this._handleFocus),this.addEventListener("blur",this._handleBlur)}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{["__focused","__hovered","__opened"].includes(t)&&setTimeout(this._handleChange.bind(this),300)}))}_handleReady(e){e.detail.focus()}_handleFocus(e){this.__focused=!0}_handleBlur(e){this.__retainFocus||this.__retainFocusIn||(this.__focused=!1)}_handleChange(e){setTimeout((()=>{!this.__opened||this.__focused||this.__hovered||this._cancel()}),500)}open(e){e&&e.detail&&(this.__opened=!0,this.__focused=!0,this.button=e.detail,this.fields=[...e.detail.fields],this.value={...e.detail.value},this.shadowRoot.querySelector("#formfields")&&this.shadowRoot.querySelector("#formfields").rebuildForm&&this.shadowRoot.querySelector("#formfields").rebuildForm(),this.shadowRoot.querySelector("#cancel")&&this.shadowRoot.querySelector("#cancel").focus())}close(){this.__opened=!1,this.__focused=!1,this.button=void 0,this.fields=[],this.value={}}_cancel(e){e&&e.preventDefault(),this.button&&this.button.cancel(),this.close()}_confirm(e){e.preventDefault(),this.button.confirm(this.value),this.close()}}window.customElements.define(ua.tag,ua),window.RichTextEditorPrompt=window.RichTextEditorPrompt||{},window.RichTextEditorPrompt.requestAvailability=()=>(window.RichTextEditorPrompt.instance||(window.RichTextEditorPrompt.instance=document.createElement("rich-text-editor-prompt"),document.body.appendChild(window.RichTextEditorPrompt.instance)),window.RichTextEditorPrompt.instance);const pa="attachShadow"in Element.prototype&&"getRootNode"in Element.prototype,ma=!(!pa||!document.createElement("div").attachShadow({mode:"open"}).getSelection),ga=window.ShadyDOM&&window.ShadyDOM.inUse,ba=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,fa=!pa||ga||!ma&&!ba,va=/^(area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|script|source|style|template|track|wbr)$/,ya=[Node.ELEMENT_NODE,Node.TEXT_NODE,Node.DOCUMENT_FRAGMENT_NODE];function _a(e){return ya.includes(e.nodeType)}function xa(e,t,i){const o=t.childNodes||t.children;if(!o)return t;for(let t=0;t<o.length;++t){const a=o[i?t:o.length-1-t];if(_a(a)&&e.containsNode(a,!0)){if(e.containsNode(a,!1))return a;if(!va.exec(a.localName||""))return xa(e,a,i)}}return t}let wa={node:null,offset:-1};function Aa(e,t,i){const o=t;for(;(t=Ea(t,i))&&t.contains(o););return!!t&&(t instanceof Element&&e.containsNode(t,!0))}function Ea(e,t){if(!t)return e.previousSibling||e.parentNode||null;for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}return null}!function(){if(ma||fa)return document.addEventListener("selectionchange",(e=>{document.dispatchEvent(new CustomEvent("-shadow-selectionchange"))})),()=>{};let e=!1;document.addEventListener("selectionchange",(t=>{if(e)return;e=!0;const i=window.getSelection();if("Caret"===i.type){const e=function(e,t){const i=[],o=e=>{for(let t=0;t<e.length;++t)e[t].shadowRoot&&i.push(e[t].shadowRoot)};for(t.shadowRoot&&i.push(t.shadowRoot),o(t.childNodes);i.length;){const t=i.shift();for(let i=0;i<t.childNodes.length;++i)if(e.containsNode(t.childNodes[i],!0))return t;o(t.querySelectorAll("*"))}return null}(i,i.anchorNode);if(e instanceof window.ShadowRoot){const t=Ca(e);if(t){const e=t.startContainer,i=t.startOffset;wa={node:e,offset:i}}}}document.dispatchEvent(new CustomEvent("-shadow-selectionchange")),window.requestAnimationFrame((()=>{e=!1}))}))}();const Sa=new Map;function Ca(e){if(fa){const t=document.getSelection();return t.containsNode(e,!0)?t.getRangeAt(0):null}if(ma){const t=e.getSelection();return t.rangeCount?t.getRangeAt(0):null}const t=Sa.get(e);if(t)return t;const i=function(e){const t=window.getSelection();if("None"===t.type)return{range:null,type:"none"};if("Caret"!==t.type&&"Range"!==t.type)throw new TypeError("unexpected type: "+t.type);const i=xa(t,e,!0);if(i===e)return{range:null,mode:"none"};const o=document.createRange();let a,n=null;if("Range"===t.type&&(n=xa(t,e,!1),a=function(e,t,i){if("Range"!==e.type)return;const o=()=>e.toString().length,a=o();let n;return e.modify("extend","forward","character"),n=o(),n>a||Aa(e,i,!0)?(e.modify("extend","backward","character"),!0):n<a||!e.containsNode(t)?(e.modify("extend","backward","character"),!1):(e.modify("extend","backward","character"),n=o(),n>a||Aa(e,t,!1)?(e.modify("extend","forward","character"),!1):n<a||!e.containsNode(i)?(e.modify("extend","forward","character"),!0):void 0)}(t,i,n),void 0===a))return o.setStart(i,0),o.setEnd(n,n.length),{range:o,mode:"all"};const r=t.toString().length;let s=0,l=0;if(null===n);else if(n.nodeType===Node.TEXT_NODE){const e=n.textContent,i=n.nextSibling;for(let i=e.length-1;i>=0;--i){n.splitText(i);if(t.toString().length!==r){l=i+1;break}}for(n.insertData(n.length,e.substr(n.length));n.nextSibling!==i;)n.nextSibling.remove()}if(i.nodeType===Node.TEXT_NODE){i!==n&&(i.appendData("?"),t.collapseToStart(),t.modify("extend","right","character"));const e=i.textContent,o=i.nextSibling;for(let o=i===n?l:e.length-1;o>=0;--o)if(i.splitText(o),""===t.toString()){s=o;break}for(i.insertData(i.length,e.substr(i.length));i.nextSibling!==o;)i.nextSibling.remove();i!==n&&i.deleteData(i.length-1,1),null===n&&(n=i,l=s)}else null===n&&(n=i);1===r&&wa&&wa.node===i&&wa.offset>s&&a&&(a=!1);!0===a?(t.collapse(i,s),t.extend(n,l)):!1===a?(t.collapse(n,l),t.extend(i,s)):t.setPosition(i,s);return o.setStart(i,s),o.setEnd(n,l),{range:o,mode:"normal"}}
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */(e);return Sa.set(e,i.range),window.setTimeout((()=>{Sa.delete(e)}),0),i.range}window.RichTextEditorToolbars=window.RichTextEditorToolbars||[];const Na=function(e){return class extends(sa(g(e))){static get tag(){return"rich-text-editor-toolbar"}static get miniStyles(){return[i`:host{position:relative;height:0;margin:0 auto;padding:0;border:none;background-color:none}#container{display:flex;position:absolute;bottom:0;margin:0 auto;padding:0;border:var(--rich-text-editor-border-width,1px) solid var(--rich-text-editor-border-color,#ddd);background-color:var(--rich-text-editor-bg,var(--rich-text-editor-bg,#fff))}`]}static get baseStyles(){return[...super.baseStyles,...la,i`:host{border:var(--rich-text-editor-border-width,1px) solid var(--rich-text-editor-border-color,#ddd);background-color:var(--rich-text-editor-bg,#fff)}#morebutton::part(button){border-radius:var(--rich-text-editor-button-disabled-border-radius,0)}`]}static get styles(){return[...this.baseStyles,...super.stickyStyles]}get undoButton(){return{command:"undo",icon:"undo",label:"Undo",shortcutKeys:"ctrl+z",type:"rich-text-editor-button"}}get redoButton(){return{command:"redo",icon:"redo",label:"Redo",shortcutKeys:"ctrl+shift+z",type:"rich-text-editor-button"}}get historyButtonGroup(){return{type:"button-group",subtype:"history-button-group",buttons:[this.undoButton,this.redoButton]}}get formatButton(){return{label:"Format",type:"rich-text-editor-heading-picker"}}get boldButton(){return{command:"bold",icon:"editor:format-bold",label:"Bold",shortcutKeys:"ctrl+b",toggles:!0,type:"rich-text-editor-button"}}get italicButton(){return{command:"italic",icon:"editor:format-italic",label:"Italics",shortcutKeys:"ctrl+i",toggles:!0,type:"rich-text-editor-button"}}get underlineButton(){return{type:"rich-text-editor-underline"}}get strikethroughButton(){return{command:"strikeThrough",icon:"editor:format-strikethrough",label:"Strike Through",type:"rich-text-editor-button"}}get removeFormatButton(){return{command:"removeFormat",icon:"editor:format-clear",label:"Erase Format",type:"rich-text-editor-button"}}get codeButton(){return{command:"wrapRange",commandVal:"CODE",toggles:!0,label:"Code",type:"rich-text-editor-button"}}get basicInlineButtonGroup(){return{type:"button-group",subtype:"basic-inline-button-group",buttons:[this.formatButton,this.boldButton,this.italicButton,this.removeFormatButton]}}get linkButton(){return{icon:"link",label:"Link",shortcutKeys:"ctrl+k",type:"rich-text-editor-link"}}get unlinkButton(){return{icon:"mdextra:unlink",label:"Remove Link",type:"rich-text-editor-unlink"}}get linkButtonGroup(){return{type:"button-group",subtype:"link-button-group",buttons:[this.linkButton,this.unlinkButton]}}get cutButton(){return{command:"cut",icon:"content-cut",label:"Cut",shortcutKeys:"ctrl+x",type:"rich-text-editor-button"}}get copyButton(){return{command:"copy",icon:"content-copy",label:"Copy",shortcutKeys:"ctrl+c",type:"rich-text-editor-button"}}get pasteButton(){return{command:"paste",icon:"content-paste",label:"Paste",shortcutKeys:"ctrl+v",type:"rich-text-editor-button"}}get clipboardButtonGroup(){return{type:"button-group",subtype:"clipboard-button-group",buttons:[this.cutButton,this.copyButton,this.pasteButton]}}get subscriptButton(){return{command:"subscript",icon:"mdextra:subscript",label:"Subscript",radio:!0,type:"rich-text-editor-button"}}get superscriptButton(){return{command:"superscript",icon:"mdextra:superscript",label:"Superscript",radio:!0,type:"rich-text-editor-button"}}get scriptButtonGroup(){return{type:"simple-toolbar-button-group",subtype:"script-button-group","aria-label":"Subscript and Superscript",buttons:[this.subscriptButton,this.superscriptButton]}}get symbolButton(){return{symbolTypes:["symbols"],type:"rich-text-editor-symbol-picker"}}get iconButton(){return{type:"rich-text-editor-icon-picker"}}get emojiButton(){return{type:"rich-text-editor-emoji-picker"}}get imageButton(){return{type:"rich-text-editor-image"}}get insertButtonGroup(){return{type:"button-group",subtype:"insert-button-group",buttons:[this.imageButton,this.symbolButton]}}get advancedInsertButtonGroup(){return{type:"button-group",subtype:"advanced-insert-button-group",buttons:[this.emojiButton]}}get justifyLeftButton(){return{command:"justifyLeft",icon:"editor:format-align-left",label:"Align Left",radio:!0,type:"rich-text-editor-button"}}get justifyCenterButton(){return{command:"justifyCenter",icon:"editor:format-align-center",label:"Align Center",radio:!0,type:"rich-text-editor-button"}}get justifyRightButton(){return{command:"justifyRight",icon:"editor:format-align-right",label:"Align Right",radio:!0,type:"rich-text-editor-button"}}get justifyFullButton(){return{command:"justifyFull",icon:"editor:format-align-justify",label:"Justify",radio:!0,type:"rich-text-editor-button"}}get justifyButtonGroup(){return{type:"simple-toolbar-button-group",subtype:"advanced-insert-button-group","aria-label":"Text Alignment",required:!0,buttons:[this.justifyLeftButton,this.justifyCenterButton,this.justifyRightButton,this.justifyFullButton]}}get orderedListButton(){return{command:"insertOrderedList",icon:"editor:format-list-numbered",label:"Ordered List",radio:!0,type:"rich-text-editor-button"}}get unorderedListButton(){return{command:"insertUnorderedList",icon:"editor:format-list-bulleted",label:"Unordered List",radio:!0,type:"rich-text-editor-button"}}get blockquoteButton(){return{command:"formatBlock",commandVal:"blockquote",label:"Blockquote",icon:"editor:format-quote",shortcutKeys:"ctrl+'",toggles:!0,type:"rich-text-editor-button"}}get indentButton(){return{command:"indent",icon:"editor:format-indent-increase",label:"Increase Indent",shortcutKeys:"ctrl+]",type:"rich-text-editor-button"}}get outdentButton(){return{command:"outdent",icon:"editor:format-indent-decrease",label:"Decrease Indent",shortcutKeys:"ctrl+[",type:"rich-text-editor-button"}}get listButtonGroup(){return{type:"simple-toolbar-button-group",subtype:"list-button-group","aria-label":"List Type",buttons:[this.orderedListButton,this.unorderedListButton]}}get listIndentButtonGroup(){return{type:"button-group",subtype:"list-indent-button-group",buttons:[this.listButtonGroup,this.blockquoteButton,this.indentButton,this.outdentButton]}}get saveButton(){return{command:"save",icon:"save",label:"Save",type:"rich-text-editor-button"}}get closeButton(){return{command:"cancel",icon:"close",label:"Cancel",type:"rich-text-editor-button"}}get saveCloseButtonGroup(){return{type:"button-group",subtype:"save-close-button-group",buttons:[this.saveButton]}}get sourceButton(){return{type:"rich-text-editor-source-code"}}get sourceButtonGroup(){return{type:"button-group",subtype:"source-button-group",buttons:[this.sourceButton]}}get defaultConfig(){return[this.historyButtonGroup,this.basicInlineButtonGroup,this.linkButtonGroup,this.clipboardButtonGroup,this.scriptButtonGroup,this.insertButtonGroup,this.listIndentButtonGroup]}get miniConfig(){return[{type:"button-group",buttons:[this.boldButton,this.italicButton,this.removeFormatButton]},this.linkButtonGroup,this.scriptButtonGroup,{type:"button-group",buttons:[this.orderedListButton,this.unorderedListButton]}]}get miniTemplate(){return o` <div id="container">${super.toolbarTemplate}</div> `}get toolbarTemplate(){return super.toolbarTemplate}render(){return this.toolbarTemplate}static get properties(){return{...super.properties,breadcrumbsLabel:{name:"breadcrumbsLabel",type:String,attribute:"breadcrumbs-label"},breadcrumbsSelectAllLabel:{name:"breadcrumbsSelectAllLabel",type:String,attribute:"breadcrumbs-select-all-label"},target:{name:"target",type:Object},id:{name:"id",type:String,attribute:"id",reflect:!0},savedSelection:{name:"savedSelection",type:Object},registered:{type:Boolean},selectedNode:{type:Object},selectionAncestors:{type:Array},show:{type:String,attribute:"show",reflect:!0},clickableElements:{name:"clickableElements",type:Object},__canceledEdits:{type:Object},__pasteDisabled:{name:"__pasteDisabled",type:Boolean,attribute:"paste-disabled",reflect:!0},__prompt:{type:Object},__promptOpen:{name:"__promptOpen",type:Boolean}}}constructor(){super(),import("./644ae25e.js"),import("./b30d55a2.js"),import("./1badd420.js"),import("./276e2953.js"),import("./0fe57457.js"),import("./a5f6173c.js"),import("./c4b35e75.js"),import("./8e2b1a94.js"),this.config=this.defaultConfig,this.clickableElements={},this.breadcrumbsLabel="Select",this.breadcrumbsSelectAllLabel="All",this.__toolbar=this,document.addEventListener("-shadow-selectionchange",this._handleTargetSelection.bind(this.__toolbar)),this.addEventListener("mousedown",(e=>e.stopImmediatePropagation()))}connectedCallback(){super.connectedCallback(),window.RichTextEditorToolbars.push(this)}disconnectedCallback(){super.disconnectedCallback(),window.RichTextEditorToolbars=window.RichTextEditorToolbars.filter((e=>e!==this))}firstUpdated(e){this.id||(this.id=this._generateUUID()),super.firstUpdated(e),this.hasBreadcrumbs&&this.editor&&this.positionByTarget(this.editor),this.__prompt=window.RichTextEditorPrompt.requestAvailability(),this.__prompt.addEventListener("open",(e=>{this.__promptOpen=!0})),this.__prompt.addEventListener("close",(e=>{this.__promptOpen=!1})),this.onmousedown=this._addHighlight,this.onkeydown=this._addHighlight}updated(e){super.updated(e),e.forEach(((e,t)=>{"range"===t&&this._rangeChanged(this.range,e),"config"===t&&this.updateToolbar(),"editor"===t&&this._editorChange(),["editor","show","range"].includes(t)&&(this.hidden=this.disconnected),["breadcrumbs","sticky"].includes(t)&&this.breadcrumbs&&(this.breadcrumbs.sticky=this.sticky)}))}get controls(){let e=this.target?this.target.getAttribute("id"):void 0;return this.target&&this.setAttribute("controls",e),e}get disconnected(){return"always"!=this.show&&("selection"!=this.show?!this.target:this.noSelection)}get noSelection(){return!this.range||this.range.collapsed}get observer(){return new MutationObserver(this._handleTargetMutation.bind(this))}get isRangeInScope(){return this.range&&this.target&&this.rangeNodeOrParentNode(this.range)&&this.target.contains(this.rangeNodeOrParentNode(this.range))}cancel(){this.dispatchEvent(new CustomEvent("cancel",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}close(){this.target=void 0,this.positionByTarget(!1),this.dispatchEvent(new CustomEvent("close",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_editorChanged(){this.dispatchEvent(new CustomEvent("editor-change",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}getRange(){let e=t=>{let i=t.parentNode;return i?e(i):t};try{this.range=e(this.target)?Ca(e(this.target)):void 0}catch(e){this.range=void 0}return this.range}getSelection(){return getSelection()}updateRange(e,t=this.range){e&&(e.range||(e.range=t))}_rangeChanged(e,t){this._updateButtonRanges(),this.dispatchEvent(new CustomEvent("range-changed",{bubbles:!0,composed:!0,cancelable:!0,detail:this}))}clearToolbar(){super.clearToolbar&&super.clearToolbar(),this.clickableElements={}}deregisterButton(e){super.deregisterButton&&super.deregisterButton(e),(e.tagsArray||[]).forEach((e=>delete this.clickableElements[e]))}registerButton(e){super.registerButton&&super.registerButton(e),"paste"!==e.command||navigator.clipboard?(e.__toolbar=this,e.disabled=!this.target,(e.tagsArray||[]).forEach((t=>{e.tagClickCallback&&(this.clickableElements[t]=e)}))):e.remove()}_addBreadcrumbs(){return this.breadcrumbs||(this.breadcrumbs=document.createElement("rich-text-editor-breadcrumbs"),document.body.appendChild(this.breadcrumbs)),this.breadcrumbs.label=this.breadcrumbsLabel,this.breadcrumbs}_generateUUID(){let e=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return"rte-"+"ss-s-s-s-sss".replace(/s/g,e)}_handleButtonUpdate(e){super._handleButtonUpdate&&super._handleButtonUpdate(e)}_renderButtonGroup(e){let t=super._renderButtonGroup(e);return e.subtype&&t.classList.add(e.subtype),t}_updateButtonRanges(){if(this.isRangeInScope){let e=[],t=i=>{"rich-text-editor-highlight"!==(i.tagName||"").toLowerCase()&&e.push(i),i.parentNode&&i.parentNode!==this.target&&t(i.parentNode)};this.rangeNodeOrParentNode(this.range)!==this.target&&t(this.rangeNodeOrParentNode(this.range)),e.push({nodeName:this.breadcrumbsSelectAllLabel,selectAll:this.target}),this.selectedNode=e[0],this.selectionAncestors=e.reverse(),(this.buttons||[]).forEach((e=>{e.range=void 0,e.range=this.range,e.selectedNode=this.selectedNode,e.selectionAncestors=this.selectionAncestors})),this.breadcrumbs&&(this.breadcrumbs.selectionAncestors=this.selectionAncestors,this.breadcrumbs.hidden=this.disconnected,this.breadcrumbs.editor=this.editor)}}cancelEdits(e=this.target){this.revertTarget(e),this.target(editor,!1)}get enabledTargetHandlers(){return{keydown:this._removeHighlight.bind(this),keypress:this._handleTargetKeypress.bind(this),mousedown:this._removeHighlight.bind(this),mouseup:this._addHighlight.bind(this)}}positionByTarget(e){e?(e.parentNode.insertBefore(this,e),this.slot=e.slot,this.hasBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs||this._addBreadcrumbs(),this.target.parentNode.insertBefore(this.breadcrumbs,this.target.nextSibling),this.breadcrumbs.slot=e.slot)):(document.body.append(this),this.slot=void 0,this.breadcrumbs&&(document.body.append(this.breadcrumbs),this.breadcrumbs.slot=void 0))}enableEditing(e=this.editor){let t=this.enabledTargetHandlers;!e||e.hidden||e.disabled||(e.makeSticky&&e.makeSticky(this.sticky),this.positionByTarget(e),e.setAttribute("contenteditable","true"),Object.keys(t).forEach((i=>e.removeEventListener(i,t[i]))),this.setCanceledEdits(),this.updateRange(e),this.observeChanges(!0),this.getRoot(e).onselectionchange=t=>{this.__promptOpen||this.updateRange(e,this.getRange())},this.dispatchEvent(new CustomEvent("enabled",{bubbles:!0,composed:!0,cancelable:!0,detail:(this.target.innerHTML||"").replace(/<!--[^(-->)]*-->/g,"").trim()})))}disableEditing(e=this.target){let t=this.enabledTargetHandlers,i=this.getRange();e&&(i&&i.collapse(!1),this.__highlight.emptyContents(),this.getRoot(e).onselectionchange=void 0,this.observeChanges(!1),this.__source&&this.__source.toggle(!1),e.removeAttribute("contenteditable"),Object.keys(t).forEach((i=>e.removeEventListener(i,t[i]))),e.makeSticky&&e.makeSticky(!1),this.dispatchEvent(new CustomEvent("disabled",{bubbles:!0,composed:!0,cancelable:!0,detail:(this.target.innerHTML||"").replace(/<!--[^(-->)]*-->/g,"").trim()})))}insertNew(e){let t=document.createElement("rich-text-editor");e.parentNode.insertBefore(t,e),t.appendChild(e)}observeChanges(e=!0){e?this.observer.observe(this.target,{attributes:!1,childList:!0,subtree:!0,characterData:!1}):this.observer&&this.observer.disconnect}revertTarget(e=this.target){this.target&&(this.target.innerHTML=this.__canceledEdits)}sanitizeHTML(e=""){let t="<body(.*\n)*>(.*\n)*</body>";return e.match(t)&&e.match(t).length>0&&(e=e.match(t)[0].replace(/<\?body(.*\n)*\>/i)),e}setCanceledEdits(e){this.__canceledEdits=e||(this.target&&this.target.innerHTML?this.target.innerHTML:"")}setTarget(e){let t=this.targetHandlers(e),i=this.target;e&&(i&&"textbox"==i.getAttribute("role")&&i.removeAttribute("role"),e.setAttribute("role","textbox"),i!==e&&(i&&this.unsetTarget(i),Object.keys(t).forEach((i=>e.addEventListener(i,t[i]))),this.getRoot(e).onselectionchange=t=>{this.__promptOpen||this.updateRange(e,this.getRange())},this.target=e,this.enableEditing(e))),this.updateRange(this.target),this.breadcrumbs&&(this.breadcrumbs.controls=this.controls),this.buttons.forEach((e=>{"close"!==e.command&&(e.disabled=!this.target)})),e!==i&&(this.range=void 0,this._rangeChanged())}unsetTarget(e=this.target){let t=this.targetHandlers(e);this.disableEditing(e),Object.keys(t).forEach((i=>e.removeEventListener(i,t[i]))),this.target=void 0}targetEmpty(){return!this.target||!this.target.innerHTML||""==this.trimHTML(this.target)}targetHandlers(e){return{dblclick:t=>this._handleTargetClick(e,t),focus:t=>this._handleTargetFocus(e,t),keydown:e=>this._handleShortcutKeys(e),paste:e=>this._handlePaste(e)}}get targetHTML(){return this.target?this.outdentHTML(this.target.innerHTML):void 0}htmlMatchesTarget(e){let t=e?this.outdentHTML(e):void 0,i=t?t.replace(/\s+/gm,""):void 0,o=this.targetHTML?this.targetHTML.replace(/\s+/gm,""):void 0;return i&&o&&o.localeCompare(i)}_handleTargetClick(e,t){let i=b(t);if(e&&!e.disabled){if(this.target!==e)t.preventDefault(),this.setTarget(e);else{let e=Object.keys(this.clickableElements||{}),o=!1;i.forEach((a=>{if(o)return;let n=(a.tagName||"").toLowerCase();n&&e.includes(n)&&(o=!0,t.preventDefault(),this.clickableElements[n].tagClickCallback({...t,detail:a,eventPath:i}))}))}this.range=this.getRange(),this.updateRange()}}_handleTargetFocus(e,t){this.__promptOpen||e.disabled||this.setTarget(e)}_handleTargetKeypress(e){this.targetEmpty()&&e.key&&(this.innerHTML=e.key.replace(">","&gt;").replace("<","&lt;").replace("&","&amp;"),this.range=this.getRange(),this.range.selectNodeContents(this),this.range.collapse())}_handleTargetMutation(e=[]){this._handleTargetSelection(),(e||[]).forEach((e=>{"attributes"==e.type&&((target.disabled||target.hidden)&&target.conteneditable?(this.disableEditing(target),target.tabindex=-1):target.disabled||target.hidden||!target.conteneditable||(this.enableEditing(target),target.tabindex=0))}))}_handleTargetSelection(e){this.__promptOpen||(this.range=this.getRange())}_handlePaste(e){e.stopImmediatePropagation(),this.pasteFromClipboard()}_addHighlight(){this.__highlight.hidden&&(this.range=this.getRange(),this.target&&"true"!=!this.target.getAttribute("contenteditable")&&this.__highlight.wrap(this.range||this.getRange()))}_removeHighlight(){this.__highlight.unwrap(this.range||this.getRange())}}};class Ta extends(Na(p)){}window.customElements.define(Ta.tag,Ta);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
const ka=function(e){return class extends(ca(e)){static get tag(){return"rich-text-editor-prompt-button"}render(){return super.render()}static get properties(){return{...super.properties,fields:{type:Array},id:{name:"id",type:String,reflect:!0,attribute:"id"},value:{type:Object},__wrap:{name:"__wrap",type:Object},__oldValue:{name:"__oldValue",type:Object}}}constructor(){super(),this.editableSelection=!1,this.fields=[{property:"innerHTML",title:"Text",inputMethod:"textfield"}],this.tagsList="span",this.value={innerHTML:void 0}}firstUpdated(e){super.firstUpdated(e)}get promptCommand(){return this.toggledCommand&&!this.toggled?this.toggledCommand:this.command}get promptCommandVal(){return this.commandVal}get setsInnerHTML(){let e=(this.fields||[]).filter((e=>"innerHTML"===e.property));return e&&e.length>0}get targetedNode(){let e=this.__highlight.querySelectorAll(this.tagsList);return 1===e.length?e[0]:this.__highlight}tagClickCallback(e={}){e.detail&&this.open(e.detail)}cancel(){this.close()}close(){this.__highlight.unwrap(this.range),this.range&&this.range.collapse()}confirm(e){this.value=e,this.setToggled(),this.updateSelection(),this.close()}getPropValue(e){let t=!!this.value&&{...this.value},i=!(!t||!t[e])&&(t[e].trim?t[e].trim():t[e]);return!(!i||""===i)&&i}getValue(){return{innerHTML:this.targetedNode.innerHTML||""}}open(e){this.highlightNode(e),this.value=this.getValue(),this.dispatchEvent(new CustomEvent("rich-text-editor-prompt-open",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}setInnerHTML(e){this.setsInnerHTML&&(this.targetedNode.innerHTML=e)}setToggled(){this.toggled=!this.value}updateSelection(){let e=this.promptCommand,t=this.promptCommandVal;this.setInnerHTML(this.getPropValue("innerHTML")),this.targetedNode===this.__highlight?this.selectNodeContents(this.targetedNode):this.selectNode(this.targetedNode),this._handleCommand(e,t,this.range)}_handleClick(e){e.preventDefault(),this.open()}_rangeChanged(e,t){this.value=this.getValue(),this.setToggled()}}};class Oa extends(ka(p)){}window.customElements.define(Oa.tag,Oa);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
class Pa extends(ka(p)){static get tag(){return"hax-text-editor-button"}static get properties(){return{...super.properties,element:{type:Object}}}constructor(){super(),this.tag=Pa.tag,this.toggles=!0,this.command="insertHTML"}get targetedNode(){let e=this.__highlight.querySelectorAll(this.tagsList);return 1===e.length?e[0]:this.__highlight}firstUpdated(e){this.updateElement(),super.firstUpdated&&super.firstUpdated(e)}updated(e){super.updated(e),e.forEach(((e,t)=>{"element"===t&&this.element&&this.updateElement()}))}updateElement(){this.dispatchEvent(new CustomEvent("deregister-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}));let e=this.element||{},t=e.settings||{},i=e.gizmo||{};this.fields=[...(t.configure||[]).map((e=>(""===e.slot&&(e.property="innerHTML"),e)))],this.tagsList=i.tag||"span",this.icon=i.icon||"add",this.label=i.title||i.tag,this.value=this.getValue(void 0),this.dispatchEvent(new CustomEvent("deregister-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}getValue(){let e=super.getValue();return this.fields.forEach((t=>{t.property&&"innerHTML"!==t.property&&(e[t.property]=this.targetedNode&&this.targetedNode.getAttribute?this.targetedNode.getAttribute(t.property):void 0),t.slot&&""!==t.slot&&this.targetedNode&&this.targetedNode.querySelector&&this.targetedNode.querySelector(`[slot=${t.slot}]`)&&this.targetedNode.querySelector(`[slot=${t.slot}]`).innerHTML,t.slot&&""===t.slot&&this.targetedNode&&[...this.targetedNode.children||[]].filter(":not([slot])")&&[...this.targetedNode.children||[]].filter(":not([slot])").length>0&&[...this.targetedNode.children||[]].filter(":not([slot])").join("\n")})),e}setToggled(){this.toggled=!!this.value}tagClickCallback(e={}){e.detail&&this.open(e.detail);let t=this.__highlight.innerHTML;this.__highlight.innerHTML="",this.__highlight.innerHTML=t}updateSelection(){let e=document.createElement(this.tagsList),t="";this.fields.forEach((i=>{i.property&&"innerHTML"!==i.property&&(e[i.property]=this.value[i.property]),i.slot&&this.value[i.slot]&&(t+=`<${this.getSlotWrapper(i)}${Object.keys(i.slotAttributes||{}).map((e=>` ${e}="${i.slotAttributes[e]}"`))}>\n            ${this.value[slot]}\n          </${this.getSlotWrapper(i)}>`)})),t+=this.value.innerHTML||"",this.__highlight.innerHTML="",this.__highlight.parentNode.insertBefore(e,this.__highlight),this.__highlight.unwrap(),e.innerHTML=t}getSlotWrapper(e){let t=e.slotWrapper,i=e.allowedSlotWrappers,o=e.excludedSlotWrappers||[],a=["span","div","p"].filter((e=>!o.includes(e)));return t||(i&&i[0]?i[0]:a)}}window.customElements.define(Pa.tag,Pa);const La=function(e){return class extends(f(e)){static get styles(){return[i`:host{display:block;--hax-ui-spacing-sm:1px;max-width:100%}:host [hidden]{display:none}.selected-buttons{transition:.1s all ease-in-out;width:0}:host([has-selected-text]) .selected-buttons{width:100%}:host(.hax-context-pin-top) #toolbar{position:fixed;top:0}:host(:focus-within),:host(:hover){z-index:var(--hax-ui-focus-z-index)!important}.group{padding:0;background-color:var(--hax-ui-background-color)}hax-toolbar{flex:0 1 auto}hax-toolbar::part(morebutton){border:1px solid var(--simple-toolbar-group-border-width,var(--simple-toolbar-border-width,1px))!important}hax-toolbar[collapse-disabled]::part(morebutton){display:none!important}hax-toolbar [hidden]{display:none!important}hax-toolbar[collapse-disabled]::part(morebutton){display:none!important}`]}constructor(){super(),this.viewSource=!1,Ai((()=>{this.hasSelectedText=Ii(Zo.haxSelectedText).length>0})),Ai((()=>{Ii(Zo.editMode);const e=Ii(Zo.activeNode);if(this.sourceView=!1,e&&e.tagName){let t=Zo.haxSchemaFromTag(e.tagName);this.parentSchema=e&&e.parentNode?Zo.haxSchemaFromTag(e.parentNode.tagName):void 0,this.sourceView=t.canEditSource}}))}render(){return o`<slot></slot> `}static get tag(){return"hax-context-behaviors"}static get properties(){return{...super.properties,activeNode:{type:Object},parentSchema:{type:Object},realSelectedValue:{type:String},sourceView:{type:Boolean},viewSource:{type:Boolean}}}get slotSchema(){let e={};if(this.activeNode&&this.parentSchema){let t=this.activeNode.slot||"";this.activeNode&&this.activeNode.parentNode||(e=Zo.schemaBySlotId(this.activeNode.parentNode,t))}return e}get layoutElement(){return this.activeNode&&Zo.isLayoutElement(this.activeNode)?this.activeNode:this.activeNode&&this.activeNode.parentNode&&Zo.isLayoutElement(this.activeNode.parentNode)?this.activeNode.parentNode:void 0}get layoutParent(){return this.layoutElement&&this.layoutElement.parentNode&&Zo.isLayoutElement(this.layoutElement.parentNode)&&this.layoutElement.parentNode.tagName&&"HAX-BODY"!==this.layoutElement.parentNode.tagName?this.layoutElement.parentNode:void 0}get slottedItems(){if(!this.activeNode)return[];let e=Zo.slottedContentByNode(this.layoutElement)||{};return Object.keys(e).map((t=>e[t]))}elementIcon(e){let t=e&&this.elementGizmo(e)?this.elementGizmo(e):void 0;return t?t.icon:void 0}elementLabel(e){let t=e&&this.elementGizmo(e)?this.elementGizmo(e):void 0;return t?t.title||t.tag:e&&e.tagName?e.tagName.toLowerCase():""}elementGizmo(e){let t=e&&e.tagName?Zo.haxSchemaFromTag(e.tagName):void 0;return t&&t.gizmo?t.gizmo:void 0}getFilteredBlocks(e=[]){return e.filter((e=>{if(!e.tag)return;let t=e.tag||"",i=this.slotSchema&&this.slotSchema.slotWrapper&&this.slotSchema.slotWrapper?this.slotSchema.slotWrapper:void 0,o=this.slotSchema&&this.slotSchema.slotWrapper&&this.slotSchema.allowedSlotWrappers?this.slotSchema.allowedSlotWrappers:void 0,a=this.slotSchema&&this.slotSchema.slotWrapper&&this.slotSchema.excludedSlotWrappers?this.slotSchema.excludedSlotWrappers:void 0,n=!this.slotSchema||!o,r=!!i&&i===t||!!o&&o.includes(t);return!(!!a&&a.includes(t))&&(n||r)}))}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"activeNode"===t&&this.activeNode!==e&&this.setTarget(this.activeNode)}))}setTarget(e=this.activeNode){super.setTarget&&super.setTarget(e),this.parentSchema=e&&e.parentNode?Zo.haxSchemaFromTag(e.parentNode.tagName):void 0}}};
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */class Ba extends(ca(p)){static get tag(){return"hax-text-editor-paste-button"}render(){return super.render()}static get properties(){return{...super.properties}}constructor(){super(),this.command="paste",this.icon="content-paste",this.label="Paste Clipboard"}sendCommand(e){navigator&&navigator.clipboard&&Zo._onPaste({...e,clipboardData:navigator.clipboard})}}window.customElements.define(Ba.tag,Ba);
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Ma extends(Na(R(La(p)))){static get styles(){return[...super.baseStyles,...super.stickyStyles,i`:host{--rich-text-editor-button-color:var(--hax-ui-color);--rich-text-editor-button-bg:var(--hax-ui-background-color);--rich-text-editor-button-border-color:transparent;--rich-text-editor-button-hover-color:var(--hax-ui-color);--rich-text-editor-button-hover-bg:var(
            --hax-ui-background-color-secondary
          );--rich-text-editor-button-toggled-color:var(--hax-ui-color-accent);--rich-text-editor-button-toggled-bg:var(--hax-ui-background-color);--rich-text-editor-button-toggled-border-color:var(
            --hax-ui-color-accent
          );--rich-text-editor-button-disabled-opacity:1;--rich-text-editor-button-disabled-color:var(
            --hax-ui-disabled-color
          );--rich-text-editor-button-disabled-bg:var(--hax-ui-background-color);--rich-text-editor-button-disabled-border-color:transparent}#morebutton{align-self:flex-end}::slotted([icon-position]:hover){--rich-text-editor-button-toggled-bg:var(
            --hax-ui-background-color-accent
          )}::slotted(.group){flex:0 0 auto;justify-content:center;border-width:1px;margin:-1px;padding:0}::slotted(.group),::slotted([icon-position]){z-index:1}::slotted([icon-position]),:host([collapsed]) ::slotted(.group){flex:0 0 auto}:host ::slotted(:focus),:host ::slotted(:focus-within){z-index:2!important}:host ::slotted(:hover){z-index:3!important}`]}get tourTemplate(){return o` <div slot="tour" data-stop-content> ${this.t.textEditorToolbarTour} </div>`}render(){return super.toolbarTemplate}static get properties(){return{__updated:{type:Boolean}}}tag(){return"hax-text-editor-toolbar"}constructor(){super(),this.tag=Ma.tag,this.t={undoButton:"Undo",redoButton:"Redo",formatButton:"Format",blockP:"Paragraph",blockH1:"Heading 1",blockH2:"Heading 2",blockH3:"Heading 3",blockH4:"Heading 4",blockH5:"Heading 5",blockH6:"Heading 6",blockPre:"Preformatted",italicButton:"Italic",boldButton:"Bold",underlineButton:"Underline",strikethroughButton:"Cross out",codeButton:"Code",removeFormatButton:"Remove format",linkButton:"Link",unlinkButton:"Remove Link",cutButton:"Cut",copyButton:"Copy",pasteButton:"Paste Clipboard",subscriptButton:"Subscript",superscriptButton:"Superscript",symbolButton:"Insert Symbol",emojiButton:"Insert Emoticon",imageButton:"Insert Image",orderedListButton:"Bulleted list",unorderedListButton:"Numbered list",blockquoteButton:"Blockquote",indentButton:"Indent",outdentButton:"Outdent",textEditorToolbarTour:"Change how the text is structured and visualized in the page."},this.registerLocalization({context:this,namespace:"hax"}),this.sourceView=!1,this.haxUIElement=!0,this.tourName="hax",window.HaxTextEditorToolbarConfig=window.HaxTextEditorToolbarConfig||{},window.HaxTextEditorToolbarConfig.inlineGizmos=window.HaxTextEditorToolbarConfig.inlineGizmos||{},window.HaxTextEditorToolbarConfig.default=window.HaxTextEditorToolbarConfig.default||[...this.defaultConfig],this.config=window.HaxTextEditorToolbarConfig.default,this.sticky=!1,this.__updated=!1,this.setTarget(void 0),window.addEventListener("hax-store-ready",this._handleHaxStoreReady.bind(this)),window.addEventListener("hax-register-properties",this._handleElementRegister.bind(this))}get undoButton(){return{...super.undoButton,label:this.t.undoButton}}get redoButton(){return{...super.redoButton,label:this.t.redoButton}}get formatButton(){return{...super.formatButton,label:this.t.formatButton,blocks:this.formatBlocks}}get formatBlocks(){return[{label:this.t.blockP,tag:"p"},{label:this.t.blockH1,tag:"h1"},{label:this.t.blockH2,tag:"h2"},{label:this.t.blockH3,tag:"h3"},{label:this.t.blockH4,tag:"h4"},{label:this.t.blockH5,tag:"h5"},{label:this.t.blockH6,tag:"h6"},{label:this.t.blockPre,tag:"pre"}]}get boldButton(){return{...super.boldButton,label:this.t.boldButton}}get italicButton(){return{...super.italicButton,label:this.t.italicButton}}get underlineButton(){return{...super.underlineButton,label:this.t.underlineButton}}get strikethroughButton(){return{...super.strikethroughButton,label:this.t.strikethroughButton}}get codeButton(){return{...super.codeButton,icon:"hax:html-code",label:this.t.codeButton}}get removeFormatButton(){return{...super.removeFormatButton,label:this.t.removeFormatButton}}get advancedInlineButtonGroup(){return{type:"button-group",subtype:"advanced-inline-button-group",buttons:[this.underlineButton,this.strikethroughButton,this.codeButton]}}get linkButton(){return{...super.linkButton,label:this.t.linkButton,allowTarget:!!Zo.activeHaxBody&&!!Zo.activeHaxBody.allowLinkTarget}}get unlinkButton(){return{...super.unlinkButton,label:this.t.unlinkButton}}get cutButton(){return{...super.cutButton,label:this.t.cutButton}}get copyButton(){return{...super.copyButton,label:this.t.copyButton}}get pasteButton(){return{...super.pasteButton,label:this.t.pasteButton,shortcutKeys:void 0,type:"hax-text-editor-paste-button"}}get subscriptButton(){return{...super.subscriptButton,label:this.t.subscriptButton}}get superscriptButton(){return{...super.superscriptButton,label:this.t.superscriptButton}}get symbolButton(){return{...super.symbolButton,label:this.t.symbolButton}}get emojiButton(){return{...super.emojiButton,label:this.t.emojiButton}}get imageButton(){return{...super.imageButton,label:this.t.imageButton}}get orderedListButton(){return{...super.orderedListButton,label:this.t.orderedListButton}}get unorderedListButton(){return{...super.unorderedListButton,label:this.t.unorderedListButton}}get blockquoteButton(){return{...super.blockquoteButton,label:this.t.blockquoteButton}}get indentButton(){return{...super.indentButton,label:this.t.indentButton}}get outdentButton(){return{...super.outdentButton,label:this.t.outdentButton}}get sourceButton(){return{...super.sourceButton}}get haxSymbolInsertButtonGroup(){return{type:"button-group",subtype:"hax-symbol-insert-button-group",buttons:[this.symbolButton,this.emojiButton]}}get iconButton(){return{}}get defaultConfig(){return[this.basicInlineButtonGroup,this.linkButtonGroup,this.listIndentButtonGroup,this.scriptButtonGroup,this.haxSymbolInsertButtonGroup,this.advancedInlineButtonGroup]}get filteredBlocks(){return this.getFilteredBlocks(this.formatBlocks)}get formatButtonElement(){return this.formatButton.type?this.querySelector(this.formatButton.type):void 0}get isRangeInScope(){return this.range&&this.target&&this.rangeNodeOrParentNode(this.range)&&(this.range.commonAncestorContainer===this.target||this.target.contains(this.range.commonAncestorContainer))}targetHandlers(e){let t=super.targetHandlers(e);return delete t.paste,t}updated(e){super.updated&&super.updated(e),this.__ready&&e.forEach(((e,t)=>{"parentSchema"!==t&&"target"!==t||this.updateBlocks(),"activeNode"===t&&this.activeNode!==e&&this.setTarget(this.activeNode),"t"===t&&this.t!==e&&this.updateToolbarElements()}))}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.config=this.updateToolbarElements(),this.__prompt.haxUIElement=!0,this.__prompt.classList.add("ignore-activation"),this.addEventListener("keypress",this.trapKeys.bind(this)),this.__prompt.addEventListener("keypress",this.trapKeys.bind(this)),this.__prompt.addEventListener("paste",this._handlePaste.bind(this))}_handlePaste(e){e.stopPropagation()}trapKeys(e){e.stopPropagation()}updateBlocks(){let e=this.filteredBlocks;this.formatButtonElement&&this.formatButtonElement.blocks!==e&&(this.formatButtonElement.blocks=e,e.length<2?this.formatButtonElement.setAttribute("disabled","disabled"):this.formatButtonElement.removeAttribute("disabled"))}getRange(){let e=Zo.getRange();return!e||e.rangeCount<1?void 0:Zo.getRange()}getSelection(){return Zo.getSelection()}positionByTarget(e){}_handleElementRegister(e){let t=e.detail||{},i=t.tag||{},o=t.properties||{};this._setInlineElement(i,o)}_handleHaxStoreReady(e){this.__ready=!0;let t=Zo.elementList||{};Object.keys(t).forEach((e=>this._setInlineElement(e,elemets[e])))}_setInlineElement(e,t){if(!e||!t||window.HaxTextEditorToolbarConfig.inlineGizmos[e]||e.indexOf("-")<0)return;let i={...t},o=t.gizmo||{},a=e.replace(/-./g,(e=>e.toUpperCase()[1])),n=e.split("-").length>1,r=(o.meta||{}).inlineOnly,s=(o.handles||[]).filter((e=>"inline"===e.type)).length>1,l=n&&(r||s);i.gizmo.title||(i.gizmo.title=a),l&&(window.HaxTextEditorToolbarConfig.inlineGizmos[e]={element:i,type:"hax-text-editor-button"},this.__updated=!1,setTimeout((e=>this.config=this.updateToolbarElements()),500))}updateToolbarElements(){if(this.__updated)return;this.__updated=!0;let e=Object.keys(window.HaxTextEditorToolbarConfig.inlineGizmos||{}).map((e=>window.HaxTextEditorToolbarConfig.inlineGizmos[e]));return 0===e.length?[...this.defaultConfig||[]]:[...this.defaultConfig||[],{type:"button-group",subtype:"hax-insert-button-group",buttons:e}]}}customElements.define("hax-text-editor-toolbar",Ma);const Ha=[i`body{--hax-ui-font-family:sans-serif;--hax-ui-font-size:16px;--hax-ui-font-size-sm:13px;--hax-ui-font-size-xs:12px;--hax-ui-font-size-lg:calc(1.05 * var(--hax-ui-font-size, 16px));--hax-ui-font-size-xl:calc(1.25 * var(--hax-ui-font-size, 16px))}`],Da=[i`body{--hax-tray-width:300px;--hax-tray-menubar-min-width:44px;--hax-tray-menubar-min-height:34px;--hax-ui-spacing-xs:4px;--hax-ui-border-radius:2px;--hax-ui-spacing-sm:calc(1 * var(--hax-ui-spacing-xs, 4px));--hax-ui-spacing:calc(2 * var(--hax-ui-spacing-xs, 4px));--hax-ui-spacing-lg:calc(3 * var(--hax-ui-spacing-xs, 4px));--hax-ui-spacing-xl:calc(4 * var(--hax-ui-spacing-xs, 4px));--hax-ui-focus-z-index:1001;--simple-toolbar-focus-z-index:var(--hax-ui-focus-z-index);--a11y-menu-button-focus-z-index:var(--hax-ui-focus-z-index)}`],Ra=[i`body{--hax-ui-color:#222;--hax-ui-color-focus:#000;--hax-ui-color-faded:#444;--hax-ui-disabled-color:#bbb;--hax-ui-background-color:#fff;--hax-ui-background-color-secondary:#e8e8e8;--hax-ui-background-color-faded:#b0b8bb;--hax-ui-color-accent:#009dc7;--hax-ui-color-accent-secondary:#007999;--hax-ui-background-color-accent:#ccf3fd;--hax-ui-color-danger:#ee0000;--hax-ui-color-danger-secondary:#850000;--hax-ui-background-color-danger:#ffdddd;--hax-ui-border-color:#ddd}body[hax-ui-theme=haxdark]{--hax-ui-color:#eeeae6;--hax-ui-color-focus:#fff;--hax-ui-color-faded:#c5c3be;--hax-ui-disabled-color:#555;--hax-ui-background-color:#333;--hax-ui-background-color-secondary:#111;--hax-ui-background-color-faded:#222;--hax-ui-color-accent:#77e2ff;--hax-ui-color-accent-secondary:#00c9ff;--hax-ui-background-color-accent:#000;--hax-ui-color-danger:#ff8f8f;--hax-ui-color-danger-secondary:#ff2222;--hax-ui-background-color-danger:#000;--hax-ui-border-color:#000}@media (prefers-color-scheme:dark){body[hax-ui-theme=system]{--hax-ui-color:#eeeae6;--hax-ui-color-focus:#fff;--hax-ui-color-faded:#c5c3be;--hax-ui-background-color:#333;--hax-ui-background-color-secondary:#111;--hax-ui-background-color-faded:#222;--hax-ui-color-accent:#77e2ff;--hax-ui-color-accent-secondary:#00c9ff;--hax-ui-background-color-accent:#000;--hax-ui-color-danger:#ff8f8f;--hax-ui-color-danger-secondary:#ff2222;--hax-ui-background-color-danger:#000;--hax-ui-border-color:#000}}`],za=[i`body{--simple-tooltip-background:var(--hax-ui-color);--simple-tooltip-text-color:var(--hax-ui-background-color);--simple-tooltip-opacity:1;--simple-tooltip-delay-in:0;--simple-tooltip-duration-in:100ms;--simple-tooltip-duration-out:0;--simple-tooltip-border-radius:2px;--simple-tooltip-font-size:var(--hax-ui-font-size-sm)}`],Ia=[...Ha,...Da,...[i`body{--simple-fields-field-margin:calc(2 * var(--hax-ui-font-size));--simple-toolbar-focus-z-index:var(--hax-ui-focus-z-index);--simple-fields-font-family:var(--hax-ui-font-family);--simple-fields-font-size:var(--hax-ui-font-size);--simple-fields-line-height:135%;--simple-fields-detail-font-size:var(--hax-ui-font-size-xs);--simple-fields-detail-line-height:120%;--simple-fields-margin:var(--hax-ui-spacing);--simple-fields-background-color:var(--hax-ui-background-color);--simple-fields-color:var(--hax-tray-text-color);--simple-fields-accent-color:var(--hax-ui-color-accent);--simple-fields-accent-color-light:var(--hax-ui-background-color-faded);--simple-fields-error-color:var(--hax-ui-color-danger-secondary);--simple-fields-button-danger-background-color:var(
        --hax-ui-color-danger
      );--simple-fields-button-danger-focus-color:var(
        --hax-ui-color-danger-secondary
      );--simple-fields-button-danger-background-color:var(
        --hax-ui-background-color
      );--simple-fields-secondary-accent-color:var(
        --hax-ui-color-accent-secondary
      );--simple-fields-border-color:var(--hax-ui-color-faded);--simple-fields-fieldset-border-color:rgba(127, 127, 127, 0.2);--simple-fields-legend-text-transform:capitalize;--simple-fields-legend-font-size:var(--hax-ui-font-size-xs);--simple-fields-meta-font-size:var(--hax-ui-font-size-xs);--simple-fields-meta-line-height:120%;--simple-fields-meta-opacity:0.7;--simple-fields-focus-meta-opacity:1;--simple-fields-button-color:var(--hax-ui-color);--simple-fields-button-background-color:var(--hax-ui-background-color);--simple-fields-button-border-color:var(--hax-ui-border-color);--simple-fields-button-text-transform:capitalize;--simple-fields-border-radius:var(--hax-ui-border-radius);--simple-fields-button-padding-sm:var(--hax-ui-spacing-sm);--simple-fields-button-padding:var(--hax-ui-spacing-sm);--simple-fields-button-toggled-color:var(--hax-ui-color);--simple-fields-button-toggled-background-color:var(
        --hax-ui-background-color-accent
      );--simple-fields-button-toggled-border-color:var(--hax-ui-color-accent);--simple-fields-button-focus-color:var(--hax-ui-color);--simple-fields-button-focus-background-color:var(
        --hax-ui-background-color-accent
      );--simple-fields-button-focus-border-color:var(--hax-ui-color-accent);--simple-fields-button-disabled-color:unset;--simple-fields-button-disabled-background-color:unset;--simple-fields-button-disabled-border-color:unset;--simple-fields-button-disabled-opacity:0.5;--hexagon-color:var(--hax-ui-color-accent)}`],...za,...[i`simple-modal[mode=hax-ui],simple-popover-manager[mode=hax]{font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size);--simple-modal-height:70vh;--simple-modal-width:70vw;--simple-popover-border-color:var(--hax-ui-color);--simple-modal-border-color:var(--hax-ui-color)}rich-text-editor-prompt{z-index:calc(var(--hax-ui-focus-z-index) - 1)}simple-modal[mode=hax-ui]::part(dialog){--simple-modal-z-index:100000001!important}simple-modal[opened]{z-index:100000001!important}simple-modal[mode=hax-ui]::part(titlebar),simple-popover-manager[mode=hax] h1[slot=heading],simple-popover-manager[mode=hax]::part(simple-popover-heading){color:var(--hax-ui-background-color);background-color:var(--hax-ui-color-accent);padding:var(--hax-ui-spacing-sm) var(--hax-ui-spacing);margin:0}simple-modal[mode=hax-ui]::part(close),simple-popover-manager[mode=hax] #close{color:var(--hax-ui-background-color);background-color:var(--hax-ui-color-accent);outline:1px solid var(--hax-ui-color-accent);--simple-icon-button-border:0px solid transparent;--simple-icon-button-border-radius:var(--hax-ui-border-radius);width:24px;height:24px;padding:0}simple-modal[mode=hax-ui]:focus-within::part(close),simple-modal[mode=hax-ui]:hover::part(close),simple-popover-manager[mode=hax] #close:focus,simple-popover-manager[mode=hax] #close:hover{background-color:var(--hax-ui-color-accent-secondary);--simple-icon-button-border:0px solid transparent}simple-modal[mode=hax-ui]::part(title),simple-popover-manager[mode=hax] h1{font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size);font-weight:400;margin:0 var(--hax-ui-spacing-sm) 0 0;padding:0}simple-popover-manager[mode=hax] h2{font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size-lg);font-weight:400;color:var(--hax-ui-color-accent-secondary);margin:0 0 var(--hax-ui-spacing-lg)}simple-modal[mode=hax-ui]::part(content),simple-modal[mode=hax-ui]::part(custom),simple-popover-manager[mode=hax]::part(simple-popover-body){font-size:var(--hax-ui-font-size);color:var(--hax-ui-color);background-color:var(--hax-ui-background-color)}simple-modal[mode=hax-ui]::part(content){padding:0 var(--hax-ui-spacing)}simple-modal[mode=hax-ui]::part(custom){padding:0}simple-popover-manager[mode=hax]::part(simple-popover-body){padding:var(--hax-ui-spacing)}simple-modal[mode=hax-ui]::part(buttons),simple-popover-manager[mode=hax]:part(simple-popover-nav){background-color:var(--hax-ui-background-color)}#hax-cancel-no,#hax-cancel-yes{flex:1 1 auto}simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav]::part(button){text-transform:capitalize;font-size:var(--hax-ui-font-size-sm);padding:var(--hax-ui-spacing-sm);color:var(--hax-ui-color);background-color:var(--hax-ui-background-color);border:1px solid var(--hax-ui-border-color);border-radius:var(--hax-ui-border-radius);background-color:var(--hax-ui-background-color)}simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav]::part(button):focus-within,simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav]::part(button):hover{color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}simple-popover-manager[mode=hax] simple-icon-button-lite[slot=nav][disabled]::part(button){opacity:.5;border:1px solid var(--hax-ui-border-color)}`],...Ra],$a=[i`hexagon-loader{display:none;margin:0 auto;z-index:1000}hexagon-loader[loading]{display:block;opacity:.8}`],ja=[i`:host[aria-expanded=true]{border:1px solid var(--hax-ui-border-color)}absolute-position-behavior{border-color:transparent;color:var(--hax-ui-color);background-color:var(--hax-ui-background-color)}:host([expanded]) absolute-position-behavior{border:1px solid var(--hax-ui-border-color)}button[part=button]{text-transform:capitalize;font-size:var(--hax-ui-font-size-sm);padding:var(--hax-ui-spacing-sm);color:var(--hax-ui-color);background-color:var(--hax-ui-background-color);border:1px solid var(--hax-ui-border-color);border-radius:var(--hax-ui-border-radius)}:host([role=menuitem]) button[part=button]{padding:1px;border-color:transparent}:host(:hover) button[part=button]{background-color:var(--hax-ui-background-color-secondary);color:var(--hax-ui-color)}:host([toggled]) button[part=button],button[part=button][aria-pressed=true]{color:var(--hax-ui-color-accent);border-color:var(--hax-ui-color-accent)}:host([toggled]:hover) button[part=button],button[part=button][aria-pressed=true]:hover{background-color:var(--hax-ui-background-color-accent)}:host([danger]) button[part=button],:host([feature]) button[part=button]{color:var(--hax-ui-background-color)}:host([feature]) button[part=button]{background-color:var(--hax-ui-color-accent);border-color:var(--hax-ui-color-accent)}:host([danger]) button[part=button]{background-color:var(--hax-ui-color-danger);border-color:var(--hax-ui-color-danger)}:host([danger]) button[part=button][aria-pressed=true],:host([feature]) button[part=button][aria-pressed=true]{color:var(--hax-ui-background-color)}:host([feature]) button[part=button][aria-pressed=true]{background-color:var(--hax-ui-color-accent-secondary);border-color:var(--hax-ui-color-accent)}:host([danger]) button[part=button][aria-pressed=true]{background-color:var(--hax-ui-color-danger-secondary);border-color:var(--hax-ui-color-danger)}:host([danger]:focus-within) button[part=button],:host([danger]:hover) button[part=button],:host([feature]:focus-within) button[part=button],:host([feature]:hover) button[part=button]{color:var(--hax-ui-background-color)}:host([feature]:focus-within) button[part=button],:host([feature]:hover) button[part=button]{background-color:var(--hax-ui-color-accent-secondary);border-color:var(--hax-ui-color-accent-secondary)}:host([danger]:focus-within) button[part=button],:host([danger]:hover) button[part=button]{background-color:var(--hax-ui-color-danger-secondary);border-color:var(--hax-ui-color-danger-secondary)}:host([large]) button[part=button]{font-size:var(--hax-ui-font-size);padding:var(--hax-ui-spacing);border-width:2px}:host([disabled]) button[part=button][disabled]{opacity:1;color:var(--hax-ui-disabled-color);border:1px solid var(--hax-ui-border-color)}[show-text-label]::part(label){text-transform:capitalize;margin:var(--hax-ui-spacing-sm)}`],Fa=[i`simple-fields-tabs{padding:0;border:none;margin-left:calc(0 - var(--hax-ui-spacing-sm));margin-right:calc(0 - var(--hax-ui-spacing-sm))}simple-fields-tabs::part(tablist){margin-bottom:var(--hax-ui-spacing)}hax-preferences-dialog::part(haxlink),simple-fields-tabs::part(tab),simple-fields-tabs::part(tab-active),simple-fields-tabs::part(tab-disabled){border:1px solid var(--hax-ui-border-color);text-decoration:none;border-radius:3px;color:var(--hax-ui-color);background-color:var(--hax-ui-background-color);outline:unset;text-transform:capitalize;font-size:var(--hax-ui-font-size-sm);padding:var(--hax-ui-spacing-xs);flex:1 1 auto}simple-fields-tabs::part(tab-active){color:var(--hax-ui-color-accent)}hax-preferences-dialog::part(haxlink){display:block;padding:var(--hax-ui-spacing-lg)}hax-preferences-dialog::part(haxlink):focus,hax-preferences-dialog::part(haxlink):hover{color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}simple-fields-tabs::part(tab-disabled){opacity:.5;background-color:rgba(127,127,127,.2)}simple-fields-tabs::part(content){border:none}simple-fields-tab{padding:0}simple-fields ::part(label){text-transform:captitalize;margin:0}`],Va=[...ja,...$a,...Fa],Ua=[i`#tray-detail{font-family:var(--hax-ui-font-family);--hax-tray-detail-title-font-size:var(--hax-ui-font-size);--hax-tray-detail-topic-font-size:var(--hax-ui-font-size-lg);--hax-tray-detail-subtopic-font-size:var(--hax-ui-font-size);--hax-tray-detail-heading-text-transform:capitalize;--hax-tray-detail-heading-font-weight:normal}#toggle-tray-size{color:var(--hax-ui-background-color);background-color:var(--hax-ui-color-accent);outline:1px solid var(--hax-ui-color-accent);--simple-icon-button-border:0px solid transparent;--simple-icon-button-border-radius:var(--hax-ui-border-radius);width:24px;height:24px;padding:0}#toggle-tray-size:focus-within,#toggle-tray-size:hover{color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}#tray-detail h5,#tray-detail h6{text-transform:var(--hax-tray-detail-heading-text-transform);font-weight:var(--hax-tray-detail-heading-font-weight);margin:var(--hax-ui-spacing-lg) 0 var(--hax-ui-spacing-xs);color:var(--hax-ui-color-faded)}#tray-detail h4{text-transform:var(--hax-tray-detail-heading-text-transform);color:var(--hax-ui-background-color);font-size:var(--hax-tray-detail-title-font-size);font-weight:400;margin:0 var(--hax-ui-spacing-sm) 0 0;padding:0}#tray-detail h5{font-size:var(--hax-tray-detail-topic-font-size)}#tray-detail h6{font-size:var(--hax-tray-detail-subtopic-font-size)}`],qa=[i`h5{font-size:var(--hax-tray-detail-topic-font-size)}h6{font-size:var(--hax-tray-detail-subtopic-font-size)}h5,h6{color:var(--hax-ui-color-faded);text-transform:var(--hax-tray-detail-heading-text-transform);font-weight:var(--hax-tray-detail-heading-font-weight);margin:var(--hax-ui-spacing-lg) 0 var(--hax-ui-spacing-xs)}`];class Ga extends p{static get styles(){return Va}render(){return o`<slot></slot>`}static get tag(){return"hax-ui-styles"}}window.customElements.define(Ga.tag,Ga);const Xa=function(e){return class extends(m(e)){static get tag(){return"hax-toolbar-item"}constructor(){super(),this.danger=!1,this.feature=!1,this.menu=!1}static get properties(){return{...super.properties,danger:{type:Boolean,reflect:!0},eventName:{type:String,reflect:!0,attribute:"event-name"},feature:{type:Boolean,reflect:!0},toggledTooltip:{type:String},tooltip:{type:String}}}get buttonTemplate(){return this.radio?o` <button id="button" aria-checked="${this.isToggled?"true":"false"}" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keydown="${this._handleKeys}" @mousedown="${this._handleMousedown}" role="radio" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`:this.toggles?o` <button id="button" aria-pressed="${this.isToggled?"true":"false"}" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keydown="${this._handleKeys}" @mousedown="${this._handleMousedown}" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`:o` <button id="button" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keydown="${this._handleKeys}" @mousedown="${this._handleMousedown}" tabindex="0" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`}static get simpleButtonThemeStyles(){return ja}static get simpleButtonCoreStyles(){return super.simpleButtonCoreStyles}static get simpleButtonLayoutStyles(){return super.simpleButtonLayoutStyles}static get styles(){return[...super.styles,i`:host(:focus-within),:host(:hover){z-index:var(--hax-ui-focus-z-index,1001)!important}`]}_handleClick(e){}_handleKeys(e){}_handleMousedown(e){}}};class Wa extends(Xa(p)){}window.customElements.define(Wa.tag,Wa);var Ya=Object.freeze({__proto__:null,HaxToolbarItem:Wa,HaxToolbarItemBehaviors:Xa});class Ja extends(Xa(p)){constructor(){super(),this.haxUIElement=!0,this.action=!1,this.more=!1,this.eventName="button",this.inputMethod=null,this.propertyToBind=null,this.slotToBind=null,this.value=""}static get tag(){return"hax-context-item"}static get properties(){return{...super.properties,more:{type:Boolean},action:{type:Boolean},label:{type:String,reflect:!0},inputMethod:{type:String,reflect:!0,attribute:"input-method"},propertyToBind:{type:String,reflect:!0,attribute:"property-to-bind"},slotToBind:{type:String,reflect:!0,attribute:"slot-to-bind"},description:{type:String,reflect:!0},default:{type:Boolean},value:{type:String}}}_handleMousedown(e){this.disabled||(Zo._tmpSelection=Zo.getSelection())}_handleClick(e){this.disabled||this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:this,eventName:this.eventName,value:this.value}}))}}window.customElements.define(Ja.tag,Ja);class Ka extends(B(p)){static get styles(){return[...super.styles]}constructor(){super(),this._blockEvent=!1}static get simpleButtonThemeStyles(){return ja}static get simpleButtonCoreStyles(){return[...super.simpleButtonCoreStyles,i`::slotted([slot=menuitem]){--simple-toolbar-button-justify:flex-start;--simple-toolbar-button-label-white-space:nowrap}`]}static get tag(){return"hax-toolbar-menu"}static get properties(){return{...super.properties,_blockEvent:{type:Boolean},eventName:{type:String,attribute:"event-name"}}}}window.customElements.define(Ka.tag,Ka);class Qa extends(function(e){return class extends(g(e)){static get styles(){return[...super.styles,i`:host{--hax-ui-border-radius:0px}.selected-buttons{transition:.1s all ease-in-out;width:0}:host([has-selected-text]) .selected-buttons{width:100%}::slotted(*){pointer-events:all}::slotted(.group){border:none}`]}constructor(){super(),this.selected=!1,this.inline=!1}static get tag(){return"hax-toolbar"}static get properties(){return{...super.properties,selected:{type:Boolean,reflect:!0},inline:{type:Boolean,reflect:!0}}}}}(p)){}window.customElements.define(Qa.tag,Qa);class Za extends(R(La(p))){constructor(){super(),this.disableOps=!1,this.disableItemOps=!1,this.insertAbove=!0,this.disableDuplicate=!1,this.hasActiveEditingElement=!1,this.haxUIElement=!0,this.tourName="hax",this.trayDetail="content-edit",this.trayStatus="collapsed",this.t={edit:"Edit",dragHandle:"Drag handle",moveUp:"Move up",moveDown:"Move down",addColumn:"Add column",removeColumn:"Remove column",remove:"Remove",duplicate:"Duplicate",confirmDelete:"Confirm delete",changeTo:"Change to",editElement:"Edit Mode",modifyHTMLSource:"Modify HTML source",clickToChange:"Click to change",regions:"Available regions",insertItemAbove:"Insert item above",insertItemAboveOrBelow:"Insert item above or below",insertItemBelow:"Insert item below",selectLayout:"Select Layout Element"},this.registerLocalization({context:this,namespace:"hax"}),this.ceButtons=[],this.activeTagName="",this.activeTagIcon="hax:paragraph",this.addEventListener("hax-context-item-selected",this.handleCECustomEvent.bind(this))}static get tag(){return"hax-plate-context"}static get styles(){return[...super.styles,i`:host{width:calc(100% - 2px);align-items:stretch}hax-toolbar::part(morebutton){--simple-toolbar-button-color:var(--hax-ui-color);--simple-toolbar-button-bg:var(--hax-ui-background-color);--simple-toolbar-button-border-color:var(--hax-ui-border-color);--simple-toolbar-button-border-width:1px;--simple-toolbar-button-hover-color:var(--hax-ui-color);--simple-toolbar-button-hover-bg:var(
            --hax-ui-background-color-secondary
          );--simple-toolbar-button-toggled-color:var(--hax-ui-color-accent);--simple-toolbar-button-toggled-bg:var(--hax-ui-background-color);--simple-toolbar-button-toggled-border-color:var(
            --hax-ui-color-accent
          );--simple-toolbar-button-disabled-opacity:1;--simple-toolbar-button-disabled-color:var(--hax-ui-disabled-color);--simple-toolbar-button-disabled-bg:var(--hax-ui-background-color);--simple-toolbar-button-disabled-border-color:unset;--simple-toolbar-border-radius:0;align-self:flex-end;justify-self:stretch;margin:0 -2px 0 2px}#remove{max-width:44px;overflow:visible}hax-toolbar{max-width:calc(100% - 2px);display:flex;align-items:stretch;justify-content:flex-start}.group{display:flex;align-items:stretch;flex:0 0 auto;justify-content:center;border:1px solid var(--rich-text-editor-border-color,#ddd);padding:0;border-width:1px;margin:-1px}.group,.group>*{z-index:1}.group:empty{display:none}.group>*,:host([collapsed]) .group{flex:0 0 auto}.group :not([toggled])::part(button){border-color:transparent}:host .group:focus,:host .group:focus-within,:host .group>:focus,:host .group>:focus-within{z-index:2}:host .group:hover,:host .group>:hover{z-index:3}.first-slot:not(:first-child){border-top:1px solid #000}`]}render(){return o` <hax-toolbar always-expanded> <div class="group"> <hax-toolbar-menu ?disabled="${this.hasActiveEditingElement||!this.canMoveElement||this.viewSource}" id="drag" action icon="hax:arrow-all" label="${this.t.dragHandle}" draggable="true" reset-on-select data-simple-tour-stop data-stop-title="label" ?hidden="${!this.canMoveElement}"> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" ?disabled="${this.hasActiveEditingElement}" show-text-label role="menuitem" icon="hax:keyboard-arrow-up" label="${this.t.moveUp}" event-name="hax-plate-up"></hax-context-item> </simple-toolbar-menu-item> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" ?disabled="${this.hasActiveEditingElement}" role="menuitem" show-text-label icon="hax:keyboard-arrow-down" label="${this.t.moveDown}" event-name="hax-plate-down"></hax-context-item> </simple-toolbar-menu-item> ${this.activeNode&&this.activeNode.parentNode&&Zo.isLayoutElement(this.activeNode.parentNode)?(this.slottedItems||[]).map(((e,t)=>o` <simple-toolbar-menu-item slot="menuitem" class="move-to-slot ${t<1?"first-slot":""}"> <hax-context-item action align-horizontal="left" ?disabled="${this.viewSource}" label="${e.label}" event-name="move-to-slot" data-slot="${e.slot}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> `)):""} <div slot="tour" data-stop-content> Click the drag handle once to show a menu to just move up or down one item in the content OR click and drag to place the item exactly where you want it to go. </div> </hax-toolbar-menu> <hax-toolbar-menu action align-horizontal="left" ?disabled="${this.viewSource||this.disableOps}" icon="hax:select-element" label="${this.t.selectLayout}"> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" ?hidden="${!this.layoutParent||this.activeNode!==this.layoutElement}" .icon="${this.elementIcon(this.layoutParent)}" label="${this.elementLabel(this.layoutParent)}" event-name="hax-select-grid" .eventData="${this.layoutParent}" role="menuitem" show-text-label> </hax-context-item> <hax-context-item action align-horizontal="left" ?disabled="${this.activeNode===this.layoutElement}" ?hidden="${!this.layoutElement}" .icon="${this.elementIcon(this.layoutElement)}" label="${this.elementLabel(this.layoutElement)}" event-name="hax-select-grid" .eventData="${this.layoutElement}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> ${(this.slottedItems||[]).map(((e,t)=>(e.items||[]).map(((i,a)=>o` <simple-toolbar-menu-item slot="menuitem" class="hax-select-grid-item ${t<1&&a<1?"first-slot":""}"> <hax-context-item action align-horizontal="left" ?disabled="${this.viewSource||this.activeNode===i}" label="${e.title||e.id}${e.items.length>1?` (${a+1})`:""}" event-name="hax-select-grid-item" .eventData="${{target:i,grid:e.grid,slot:e.slot,index:a,editMode:e.editMode}}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> `))))} </hax-toolbar-menu> <slot name="primary"></slot> <hax-toolbar-menu icon="add-box" label="${this.t.insertItemAboveOrBelow}" ?disabled="${this.viewSource}"> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" show-text-label role="menuitem" ?disabled="${!this.insertAbove}" icon="hardware:keyboard-arrow-up" event-name="insert-above-active" label="${this.t.insertItemAbove}"></hax-context-item> </simple-toolbar-menu-item> <simple-toolbar-menu-item slot="menuitem"> <hax-context-item action align-horizontal="left" show-text-label role="menuitem" icon="hardware:keyboard-arrow-down" event-name="insert-below-active" label="${this.t.insertItemBelow}" ?disabled="${this.viewSource}"></hax-context-item> </simple-toolbar-menu-item> ${Zo.isLayoutElement(this.activeNode)?(this.slottedItems||[]).map(((e,t)=>o` <simple-toolbar-menu-item slot="menuitem" class="insert-into-active ${t<1?"first-slot":""}"> <hax-context-item action align-horizontal="left" ?disabled="${this.viewSource}" label="${e.label}" event-name="insert-into-active" data-slot="${e.slot}" role="menuitem" show-text-label> </hax-context-item> </simple-toolbar-menu-item> `)):""} </hax-toolbar-menu> <hax-context-item action ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps||this.disableDuplicate}" label="${this.t.duplicate}" icon="icons:content-copy" event-name="hax-plate-duplicate" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Duplicate the active piece of content and place it below the current item. </div> </hax-context-item> </div> <hax-context-item action icon="delete" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" icon="delete" label="${this.t.remove}" event-name="hax-plate-delete" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Delete the current item. You can always use the undo arrow to bring this back. </div> </hax-context-item> <hax-context-item action id="right" class="paddle" icon="hax:table-column-remove" label="${this.t.addColumn}" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" event-name="hax-plate-create-right" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Add a column to split the current column into two pieces. This can be done up to six pieces columns. For differnet layouts see Grid settings panel. </div> </hax-context-item> <hax-context-item action class="paddle" icon="hax:table-column-plus-after" label="${this.t.removeColumn}" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" event-name="hax-plate-remove-right" ?hidden="${!this.activeNode||Zo.isOriginalGridPlate(this.activeNode)}" id="rightremove" data-simple-tour-stop data-stop-title="label"> <div slot="tour" data-stop-content> Remove a column from the split column layout. If at two columns and removing it will remove the layout split and make it 100% width. </div> </hax-context-item> ${this.ceButtons.map((e=>o` <hax-context-item action icon="${e.icon}" label="${e.label}" event-name="hax-ce-custom-button" value="${e.callback}" ?disabled="${e.disabled||this.disableItemOps}"></hax-context-item>`))} <slot name="secondary"></slot>  <div class="group"> <hax-context-item action more label="${this.t.changeTo}..." tooltip="${this.activeTagName}, ${this.t.clickToChange}" ?disabled="${this.disableTransform||this.viewSource||this.disableOps}" event-name="hax-transform-node"></hax-context-item> <hax-context-item action label="${this.t.editElement}" ?disabled="${this.viewSource||this.disableOps}" ?hidden="${!this.editElementProperty}" event-name="hax-edit-element-toggle" .eventData="${{target:this.activeNode,editMode:this.editElementProperty}}" toggles ?toggled="${this.editElementToggled}"></hax-context-item> <hax-context-item action icon="icons:code" label="${this.t.modifyHTMLSource}" ?disabled="${!this.sourceView||this.disableOps||this.editElementToggled}" event-name="hax-source-view-toggle" toggles ?toggled="${this.viewSource}"></hax-context-item> <slot name="more"></slot> <hax-context-item icon="build" action align-horizontal="left" ?disabled="${this.hasActiveEditingElement||this.viewSource||this.disableOps}" label="${this.t.edit}" data-simple-tour-stop data-stop-title="label" event-name="content-edit" toggles ?toggled="${"content-edit"===this.trayDetail&&"collapsed"!==this.trayStatus}"> <div slot="tour" data-stop-content> Opens the Edit panel for more advanced settings. </div> </hax-context-item> </div> </hax-toolbar> `}get disableTransform(){return!this.filteredBlocks||this.filteredBlocks.length<1}get filteredBlocks(){return this.getFilteredBlocks(this.formatBlocks)}__updatePlatePosition(e){let t=this.shadowRoot.querySelector("#right"),i=this.shadowRoot.querySelector("#rightremove");t.disabled=!1,i.disabled=!1,e&&"GRID-PLATE"==e.tagName?"1-1-1-1-1-1"==e.layout&&(t.disabled=!0):i.disabled=!0}__dblClickFire(e){"remove"===e.target.id&&this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,cancelable:!0,composed:!0,detail:{target:e.target,eventName:"hax-plate-delete",value:e.target.value}}))}_handleOpen(e){this.dispatchEvent(new CustomEvent("hax-transform-node",{bubbles:!0,cancelable:!0,composed:!0,detail:Zo.elementList[el]}))}handleCECustomEvent(e){let t=e.detail;if("hax-ce-custom-button"===t.eventName)this.activeNode&&"function"==typeof this.activeNode[t.value]&&this.activeNode[t.value](e)&&Zo.refreshActiveNodeForm()}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"onScreen"===t&&this.onScreen&&this._resetCEMenu(),"activeNode"!==t&&"activeEditingElement"!==t||(this.activeSchema=Zo.activeSchema(),this.editElementProperty=!(!this.activeSchema||!this.activeSchema.editElement)&&this.activeSchema.editElement,this.editElementToggled=this.activeNode&&this.editElementProperty&&!!this.activeNode[this.editElementProperty])}))}firstUpdated(e){super.firstUpdated(e),Ai((()=>{this.activeNode=Ii(Zo.activeNode),this.activeNode&&this.activeNode.classList&&this._resetCEMenu(),this.activeNode&&this.getAttribute("on-screen")&&this.__updatePlatePosition(this.activeNode)})),Ai((()=>{Ii(Zo.activeEditingElement)?this.hasActiveEditingElement=!0:this.hasActiveEditingElement=!1})),this.shadowRoot.querySelector("#drag").addEventListener("dragstart",this._dragStart),this.shadowRoot.querySelector("#drag").addEventListener("dragend",this._dragEnd)}_dragEnd(e){let t=b(e)?b(e)[0]:void 0;t&&t.close(!0),Zo._lockContextPosition=!1}_dragStart(e){let t=Ii(Zo.activeNode),i=b(e)?b(e)[0]:void 0;i&&i.close(!0),Zo.__dragTarget=t,Zo._lockContextPosition=!0,Zo.activeHaxBody.__activeHover=null,Zo.activeHaxBody._hideContextMenu(Zo.activeHaxBody.contextMenus.add),e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(t,-20,-20)),e.stopPropagation(),e.stopImmediatePropagation()}async _resetCEMenu(){if(this.shadowRoot&&v(this,"*"),this.ceButtons=[],Zo.activeHaxBody&&null!=this.activeNode){let e=Zo.haxSchemaFromTag(this.activeNode.tagName);if(this.sourceView=e.canEditSource,this.activeNode){let e=await Zo.activeHaxBody.replaceElementWorkflow(this.activeNode,!0)||[],t=this.activeNode&&this.activeNode.tagName?this.activeNode.tagName.toLowerCase():void 0,i=Zo.activeHaxBody.primitiveTextBlocks.includes(t)?"p":void 0;this.formatBlocks=t?e.filter((e=>e.tag&&![t,i].includes(e.tag))):e}Zo.activeGizmo&&(this.activeTagName=Zo.activeGizmo.title,this.activeTagIcon=Zo.activeGizmo.icon)}else Zo.activeGizmo?(this.activeTagName=Zo.activeGizmo.title,this.activeTagIcon=Zo.activeGizmo.icon):(this.activeTagName="",this.activeTagIcon="");await Zo.runHook(this.activeNode,"inlineContextMenu",[this])}static get properties(){return{...super.properties,activeTagIcon:{type:String},activeSchema:{type:Object},editElementProperty:{type:String},editElementToggled:{type:Boolean},activeTagName:{type:String},disableOps:{type:Boolean},disableItemOps:{type:Boolean},insertAbove:{type:Boolean},disableDuplicate:{type:Boolean},canMoveElement:{type:Boolean},ceButtons:{type:Array},formatBlocks:{type:Object},hasActiveEditingElement:{type:Boolean},onScreen:{type:Boolean,attribute:"on-screen",reflect:!0},sourceView:{type:Boolean},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayStatus:{type:String,reflect:!0,attribute:"tray-status"}}}}window.customElements.define(Za.tag,Za),Element.prototype.replaceWith||(Element.prototype.replaceWith=y),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=y),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=y),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return this.split(e).join(t)});var en=null;class tn extends(R(ea(t))){static get tag(){return"hax-body"}static get styles(){return[...super.styles,i`:host([edit-mode]),:host([edit-mode]) * ::slotted(*){line-height:1.8}:host([edit-mode]) ol,:host([edit-mode]) ul{padding-left:20px;margin-left:20px}:host([edit-mode]) ul{list-style-type:disc}:host([edit-mode]) code{padding:.2em .4em;margin:0;font-size:12px;background-color:var(--hax-base-styles-code-background-color,rgba(175,184,193,.2));border-radius:6px;font-family:var(--hax-base-styles-code-font-family,ui-monospace,monospace)}:host([edit-mode]) pre{padding:16px;overflow:auto;line-height:1.45;background-color:var(--hax-base-styles-pre-background-color,rgba(175,184,193,.2));border-radius:6px;margin-bottom:0;word-break:normal;word-wrap:normal;margin-top:0;font-family:var(--hax-base-styles-pre-font-family,ui-monospace,monospace);font-size:12px}:host([edit-mode]) li{margin-bottom:6px}:host([edit-mode][tray-status=full-panel]) #bodycontainer{display:none}:host{display:block;position:relative;min-height:32px;min-width:32px;outline:0;--hax-contextual-action-text-color:var(--hax-ui-background-color);--hax-contextual-action-hover-color:var(--hax-ui-color-accent);--hax-contextual-action-color:var(--hax-ui-color-accent-secondary);--hax-body-editable-outline:1px solid var(--hax-ui-disabled-color, #ddd);--hax-body-active-outline-hover:1px solid var(--hax-ui-color-faded, #444);--hax-body-active-outline:1px solid var(--hax-ui-color-focus, #000);--hax-body-active-drag-outline:1px solid var(--hax-ui-color-accent, #009dc7);--hax-body-target-background-color:var(
            --hax-ui-background-color-accent
          );--hax-body-possible-target-background-color:inherit}#topcontext{z-index:calc(var(--hax-ui-focus-z-index) - 2);min-width:280px}#topcontextmenu{width:auto;max-width:100%;position:absolute;bottom:0}.hax-context-menu{display:none;z-index:1}.hax-context-menu:hover{z-index:calc(var(--hax-ui-focus-z-index) + 1);transition:0s z-index ease-in-out}.hax-context-menu-active,.hax-context-visible{display:flex}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]){-webkit-appearance:textfield;cursor:text;-moz-user-select:text;-khtml-user-select:text;-webkit-user-select:text;-o-user-select:text}:host([edit-mode]) #bodycontainer ::slotted([contenteditable][data-hax-ray]:empty)::before{content:attr(data-hax-ray);opacity:.2;transition:.2s all ease-in-out}:host([edit-mode]) #bodycontainer ::slotted([contenteditable][data-hax-ray]:hover:empty)::before{opacity:.4;cursor:text}:host([edit-mode]) #bodycontainer ::slotted([contenteditable][data-hax-ray]:empty:focus)::before{content:""}:host([edit-mode]) #bodycontainer ::slotted(p){min-height:var(--hax-base-styles-p-min-height,1rem);font-size:var(--hax-base-styles-p-font-size);line-height:var(--hax-base-styles-p-line-height);letter-spacing:var(--hax-base-styles-p-letter-spacing)}:host([edit-mode]) #bodycontainer ::slotted(a){color:var(--hax-base-styles-a-color);font-size:var(--hax-base-styles-a-font-size,var(--hax-base-styles-p-font-size));font-weight:var(--hax-base-styles-a-font-weight)}:host([edit-mode]) #bodycontainer ::slotted(a:visited){color:var(--hax-base-styles-a-color-visited)}:host([edit-mode]) #bodycontainer ::slotted(a:active),:host([edit-mode]) #bodycontainer ::slotted(a:focus),:host([edit-mode]) #bodycontainer ::slotted(a:hover){color:var(--hax-base-styles-a-color-active);font-weight:var(--hax-base-styles-a-font-weight-active)}:host([edit-mode]) #bodycontainer ::slotted(li),:host([edit-mode]) #bodycontainer ::slotted(ol),:host([edit-mode]) #bodycontainer ::slotted(ul){padding-bottom:var(--hax-base-styles-list-padding-bottom);line-height:var(--hax-base-styles-list-line-height,var(--hax-base-styles-p-line-height));font-size:var(--hax-base-styles-list-font-size,var(--hax-base-styles-p-font-size))}:host([edit-mode]) #bodycontainer ::slotted(ol>li:last-child),:host([edit-mode]) #bodycontainer ::slotted(ul>li:last-child){padding-bottom:var(--hax-base-styles-list-last-child-padding-bottom)}:host([edit-mode]) #bodycontainer ::slotted(img[contenteditable]){max-width:100%}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]){outline:0;caret-color:auto}:host([edit-mode]) #bodycontainer ::slotted(.blinkfocus){outline:2px solid var(--hax-contextual-action-hover-color)}:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock]){background-color:snow;opacity:.5;transition:.2s all ease-in-out}:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock]:hover){opacity:.9}:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock])::after{width:28px;height:28px;content:"";display:flex;float:right;z-index:1;position:relative;background-position:center;background-repeat:no-repeat;background-color:snow}:host([edit-mode]) #bodycontainer ::slotted(:not([data-hax-layout])[contenteditable]:hover){outline:var(--hax-body-active-outline-hover);caret-color:auto}:host(.hax-add-content-visible[edit-mode]) #bodycontainer ::slotted(.hax-active){margin-bottom:30px}:host([edit-mode]) #bodycontainer ::slotted(.hax-active[contenteditable]:hover){cursor:text!important;caret-color:auto;outline:var(--hax-body-active-outline-hover)}:host([edit-mode]) #bodycontainer ::slotted(:not([data-hax-layout])[contenteditable].hax-active:hover){cursor:text!important;caret-color:auto;outline:var(--hax-body-active-outline-hover)}:host([edit-mode]) #bodycontainer ::slotted(code.hax-active[contenteditable]){display:block}:host([edit-mode]) #bodycontainer ::slotted(.hax-active[contenteditable]){outline:var(--hax-body-active-outline)!important}:host([edit-mode]) #bodycontainer ::slotted(hr[contenteditable]){height:2px;background-color:#eee;padding-top:4px;padding-bottom:4px}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]){-webkit-user-select:text;cursor:pointer}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]::-moz-selection){background-color:var(--hax-body-highlight,#ffffac);color:#000}:host([edit-mode]) #bodycontainer ::slotted([contenteditable]::selection){background-color:var(--hax-body-highlight,#ffffac);color:#000}#bodycontainer{-webkit-user-select:text;user-select:text}.hax-context-menu:not(:defined),absolute-position-behavior:not(:defined){display:none}:host([edit-mode][hax-mover]) #bodycontainer ::slotted(*)::before{background-color:var(--hax-body-possible-target-background-color);content:" ";width:100%;display:block;position:relative;margin:-12px 0 0 0;z-index:2;height:12px;transition:.2s all ease-in-out}:host([edit-mode][hax-mover]) #bodycontainer ::slotted(img){outline:var(--hax-body-editable-outline)}:host([edit-mode]) #bodycontainer ::slotted(.hax-hovered)::before,:host([edit-mode]) #bodycontainer ::slotted(img.hax-hovered){background-color:var(--hax-body-target-background-color)!important}:host([edit-mode]) #bodycontainer ::slotted(img.hax-hovered){border-top:8px var(--hax-contextual-action-hover-color,var(--hax-ui-color-accent));margin-top:-8px}#textcontextmenu.not-text,:host([hidden]),[hidden]{display:none!important}@media screen and (max-width:800px){.hax-context-menu{height:0}.hax-context-visible{height:auto}:host(:not([tray-status=collapsed])){z-index:-1}:host([edit-mode]) #bodycontainer,:host([edit-mode]) #bodycontainer[element-align=left],:host([edit-mode]) #bodycontainer[element-align=right]{margin:calc(100px + var(--hax-tray-menubar-min-height)) 0 0 0}}@media screen and (min-color-index:0) and(-webkit-min-device-pixel-ratio:0){:host([edit-mode][hax-mover]) #bodycontainer ::slotted(*){outline:var(--hax-body-editable-outline);background-color:var(--hax-body-possible-target-background-color)}:host([edit-mode]) #bodycontainer ::slotted(.hax-hovered){background-color:var(--hax-body-target-background-color)!important;outline:var(--hax-body-active-outline)}}`]}constructor(){if(super(),this.__ignoreActive=!1,this.__dragMoving=!1,this.___moveLock=!1,this.viewSourceToggle=!1,this.editMode=!1,this.haxMover=!1,this.activeNode=null,this.__lockIconPath=_.getIcon("icons:lock"),this.part="hax-body",this.t={addContent:"Add Content"},this.registerLocalization({context:this,namespace:"hax"}),!window.HaxUiStyles){window.HaxUiStyles=document.createElement("div");let e=document.createElement("style"),t=Ia.map((e=>e.cssText)).join("");e.setAttribute("data-hax",!0),e.setAttribute("type","text/css"),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)}setTimeout((()=>{this.polyfillSafe=Zo.computePolyfillSafe(),this.addEventListener("place-holder-replace",this.replacePlaceholder.bind(this)),this.addEventListener("focusin",this._focusIn.bind(this)),this.addEventListener("mousemove",this._mouseMove.bind(this)),this.addEventListener("mouseleave",this._mouseLeave.bind(this)),this.addEventListener("touchstart",this._mouseMove.bind(this),{passive:!0}),this.addEventListener("mousedown",this._mouseDown.bind(this)),this.addEventListener("mouseup",this._mouseUp.bind(this)),this.addEventListener("dragenter",this.dragEnterBody.bind(this)),this.addEventListener("dragend",this.dragEndBody.bind(this)),this.addEventListener("drop",this.dropEvent.bind(this))}),0),Ai((()=>{this.editMode=Ii(Zo.editMode)})),Ai((()=>{this.elementAlign=Ii(Zo.elementAlign)})),Ai((()=>{this.trayStatus=Ii(Zo.trayStatus),this.trayDetail=Ii(Zo.trayDetail)})),Ai((()=>{this.activeNode=Ii(Zo.activeNode)})),Ai((()=>{Ii(Zo.activeEditingElement)}))}get isGridActive(){return Zo.isGridPlateElement(activeNode)}dragEndBody(e){this.__manageFakeEndCap(!1),Zo._lockContextPosition=!1,this.querySelectorAll(".hax-hovered").forEach((e=>{e.classList.remove("hax-hovered")}))}_mouseLeave(e){this.editMode&&Zo.ready&&(clearTimeout(this.__mouseQuickTimer),clearTimeout(this.__mouseTimer),this.__activeHover=null)}_mouseMove(e){if(this.editMode&&Zo.ready){var t=b(e);clearTimeout(this.__mouseQuickTimer),this.__mouseQuickTimer=setTimeout((()=>{this.__activeHover&&this.__activeHover!=t[0].closest("[data-hax-ray]:not(li)")&&(this.__activeHover=null)}),300),clearTimeout(this.__mouseTimer),this.__mouseTimer=setTimeout((()=>{this.__addActiveVisible();let e=t[0].closest("[data-hax-ray]:not(li)");if(e)this.__activeHover=e;else if(t[0].closest("[data-move-order]")&&t[3]&&t[3].closest("[data-hax-layout]"))if(t[0].closest("[data-move-order]:not(.has-nodes")){if(this.__addAbove=!1,this.__slot=t[0].closest("[data-move-order]").getAttribute("id").replace("col","col-"),0==t[0].closest("[data-move-order]").parentNode.parentNode.host.children.length){let e=document.createElement("p");t[0].closest("[data-move-order]").parentNode.parentNode.host.appendChild(e)}this.__activeHover=t[0].closest("[data-move-order]").parentNode.parentNode.host.children[0]}else this.__activeHover=t[0].closest("[data-move-order]").parentNode.parentNode.host;else t[0].closest("#bodycontainer")&&(this.__activeHover=null)}),400)}}_mouseDown(e){if(this.editMode){this.__mouseDown=!0;let t=e.target;t.closest("[draggable]")?t=t.closest("[draggable]"):t.closest("[slot]")?t=t.closest("[slot]"):t.closest("[data-hax-ray]")?t=t.closest("[data-hax-ray]"):t.closest("[contenteditable]")?t=t.closest("[contenteditable]"):Zo.validTagList.includes(t.tagName.toLowerCase())||"HAX-BODY"===t.tagName||t.haxUIElement||console.warn(t),!t.haxUIElement&&this.__focusLogic(t)&&(e.stopPropagation(),e.stopImmediatePropagation())}}_mouseUp(e){setTimeout((()=>{this.__mouseDown=!1}),0),clearTimeout(en),this.__manageFakeEndCap(!1)}clickEvent(e){clearTimeout(en)}blurEvent(e){this.editMode&&Zo.activeEditingElement}__manageFakeEndCap(e=!0){if(e&&!this.__fakeEndCap){let e=document.createElement("fake-hax-body-end");e.style.width="100%",e.style.height="20px",e.style.zIndex="2",e.style.display="block",this.__fakeEndCap=e,this.haxMover=!0,this.appendChild(this.__fakeEndCap),this.__applyNodeEditableState(this.__fakeEndCap,!0)}else!e&&this.__fakeEndCap&&(this.__fakeEndCap.remove(),this.haxMover=!1,this.__fakeEndCap=null)}dragEnterBody(e){this.__manageFakeEndCap(!0)}render(){return o` <style id="hax-body-style-element"></style> <div id="bodycontainer" class="ignore-activation" element-align="${this.elementAlign||"right"}"> <slot id="body"></slot> </div> <absolute-position-behavior id="topcontext" fit-to-visible-bounds justify position="top" allow-overlap auto sticky data-node-type="${this.activeNode?this.viewSourceToggle?this.activeNode.parentNode.tagName:this.activeNode.tagName:""}" .target="${this.activeNode?this.viewSourceToggle?this.activeNode.parentNode:this.activeNode:document.body}" .trayStatus="${this.trayStatus}" ?hidden="${!this.activeNode}"> <div id="topcontextmenu"> <hax-plate-context always-expanded id="platecontextmenu" class="hax-context-menu ignore-activation" .activeNode="${this.activeNode}" .trayDetail="${this.trayDetail}" .trayStatus="${this.trayStatus}" ?viewSource="${this.viewSourceToggle}" ?canMoveElement="${this.canMoveElement}"></hax-plate-context> <hax-text-editor-toolbar id="textcontextmenu" class="hax-context-menu ignore-activation ${!this.activeNode||this.activeNode.getAttribute("data-hax-lock")||this.activeNode.parentNode&&this.activeNode.parentNode.getAttribute("data-hax-lock")||!Zo.isTextElement(this.activeNode)&&!Zo.isSingleSlotElement(this.activeNode)?"not-text":"is-text"}" .activeNode="${this.activeNode}" show="always"> </hax-text-editor-toolbar> </div> </absolute-position-behavior> `}static get properties(){return{...super.properties,allowLinkTarget:{type:Boolean},haxMover:{type:Boolean,attribute:"hax-mover",reflect:!0},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},elementAlign:{type:String,reflect:!0,attribute:"element-align"},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayStatus:{type:String,reflect:!0,attribute:"tray-status"},activeNode:{type:Object},canMoveElement:{type:Boolean},viewSourceToggle:{type:Boolean,reflect:!0}}}HAXBODYStyleSheetContent(){let e=[];return e.push(i`:host([edit-mode]) #bodycontainer ::slotted([data-hax-lock])::after{background-image:url(${x(this.__lockIconPath)})}`),e}firstUpdated(e){w(this.HAXBODYStyleSheetContent(),this.shadowRoot.querySelector("#hax-body-style-element")),this.dispatchEvent(new CustomEvent("hax-register-body",{bubbles:!0,cancelable:!0,composed:!0,detail:this}));try{document.execCommand("enableObjectResizing",!1,!1),document.execCommand("defaultParagraphSeparator",!1,"p")}catch(e){console.warn(e)}this.contextMenus={text:this.shadowRoot.querySelector("#textcontextmenu"),plate:this.shadowRoot.querySelector("#platecontextmenu"),parent:this.shadowRoot.querySelector("#topcontext")},this.shadowRoot.querySelector("slot").addEventListener("mouseup",(e=>{this.editMode&&setTimeout((()=>{const e=Zo.getSelection();Zo._tmpSelection=e,Zo.haxSelectedText=e.toString();try{const e=Zo.getRange();e.cloneRange&&(Zo._tmpRange=e.cloneRange())}catch(e){console.warn(e)}}),10)})),this.editMode=Zo.editMode,this.__tabTrap=!1,this.ready=!0,super.firstUpdated&&super.firstUpdated(e)}async updated(e){e.forEach((async(e,t)=>{"editMode"==t&&void 0!==e&&setTimeout((async()=>{this._editModeChanged(this[t],e),this[t]?(await this._activeNodeChanged(this.activeNode,null),this.activeNode.focus()):await this._activeNodeChanged(null,this.activeNode)}),0),"activeNode"==t&&this.ready&&await this._activeNodeChanged(this[t],e)})),super.updated&&super.updated(e)}connectedCallback(){super.connectedCallback(),this._observer=new MutationObserver((e=>{var t=!1;this.__ignoreActive||this.__dragMoving||this.undoStackIgnore||this.__fakeEndCap?this.undoStackIgnore&&e.forEach((e=>{e.addedNodes.length>0&&e.addedNodes.forEach((e=>{this._validElementTest(e)&&setTimeout((()=>{this.__applyNodeEditableState(e,this.editMode)}),0)}))})):e.forEach((e=>{if(e.addedNodes.length>0){for(var i of e.addedNodes)if(this._validElementTest(i)){if(!this.__delHit&&"BR"===i.tagName&&i.parentElement&&Zo.__validGridTags().includes(i.parentElement.tagName.toLowerCase())&&i===i.parentElement.childNodes[i.parentElement.childNodes.length-1]){let e=i.parentElement;if(i.remove(),e.childNodes.length>0){let t=e.childNodes[e.childNodes.length-1];t.textContent+="​",Zo._positionCursorInNode(t,t.length)}continue}if(this.__delHit=!1,"P"===i.tagName&&i.children.length>0&&"P"===i.children[0].tagName){A(i);continue}if("P"===i.tagName&&i.parentElement&&"P"===i.parentElement.tagName){A(i.parentElement);continue}if(null!=i.getAttribute("slot")&&i.parentElement===this){i.removeAttribute("slot");continue}if("LI"===i.tagName&&i.children.length>0&&"SPAN"===i.children[0].tagName){this.activeNode!==i.children[0]&&this.activeNode!==i||(this.activeNode=i),A(i.children[0]);continue}if("LI"===i.tagName&&i.parentElement&&!["UL","OL"].includes(i.parentElement.tagName)){A(i);continue}if("P"===i.tagName&&i.children.length>0&&["P","LI"].includes(i.children[0].tagName)){A(i.children[0]);continue}if(this.__slot&&(i.setAttribute("slot",this.__slot),this.__slot=null),this.__indentTrap)if("SPAN"===i.tagName)i.parentNode===this?this.haxChangeTagName(i,"p",!0):"LI"===i.parentNode.tagName&&(i.parentNode.innerHTML=i.textContent);else if("BR"===i.tagName){i.remove();continue}if(!this.editMode||"true"!=i.getAttribute("contenteditable")&&!0!==i.getAttribute("contenteditable")&&"contenteditable"!=i.getAttribute("contenteditable")||this.__applyNodeEditableState(i,!this.editMode),this.__applyNodeEditableState(i,this.editMode),Zo.isGridPlateElement(i)){let e=i.querySelectorAll("*");for(var o=0;o<e.length;o++)this._validElementTest(e[o])&&this.__applyNodeEditableState(e[o],this.editMode)}if(["H1","H2","H3","H4","H5","H6"].includes(i.tagName)&&null==i.getAttribute("id")&&i.setAttribute("id",E("header-")),this.___moveLock||t)this.___moveLock=!1;else if(t=!0,Zo.activeNode=i,"BR"===i.tagName){const e=Zo.getSelection();Zo._tmpSelection=e,Zo.haxSelectedText=e.toString();const t=Zo.getRange();t.collapsed&&"BR"===this.activeNode.tagName&&this.activeNode.parentNode===t.commonAncestorContainer&&""===this.activeNode.innerText&&(Zo.activeNode=this.activeNode.parentNode)}}this.__indentTrap&&setTimeout((()=>{this.__indentTrap=!1}),0)}else this.ready&&this.editMode&&Zo.ready&&0===e.addedNodes.length&&e.removedNodes.length>0&&this.shadowRoot&&0===this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length&&setTimeout((()=>{0===this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}).length&&this.appendChild(document.createElement("p"))}),100)})),this.__ignoreActive&&(this.__ignoreActive=!1),Zo.haxTray.updateMap()})),this._observer.observe(this,{childList:!0,subtree:!0}),window.addEventListener("hax-context-item-selected",this._haxContextOperation.bind(this)),window.addEventListener("hax-toggle-active-node-lock",this._toggleNodeLocking.bind(this)),window.addEventListener("click",this.clickEvent.bind(this)),window.addEventListener("blur",this.blurEvent.bind(this)),window.addEventListener("keydown",this._onKeyDown.bind(this)),window.addEventListener("keypress",this._onKeyPress.bind(this)),document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),window.addEventListener("scroll",this._keepContextVisible.bind(this),{passive:!0}),window.addEventListener("resize",this._keepContextVisible.bind(this),{passive:!0})}disconnectedCallback(){window.removeEventListener("hax-toggle-active-node-lock",this._toggleNodeLocking.bind(this)),window.removeEventListener("click",this.clickEvent.bind(this)),window.removeEventListener("blur",this.blurEvent.bind(this)),window.removeEventListener("keydown",this._onKeyDown.bind(this)),window.removeEventListener("keypress",this._onKeyPress.bind(this)),document.body.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),window.removeEventListener("scroll",this._keepContextVisible.bind(this)),window.removeEventListener("resize",this._keepContextVisible.bind(this)),window.removeEventListener("hax-context-item-selected",this._haxContextOperation.bind(this)),this._observer.disconnect(),super.disconnectedCallback()}_toggleNodeLocking(e){e.detail.lock?(this.contextMenus.plate.disableDuplicate=!0,this.contextMenus.plate.disableOps=!0,this.contextMenus.plate.disableItemOps=!0,this.contextMenus.plate.canMoveElement=!1,e.detail.node.removeAttribute("contenteditable"),this.removeAttribute("contenteditable")):(this.contextMenus.plate.disableDuplicate=!1,this.contextMenus.plate.disableOps=!1,this.contextMenus.plate.disableItemOps=!1,this.contextMenus.plate.canMoveElement=this.canMoveElement,e.detail.node.setAttribute("contenteditable",!0),this.setAttribute("contenteditable",!0)),this.requestUpdate()}_keepContextVisible(e=null){this.editMode&&(clearTimeout(this.__contextVisibleLock),this.__contextVisibleLock=setTimeout((()=>{let e=!1;this.contextMenus.plate.classList.contains("hax-context-visible")&&(e=this.contextMenus.plate),e&&this.positionContextMenus()}),100))}_onKeyDown(e){if(this.editMode&&"HAX-TRAY"!==document.activeElement.tagName&&"BODY"!==document.activeElement.tagName&&"SIMPLE-MODAL"!==document.activeElement.tagName&&this.getAttribute("contenteditable")){if(this.__dropActiveVisible(),this.__manageFakeEndCap(!1),null!=Zo.getSelection().anchorNode)switch(e.key){case"Z":case"z":e.ctrlKey&&(e.shiftKey?this.redo():this.undo(),e.detail.keyboardEvent&&(e.detail.keyboardEvent.preventDefault(),e.detail.keyboardEvent.stopPropagation(),e.detail.keyboardEvent.stopImmediatePropagation()),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation());break;case"Tab":Zo.isTextElement(this.activeNode)&&(e.detail.keyboardEvent&&(e.detail.keyboardEvent.preventDefault(),e.detail.keyboardEvent.stopPropagation(),e.detail.keyboardEvent.stopImmediatePropagation()),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),e.shiftKey?this._tabBackKeyPressed():this._tabKeyPressed());break;case"Enter":if(this.activeNode&&(this.__slot=this.activeNode.getAttribute("slot")),this.activeNode&&"P"===this.activeNode.tagName&&["1","#","`",">","-","!"].includes(this.activeNode.textContent[0])){const e=this.activeNode.textContent.replaceAll(/ /g," ");this.keyboardShortCutProcess(e)}break;case"Backspace":case"Delete":this.__delHit=!0;break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":setTimeout((()=>{const e=Zo.getSelection();Zo._tmpSelection=e,Zo.haxSelectedText=e.toString();const t=Zo.getRange();t.commonAncestorContainer&&this.activeNode!==t.commonAncestorContainer&&"function"==typeof t.commonAncestorContainer.focus?"HAX-BODY"!==t.commonAncestorContainer.tagName&&this.__focusLogic(t.commonAncestorContainer,!1):t.commonAncestorContainer&&t.commonAncestorContainer.parentNode&&this.activeNode!==t.commonAncestorContainer.parentNode&&"function"==typeof t.commonAncestorContainer.parentNode.focus&&("HAX-BODY"!==t.commonAncestorContainer.parentNode.tagName?this.__focusLogic(t.commonAncestorContainer.parentNode,!1):this.__focusLogic(t.commonAncestorContainer,!1))}),0);break;default:setTimeout((()=>{if(this.activeNode&&"P"===this.activeNode.tagName&&["1","#","`",">","-","!"].includes(this.activeNode.textContent[0])){const e=this.activeNode.textContent.replaceAll(/ /g," ");" "===e[e.length-1]&&this.keyboardShortCutProcess(e)}}),0)}}}keyboardShortCutProcess(e){if(Zo.keyboardShortcuts[e.replace(" ","")]){let t=a(Zo.keyboardShortcuts[e.replace(" ","")]);this.haxReplaceNode(this.activeNode,t),this.__focusLogic(t),"HR"===t.tagName&&this.haxInsert("p","",{})}else if("!"===e[0]){let t=e.replace("!","").replaceAll(/ /g,"");if(Zo.elementList[t]){let e,i=Zo.haxSchemaFromTag(t);e=i.gizmo.tag&&i.demoSchema&&i.demoSchema[0]?a(i.demoSchema[0]):document.createElement(t),this.haxReplaceNode(this.activeNode,e),this.__focusLogic(e)}else Zo.toast(`${t} is not a valid tag`)}}_onKeyPress(e){let t=this.activeNode&&this.activeNode.nextElementSibling?this.activeNode.nextElementSibling:null;t&&"Enter"===e.key&&this.setActiveNode(this.activeNode.nextElementSibling),setTimeout((()=>{this.activeNode&&this.activeNode===t&&this.editMode&&this.activeNode.previousElementSibling&&this.haxInsert("p","",{},this.activeNode.previousElementSibling)}),1)}setActiveNode(e,t=!1){e&&this.editMode&&this.activeNode&&(Zo.isTextElement(this.activeNode)||t)&&(this.activeNode=e,clearTimeout(this.__positionContextTimer),this.__positionContextTimer=setTimeout((()=>{this.__addActiveVisible(),this.positionContextMenus()}),2e3))}elementMidViewport(){const e=this.activeNode.getBoundingClientRect().y;return e<0&&e>-1*this.activeNode.offsetHeight+140}replacePlaceholder(e){if("text"===e.detail){let e=document.createElement("p");this.haxReplaceNode(this.activeNode,e),this.__focusLogic(e),this.activeNode.parentNode&&this.activeNode.parentNode.setAttribute("contenteditable",!0)}else this.replaceElementWorkflow()}async canTansformNode(e=null){return await this.replaceElementWorkflow(e,!0).length>0}async insertElementWorkflow(e=null,t=!1){}get primitiveTextBlocks(){return["p","div","pre","h1","h2","h3","h4","h5","h6"]}getAllSlotConfig(e){if(!e)return;let t=this.getParentGrid(e);return t&&t.tag?this.getSlotConfig(Zo.elementList[t.tag],slot):void 0}getParentGrid(e){return((e=e||this.activeNode)?e.slot:void 0)?c(e.parentNode):void 0}getSlotConfig(e="",t={}){let i=t.settings,o=i?Object.keys(i||{}).map((t=>i[t].filter((t=>!(!t.slot||e&&t.slot!==e))))).flat():void 0;return o&&o.length>0?o[0]:void 0}async replaceElementWorkflow(e=null,t=!1){null==e&&(e=this.activeNode);let i=await c(e,null);if(!i)return;let o="*",a=!1,n=(e||{}).slot,r=this.getParentGrid(e);"place-holder"===i.tag&&void 0!==i.properties.type?(o=i.properties.type,a=!0):this.primitiveTextBlocks.includes(i.tag)&&(a=!0);var s=i.content?{innerHTML:i.content}:{};if(void 0!==Zo.elementList[i.tag]&&!1!==Zo.elementList[i.tag].gizmo&&void 0!==Zo.elementList[i.tag].gizmo.handles&&Zo.elementList[i.tag].gizmo.handles.length>0){let e=Zo.elementList[i.tag].gizmo;for(var l=0;l<e.handles.length;l++)for(var d in i.properties.innerHTML&&(s.innerHTML=i.properties.innerHTML),e.handles[l])"type"!==d&&void 0!==i.properties[e.handles[l][d]]&&(s[d]=i.properties[e.handles[l][d]])}let h=Zo.guessGizmo(o,s,a),u=r?this.getSlotConfig(n,Zo.elementList[r.tag]):void 0,p=r&&"grid-plate"===r.tag?["grid-plate"]:u?u.excludedSlotWrappers:void 0,m=u?u.allowedSlotWrappers:void 0;if((p||m)&&(h=h.filter((e=>!p.includes(e.tag)&&(!m||m.includes(e.tag))))),h.length>0){let i=e.tagName.toLowerCase(),o=i.replace("-"," ");void 0!==Zo.elementList[i]&&!1!==Zo.elementList[i].gizmo&&(o=Zo.elementList[i].gizmo.title),t||(Zo.activePlaceHolder=this.activeNode,Zo.haxAppPicker.presentOptions(h,"__convert",`Change ${o} to...`,"gizmo"))}else t||Zo.toast("Sorry, this can not be transformed!",5e3);return h}_haxStorePropertyUpdated(e){e.detail&&void 0!==e.detail.value&&e.detail.property&&(this[e.detail.property]=e.detail.value)}haxClearBody(e=!0){let t=!0;e&&(t=prompt("Are you sure you want to delete all content?")),t&&v(this)}haxInsert(e,t,i={},o=this.activeNode,a=!1){var n=document.createElement(e);n.innerHTML=t;const r=n.cloneNode(!0);for(var s in i){let e=h(s);i.hasOwnProperty(s)&&(!0===i[s]?r.setAttribute(e,e):!1===i[s]?r.removeAttribute(e):null!=i[s]&&i[s].constructor===Array||null!=i[s]&&i[s].constructor===Object?r.properties&&r.properties[s].readOnly||(r.set?r.set(e,i[s]):r[e]=i[s]):r.setAttribute(e,i[s]))}return null!==Zo.activePlaceHolder&&void 0!==Zo.activePlaceHolder.style?(r.style.width=Zo.activePlaceHolder.style.width,r.style.float=Zo.activePlaceHolder.style.float,r.style.margin=Zo.activePlaceHolder.style.margin,r.style.display=Zo.activePlaceHolder.style.display,this.haxReplaceNode(Zo.activePlaceHolder,r),Zo.activePlaceHolder=null):o&&o.parentNode?this.__isLayout(o.parentNode)?(null!=o.getAttribute("slot")&&r.setAttribute("slot",o.getAttribute("slot")),this.__addAbove?o.parentNode.insertBefore(r,o):o.parentNode.insertBefore(r,o.nextElementSibling)):o.parentNode&&o.parentNode.nextElementSibling?o.parentNode.nextElementSibling.parentNode.insertBefore(r,o.parentNode.nextElementSibling):o.parentNode&&o.nextElementSibling?this.__addAbove?o.parentNode.insertBefore(r,o):o.parentNode.insertBefore(r,o.nextElementSibling):o.parentNode&&o.parentNode.children[o.parentNode.children.length-1]===o?this.__addAbove?o.parentNode.insertBefore(r,o):o.parentNode.appendChild(r):o.parentNode?o.parentNode.insertBefore(r,o):this.appendChild(r):this.appendChild(r),this.contextMenus.text.hasSelectedText=!1,setTimeout((()=>{this.__focusLogic(r),this.scrollHere(r)}),0),r}async haxToContent(){this.hideContextMenus();var e=this.activeNode;Zo.activeNode=null;let t="slot"===this.shadowRoot.querySelector("#body").localName?this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}):[];for(var i="",o=0;o<t.length;o++)if(this._validElementTest(t[o]))this.__applyDragDropState(t[o],!1),t[o].classList.remove("hax-hovered"),t[o].contentEditable=!1,i+=await Zo.nodeToContent(t[o]),this.__isLayout(t[o])&&this._applyContentEditable(this.editMode,t[o]);else if(8===t[o].nodeType)i+="\x3c!-- "+t[o].textContent+" --\x3e";else if(t[o].haxUIElement&&t[o].children&&t[o].children[0]){let e=await Zo.runHook(t[o],"activeElementChanged",[this.activeNode,!1]);e&&e!==t[o]?i+=await Zo.nodeToContent(e):i+=await Zo.nodeToContent(t[o].children[0])}else 1!==t[o].nodeType&&void 0!==t[o].textContent&&"undefined"!==t[o].textContent?i+=t[o].textContent:console.warn(t[o]);if(i=(i=(i=(i=(i=i.replace(/\scontenteditable=\"false\"/g,"")).replace(/\scontenteditable/g,"")).replace(/\sdraggable/g,"")).replace(/\sdata-hax-ray=\".*?\"/g,"")).replace(/\sdata-hax-grid/g,""),this.parentNode.tagName){let e=this.parentNode.tagName.toLowerCase(),t="style-scope "+e+" x-scope",a=new RegExp(t,"g");i=i.replace(a,""),t="style-scope "+e,a=new RegExp(t,"g"),i=i.replace(a,""),t="x-scope "+e+"-0",a=new RegExp(t,"g"),i=i.replace(a,"");let n=Zo.validTagList;for(var o in n)t="style-scope "+n[o],a=new RegExp(t,"g"),i=i.replace(a,""),t="x-scope "+n[o]+"-0 ",a=new RegExp(t,"g"),i=i.replace(a,""),t="x-scope "+n[o]+"-0",a=new RegExp(t,"g"),i=i.replace(a,"")}return i=(i=i.replace(/\sclass=\"\"/g,"")).replace(/\sclass=\"\s\"/g,""),this._applyContentEditable(this.editMode),Zo.activeNode=e,i=S(i)}async haxDuplicateNode(e){let t=await c(e,null);Zo.testHook(e,"preProcessInsertContent")&&(t=await Zo.runHook(e,"preProcessInsertContent",[t,this.activeNode])),t.content==t.properties.innerHTML&&delete t.properties.innerHTML;var i=a({tag:t.tag,content:t.content,properties:t.properties});return"webview"===i.tagName.toLowerCase()&&Zo._isSandboxed&&void 0!==i.guestinstance&&delete i.guestinstance,null!==e?e.parentNode.insertBefore(i,e.nextSibling):e.parentNode.appendChild(i),Zo.activeNode=i,!0}hideContextMenus(e=!0){clearTimeout(en),clearTimeout(this.__contextVisibleLock),clearTimeout(this.__positionContextTimer),this._hideContextMenu(this.contextMenus.text),this.__activeHover=null,e&&this._hideContextMenu(this.contextMenus.plate)}positionContextMenus(e=this.activeNode){if(e&&e.tagName&&this.ready){let t=e.tagName.toLowerCase();Zo.elementList&&Zo.elementList[t]&&Zo.elementList[t].contentEditable&&null===e.getAttribute("data-hax-lock")&&e.parentNode&&null===e.parentNode.getAttribute("data-hax-lock")?e.setAttribute("contenteditable",!0):e.removeAttribute("contenteditable"),clearTimeout(this.__positionContextTimer),this.__positionContextTimer=setTimeout((()=>{if(!Zo._lockContextPosition){let t=e.tagName.toLowerCase();Zo._isSandboxed&&"webview"===t&&(t="iframe");let i=Zo.elementList[t];e?this._showContextMenu(this.contextMenus.plate):this._hideContextMenu(this.contextMenus.plate),void 0===i||Zo.isTextElement(e)?this._showContextMenu(this.contextMenus.text):(this._hideContextMenu(this.contextMenus.text),i.element=e),(i||{}).gizmo;let o=i&&i.gizmo&&(i.gizmo.handles||[]).filter((e=>"inline"===(e||{}).type)).length>0;i&&"core"!=i.editingElement?setTimeout((()=>{(e&&e.parentNode||!o)&&(this.canMoveElement=!0)}),250):this.activeNode&&("LI"===this.activeNode.tagName||this._HTMLInlineTextDecorationTest(this.activeNode))?this.canMoveElement=!1:this.canMoveElement=!0}this.contextMenus.parent.setPosition()}),50)}}__addActiveVisible(){for(var e in this.contextMenus)("add"!=e||this.__activeHover)&&this.contextMenus[e].classList.add("hax-context-menu-active")}__dropActiveVisible(){for(var e in this.contextMenus)this.contextMenus[e].classList.remove("hax-context-menu-active");this.__activeHover=null}haxMoveGridPlate(e,t=1){this.___moveLock=!0;let i=e?e.parentNode:void 0,o=t>0?e.nextElementSibling:e.previousElementSibling,a=this.__layoutSlots(i)||[],n=e.getAttribute("slot"),r=n?a.indexOf(n):-1,s=a[r+t];return o&&(!n||o.getAttribute("slot")),!o||n&&n!==o.getAttribute("slot")?s?e.setAttribute("slot",s):e&&i&&i!==this&&(o=t>0?i.nextElementSibling:i,s=i.getAttribute("slot"),o&&(i.parentNode.insertBefore(e,o),s&&e.setAttribute("slot",s))):i.insertBefore(e,t>0?o.nextElementSibling:o),this.scrollHere(e),this.positionContextMenus(e),!0}async haxGridPlateOps(e=!0,t="right",i=this.activeNode){let o=!1;if("GRID-PLATE"===i.tagName){if(e)switch(i.layout){case"1":i.layout="1-1",o=!0;break;case"1-1":i.layout="1-1-1",o=!0;break;case"1-1-1":i.layout="1-1-1-1",o=!0;break;case"1-1-1-1":i.layout="1-1-1-1-1",o=!0;break;case"1-1-1-1-1":i.layout="1-1-1-1-1-1",o=!0}else switch(i.layout){case"1-1":let e;await i.childNodes.forEach((t=>{t.tagName&&(e=t.cloneNode(!0),i.getAttribute("slot")?e.setAttribute("slot",i.getAttribute("slot")):e.removeAttribute("slot"),i.parentNode.insertBefore(e,i))})),Zo.activeNode=e,setTimeout((()=>{i.remove()}),0),o=!0;break;case"1-1-1":i.layout="1-1",o=!0;break;case"1-1-1-1":i.layout="1-1-1",o=!0;break;case"1-1-1-1-1":i.layout="1-1-1-1",o=!0;break;case"1-1-1-1-1-1":i.layout="1-1-1-1-1",o=!0}if(o){let e=this.contextMenus.plate.shadowRoot.querySelector("#right"),o=this.contextMenus.plate.shadowRoot.querySelector("#rightremove");e.disabled=!1,o.disabled=!1,"1-1-1-1-1-1"==i.layout&&(e.disabled=!0),"left"==t&&i.childNodes.forEach((e=>{if(e.tagName){let t=parseInt(e.getAttribute("slot").replace("col-",""),10)+1;e.setAttribute("slot",`col-${t}`)}}))}}else{let e=document.createElement("grid-plate");e.layout="1-1",e.disableResponsive=!0,i.getAttribute("slot")&&e.setAttribute("slot",i.getAttribute("slot"));let o="2";"right"==t&&(o="1");let a=i.cloneNode(!0);a.setAttribute("slot","col-"+o),e.appendChild(a),i.parentNode.insertBefore(e,i),setTimeout((()=>{i.remove()}),0)}await Zo.refreshActiveNodeForm()}haxReplaceNode(e,t){try{null==e&&(e=this.__oldActiveNode),!e.replaceWith&&Zo._tmpRange&&(e=Zo._tmpRange,Zo._tmpRange=null),e&&e.getAttribute&&null!=e.getAttribute("slot")&&t.setAttribute("slot",e.getAttribute("slot")),e.replaceWith(t)}catch(e){console.warn(e)}return t}haxChangeTagName(e,t,i=!0){for(var o=document.createElement(t),a=0,n=e.attributes.length;a<n;++a){let t=e.attributes.item(a).nodeName,i=e.attributes.item(a).value;try{o.setAttribute(t,i)}catch(t){console.warn(e.attributes),console.warn(t)}}i&&(o.innerHTML=e.innerHTML.trim()),"ul"==t||"ol"==t?"<br />"==o.innerHTML?o.innerHTML="<li><br /></li>":"ul"!=e.tagName.toLowerCase()&&"ol"!=e.tagName.toLowerCase()&&(o.innerHTML="<li>"+e.innerHTML.trim().replace(/<br\/>/g,"</li>\n<li>").replace(/<br>/g,"</li>\n<li>")+"</li>"):"ul"!=e.tagName.toLowerCase()&&"ol"!=e.tagName.toLowerCase()||(o.innerHTML=o.innerHTML.replace(/<ul>/g,"").replace(/<\/ul>/g,"").replace(/<li><\/li>/g,"").replace(/<li>/g,"").replace(/<\/li>/g,"<br/>"));try{e.replaceWith(o),i&&setTimeout((()=>{let e=o.children;e[0]&&e.tagName?e[0].focus():o.focus()}),10)}catch(t){console.warn(t),console.warn(o),console.warn(e)}return o}haxDeleteNode(e){if(e.previousElementSibling)Zo.activeNode=e.previousElementSibling;else if(e.nextElementSibling)Zo.activeNode=e.nextElementSibling;else{this.haxInsert("p","",{});try{var t=document.createRange(),i=Zo.getSelection();t.setStart(this.activeNode,0),t.collapse(!0),i.removeAllRanges(),i.addRange(t),this.activeNode.focus()}catch(e){console.warn(e)}}try{return e.remove()}catch(e){console.warn(e)}}importContent(e,t=!0){t&&v(this,"*"),setTimeout((()=>{e=S(e);let t=document.createElement("div");for(t.insertAdjacentHTML("beforeend",e);null!==t.firstChild;)if(void 0!==t.firstChild.tagName)if(Zo._isSandboxed&&"iframe"===t.firstChild.tagName.toLowerCase()){for(var i=document.createElement("webview"),o=0,a=t.firstChild.attributes.length;o<a;++o){var n=t.firstChild.attributes.item(o).nodeName,r=t.firstChild.attributes.item(o).value;"height"!==n&&"width"!==n||i.style[n],i.setAttribute(n,r)}this.appendChild(i)}else this.appendChild(t.firstChild);else t.removeChild(t.firstChild)}),0)}sortGridSlots(e=this.activeNode){let t=Zo.haxSchemaFromTag(e.tagName);"grid"===t.type&&("GRID-PLATE"===e.tagName?e.layout.split("-").map(((e,t)=>`col-${t}`)):Zo.slotsFromSchema(t).map((e=>e.slot))).reverse().forEach(((t,i)=>{0==i?e.querySelectorAll(`[slot=${t}]`).forEach((t=>e.append(t))):[...e.querySelectorAll(`[slot=${t}]`)].reverse().forEach((t=>e.insertBefore(t,e.firstChild)))}))}async _haxContextOperation(e){let t=e.detail,i=b(e),o=i&&i[0]?i[0].getAttribute("data-slot"):void 0;switch(t.eventName){case"insert-above-active":if(this.activeNode&&this.activeNode.previousElementSibling)this.haxInsert("p","",{},this.activeNode.previousElementSibling);else{let e=document.createElement("p");this.insertBefore(e,this.activeNode)}break;case"insert-below-active":this.haxInsert("p","",{});break;case"move-to-slot":o&&this.activeNode&&Zo.isGridPlateElement(this.activeNode.parentNode)&&(this.activeNode.slot=o,this.sortGridSlots(this.activeNode.parentNode));break;case"insert-into-active":if(o&&this.activeNode&&Zo.isGridPlateElement(this.activeNode)){let e=document.createElement("p");e.slot=o,this.activeNode.append(e),this.haxInsert("p","",{slot:o},e),e.remove(),this.sortGridSlots()}break;case"hax-select-grid":if(i[0]&&i[0].eventData){let e=i[0].eventData;this.setActiveNode(e,!0),this.positionContextMenus(e)}break;case"hax-select-grid-item":if(i[0]&&i[0].eventData){let e=i[0].eventData,t=e.target,o=e.slot,a=e.index,n=e.grid,r=e.editMode,s=e.invisible?n:[...n.children].filter((e=>o&&""!==o?e.slot===o:!e.slot||""===e.slot))[a]||t;n&&r?this.setSlotEditMode(n,r,s):(this.setActiveNode(node,!0),this.positionContextMenus(node))}break;case"hax-edit-element-toggle":if(i[0]&&i[0].eventData){let e=i[0].eventData;e&&e.target&&e.editMode&&this.toggleElementEditMode(e.target,e.editMode)}break;case"hax-source-view-toggle":if(this.activeNode.__haxSourceView){this.activeNode.__haxSourceView=!1;let e=await Zo.runHook(Zo.activeEditingElement,"activeElementChanged",[this.activeNode,!1]),t=Zo.haxSchemaFromTag(this.activeNode.tagName.toLowerCase());if(this.activeNode&&this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&e.setAttribute("slot",this.activeNode.getAttribute("slot")),t.saveOptions&&t.saveOptions.unsetAttributes&&t.saveOptions.unsetAttributes.length)for(var a in t.saveOptions.unsetAttributes)e.removeAttribute(t.saveOptions.unsetAttributes[a]);this.__applyNodeEditableState(e,this.editMode),A(Zo.activeEditingElement),Zo.activeEditingElement=null,this.viewSourceToggle=!1}else this.activeNode.__haxSourceView=!0,Zo.activeEditingElement=document.createElement("code-editor"),Zo.activeEditingElement.language="html",Zo.activeEditingElement.title="",Zo.activeEditingElement.theme="vs",Zo.activeEditingElement.fontSize=12,Zo.activeEditingElement.wordWrap=!0,this.viewSourceToggle=!0,import("./2232432d.js"),this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&Zo.activeEditingElement.setAttribute("slot",this.activeNode.getAttribute("slot")),this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.__applyDragDropState(this.activeNode,!1),this.activeNode.classList.remove("hax-active"),Zo.testHook(this.activeNode,"preProcessNodeToContent")&&(this.activeNode=await Zo.runHook(this.activeNode,"preProcessNodeToContent",[this.activeNode])),C(this.activeNode,Zo.activeEditingElement),Zo.activeEditingElement.focus();break;case"hax-full-text-editor-toggle":if(this.activeNode.__haxSourceView){this.activeNode.__haxSourceView=!1;let e=await Zo.runHook(Zo.activeEditingElement,"activeElementChanged",[this.activeNode,!1]),t=Zo.haxSchemaFromTag(this.activeNode.tagName.toLowerCase());if(this.activeNode&&this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&e.setAttribute("slot",this.activeNode.getAttribute("slot")),t.saveOptions&&t.saveOptions.unsetAttributes&&t.saveOptions.unsetAttributes.length)for(var a in t.saveOptions.unsetAttributes)e.removeAttribute(t.saveOptions.unsetAttributes[a]);this.__applyNodeEditableState(e,this.editMode),A(Zo.activeEditingElement),Zo.activeEditingElement=null,this.viewSourceElement=Zo.activeEditingElement}else this.activeNode.__haxSourceView=!0,import("./becfcf1c.js").then((()=>{Zo.activeEditingElement=document.createElement("rich-text-editor"),Zo.activeEditingElement.type="rich-text-editor-toolbar-full",this.activeNode.getAttribute&&null!=this.activeNode.getAttribute("slot")&&Zo.activeEditingElement.setAttribute("slot",this.activeNode.getAttribute("slot")),this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.__applyDragDropState(this.activeNode,!1),this.activeNode.classList.remove("hax-active"),C(this.activeNode,Zo.activeEditingElement),this.viewSourceElement=Zo.activeEditingElement}));break;case"text-tag":Zo.activeNode=this.haxChangeTagName(this.activeNode,t.value),this.positionContextMenus();break;case"text-tag-ul":this.contextMenus.text.realSelectedValue="ul",Zo.activeNode=this.haxChangeTagName(this.activeNode,"ul"),this.positionContextMenus();break;case"text-tag-ol":this.contextMenus.text.realSelectedValue="ol",Zo.activeNode=this.haxChangeTagName(this.activeNode,"ol"),this.positionContextMenus();break;case"text-align-left":this.activeNode.style.textAlign=null;break;case"hax-transform-node":this.replaceElementWorkflow();break;case"hax-plate-create-right":this.haxGridPlateOps();break;case"hax-plate-remove-right":this.haxGridPlateOps(!1);break;case"hax-plate-duplicate":this.haxDuplicateNode(this.activeNode);break;case"hax-plate-delete":null!=this.activeNode&&this.haxDeleteNode(this.activeNode);break;case"hax-plate-up":this.haxMoveGridPlate(this.activeNode,-1);break;case"hax-plate-down":this.haxMoveGridPlate(this.activeNode);break;case"content-edit":"content-edit"===Zo.haxTray.trayDetail&&(Zo.haxTray.collapsed=!Zo.haxTray.collapsed),Zo.haxTray.trayDetail="content-edit"}}_focusIn(e){this.__mouseDown||this.__focusLogic(e.target)&&(e.stopPropagation(),e.stopImmediatePropagation())}__focusLogic(e,t=!0){let i=!1;if(this.editMode&&!this.__tabTrap){let o=e;"SPAN"===o.tagName&&Zo.isTextElement(o.parentNode)&&""==o.parentNode.getAttribute("slot")&&(o=e.parentNode);let a=null;if(this._validElementTest(o)&&o.parentNode&&o.parentNode.tagName){if("P"===o.parentNode.tagName&&""==o.parentNode.getAttribute("slot"))a=o,i=!0;else{for(;o.parentNode&&o.parentNode.tagName&&"HAX-BODY"!=o.parentNode.tagName;)null===a&&"B"!==o.tagName&&"I"!==o.tagName&&"STRONG"!==o.tagName&&"EM"!==o.tagName&&(a=o),o=o.parentNode;null===a?a=o:Zo.isGridPlateElement(o)}(this.activeNode&&this.activeNode.parentNode!==o&&!o.classList.contains("ignore-activation")||o.haxUIElement||o.classList.contains("ignore-activation"))&&(i=!0),a.haxUIElement||a.classList.contains("ignore-activation")||(Zo.activeNode=a,this.activeNode=a,setTimeout((()=>{if(t&&!this.__mouseDown&&Zo.isTextElement(a))try{var e=document.createRange(),i=Zo.getSelection();e.setStart(this.activeNode,0),e.collapse(!0),i.removeAllRanges(),i.addRange(e),this.activeNode.focus()}catch(e){console.warn(e)}this.positionContextMenus(a)}),0),i=!0)}}else this.__tabTrap=!1;return i}scrollHere(e){setTimeout((()=>{"function"==typeof e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded(!0):e.scrollIntoView({behavior:"smooth",inline:"center",block:"nearest"})}),0)}undo(){super.undo(),setTimeout((()=>{let e=this.querySelector(".hax-active");e?(this.__focusLogic(e),this.scrollHere(e)):this.hideContextMenus()}),0)}redo(){super.redo(),setTimeout((()=>{let e=this.querySelector(".hax-active");e?(this.__focusLogic(e),this.scrollHere(e)):this.hideContextMenus()}),0)}async _editModeChanged(e,t){if(void 0!==t){if(this._applyContentEditable(e),e)if(this.children&&this.children[0]&&this.children[0].focus)this.__focusLogic(this.children[0]);else{this.haxInsert("p","",{});try{var i=document.createRange(),o=Zo.getSelection();i.setStart(this.activeNode,0),i.collapse(!0),o.removeAllRanges(),o.addRange(i),this.activeNode.focus()}catch(e){console.warn(e)}}else this.activeNode&&(this.unsetSlotEditMode(this.activeNode),this.unsetElementEditMode(this.activeNode));setTimeout((()=>{this.undoStack.undoStackLimit=50,this.undoStack.undoStackPosition=-1,this.undoStack.commands=[],this.undoStack.changed(),this.undoStackInitialValue=this.innerHTML,this.undoStackPrevValue=this.undoStackInitialValue}),0)}if(0==e){A(Zo.activeEditingElement),Zo.activeEditingElement=null,this.removeAttribute("contenteditable"),this.hideContextMenus();let e=this.querySelectorAll("[contenteditable],.hax-active");for(var a=0;a<e.length;a++){let t=e[a];t.removeAttribute("contenteditable"),t.classList.remove("hax-active")}}let n="slot"===this.shadowRoot.querySelector("#body").localName?this.shadowRoot.querySelector("#body").assignedNodes({flatten:!0}):[];0===n.length&&(n=this.shadowRoot.querySelector("#body").children);for(a=0;a<n.length;a++)await Zo.runHook(n[a],"editModeChanged",[e])}_haxResolvePreviousElement(e){for(e=e.previousElementSibling;null!=e&&void 0!==e.tagName&&"HAX-"===e.tagName.substring(0,4);)e=e.previousElementSibling;return e}_validElementTest(e){return!(e.haxUIElement||!e.tagName||["TEMPLATE","HAX-BODY","RICH-TEXT-EDITOR-CLIPBOARD","RICH-TEXT-EDITOR-PROMPT","RICH-TEXT-EDITOR-HIGHLIGHT","HAX-APP-SEARCH-RESULT","FAKE-HAX-BODY-END"].includes(e.tagName))&&(!this._HTMLInlineTextDecorationTest(e)||"HAX-BODY"==e.parentNode)}_HTMLInlineTextDecorationTest(e){return["span","b","strong","i","em",...Object.keys(window.HaxTextEditorToolbarConfig.inlineGizmos||{})].includes(e.tagName.toLowerCase())}_HTMLPrimativeTest(e){return null!=e&&void 0!==e.tagName&&-1==e.tagName.indexOf("-")}_applyContentEditable(e,t=this.shadowRoot.querySelector("#body")){let i="slot"===t.localName?t.assignedNodes({flatten:!0}):[];0===i.length&&(i=t.children);for(var o=0;o<i.length;o++)if(this._validElementTest(i[o])&&(!e||!0!==i[o].getAttribute("contenteditable")&&"true"!=i[o].getAttribute("contenteditable")&&"contenteditable"!=i[o].getAttribute("contenteditable"))&&this.__applyNodeEditableState(i[o],e),Zo.isGridPlateElement(i[o])){let t=i[o].querySelectorAll("*");for(var a=0;a<t.length;a++)this._validElementTest(t[a])&&this.__applyNodeEditableState(t[a],e)}}__layoutDropEvent(e,t){[...t.querySelectorAll(".active")].forEach((e=>{e.classList.remove("active")})),[...t.shadowRoot.querySelectorAll(".active")].forEach((e=>{e.classList.remove("active")}))}__layoutDragEnter(e){e.target.classList.add("active")}__layoutDragLeave(e){e.target.classList.remove("active")}__layoutMonitor(e){var t=b(e);t[0]&&t[0].assignedNodes&&t[0].assignedNodes().length&&t[0].parentNode?t[0].parentNode.classList.add("has-nodes"):t[0].parentNode&&t[0].parentNode.classList.remove("has-nodes")}__getLayoutOrder(e,t){if(!t.shadowRoot)return!1;let i=e.getAttribute("slot"),o=t.shadowRoot.querySelector(`[slot=${i}]`);return[...t.shadowRoot.querySelectorAll("[slot]")].map((e=>e.parentNode)).indexOf(o)||-1}__layoutCanMove(e,t,i){if(!t.shadowRoot)return!1;let o=t.shadowRoot.querySelector(`[slot=${slot}]`),a=[...t.shadowRoot.querySelectorAll("[slot]")].map((e=>e.parentNode)),n=(a.indexOf(o)||-1)+(i?-1:1);return n>=a[0]&&n<=a[a.length-1]}__layoutMove(e,t,i){if(!t.shadowRoot)return!1;let o=t.shadowRoot.querySelector(`[slot=${r}]`),a=[...t.shadowRoot.querySelectorAll("[slot]")].map((e=>e.parentNode)),n=a.indexOf(o)||-1,r=a[n+(i?-1:1)];r&&e.setAttribute("slot",r)}async __sortLayoutChildren(e){e.setAttribute("hax-layout-sorting",!0);try{let t=Array.prototype.reduce.call(e.querySelectorAll("[slot]"),(function(e,t){return e}),[]);t=t.sort((function(t,i){return this.__getLayoutOrder(t,e)<this.__getLayoutOrder(i,e)?-1:1})),await t.forEach((t=>{t.parentNode===this&&e.appendChild(t)}))}catch(e){console.warn(e)}e.removeAttribute("hax-layout-sorting")}__layoutSlotValid(e,t){return this.__layoutSlots(t).includes(e.getAttribute("slot"))}__layoutSlots(e){return e.shadowRoot?[...e.shadowRoot.querySelectorAll("[slot]")].map((e=>e.getAttribute("name"))):[]}__applyDragDropState(e,t){let i={drop:t=>this.__layoutDropEvent.bind(this)(t,e),dragenter:this.__layoutDragEnter.bind(this),dragleave:this.__layoutDragEnter.bind(this),slotchange:this.__layoutMonitor.bind(this)};if(e.setAttribute("data-hax-layout",!0),Zo.isGridPlateElement(e)&&e.setAttribute("data-hax-grid",!0),t&&e.setAttribute("data-hax-ray",t),t&&e.shadowRoot){e.addEventListener("drop",i.drop);let t=[...e.shadowRoot.querySelectorAll("drag-enabled")],o=[...e.shadowRoot.querySelectorAll("slot")];t.forEach((e=>{e.addEventListener("dragenter",i.dragenter),e.addEventListener("dragleave",i.dragleave)})),o.forEach((e=>e.addEventListener("slotchange",i.slotchange))),e.haxLayoutObserver=new MutationObserver((t=>{e.getAttribute("hax-layout-sorting")||(t.forEach((t=>{t.addedNodes.forEach((t=>{t.tagName&&t!==this&&t.parentElement&&"HAX-BODY"!==t.parentElement.tagName&&!this.__layoutSlotValid(t,e)&&this.__layoutSlots(e).length>0&&t.setAttribute("slot",this.__layoutSlots(e)[0])}))})),this.__sortLayoutChildren(e))})),e.haxLayoutObserver.observe(this,{childList:!0})}else if(e.shadowRoot){e.haxLayoutObserver&&e.haxLayoutObserver.disconnect(),this.removeEventListener("drop",i.drop);let t=[...e.shadowRoot.querySelectorAll("drag-enabled")],o=[...e.shadowRoot.querySelectorAll("slot")];t.forEach((e=>{e.removeEventListener("dragenter",i.dragenter),e.removeEventListener("dragleave",i.dragleave)})),o.forEach((e=>e.removeEventListener("slotchange",i.slotchange))),e.removeAttribute("data-hax-ray")}}__isLayout(e){return e&&Zo.haxSchemaFromTag(e.tagName)&&"grid"===Zo.haxSchemaFromTag(e.tagName).type}__applyNodeEditableState(e,t=!0){let i;if(!e.tagName)return!1;let o=e.tagName.replace("-"," ").toLowerCase(),a=Ii(Zo.gizmoList).findIndex((t=>{if(t)return t.tag===e.tagName.toLowerCase()}));if(-1!==a&&(o=Ii(Zo.gizmoList)[a].title),"IMG"==e.tagName&&e.setAttribute("draggable",!1),t?(this.__applyDragDropState(e,o),i="addEventListener"):(this.__applyDragDropState(e,!1),i="removeEventListener"),e[i]("drop",this.dropEvent.bind(this)),e[i]("dragenter",this.dragEnter.bind(this)),e[i]("dragleave",this.dragLeave.bind(this)),e[i]("dragover",(e=>{this.__dragMoving=!0,e.preventDefault()})),this._HTMLPrimativeTest(e)&&(t?e.setAttribute("contenteditable",t):e.removeAttribute("contenteditable"),e.querySelectorAll("a").length>0)){let o=e.querySelectorAll("a");for(var n=0,r=o.length;n<r;n++)t?o[n].setAttribute("contenteditable",t):o[n].removeAttribute("contenteditable"),o[n][i]("click",(e=>{e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}))}}undoManagerStackLogic(e){this.__dragMoving||(this.querySelectorAll(".hax-hovered").forEach((e=>{e.classList.remove("hax-hovered")})),super.undoManagerStackLogic(e))}dropEvent(e){if(this.editMode){this.__dragMoving=!1,this.undoManagerStackLogic({}),clearTimeout(en),Zo._lockContextPosition=!1,Zo.haxTray.activeTab="item-1";var t,i=null,o=b(e);if(null!==(i=e.target.closest("[data-hax-layout]")&&e.target.parentNode!=e.target.closest("[data-hax-layout]")?e.target.closest("[data-hax-layout]"):e.target.closest("[contenteditable],img")?e.target.closest("[contenteditable],img"):e.originalTarget?e.originalTarget:e.target).getAttribute("data-hax-lock"))return!1;o[0].classList.contains("column")?this.__slot=o[0].getAttribute("id").replace("col","col-"):i.getAttribute("slot")&&(this.__slot=i.getAttribute("slot")),Zo.activeNode=i,this.querySelectorAll(".hax-hovered").forEach((e=>{e.classList.remove("hax-hovered")})),this.querySelectorAll(".active").forEach((e=>{e.classList.remove("active")}));try{if(null===Zo.__dragTarget&&e.dataTransfer&&e.dataTransfer.items&&e.dataTransfer.items.length>0&&"file"===e.dataTransfer.items[0].kind){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();let i=document.createElement("p");e.target.closest("[data-hax-layout]")&&e.target.parentNode!=e.target.closest("[data-hax-layout]")?t=e.target.closest("[data-hax-layout]"):e.target.closest("[contenteditable],img")&&(t=e.target.closest("[contenteditable],img")),t&&(t.tagName&&"HAX-BODY"!==t.tagName||!t.getAttribute("data-hax-layout"))||this.__isLayout(o[0])?(t.getAttribute("slot")?i.setAttribute("slot",t.getAttribute("slot")):o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):i.removeAttribute("slot"),t.parentNode.insertBefore(i,t)):(o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):t&&"HAX-BODY"===t.tagName&&i.getAttribute("slot")&&i.removeAttribute("slot"),t?t.appendChild(i):this.appendChild(i)),e.placeHolderElement=i,this.dispatchEvent(new CustomEvent("place-holder-file-drop",{bubbles:!0,cancelable:!0,composed:!0,detail:e}))}else{if(i=Zo.__dragTarget,t=e.target,e.target.closest("[data-hax-layout]")&&e.target.parentNode!=e.target.closest("[data-hax-layout]")?t=e.target.closest("[data-hax-layout]"):e.target.closest("[contenteditable],img")&&(t=e.target.closest("[contenteditable],img")),t&&i&&this._validElementTest(i)&&i!==t){try{"HAX-BODY"!==t.tagName&&!this.__isLayout(t)||this.__isLayout(o[0])?(t.getAttribute("slot")?i.setAttribute("slot",t.getAttribute("slot")):o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):i.removeAttribute("slot"),t.parentNode.insertBefore(i,t)):(o[0].classList.contains("column")?i.setAttribute("slot",o[0].getAttribute("id").replace("col","col-")):"HAX-BODY"===t.tagName&&i.getAttribute("slot")&&i.removeAttribute("slot"),t.appendChild(i))}catch(e){console.warn(e)}e.preventDefault(),e.stopPropagation()}i&&this._validElementTest(i)&&"function"==typeof i.focus&&(Zo.activeNode=i,Zo.testHook(Zo.activeNode,"trayDragNDropToNode")&&Zo.runHook(Zo.activeNode,"trayDragNDropToNode",[Zo.activeNode]),this.dispatchEvent(new CustomEvent("hax-drop-focus-event",{bubbles:!0,cancelable:!0,composed:!0,detail:this.activeNode})),this.scrollHere(this.activeNode),this.positionContextMenus())}}catch(e){console.warn(e)}}Zo.__dragTarget=null,this.__manageFakeEndCap(!1)}dragEnter(e){this.editMode&&e.target&&Zo.__dragTarget&&(this.__dragMoving=!0,e.preventDefault(),e.target&&e.target.classList&&e.target.classList.add("hax-hovered"),this.handleMousemove(e))}handleMousemove(e){var t=e.clientX,i=e.clientY,o=document.documentElement.clientWidth,a=document.documentElement.clientHeight,n=a-200,r=o-200,s=t<200,l=t>r,d=i<200,c=i>n;if(s||l||d||c){var h=Math.max(document.body.scrollWidth,document.body.offsetWidth,document.body.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth),u=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.body.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),p=h-o,m=u-a;!function e(){clearTimeout(en),function(){var e=window.pageXOffset,o=window.pageYOffset,a=o>0,h=o<m,u=e>0,g=e<p,b=e,f=o;if(s&&u){b-=25*((200-t)/200)}else if(l&&g){b+=25*((t-r)/200)}if(d&&a){f-=25*((200-i)/200)}else if(c&&h){f+=25*((i-n)/200)}return b=Math.max(0,Math.min(p,b)),f=Math.max(0,Math.min(m,f)),(b!==e||f!==o)&&(window.scrollTo(b,f),!0)}()&&(en=setTimeout(e,30))}()}else clearTimeout(en)}dragLeave(e){this.editMode&&e.target&&e.target.classList&&(this.__dragMoving=!0,e.target.classList.remove("hax-hovered"))}toggleElementEditMode(e,t){e[t]?this.unsetElementEditMode(e,t):this.setElementEditMode(e,t)}unsetElementEditMode(e=this.activeNode){if(!e)return;let t=e.getAttribute("data-element-edit-mode")||"editMode";e[t]=!1,this.__applyNodeEditableState(e,this.editMode),Zo.activeEditingElement=null,this.editElementToggled=!1,this.__ignoreActive=!1}setElementEditMode(e,t="editMode"){e.setAttribute("data-element-edit-mode",t),e[t]=!0,Zo.activeEditingElement=e,this.editElementToggled=!1,this.__ignoreActive=!0,this.activeNode.removeAttribute("contenteditable"),this.activeNode.classList.remove("hax-active"),this.__applyDragDropState(this.activeNode,!1),Zo.activeEditingElement.focus()}unsetSlotEditMode(e){let t=e.getAttribute("data-grid-saved-settings")?JSON.parse(e.getAttribute("data-grid-saved-settings")):void 0;Object.keys(t||{}).forEach((i=>e[i]=t[i])),e.removeAttribute("data-grid-saved-settings")}setSlotEditMode(e,t,i){let o=e.getAttribute("data-grid-saved-settings")?JSON.parse(e.getAttribute("data-grid-saved-settings")):{},a=Object.keys(o);Object.keys(t||{}).forEach((i=>{a.includes(i)||(o[i]=e[i]),e[i]=t[i]})),e.setAttribute("data-grid-saved-settings",JSON.stringify(o))}async _activeNodeChanged(e,t){if(window.SimplePopoverManager.requestAvailability().opened=!1,this.contextMenus.plate.disableDuplicate=!1,this.contextMenus.plate.disableOps=!1,this.contextMenus.plate.disableItemOps=!1,this.contextMenus.plate.canMoveElement=this.canMoveElement,await this.querySelectorAll(".hax-active").forEach((e=>{e.classList.remove("hax-active")})),e&&t&&Zo.isGridPlateElement(e)&&(this.__ignoreActive=!0),this.editMode&&null!=e&&e.parentNode){let t=e.tagName.toLowerCase();e.classList.add("hax-active"),(Zo.isTextElement(e)||"HR"===e.tagName||Zo.isGridPlateElement(e))&&null===e.getAttribute("data-hax-lock")&&null===e.parentNode.getAttribute("data-hax-lock")?(e.setAttribute("contenteditable",!0),this.setAttribute("contenteditable",!0)):(e.removeAttribute("contenteditable"),this.removeAttribute("contenteditable")),this._keepContextVisible(),this.contextMenus.text.realSelectedValue=t}else null===e&&(this.hideContextMenus(),this.__oldActiveNode=t);if(this.editMode&&await Zo.runHook(t,"activeElementChanged",[t,!1])&&(this.__ignoreActive=!0),this.editMode&&await Zo.runHook(e,"activeElementChanged",[e,!0])&&(this.__ignoreActive=!0),this.editMode&&t){let e=Zo.haxSchemaFromTag(t.tagName.toLowerCase());if("core"!=e.editingElement||t.parentNode&&t.parentNode.haxUIElement&&t.parentNode===Zo.activeEditingElement){this.__ignoreActive=!0;let o=await Zo.runHook(Zo.activeEditingElement,"activeElementChanged",[t,!1]);if(o&&o!==t){if(t&&t.getAttribute&&null!=t.getAttribute("slot")&&o.setAttribute("slot",t.getAttribute("slot")),e.saveOptions&&e.saveOptions.unsetAttributes&&e.saveOptions.unsetAttributes.length)for(var i in e.saveOptions.unsetAttributes)o.removeAttribute(e.saveOptions.unsetAttributes[i]);this.__applyNodeEditableState(o,this.editMode)}A(Zo.activeEditingElement),Zo.activeEditingElement=null}}if(this.editMode&&e){let t=Zo.haxSchemaFromTag(e.tagName);if(t&&t.editingElement&&"core"!=t.editingElement){if(t.editingElement.import){let e=new URL("./../../",import.meta.url).href;await import(`${e}${t.editingElement.import}`)}Zo.activeEditingElement=document.createElement(t.editingElement.tag),e.getAttribute&&null!=e.getAttribute("slot")&&Zo.activeEditingElement.setAttribute("slot",e.getAttribute("slot")),t.editingElement.callback&&t.editingElement.callback(Zo.activeEditingElement),this.__ignoreActive=!0,C(e,Zo.activeEditingElement),await Zo.runHook(Zo.activeEditingElement,"activeElementChanged",[e,!0])}}!t||!t.parentNode||e&&e.parentNode&&e.parentNode===t.parentNode||this.unsetSlotEditMode(t.parentNode),this.unsetElementEditMode(t)}_getPosition(e){return{x:e.offsetLeft-e.scrollLeft+e.clientLeft,y:e.offsetTop-e.scrollTop+e.clientTop}}_showContextMenu(e){e.setAttribute("on-screen","on-screen"),e.classList.add("hax-context-visible","hax-context-menu-active")}_getContextContainer(e){let t=e&&e.parentNode?e.parentNode:void 0;return t&&t.nodeType?1==t.nodeType?t:t.host:void 0}_hideContextMenu(e){e&&(e.removeAttribute("on-screen"),e.classList.remove("hax-context-visible"),e.classList.remove("hax-context-menu-active"))}_tabKeyPressed(){if(this.activeNode&&Zo.getRange().cloneRange)try{let t=!1,i=this.activeNode.parentNode;const o=this.activeNode.parentNode.tagName;let a=Zo.getRange().cloneRange();var e=a.commonAncestorContainer.tagName;if(void 0===e&&(e=a.commonAncestorContainer.parentNode.tagName),["UL","OL","LI"].includes(o)||["UL","OL","LI"].includes(e))this.polyfillSafe&&(this.__tabTrap=!0,this.__indentTrap=!0,document.execCommand("indent"));else for(;!t;)null==i.nextSibling?t=!0:"function"===i.nextSibling.focus?(i.nextSibling.focus(),t=!0):i=i.nextSibling}catch(e){console.warn(e)}}_tabBackKeyPressed(){if(this.activeNode&&Zo.getRange().cloneRange)try{let t=this.activeNode.parentNode;const i=this.activeNode.parentNode.tagName;let o=Zo.getRange().cloneRange();var e=o.commonAncestorContainer.tagName;if(void 0===e&&(e=o.commonAncestorContainer.parentNode.tagName),["UL","OL","LI"].includes(i)||["UL","OL","LI"].includes(e))this.polyfillSafe&&(this.__tabTrap=!0,this.__indentTrap=!0,document.execCommand("outdent"));else{if(null!=t)for(;null!=t&&!this._validElementTest(t);)t=t.previousSibling;null!=t&&setTimeout((()=>{t.focus()}),50)}}catch(e){console.warn(e)}}}window.customElements.define(tn.tag,tn);
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class on extends p{static get styles(){return[i`:host{display:block;margin-bottom:var(--a11y-tabs-content-padding);border:1px solid var(--a11y-tabs-border-color);padding:var(--a11y-tabs-content-padding)}.sr-only{position:absolute;left:-99999px;height:0;overflow:hidden}.label-heading{display:flex;align-items:center;color:var(--a11y-tabs-selected-color,var(--a11y-tabs-focus-color));background-color:var(--a11y-tabs-background);font-weight:var(--a11y-tabs-selected-font-weight,normal);border-bottom:1px solid var(--a11y-tabs-border-color);margin:0 0 calc(var(--a11y-tabs-content-padding)/ 2);padding:0 0 calc(var(--a11y-tabs-content-padding)/ 2);border-radius:var(--a11y-tabs-horizontal-border-radius,2px) var(--a11y-tabs-horizontal-border-radius,2px) 0 0}simple-icon-lite{margin-right:1em}@media screen{:host{border:none;height:var(--a11y-tabs-tab-height,--a11y-tabs-height);overflow:var(--a11y-tabs-tab-overflow,--a11y-tabs-overflow);margin-bottom:unset}:host([inactive]){display:none}#content-inner{max-width:100%;overflow:auto}.label-heading{display:none}}`]}render(){return o` <span class="sr-only">Tab ${this.xOfY}</span> <div class="label-heading" part="heading"> <simple-icon-lite class="icon" ?hidden="${!this.icon}" .icon="${this.icon}" part="icon"> </simple-icon-lite> <slot name="label" ?hidden="${!this.label}"></slot> <div class="label" part="label">${this.label}</div> </div> <div id="content-inner" part="content"><slot></slot></div> <span class="sr-only"> End of tab ${this.xOfY}. Back to <a href="#${this.id}">tabs</a>. </span> `}static get haxProperties(){return{canScale:!1,canPosition:!1,canEditSource:!0,gizmo:{title:"Tab",description:"A single tab.",icon:"view-day",color:"grey",groups:["Content","Presentation","Tabs"]},settings:{configure:[{property:"icon",title:"Tab Icon",inputMethod:"iconpicker"},{property:"disabled",title:"Disabled",inputMethod:"boolean"},{property:"label",title:"Tab Label",inputMethod:"textfield"},{slot:"",title:"Tab Content",description:"A content of the tab.",inputMethod:"code-editor"}],advanced:[{property:"id",title:"Unique ID",inputMethod:"textfield"},{property:"flag",title:"Optional Flag Text",inputMethod:"textfield"},{property:"flagIcon",title:"Optional Flag Icon",inputMethod:"iconpicker"}]}}}static get properties(){return{ariaLabelledby:{type:String,reflect:!0,attribute:"aria-labelledby"},flag:{type:String,reflect:!0},flagIcon:{type:String,attribute:"flag-icon"},disabled:{type:Boolean,reflect:!0,attribute:"disabled"},icon:{type:String},id:{type:String,reflect:!0,attribute:"id"},inactive:{type:Boolean,reflect:!0,attribute:"inactive"},label:{type:String},order:{type:Number},role:{type:String,reflect:!0,attribute:"role"},tabindex:{type:Number},total:{type:Number}}}constructor(){super(),this.disabled=!1,this.hidden=!1,this.order=1,this.role="tabpanel",this.total=1,this.tabindex=0,this.flag="",this.addEventListener("a11y-tab-flag",(e=>this.handleFlag(e)))}get observer(){return new MutationObserver((e=>this._labelChanged()))}get xOfY(){return`${this.order} of ${this.total}`}connectedCallback(){super.connectedCallback(),this._labelChanged(),this.observer.observe(this,{childList:!0})}disconnectedCallback(){this.observer.disconnect(),this.removeEventListener("a11y-tab-flag",(e=>this.handleFlag(e))),this._fireTabChanged(),super.disconnectedCallback()}updated(e){e.forEach(((e,t)=>{["id","order"].includes(t)&&!this.id&&(this.id=`tab-${this.order}`),["label","order"].includes(t)&&!this.label&&this._labelChanged(),"flag"===t&&this._fireTabChanged(),"flagIcon"===t&&this._fireTabChanged(),"icon"===t&&this._fireTabChanged(),"id"===t&&(this.ariaLabelledby=`${this.id}-button`,this._fireTabChanged()),"label"===t&&this._fireTabChanged(),"disabled"===t&&this.disabled&&this._fireTabChanged()}))}static get tag(){return"a11y-tab"}_handleFlag(e){this.flag=e.detail.flag,this.flagIcon=e.detail.flagIcon}_labelChanged(){this.label&&""!==this.label.trim()||(this.label=this.querySelector('*[slot="label"]')?this.querySelector('*[slot="label"]').innerHTML:`Tab ${this.order}`)}_fireTabChanged(){this.dispatchEvent(new CustomEvent("a11y-tab-changed",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}}window.customElements.define(on.tag,on);class an extends on{static get tag(){return"simple-fields-tab"}static get styles(){return[...super.styles]}static get properties(){return{...super.properties,...M.properties}}}window.customElements.define(an.tag,an);class nn extends(H(p)){static get tag(){return"simple-fields-combo"}static get styles(){return[...super.styles,i`:host([expanded]){overflow:visible}:host(:focus-within),:host(:hover),li:hover,ul:hover{z-index:2}.input-option{display:flex;align-items:center;justify-content:space-between;flex:1 1 100%}.box-input{flex:1 1 auto}ul[role=listbox]{opacity:0;position:absolute;list-style:none;max-height:var(--simple-fields-combo-max-height,12em);max-width:100%;left:0}:host([align-right]) ul[role=listbox]{right:0;left:unset}:host([justify]) ul[role=listbox]{right:0;left:0}:host([expanded]:focus-within) ul[role=listbox],:host([expanded]:hover) ul[role=listbox]{opacity:1}ul[role=listbox] li[role=option]{margin:0;padding:0;padding-left:.125em;border-top:1px solid transparent;border-bottom:1px solid transparent;background-color:var(--simple-fields-background-color,#fff)}[role=listbox] [role=option]{display:block;margin:.25em;padding:0;font-size:100%}[role=listbox] [role=option][aria-selected=true]{background-color:var(--simple-fields-active-color,#eee)}[role=listbox].focus [role=option][aria-selected=true]{background-color:var(--simple-fields-accent-color-light,#d9eaff);border-color:var(--simple-fields-accent-color,#3f51b5)}[role=listbox] li[role=option]:hover{background-color:var(--simple-fields-accent-color-light,#d9eaff)}::slotted([slot=prefix]:not(:empty)){margin-right:.25em}::slotted([slot=suffix]:not(:empty)){margin:0 .25em}`]}static get properties(){return{...super.properties,activeDescendant:{type:String},alignRight:{type:Boolean,reflect:!0,attribute:"align-right"},expanded:{type:Boolean,reflect:!0},justify:{type:Boolean,reflect:!0},filter:{type:String},filteredOptions:{type:Array},inputFocus:{type:Boolean},inputHover:{type:Boolean},listFocus:{type:Boolean},listHover:{type:Boolean},hoveredOption:{type:Object}}}constructor(){super(),this.expanded=!1,this.filter="",this.filteredOptions=[],this.inputFocus=!1,this.inputHover=!1,this.isNone=!0,this.isList=!1,this.isBoth=!1,this.listFocus=!1,this.listHover=!1,this.option=!1,this.autocomplete="none"}get stateInfo(){return{activeDescendant:this.activeDescendant,filteredOptions:this.filteredOptions,filter:this.filter,option:this.option,_selectedOption:this._selectedOption,value:this.value,firstOption:this.firstOption,lastOption:this.lastOption,input:!!this.input&&this.input.value}}get fieldElementTag(){return"input"}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.filter=this.value?this.value:"",this.filterOptions(this.filter,this.option)}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"autocomplete"===t&&this.autocompleteChanged(),"value"===t&&this.value!==e&&this.fieldValueChanged(),"itemsList"!==t&&"options"!==t||this.filterOptions(this.filter,this.option)}))}fieldValueChanged(){this.input&&this.input.value!==this.value&&(this.input.value=this.value),this._fireValueChanged()}autocompleteChanged(){if("string"==typeof this.autocomplete){let e=this.autocomplete.toLowerCase();this.isNone="none"===e,this.isList="list"===e,this.isBoth="both"===e}else this.isNone=!0}get inputTemplate(){return o` <input .aria-activedescendant="${this.activeDescendant}" .aria-autocomplete="${this.autocomplete}" .aria-descrbedby="${this.describedBy}" .aria-expanded="${this.expanded}" aria-haspopup="true" .aria-invalid="${this.error?"true":"false"}" .aria-owns="${this.id}-list" ?autofocus="${this.autofocus}" @blur="${this._onInputBlur}" @change="${this._handleFieldChange}" class="field box-input ${this.inputFocus?"focus":""}" @click="${this._onInputClick}" ?disabled="${this.disabled}" @focus="${this._onInputFocus}" id="${this.id}" @keydown="${this._onInputKeydown}" @keyup="${this._onInputKeyup}" name="${this.id}" .placeholder="${this.placeholder||""}" part="option-input" ?readonly="${this.readonly}" ?required="${this.required}" tabindex="0" type="text" value="${this.value||""}"> `}get expandButtonTemplate(){return o` <simple-icon-button-lite icon="arrow-drop-down" ?hidden="${this.sortedOptions.length<1}" label="open" @click="${this._onButtonClick}" part="option-icon" tabindex="-1"> </simple-icon-button-lite> `}get listboxTemplate(){return o` <ul .aria-labelledBy="${this.fieldId}-label" class="${this.listFocus?"focus":""}" data-items="${this.itemsList.join()}" data-options="${this.filteredOptions.map((e=>e.value)).join()}" ?hidden="${this.isListboxHidden}" id="${this.id}-list" @mouseout="${this._onListboxMouseout}" @mouseover="${this._onListboxMouseover}" role="listbox" part="listbox"> ${this.listboxInnerTemplate} </ul> `}get listboxInnerTemplate(){return(this.filteredOptions||[]).map((e=>this.getListItem(e)))}get isListboxHidden(){return this.hidden||!this.expanded||this.filteredOptions.length<1}getListItem(e){return o` <li aria-selected="${this._isSelected(e)}" id="option${e.id}" role="option" part="listbox-li" @click="${t=>this._onOptionClick(t,e)}" @mouseout="${t=>this._onOptionMouseout(t,e)}" @mouseover="${t=>this._onOptionMouseover(t,e)}"> ${this.getListItemInner(e)} </li> `}getListItemInner(e){return e.value}get fieldMainTemplate(){return o` <div class="field-main" part="field-main" ?hidden="${this.hidden}"> ${this.labelTemplate} <div id="field-main-inner" part="field-main-inner"> ${this.prefixTemplate} <span class="input-option" part="option-inner"> ${this.inputTemplate} ${this.suffixTemplate} ${this.expandButtonTemplate} </span> ${this.listboxTemplate} </div> </div> `}get hasOptions(){return this.filteredOptions.length>0}setActiveDescendant(e){e&&this.listFocus?this.activeDescendant=`option${e.id}`:this.activeDescendant=""}setValue(e){this.filter=e,this.input.setSelectionRange(this.filter.length,this.filter.length),(this.isList||this.isBoth)&&this.filterOptions(this.filter,this.option)}setOption(e,t=!1){e&&(this.option=e,this.setCurrentOptionStyle(this.option),this.setActiveDescendant(this.option),this.isBoth&&(this.value=this.option.value,this.input.value=this.option.value,t?setTimeout((()=>{this.input.setSelectionRange(e.value.length,e.value.length)}),0):setTimeout((()=>{this.input.setSelectionRange(this.filter.length,e.value.length)}),0)))}setVisualFocusTextbox(){this.listFocus=!1,this.inputFocus=!0,this.setActiveDescendant(!1)}setVisualFocusListbox(){this.inputFocus=!1,this.listFocus=!0,this.setActiveDescendant(this.option)}removeVisualFocusAll(){this.inputFocus=!1,this.listFocus=!0,this.option=!1,this.setActiveDescendant(!1)}_onButtonClick(e){this.expanded?this.close(!0):this.open(),this.input.focus(),this.setVisualFocusTextbox()}_onInputClick(e){this.expanded?this.close(!0):this.open()}_onInputBlur(e){this.hoveredOption||(this.listFocus=!1,this.setCurrentOptionStyle(null),this.removeVisualFocusAll(),setTimeout(this.close(!1),300))}_onInputFocus(e){this.setVisualFocusTextbox(),this.option=!1,this.setCurrentOptionStyle(null)}_onInputKeydown(e){var t=!1,i=e.altKey;switch(e.keyCode){case this.keyCode.RETURN:(this.listFocus||this.isBoth)&&this.option&&this.setValue(this.option.value),this.close(!0),t=!0;break;case this.keyCode.DOWN:this.hasOptions&&(this.listFocus||this.isBoth&&this.option?this.setOption(this.nextItem,!0):(this.open(),i||this.setOption(this.firstItem,!0)),this.setVisualFocusListbox()),t=!0;break;case this.keyCode.UP:this.hasOptions&&(this.listFocus||this.isBoth&&this.option?this.setOption(this.previousItem,!0):(this.open(),i||this.setOption(this.lastItem,!0)),this.setVisualFocusListbox()),t=!0;break;case this.keyCode.ESC:this.close(!0),this.setVisualFocusTextbox(),this.setValue(""),this.option=!1,t=!0;break;case this.keyCode.TAB:this.close(!0),this.listFocus&&this.option&&this.setValue(this.option.value)}t&&(e.stopPropagation(),e.preventDefault())}_onInputKeyup(e){this.dispatchEvent(new CustomEvent("combo-input-keyup",{bubbles:!0,cancelable:!0,composed:!0,detail:e}));var t=!1,i=!1,o=e.key||"";function a(e){return 1===e.length&&e.match(/\S/)}if(a(o)&&(this.filter+=o),this.input&&(this.input.value||"").length<this.filter.length&&(this.filter=this.input.value||"",this.option=!1),e.keyCode!==this.keyCode.ESC){switch(e.keyCode){case this.keyCode.BACKSPACE:this.setValue(this.input.value),this.setVisualFocusTextbox(),this.setCurrentOptionStyle(!1),this.option=!1,t=!0;break;case this.keyCode.LEFT:case this.keyCode.RIGHT:case this.keyCode.HOME:case this.keyCode.END:this.isBoth?this.filter=this.input.value:(this.option=!1,this.setCurrentOptionStyle(!1)),this.setVisualFocusTextbox(),t=!0;break;default:a(o)&&(this.setVisualFocusTextbox(),this.setCurrentOptionStyle(!1),t=!0)}e.keyCode!==this.keyCode.RETURN&&(this.isList||this.isBoth?(i=this.filterOptions(this.filter,this.option))?(!this.expanded&&(this.input.value||"").length&&this.open(),0===i.textComparison.indexOf((this.input.value||"").toLowerCase())?(this.option=i,(this.isBoth||this.listFocus)&&(this.setCurrentOptionStyle(i),this.isBoth&&a(o)&&this.setOption(i))):(this.option=!1,this.setCurrentOptionStyle(!1))):(this.close(),this.option=!1,this.setActiveDescendant(!1)):this.input&&(this.input.value||"").length&&this.open()),t&&(e.stopPropagation(),e.preventDefault())}}get sortedOptions(){let e=(this.itemsList||[]).map(((e,t)=>"object"==typeof e?e:{id:t,value:e}));return Object.keys(this.options||{}).sort(((e,t)=>e>t?1:-1)).forEach((t=>e.push({id:e.length,value:this.options[t]}))),e}filterOptions(e,t){var i,o,a,n;for("string"!=typeof e&&(e=""),e=e.toLowerCase(),this.filteredOptions=[],this.firstChars=[],i=0;i<this.sortedOptions.length;i++)(o=this.sortedOptions[i]).id=i,o.textComparison=o.value.toLowerCase(),0!==e.length&&0!==o.textComparison.indexOf(e)||(this.filteredOptions.push(o),a=o.value.trim(),this.firstChars.push(a.substring(0,1).toLowerCase()));if((n=this.filteredOptions.length)>0){this.firstOption=this.filteredOptions[0],this.lastOption=this.filteredOptions[n-1];let e=this.filteredOptions.map((e=>e.textComparison));o=t&&t.textComparison&&e.includes(t.textComparison)?t:this.firstOption}else this.firstOption=!1,o=!1,this.lastOption=!1;return o}setCurrentOptionStyle(e){this._selectedOption=e,this.listbox&&e&&this.shadowRoot&&this.shadowRoot.querySelector(`#option${e.id}`)&&(this.listbox.scrollTop=this.shadowRoot.querySelector(`#option${e.id}`).offsetTop)}_isSelected(e){return e&&this._selectedOption&&e.textComparison===this._selectedOption.textComparison?"true":"false"}_onListboxMouseover(e){this.listHover=!0}_onListboxMouseout(e){this.listHover=!1,this.hoveredOption=void 0,setTimeout(this.close(!1),300)}open(){this.exapanded||(this.expanded=!0)}close(e){"boolean"!=typeof e&&(e=!1),!e&&(this.inputFocus||this.hasHover||this.hasHover)||(this.setCurrentOptionStyle(!1),this.expanded=!1,this.setActiveDescendant(!1))}_onOptionClick(e,t){t&&(this.setOption(t),this.setValue(t.value)),this.close(!0)}_onOptionMouseover(e,t){this.hoveredOption=t,this.listHover=!0,this.open()}_onOptionMouseout(e,t){this.listHover=!1,this.hoveredOption=void 0,setTimeout(this.close(!1),300)}get previousItem(){var e,t=this.option?this.option.textComparison:void 0,i=this.firstOption?this.firstOption.textComparison:void 0,o=this.filteredOptions.map((e=>e.textComparison));return t!==i?(e=o.indexOf(t),this.filteredOptions[e-1]):this.lastOption}get nextItem(){var e,t=this.option?this.option.textComparison:void 0,i=this.lastOption?this.lastOption.textComparison:void 0,o=this.filteredOptions.map((e=>e.textComparison));return t!==i?(e=o.indexOf(t),this.filteredOptions[e+1]):this.firstOption}get listbox(){return this._listbox||(this._listbox=this.shadowRoot&&this.shadowRoot.querySelector(`#${this.id}-list`)?this.shadowRoot.querySelector(`#${this.id}-list`):void 0),this._listbox}get input(){return this._input||(this._input=this.field?this.field:this.shadowRoot&&this.shadowRoot.querySelector(`#${this.id}`)?this.shadowRoot.querySelector(`#${this.id}`):void 0),this._input}get keyCode(){return{BACKSPACE:8,TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}}}window.customElements.define(nn.tag,nn);
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class rn extends p{static get styles(){return[i`:host{display:flex;align-items:center;padding:var(--simple-fields-button-padding,2px);font-size:var(--simple-fields-detail-font-size,12px)}:host([hidden]){display:none}[part=preview]{width:var(--simple-fields-url-combo-preview-size,26px);height:var(--simple-fields-url-combo-preview-size,26px);--simple-icon-height:var(
            --simple-fields-url-combo-preview-size,
            26px
          );--simple-icon-width:var(
            --simple-fields-url-combo-preview-size,
            26px
          );margin-right:var(--simple-fields-button-padding,2px)}span[part=preview]{background-position:center;background-size:cover;background-repeat:no-repeat;border-radius:var(--simple-fields-border-radius,2px)}span[part=label]{max-width:100%;flex:1 1 auto}span[part=label] span{display:block;line-height:100%;margin:0;overflow-wrap:break-word;word-wrap:break-word}span[part=label-secondary]{font-size:var(--simple-fields-meta-font-size,10px);opacity:var(--simple-fields-meta-opacity,unset);color:var(--simple-fields-meta-color)}`]}render(){return o`${this.previewTemplate}${this.labelTemplate}`}get iconTypes(){return{anchor:"hax:anchor",page:"lrn:content",pdf:"hax:file-pdf",doc:"hax:file-doc",docx:"hax:file-docx",ppt:"hax:file-ppt",pptx:"hax:file-ppt",csv:"hax:file-csv",xls:"hax:file-xls",xlsx:"hax:file-xls",url:"icons:language",file:"hax:file-blank",mp4:"av:movie",mov:"av:movie",webm:"av:movie",mp3:"av:volume-up",wav:"av:volume-up",html:"icons:language",tel:"communication:phone",email:"icons:mail"}}get currentLocation(){return window.location}get resourceURL(){return new URL(this.value||"./",this.currentLocation)}get isLocal(){return!!this.resourceURL.hostname&&this.resourceURL.hostname==this.currentLocation.hostname}get isSamePage(){return this.isLocal&&`${this.resourceURL.pathname}${this.resourceURL.search}`==`${this.currentLocation.pathname}${this.currentLocation.search}`}get isAnchor(){return this.isSamePage&&!!this.resourceURL.hash}get fileExtension(){let e=(this.resourceURL&&this.resourceURL.pathname?this.resourceURL.pathname:"").match(/\.\w+$/);return((e&&e[0]?e[0].replace(/^\./,""):this.type?this.type:"")||"").toLowerCase()}get imageTypes(){return["gif","svg","png","jpg","jpeg"]}get pageTypes(){return["html","htm","php",""]}get isPage(){return this.pageTypes.includes(this.fileExtension)}get isEmail(){return!!this.resourceURL&&"mailto:"===this.resourceURL.protocol}get isPhone(){return!!this.resourceURL&&"tel:"===this.resourceURL.protocol}get isImage(){return this.imageTypes.includes(this.fileExtension)}get previewSrc(){return this.preview&&""!==this.preview.trim()?this.preview:void 0}get iconName(){return this.icon&&""!==this.icon.trim()?this.icon:this.isAnchor?this.iconTypes.anchor:this.isLocal&&this.isPage?this.iconTypes.page:this.isPage?this.iconTypes.html:this.isEmail?this.iconTypes.email:this.isPhone?this.iconTypes.tel:this.fileExtension&&""!==this.fileExtension?this.iconTypes[this.fileExtension]:this.iconTypes.file}get iconTemplate(){return o`<simple-icon-lite part="preview" icon="${this.iconName}"></simple-icon-lite>`}get imageTemplate(){return o`<span part="preview" style="background-image:url(${this.previewSrc})"></span>`}get previewTemplate(){return this.preview&&""!==this.preview?this.imageTemplate:this.icon&&""!==this.icon?this.iconTemplate:this.previewSrc&&""!==this.previewSrc?this.imageTemplate:this.iconName&&""!==this.iconName?this.iconTemplate:""}get labelTemplate(){return o`<span part="label"> ${this.primaryLabelTemplate} ${this.name&&""!==this.name.trim()?this.secondaryLabelTemplate:""} </span>`}get primaryLabelTemplate(){return this.name&&""!==this.name.trim()?o`<span part="label-primary">${this.name}</span>`:this.value&&""!==this.value.trim()?o`<span part="label-primary">${this.value}</span>`:""}get secondaryLabelTemplate(){return this.value&&""!==this.value.trim()?o`<span part="label-secondary">${this.value}</span>`:""}static get properties(){return{...super.properties,name:{name:"name",type:String,reflectToAttribute:!0},icon:{name:"icon",type:String,reflectToAttribute:!0},preview:{name:"preview",type:String,reflectToAttribute:!0},type:{name:"type",type:String,reflectToAttribute:!0},value:{name:"value",type:String,reflectToAttribute:!0}}}static get tag(){return"simple-fields-url-combo-item"}constructor(){super()}firstUpdated(e){}updated(e){e.forEach(((e,t)=>{}))}}customElements.define(rn.tag,rn);class sn extends nn{static get tag(){return"simple-fields-url-combo"}static get styles(){return[...super.styles,i`:host([display-as=grid]){--simple-fields-url-combo-preview-size:var(
            --simple-fields-url-combo-grid-preview-size,
            100px
          )}ul[role=listbox] li[role=option]:not(:last-child){border-bottom:1px solid var(--simple-fields-border-color-light,#ccc)}:host([display-as=columns]) ul[role=listbox] li[role=option],:host([display-as=grid]) ul[role=listbox] li[role=option]{border-radius:var(--simple-fields-border-radius,2px);border:1px solid var(--simple-fields-border-color-light,#ccc)}:host([always-expanded]) #field-main-inner{flex-wrap:wrap;--simple-fields-combo-max-height:var(
            --simple-fields-url-combox-expanded-max-height,
            unset
          )}.input-bottom,:host([always-expanded]) .border-bottom:not(.input-bottom),:host([always-expanded]) [part=option-icon],:host([has-suggestions=false]) [part=option-icon]{display:none}:host([always-expanded]) .input-bottom{display:block}:host([always-expanded]) ul[role=listbox]{border:none;position:static;opacity:1;flex:1 0 100%;margin:var(--simple-fields-margin-small,8px) 0}:host([display-as=columns]) ul[role=listbox]{grid-gap:var(--simple-fields-button-padding,2px)}:host([display-as=grid]) ul[role=listbox]{grid-gap:var(--simple-fields-margin-small,8px)}:host([display-as=columns]) ul[role=listbox],:host([display-as=grid]) ul[role=listbox]{display:grid;grid-template-columns:repeat(auto-fill,minmax(calc(var(--simple-fields-url-combo-preview-size) + 2 * var(--simple-fields-button-padding,2px)),1fr))}:host([display-as=grid]) ::slotted(simple-fields-url-combo-item),:host([display-as=grid]) simple-fields-url-combo-item{flex-direction:column;align-items:center;text-align:center;justify-content:space-between;padding:var(--simple-fields-margin-small,8px)}:host([display-as=grid]) ::slotted(simple-fields-url-combo-item::part(preview)),:host([display-as=grid]) simple-fields-url-combo-item::part(preview){display:block;margin-right:0}`]}static get properties(){return{...super.properties,displayAs:{type:String,attribute:"display-as",reflect:!0},alwaysExpanded:{type:Boolean,attribute:"always-expanded",reflect:!0}}}constructor(){super(),this.grid=!1}get isListboxHidden(){return!(this.alwaysExpanded||this.expanded)||this.hidden||this.filteredOptions.length<1}get listboxTemplate(){return o` <div class="border-bottom input-bottom blur"></div> <div class="border-bottom input-bottom focus"></div> ${super.listboxTemplate} `}getListItemInner(e){return o`<simple-fields-url-combo-item icon="${e.icon}" name="${e.name}" preview="${e.preview}" type="${e.type}" value="${e.value}"> </simple-fields-url-combo-item>`}getOptionData(e,t){return{value:"object"==typeof e?e.value:e,name:"object"==typeof e?e.name:void 0,icon:"object"==typeof e?e.icon:void 0,preview:"object"==typeof e?e.preview:void 0,type:"object"==typeof e?e.type:void 0,id:t}}get sortedOptions(){let e=(this.itemsList||[]).map(((e,t)=>"object"==typeof e?e:this.getOptionData(e,t)));return Object.keys(this.options||{}).sort(((e,t)=>e>t?1:-1)).forEach((t=>e.push(this.getOptionData(this.options[t],e.length)))),e}possibleEmail(e){return e.match(/^\S+@\S+.\S+$/)}possiblePhone(e){return e.match(/^(\+\d{1,3}\s?)?((\(\d{3}\)\s?)|(\d{3})(\s|-?))(\d{3}(\s|-?))(\d{4})(\s?(([E|e][X|x][T|t][\:|\.|]?)|x|X)(\s?\d+))?$/)}filterOptions(e,t){super.filterOptions(e,t),this.possibleEmail(e)?(this.filteredOptions=[{value:`mailto:${e}`,id:"mailto"},...this.filteredOptions],this.open()):this.possiblePhone(e)&&(this.filteredOptions=[{value:`tel:${e.replace(/[\(\)\-\s\:\.]/g,"").replace(/[a-zA-Z]+/,"p")}`,id:"tel"},...this.filteredOptions],this.open())}}window.customElements.define(sn.tag,sn);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let ln,dn=null,cn=window.HTMLImports&&window.HTMLImports.whenReady||null;function hn(e){requestAnimationFrame((function(){cn?cn(e):(dn||(dn=new Promise((e=>{ln=e})),"complete"===document.readyState?ln():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&ln()}))),dn.then((function(){e&&e()})))}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const un="__shadyCSSCachedStyle";let pn=null,mn=null;class gn{constructor(){this.customStyles=[],this.enqueued=!1,hn((()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()}))}enqueueDocumentValidation(){!this.enqueued&&mn&&(this.enqueued=!0,hn(mn))}addCustomStyle(e){e.__seenByShadyCSS||(e.__seenByShadyCSS=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}getStyleForCustomStyle(e){if(e[un])return e[un];let t;return t=e.getStyle?e.getStyle():e,t}processStyles(){const e=this.customStyles;for(let t=0;t<e.length;t++){const i=e[t];if(i[un])continue;const o=this.getStyleForCustomStyle(i);if(o){const e=o.__appliedElement||o;pn&&pn(e),i[un]=e}}return e}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function bn(e,t){for(let i in t)null===i?e.style.removeProperty(i):e.style.setProperty(i,t[i])}gn.prototype.addCustomStyle=gn.prototype.addCustomStyle,gn.prototype.getStyleForCustomStyle=gn.prototype.getStyleForCustomStyle,gn.prototype.processStyles=gn.prototype.processStyles,Object.defineProperties(gn.prototype,{transformCallback:{get:()=>pn,set(e){pn=e}},validateCallback:{get:()=>mn,set(e){let t=!1;mn||(t=!0),mn=e,t&&this.enqueueDocumentValidation()}}});
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const fn=!(window.ShadyDOM&&window.ShadyDOM.inUse);let vn,yn;function _n(e){vn=(!e||!e.shimcssproperties)&&(fn||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)")))}window.ShadyCSS&&void 0!==window.ShadyCSS.cssBuild&&(yn=window.ShadyCSS.cssBuild);const xn=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&void 0!==window.ShadyCSS.nativeCss?vn=window.ShadyCSS.nativeCss:window.ShadyCSS?(_n(window.ShadyCSS),window.ShadyCSS=void 0):_n(window.WebComponents&&window.WebComponents.flags);const wn=vn,An=new gn;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/window.ShadyCSS||(window.ShadyCSS={prepareTemplate(e,t,i){},prepareTemplateDom(e,t){},prepareTemplateStyles(e,t,i){},styleSubtree(e,t){An.processStyles(),bn(e,t)},styleElement(e){An.processStyles()},styleDocument(e){An.processStyles(),bn(document.body,e)},getComputedStyleValue:(e,t)=>function(e,t){const i=window.getComputedStyle(e).getPropertyValue(t);return i?i.trim():""}(e,t),flushCustomStyles(){},nativeCss:wn,nativeShadow:fn,cssBuild:yn,disableRuntime:xn}),window.ShadyCSS.CustomStyleInterface=An,
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
window.JSCompiler_renameProperty=function(e,t){return e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let En,Sn,Cn=/(url\()([^)]*)(\))/g,Nn=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;function Tn(e,t){if(e&&Nn.test(e))return e;if("//"===e)return e;if(void 0===En){En=!1;try{const e=new URL("b","http://a");e.pathname="c%20d",En="http://a/c%20d"===e.href}catch(e){}}if(t||(t=document.baseURI||window.location.href),En)try{return new URL(e,t).href}catch(t){return e}return Sn||(Sn=document.implementation.createHTMLDocument("temp"),Sn.base=Sn.createElement("base"),Sn.head.appendChild(Sn.base),Sn.anchor=Sn.createElement("a"),Sn.body.appendChild(Sn.anchor)),Sn.base.href=t,Sn.anchor.href=e,Sn.anchor.href||e}function kn(e,t){return e.replace(Cn,(function(e,i,o,a){return i+"'"+Tn(o.replace(/["']/g,""),t)+"'"+a}))}function On(e){return e.substring(0,e.lastIndexOf("/")+1)}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Pn=!window.ShadyDOM||!window.ShadyDOM.inUse;Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss);const Ln=Pn&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{const e=new CSSStyleSheet;e.replaceSync("");const t=document.createElement("div");return t.attachShadow({mode:"open"}),t.shadowRoot.adoptedStyleSheets=[e],t.shadowRoot.adoptedStyleSheets[0]===e}catch(e){return!1}})();let Bn=window.Polymer&&window.Polymer.rootPath||On(document.baseURI||window.location.href),Mn=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0,Hn=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1,Dn=window.Polymer&&window.Polymer.strictTemplatePolicy||!1,Rn=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1,zn=window.Polymer&&window.Polymer.legacyOptimizations||!1,In=window.Polymer&&window.Polymer.legacyWarnings||!1,$n=window.Polymer&&window.Polymer.syncInitialRender||!1,jn=window.Polymer&&window.Polymer.legacyUndefined||!1,Fn=window.Polymer&&window.Polymer.orderedComputed||!1,Vn=window.Polymer&&window.Polymer.removeNestedTemplates||!1,Un=window.Polymer&&window.Polymer.fastDomIf||!1,qn=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1;window.Polymer&&window.Polymer.legacyNoObservedAttributes;let Gn=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1,Xn={},Wn={};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function Yn(e,t){Xn[e]=Wn[e.toLowerCase()]=t}function Jn(e){return Xn[e]||Wn[e.toLowerCase()]}class Kn extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,t){if(e){let i=Jn(e);return i&&t?i.querySelector(t):i}return null}attributeChangedCallback(e,t,i,o){t!==i&&this.register()}get assetpath(){if(!this.__assetpath){const e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,t=Tn(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=On(t)}return this.__assetpath}register(e){if(e=e||this.id){if(Dn&&void 0!==Jn(e))throw Yn(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,Yn(e,this),(t=this).querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}var t}}Kn.prototype.modules=Xn,customElements.define("dom-module",Kn);function Qn(e){return Kn.import(e)}function Zn(e){const t=kn((e.body?e.body:e).textContent,e.baseURI),i=document.createElement("style");return i.textContent=t,i}function er(e){const t=e.trim().split(/\s+/),i=[];for(let e=0;e<t.length;e++)i.push(...tr(t[e]));return i}function tr(e){const t=Qn(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(void 0===t._styles){const e=[];e.push(...or(t));const i=t.querySelector("template");i&&e.push(...ir(i,t.assetpath)),t._styles=e}return t._styles}function ir(e,t){if(!e._styles){const i=[],o=e.content.querySelectorAll("style");for(let e=0;e<o.length;e++){let a=o[e],n=a.getAttribute("include");n&&i.push(...er(n).filter((function(e,t,i){return i.indexOf(e)===t}))),t&&(a.textContent=kn(a.textContent,t)),i.push(a)}e._styles=i}return e._styles}function or(e){const t=[],i=e.querySelectorAll("link[rel=import][type~=css]");for(let e=0;e<i.length;e++){let o=i[e];if(o.import){const e=o.import,i=o.hasAttribute("shady-unscoped");if(i&&!e._unscopedStyle){const t=Zn(e);t.setAttribute("shady-unscoped",""),e._unscopedStyle=t}else e._style||(e._style=Zn(e));t.push(i?e._unscopedStyle:e._style)}}return t}function ar(e){let t=Qn(e);if(t&&void 0===t._cssText){let e=function(e){let t="",i=or(e);for(let e=0;e<i.length;e++)t+=i[e].textContent;return t}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/(t),i=t.querySelector("template");i&&(e+=function(e,t){let i="";const o=ir(e,t);for(let e=0;e<o.length;e++){let t=o[e];t.parentNode&&t.parentNode.removeChild(t),i+=t.textContent}return i}(i,t.assetpath)),t._cssText=e||null}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}const nr=window.ShadyCSS.CustomStyleInterface;class rr extends HTMLElement{constructor(){super(),this._style=null,nr.addCustomStyle(this)}getStyle(){if(this._style)return this._style;const e=this.querySelector("style");if(!e)return null;this._style=e;const t=e.getAttribute("include");return t&&(e.removeAttribute("include"),e.textContent=function(e){let t=e.trim().split(/\s+/),i="";for(let e=0;e<t.length;e++)i+=ar(t[e]);return i}(t)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}}window.customElements.define("custom-style",rr);class sr extends HTMLElement{static get version(){return"1.6.1"}}customElements.define("vaadin-lumo-styles",sr);const lr=document.createElement("template");lr.innerHTML='<custom-style>\n  <style>\n    @font-face {\n      font-family: \'lumo-icons\';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABEcAAsAAAAAIiwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAQwAAAFZAIUuKY21hcAAAAYgAAAD4AAADrsCU8d5nbHlmAAACgAAAC2MAABd4h9To2WhlYWQAAA3kAAAAMAAAADZa/6SsaGhlYQAADhQAAAAdAAAAJAbpA35obXR4AAAONAAAABAAAACspBAAAGxvY2EAAA5EAAAAWAAAAFh55IAsbWF4cAAADpwAAAAfAAAAIAFKAXBuYW1lAAAOvAAAATEAAAIuUUJZCHBvc3QAAA/wAAABKwAAAelm8SzVeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS+yDiBgZWBgamKaQ8DA0MPhGZ8wGDIyAQUZWBlZsAKAtJcUxgcXjG+0mIO+p/FEMUcxDANKMwIkgMABn8MLQB4nO3SWW6DMABF0UtwCEnIPM/zhLK8LqhfXRybSP14XUYtHV9hGYQwQBNIo3cUIPkhQeM7rib1ekqnXg981XuC1qvy84lzojleh3puxL0hPjGjRU473teloEefAUNGjJkwZcacBUtWrNmwZceeA0dOnLlw5cadB09elPGhGf+j0NTI/65KfXerT6JhqKnpRKtgOpuqaTrtKjPUlqHmhto21I7pL6i6hlqY3q7qGWrfUAeGOjTUkaGODXViqFNDnRnq3FAXhro01JWhrg11Y6hbQ90Z6t5QD4Z6NNSToZ4N9WKoV0O9GerdUB+G+jTUl6GWRvkL24BkEXictVh9bFvVFb/nxvbz+7Rf/N6zHcd2bCfP+Wgc1Z9N0jpNnEL6kbRVS6HA2hQYGh9TGR1CbCqa2rXrWOkQE/sHNJgmtZvoVNZqE1B1DNHxzTQxCehUTYiJTQyENui0qSLezr3PduyQfgmRWOfde8+9551z7rnn/O4jLoJ/bRP0UaKQMLFJjpBAvphLZC3Dk0ok7WBzR2/upJs7Ryw/nfFbln/uuN/apCvwrKLrSvUqRufbm5pn0fs0w4gYxnGVP6qHnO4bWiDQGQgwtS6lm3lB3QoX1M2vwEmuzirF39y+Es2+DJ8d1pkyqBIqoze3D1+Zz4DrFoazxI8dWwMrDlZ2DMqQAR9AROsJU+2cmlTPazTco52F1xTa2a2+K8vvq92dVHmtLoPeQX/AZPRYGthDYOeZjBjKoFsVGulR3lWU95WeCK44qHU7MhWUGUKZDT3oKUcG2GWuh+EDDfUYA/jhAhl0TOsJNYSEu7mQmi3UzfXwZKA4BsVsHLXQYGgRW95uEtpJ1Vfn9XiLriRBlFEqxsDjA09yCNUoQxxwd7KWSTt2y3GTKiflqHRSoWZc3m11Wa/fJdFgXD4sSYfleJBKd8GMz7J8dZn/cGRCcKGDnA2Ge3fKzcvlnTDNthGWLXzX/WaXtUAmRgeLlHSr30r0G9UTXMb0AtmwzOoy73fkSlHZkduw/TYuU9cAD4YutPoxTTsA3797wVr4Z/1NC5zARHr4vtxJjxIfiZMhMkbWk+14BnJZKwqGZwDfswLyxWDSg11rFLJF7Nopxjd1h1/QOT+oezgfu3Yq+Hk+duf5x+40o1GTkaIgikK/IEnC6aYxCUBaZJSN4XTYFjU/YMNIKqJwhDGOCCI8FDXnXmXjtGhGJyShqjAOnBOkW2JG9S7GgYeMWAU5JzhnWmBOaOM+CKEPoqSfFDC2Unq+DLlUgUVUFFLZGJg6jtlojsdsa8kPObPuJdi5dnBdBsLJMGTWDa4t2JvtwuPo9s+Y86suv/W33QG1rAaOAUV+vx4K6f2D04PVKlC7WLSrZzAi45ZV6lIC7WoXqmRyvUqoVwrzUoVsIjeTXWQv+RH5GTlBXiB/In8ln0IbBCAFOajAJrgZYyOHWqOfUe/aHjI12R6OQo1jCgt215l+4f6XPb+0MNou0V+43n2F77tSfRb24d7zitgnKmvYHs69zugaPvBwv6ioXkb2LdL65Atw51uLkXlu1bhMMRcXSPcYoqKIRlh34lQP8/5JbuUFye4vxD6/6MxFF11C0uVLr9Ulgw44tS3pMViNLUExbycFgLIct+QDMibRimx1ydUz8FXZiuOIDBOMVX2nUZc+huNE5XUJ81uiJoiabwqaVF0uacKbau/pl4R2VW0XXlJra6boVrYG646TF5NYzwy4vjENVrDlcNpZPl8DH6XX8XWCx0mvWVZY6KFLrvsY66/zPict5FnxaNUR/juvZCM3TvD60E2W1tZizbXTPDuabcm0nbbzpWKpmA1ayBQ8giedLUM+A0kNjBjQjmuYz7YrgIXYvmF63ZLBwSXrpn9Tb9wwdd/U1H0PMQK3XcO8ul3WT7PyPPdpy0TemKxNRcJNauiXJnnUDpUppQWs4SnUIy0EESGYqJYQLGHxzaGWwVIaS6Y7mQFM8ZjYDQ3axjf61SWjU33JwOZA1pwaG1L9mzf71aHRdX1JHw6Fp0aXhNwbqyeGNg4NbdzGCBxoz4ZXjy4Nu69Zr6sDY6vMrLU5nA1P8JkbdWXJ6ERfMryvNh1JfQ9+T4dIhGvK9w3dxjBBzatsQ/MlOHVIDnYpDz6odAXlQ01t2Pa5Iafd8MMpxAeDKP0C6CjgVLT5osB6icUx01lWjXxzT/GyRF2welEM5Z/7jG3VjQ1SrNn5IbyzOG5dobB3/QHxyZvsXcoz8IoEwS7plCg+zxHQk424q9BfEpkESJbFHQusDBSWFkuBkoPO0kLKwRVYjxGXlHTcTDQMJ/H6TX9afkO7mnraTO1feTnZAXLu4cp7HAXMmNG1yeFk9TgS/NHhZR/4QoBTr/ZB+6hCgyl15Nq1UbN6nE1/ZnP1U2cizCBpvs8cJQZJ4LkYx5N/yZPAUZNQQ0V4f3BQllWrK3YRzl30dOT6RVn2upNur6woSa8CqpdT/aKnBM4o3jNur9d9xqtUT6veBEt9Ca9at+ERzEEhUkR8sa5mQ4aVvJoVeEA8zI4ei5mULXFGyU7z/6TAeYLVcpzSWZY8PYYF5yrTV60sT0+XV141vX++Wf16V2bFeGVPZXxFpkvyeKTWLlzfW0mnKxsY6Y3294/0998SCfX1blm5pbcvFGlq/r07MRAMhYIDiW5JFKWW3vdrEpCsZSJG+om7Zu/PSScZJhNkLbmW5Wsr12pWqW5zKtlwRS4bFOxUw17mCzy6lskCDl1WYOGWDYrADrMA7BDDweWWNd5koiJnR1dz+ytLP2q0SqPB1lnK2ccB7RYe4FSoPks3iB3t4txTSHctb2sy1ivk0pvHuCNm6w1f6wxv3+OCgN78LqdQnUVh7R0oTAp0zOf2rbW770Vu5C2dIyGdTnHo8zSji7dppj0USoVCz+lhRMTh53Teq9VbGfbjuSbAooSdXayY4PYHg374C6f7gl1B/DXuJ4/QXxOBdJFJspFsI3egpoWUUCjlTIFnNYNl+ZyZKmBeYKGHkD1QyDlhaKbKwKcIJqJ4TLJ2OmdY/JWXae4DdGBw8HZ7eXcgFF2zr2SoalDry5iKqoa0Puhe3hPQ2s3elTYM+MI+n3rK0KgL7/La3GeMLt6m7u912vGnvtORiIa0qBmhqVi+XW9XNBmqb8eVgKzIHfGI5bNoG7X0UCzeISmqIcO/nY8FH7U8avX9fx/ST+hx0sezPw9Qy8Mum3GWf2N4Uy/yIYGVBXbJHWIZp7dfTcptdMTr9Qmq7DaiK/ukqCL4kt4RUfS5XPnMtmT22/mQFqF7emSqtrlu8SVElxDRJrZODkpuwe0VfTfjdEp1f7A7v+fozNBXUJ/6WTuK2TtFlpFVZAZ3LcFvUi1Z2p2YT+EMAkGJVStOzLTAPg4IqWIAlzRSjOBkl2zxj3TKycpzT/MnvX3uaSMWM+gU0rkXjohhefVRMaps3/kLMSKv23lT23uxQrkQjyOJleMDsdhAnD6ZGElWZ5MjCXzCE/hkWX+WF4knzGhVOyK2eQZekV3eyo0zL8kuYWCnDCvjjhAkcTPOBDXVdoav3HVcFnQjLvtV9S2p0zA6JegPwMQxt+yFb3ll9zGlq/5dRKb3cEyQYoaNYpharJ7xCB7AWxsLY3jjZXY0XsZj0Wjwc9I6PP/dKABnCZaqHpaZEACxk4ZeLZSKNgZABl+lYQX1sJQOSX3n6r410evcoud5JeAGUXVP9H1tZOKejTq4Ono0z0erro1FrnOpohva1d/hTdtVsQdKN5W9RlT3NjD0nznyKNTgKAMfWNWcyodV0IGLPIHOF0o4JyqufaK4z6WIIzuGh3d8c8cwQg8ER+OVxyrjdm8vNuhts4LoOihGxIMuUdgzwiYN7xhh1+oZnJNuTG7gQZvu4XWZ9GAZZjGEubwePqYhtKDTH+9VQkl17/iGybsnJ+8+sKtyPrcll9ty65Zsdst/9iqpEKh7M5VdBxh3csOdNc6tW3I1uyM1PzOXegSOrLFsFNI2O27M+TF2ApnN9MUv5ud6LjxIvEQnHRzxIu4IsA9MLFkJn2tcZoZ7ON7dXe7ujrc8HrusPKamlqXwd77lQUuLpilau4PUMapueBb7irU4RoUXEYXuVuIGlRGmOp+2lNkaRPVziOqmlaZvaqG4dFgSj0jxEJWrv12IUWntmw+rfQarRE0Aph4ocI6nlUlGqs+u3/+T/ethW62PpHp2eHbZstnh/wOO95yDAHicY2BkYGAA4pmJ6QHx/DZfGbiZXwBFGGpUNzQi6P+vmacy3QJyORiYQKIANoULVXicY2BkYGAO+p8FJF8wAAHzVAZGBlSgDQBW9gNvAAAAeJxjYGBgYH4xNDAAzwQmjwAAAAAATgCaAOgBCgEsAU4BcAGaAcQB7gIaApwC6ASaBLwE1gTyBQ4FKgV6BdAF/gZEBmYGtgcYB5AIGAhSCGoI/glGCb4J2goECjwKggq4CvALUAuWC7x4nGNgZGBg0GZMYRBlAAEmIOYCQgaG/2A+AwAYlAG8AHicbZE9TsMwGIbf9A/RSggEYmHxAgtq+jN2ZGj3Dt3T1GlTOXHkuBW9AyfgEByCgTNwCA7BW/NJlVBtyd/jx+8XKwmAa3whwnFE6Ib1OBq44O6Pm6Qb4Rb5QbiNHh6FO/RD4S6eMRHu4RaaT4halzR3eBVu4Apvwk36d+EW+UO4jXt8Cnfov4W7WOBHuIen6MXsCtvPU1vWc73emcSdxIkW2tW5LdUoHp7kTJfaJV6v1PKg6v167H2mMmcLNbWl18ZYVTm71amPN95Xk8EgEx+ntoDBDgUs+siRspaoMef7rukNEriziXNuwS7Hmoe9wggxv+e55IzJMqQTeNYV00scuNbY8+YxrUfGfcaMZb/CNPQe04bT0lThbEuT0sfYhK6K/23Amf3Lx+H24hcj4GScAAAAeJxtjtlugzAQRbkJUEJIuu/7vqR8lGNPAcWx0YAb5e/LklR96EgenSufGY038PqKvf9rhgGG8BEgxA4ijBBjjAQTTLGLPezjAIc4wjFOcIoznOMCl7jCNW5wizvc4wGPeMIzXvCKN7zjAzN8eonQRWZSSaYmjvug6ase98hFltexMJmmVNmV2WBvdNgZUc+ujAWzXW3UDnu1w43asStHc8GpzAXX/py0jqTQZJTgkcxJLpaCF0lD32xNt+43tAsn29Dft02uDKS2cjGUNgsk26qK2lFthYoU27INPqmiDqg5goe0pqR5qSoqMdek/CUZFywL46rEsiImleqiqoMyt4baXlu/1GLdNFf5zbcNmdr1YUWCZe47o+zUmb/DoStbw3cVsef9ALjjiPQA) format(\'woff\');\n      font-weight: normal;\n      font-style: normal;\n    }\n\n    html {\n      --lumo-icons-align-center: "\\ea01";\n      --lumo-icons-align-left: "\\ea02";\n      --lumo-icons-align-right: "\\ea03";\n      --lumo-icons-angle-down: "\\ea04";\n      --lumo-icons-angle-left: "\\ea05";\n      --lumo-icons-angle-right: "\\ea06";\n      --lumo-icons-angle-up: "\\ea07";\n      --lumo-icons-arrow-down: "\\ea08";\n      --lumo-icons-arrow-left: "\\ea09";\n      --lumo-icons-arrow-right: "\\ea0a";\n      --lumo-icons-arrow-up: "\\ea0b";\n      --lumo-icons-bar-chart: "\\ea0c";\n      --lumo-icons-bell: "\\ea0d";\n      --lumo-icons-calendar: "\\ea0e";\n      --lumo-icons-checkmark: "\\ea0f";\n      --lumo-icons-chevron-down: "\\ea10";\n      --lumo-icons-chevron-left: "\\ea11";\n      --lumo-icons-chevron-right: "\\ea12";\n      --lumo-icons-chevron-up: "\\ea13";\n      --lumo-icons-clock: "\\ea14";\n      --lumo-icons-cog: "\\ea15";\n      --lumo-icons-cross: "\\ea16";\n      --lumo-icons-download: "\\ea17";\n      --lumo-icons-dropdown: "\\ea18";\n      --lumo-icons-edit: "\\ea19";\n      --lumo-icons-error: "\\ea1a";\n      --lumo-icons-eye: "\\ea1b";\n      --lumo-icons-eye-disabled: "\\ea1c";\n      --lumo-icons-menu: "\\ea1d";\n      --lumo-icons-minus: "\\ea1e";\n      --lumo-icons-ordered-list: "\\ea1f";\n      --lumo-icons-phone: "\\ea20";\n      --lumo-icons-photo: "\\ea21";\n      --lumo-icons-play: "\\ea22";\n      --lumo-icons-plus: "\\ea23";\n      --lumo-icons-redo: "\\ea24";\n      --lumo-icons-reload: "\\ea25";\n      --lumo-icons-search: "\\ea26";\n      --lumo-icons-undo: "\\ea27";\n      --lumo-icons-unordered-list: "\\ea28";\n      --lumo-icons-upload: "\\ea29";\n      --lumo-icons-user: "\\ea2a";\n    }\n  </style>\n</custom-style>',document.head.appendChild(lr.content);const dr=document.createElement("template");dr.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Base (background) */\n      --lumo-base-color: #FFF;\n\n      /* Tint */\n      --lumo-tint-5pct: hsla(0, 0%, 100%, 0.3);\n      --lumo-tint-10pct: hsla(0, 0%, 100%, 0.37);\n      --lumo-tint-20pct: hsla(0, 0%, 100%, 0.44);\n      --lumo-tint-30pct: hsla(0, 0%, 100%, 0.5);\n      --lumo-tint-40pct: hsla(0, 0%, 100%, 0.57);\n      --lumo-tint-50pct: hsla(0, 0%, 100%, 0.64);\n      --lumo-tint-60pct: hsla(0, 0%, 100%, 0.7);\n      --lumo-tint-70pct: hsla(0, 0%, 100%, 0.77);\n      --lumo-tint-80pct: hsla(0, 0%, 100%, 0.84);\n      --lumo-tint-90pct: hsla(0, 0%, 100%, 0.9);\n      --lumo-tint: #FFF;\n\n      /* Shade */\n      --lumo-shade-5pct: hsla(214, 61%, 25%, 0.05);\n      --lumo-shade-10pct: hsla(214, 57%, 24%, 0.1);\n      --lumo-shade-20pct: hsla(214, 53%, 23%, 0.16);\n      --lumo-shade-30pct: hsla(214, 50%, 22%, 0.26);\n      --lumo-shade-40pct: hsla(214, 47%, 21%, 0.38);\n      --lumo-shade-50pct: hsla(214, 45%, 20%, 0.5);\n      --lumo-shade-60pct: hsla(214, 43%, 19%, 0.61);\n      --lumo-shade-70pct: hsla(214, 42%, 18%, 0.72);\n      --lumo-shade-80pct: hsla(214, 41%, 17%, 0.83);\n      --lumo-shade-90pct: hsla(214, 40%, 16%, 0.94);\n      --lumo-shade: hsl(214, 35%, 15%);\n\n      /* Contrast */\n      --lumo-contrast-5pct: var(--lumo-shade-5pct);\n      --lumo-contrast-10pct: var(--lumo-shade-10pct);\n      --lumo-contrast-20pct: var(--lumo-shade-20pct);\n      --lumo-contrast-30pct: var(--lumo-shade-30pct);\n      --lumo-contrast-40pct: var(--lumo-shade-40pct);\n      --lumo-contrast-50pct: var(--lumo-shade-50pct);\n      --lumo-contrast-60pct: var(--lumo-shade-60pct);\n      --lumo-contrast-70pct: var(--lumo-shade-70pct);\n      --lumo-contrast-80pct: var(--lumo-shade-80pct);\n      --lumo-contrast-90pct: var(--lumo-shade-90pct);\n      --lumo-contrast: var(--lumo-shade);\n\n      /* Text */\n      --lumo-header-text-color: var(--lumo-contrast);\n      --lumo-body-text-color: var(--lumo-contrast-90pct);\n      --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n      --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n      --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n      /* Primary */\n      --lumo-primary-color: hsl(214, 90%, 52%);\n      --lumo-primary-color-50pct: hsla(214, 90%, 52%, 0.5);\n      --lumo-primary-color-10pct: hsla(214, 90%, 52%, 0.1);\n      --lumo-primary-text-color: var(--lumo-primary-color);\n      --lumo-primary-contrast-color: #FFF;\n\n      /* Error */\n      --lumo-error-color: hsl(3, 100%, 61%);\n      --lumo-error-color-50pct: hsla(3, 100%, 60%, 0.5);\n      --lumo-error-color-10pct: hsla(3, 100%, 60%, 0.1);\n      --lumo-error-text-color: hsl(3, 92%, 53%);\n      --lumo-error-contrast-color: #FFF;\n\n      /* Success */\n      --lumo-success-color: hsl(145, 80%, 42%); /* hsl(144,82%,37%); */\n      --lumo-success-color-50pct: hsla(145, 76%, 44%, 0.55);\n      --lumo-success-color-10pct: hsla(145, 76%, 44%, 0.12);\n      --lumo-success-text-color: hsl(145, 100%, 32%);\n      --lumo-success-contrast-color: #FFF;\n    }\n  </style>\n</custom-style><dom-module id="lumo-color">\n  <template>\n    <style>\n      [theme~="dark"] {\n        /* Base (background) */\n        --lumo-base-color: hsl(214, 35%, 21%);\n\n        /* Tint */\n        --lumo-tint-5pct: hsla(214, 65%, 85%, 0.06);\n        --lumo-tint-10pct: hsla(214, 60%, 80%, 0.14);\n        --lumo-tint-20pct: hsla(214, 64%, 82%, 0.23);\n        --lumo-tint-30pct: hsla(214, 69%, 84%, 0.32);\n        --lumo-tint-40pct: hsla(214, 73%, 86%, 0.41);\n        --lumo-tint-50pct: hsla(214, 78%, 88%, 0.5);\n        --lumo-tint-60pct: hsla(214, 82%, 90%, 0.6);\n        --lumo-tint-70pct: hsla(214, 87%, 92%, 0.7);\n        --lumo-tint-80pct: hsla(214, 91%, 94%, 0.8);\n        --lumo-tint-90pct: hsla(214, 96%, 96%, 0.9);\n        --lumo-tint: hsl(214, 100%, 98%);\n\n        /* Shade */\n        --lumo-shade-5pct: hsla(214, 0%, 0%, 0.07);\n        --lumo-shade-10pct: hsla(214, 4%, 2%, 0.15);\n        --lumo-shade-20pct: hsla(214, 8%, 4%, 0.23);\n        --lumo-shade-30pct: hsla(214, 12%, 6%, 0.32);\n        --lumo-shade-40pct: hsla(214, 16%, 8%, 0.41);\n        --lumo-shade-50pct: hsla(214, 20%, 10%, 0.5);\n        --lumo-shade-60pct: hsla(214, 24%, 12%, 0.6);\n        --lumo-shade-70pct: hsla(214, 28%, 13%, 0.7);\n        --lumo-shade-80pct: hsla(214, 32%, 13%, 0.8);\n        --lumo-shade-90pct: hsla(214, 33%, 13%, 0.9);\n        --lumo-shade: hsl(214, 33%, 13%);\n\n        /* Contrast */\n        --lumo-contrast-5pct: var(--lumo-tint-5pct);\n        --lumo-contrast-10pct: var(--lumo-tint-10pct);\n        --lumo-contrast-20pct: var(--lumo-tint-20pct);\n        --lumo-contrast-30pct: var(--lumo-tint-30pct);\n        --lumo-contrast-40pct: var(--lumo-tint-40pct);\n        --lumo-contrast-50pct: var(--lumo-tint-50pct);\n        --lumo-contrast-60pct: var(--lumo-tint-60pct);\n        --lumo-contrast-70pct: var(--lumo-tint-70pct);\n        --lumo-contrast-80pct: var(--lumo-tint-80pct);\n        --lumo-contrast-90pct: var(--lumo-tint-90pct);\n        --lumo-contrast: var(--lumo-tint);\n\n        /* Text */\n        --lumo-header-text-color: var(--lumo-contrast);\n        --lumo-body-text-color: var(--lumo-contrast-90pct);\n        --lumo-secondary-text-color: var(--lumo-contrast-70pct);\n        --lumo-tertiary-text-color: var(--lumo-contrast-50pct);\n        --lumo-disabled-text-color: var(--lumo-contrast-30pct);\n\n        /* Primary */\n        --lumo-primary-color: hsl(214, 86%, 55%);\n        --lumo-primary-color-50pct: hsla(214, 86%, 55%, 0.5);\n        --lumo-primary-color-10pct: hsla(214, 90%, 63%, 0.1);\n        --lumo-primary-text-color: hsl(214, 100%, 70%);\n        --lumo-primary-contrast-color: #FFF;\n\n        /* Error */\n        --lumo-error-color: hsl(3, 90%, 63%);\n        --lumo-error-color-50pct: hsla(3, 90%, 63%, 0.5);\n        --lumo-error-color-10pct: hsla(3, 90%, 63%, 0.1);\n        --lumo-error-text-color: hsl(3, 100%, 67%);\n\n        /* Success */\n        --lumo-success-color: hsl(145, 65%, 42%);\n        --lumo-success-color-50pct: hsla(145, 65%, 42%, 0.5);\n        --lumo-success-color-10pct: hsla(145, 65%, 42%, 0.1);\n        --lumo-success-text-color: hsl(145, 85%, 47%);\n      }\n\n      html {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      [theme~="dark"] {\n        color: var(--lumo-body-text-color);\n        background-color: var(--lumo-base-color);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        color: var(--lumo-header-text-color);\n      }\n\n      a {\n        color: var(--lumo-primary-text-color);\n      }\n\n      blockquote {\n        color: var(--lumo-secondary-text-color);\n      }\n\n      code,\n      pre {\n        background-color: var(--lumo-contrast-10pct);\n        border-radius: var(--lumo-border-radius-m);\n      }\n    </style>\n  </template>\n</dom-module><dom-module id="lumo-color-legacy">\n  <template>\n    <style include="lumo-color">\n      :host {\n        color: var(--lumo-body-text-color) !important;\n        background-color: var(--lumo-base-color) !important;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(dr.content);const cr=document.createElement("template");cr.innerHTML="<custom-style>\n  <style>\n    html {\n      --lumo-size-xs: 1.625rem;\n      --lumo-size-s: 1.875rem;\n      --lumo-size-m: 2.25rem;\n      --lumo-size-l: 2.75rem;\n      --lumo-size-xl: 3.5rem;\n\n      /* Icons */\n      --lumo-icon-size-s: 1.25em;\n      --lumo-icon-size-m: 1.5em;\n      --lumo-icon-size-l: 2.25em;\n      /* For backwards compatibility */\n      --lumo-icon-size: var(--lumo-icon-size-m);\n    }\n  </style>\n</custom-style>",document.head.appendChild(cr.content);const hr=document.createElement("template");hr.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Square */\n      --lumo-space-xs: 0.25rem;\n      --lumo-space-s: 0.5rem;\n      --lumo-space-m: 1rem;\n      --lumo-space-l: 1.5rem;\n      --lumo-space-xl: 2.5rem;\n\n      /* Wide */\n      --lumo-space-wide-xs: calc(var(--lumo-space-xs) / 2) var(--lumo-space-xs);\n      --lumo-space-wide-s: calc(var(--lumo-space-s) / 2) var(--lumo-space-s);\n      --lumo-space-wide-m: calc(var(--lumo-space-m) / 2) var(--lumo-space-m);\n      --lumo-space-wide-l: calc(var(--lumo-space-l) / 2) var(--lumo-space-l);\n      --lumo-space-wide-xl: calc(var(--lumo-space-xl) / 2) var(--lumo-space-xl);\n\n      /* Tall */\n      --lumo-space-tall-xs: var(--lumo-space-xs) calc(var(--lumo-space-xs) / 2);\n      --lumo-space-tall-s: var(--lumo-space-s) calc(var(--lumo-space-s) / 2);\n      --lumo-space-tall-m: var(--lumo-space-m) calc(var(--lumo-space-m) / 2);\n      --lumo-space-tall-l: var(--lumo-space-l) calc(var(--lumo-space-l) / 2);\n      --lumo-space-tall-xl: var(--lumo-space-xl) calc(var(--lumo-space-xl) / 2);\n    }\n  </style>\n</custom-style>",document.head.appendChild(hr.content);const ur=document.createElement("template");ur.innerHTML="<custom-style>\n  <style>\n    html {\n      /* Border radius */\n      --lumo-border-radius-s: 0.25em; /* Checkbox, badge, date-picker year indicator, etc */\n      --lumo-border-radius-m: var(--lumo-border-radius, 0.25em); /* Button, text field, menu overlay, etc */\n      --lumo-border-radius-l: 0.5em; /* Dialog, notification, etc */\n      --lumo-border-radius: 0.25em; /* Deprecated */\n\n      /* Shadow */\n      --lumo-box-shadow-xs: 0 1px 4px -1px var(--lumo-shade-50pct);\n      --lumo-box-shadow-s: 0 2px 4px -1px var(--lumo-shade-20pct), 0 3px 12px -1px var(--lumo-shade-30pct);\n      --lumo-box-shadow-m: 0 2px 6px -1px var(--lumo-shade-20pct), 0 8px 24px -4px var(--lumo-shade-40pct);\n      --lumo-box-shadow-l: 0 3px 18px -2px var(--lumo-shade-20pct), 0 12px 48px -6px var(--lumo-shade-40pct);\n      --lumo-box-shadow-xl: 0 4px 24px -3px var(--lumo-shade-20pct), 0 18px 64px -8px var(--lumo-shade-40pct);\n\n      /* Clickable element cursor */\n      --lumo-clickable-cursor: default;\n    }\n  </style>\n</custom-style>",document.head.appendChild(ur.content);const pr=document.createElement("template");pr.innerHTML='<custom-style>\n  <style>\n    html {\n      /* Font families */\n      --lumo-font-family: -apple-system, BlinkMacSystemFont, "Roboto", "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n\n      /* Font sizes */\n      --lumo-font-size-xxs: .75rem;\n      --lumo-font-size-xs: .8125rem;\n      --lumo-font-size-s: .875rem;\n      --lumo-font-size-m: 1rem;\n      --lumo-font-size-l: 1.125rem;\n      --lumo-font-size-xl: 1.375rem;\n      --lumo-font-size-xxl: 1.75rem;\n      --lumo-font-size-xxxl: 2.5rem;\n\n      /* Line heights */\n      --lumo-line-height-xs: 1.25;\n      --lumo-line-height-s: 1.375;\n      --lumo-line-height-m: 1.625;\n    }\n\n  </style>\n</custom-style><dom-module id="lumo-typography">\n  <template>\n    <style>\n      html {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      /* Can’t combine with the above selector because that doesn’t work in browsers without native shadow dom */\n      :host {\n        font-family: var(--lumo-font-family);\n        font-size: var(--lumo-font-size, var(--lumo-font-size-m));\n        line-height: var(--lumo-line-height-m);\n        -webkit-text-size-adjust: 100%;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n      }\n\n      small,\n      [theme~="font-size-s"] {\n        font-size: var(--lumo-font-size-s);\n        line-height: var(--lumo-line-height-s);\n      }\n\n      [theme~="font-size-xs"] {\n        font-size: var(--lumo-font-size-xs);\n        line-height: var(--lumo-line-height-xs);\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-weight: 600;\n        line-height: var(--lumo-line-height-xs);\n        margin-top: 1.25em;\n      }\n\n      h1 {\n        font-size: var(--lumo-font-size-xxxl);\n        margin-bottom: 0.75em;\n      }\n\n      h2 {\n        font-size: var(--lumo-font-size-xxl);\n        margin-bottom: 0.5em;\n      }\n\n      h3 {\n        font-size: var(--lumo-font-size-xl);\n        margin-bottom: 0.5em;\n      }\n\n      h4 {\n        font-size: var(--lumo-font-size-l);\n        margin-bottom: 0.5em;\n      }\n\n      h5 {\n        font-size: var(--lumo-font-size-m);\n        margin-bottom: 0.25em;\n      }\n\n      h6 {\n        font-size: var(--lumo-font-size-xs);\n        margin-bottom: 0;\n        text-transform: uppercase;\n        letter-spacing: 0.03em;\n      }\n\n      p,\n      blockquote {\n        margin-top: 0.5em;\n        margin-bottom: 0.75em;\n      }\n\n      a {\n        text-decoration: none;\n      }\n\n      a:hover {\n        text-decoration: underline;\n      }\n\n      hr {\n        display: block;\n        align-self: stretch;\n        height: 1px;\n        border: 0;\n        padding: 0;\n        margin: var(--lumo-space-s) calc(var(--lumo-border-radius-m) / 2);\n        background-color: var(--lumo-contrast-10pct);\n      }\n\n      blockquote {\n        border-left: 2px solid var(--lumo-contrast-30pct);\n      }\n\n      b,\n      strong {\n        font-weight: 600;\n      }\n\n      /* RTL specific styles */\n\n      blockquote[dir="rtl"] {\n        border-left: none;\n        border-right: 2px solid var(--lumo-contrast-30pct);\n      }\n\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(pr.content);const mr=document.createElement("template");mr.innerHTML='<dom-module id="lumo-field-button">\n  <template>\n    <style>\n      [part$="button"] {\n        flex: none;\n        width: 1em;\n        height: 1em;\n        line-height: 1;\n        font-size: var(--lumo-icon-size-m);\n        text-align: center;\n        color: var(--lumo-contrast-60pct);\n        transition: 0.2s color;\n        cursor: var(--lumo-clickable-cursor);\n      }\n\n      :host(:not([readonly])) [part$="button"]:hover {\n        color: var(--lumo-contrast-90pct);\n      }\n\n      :host([disabled]) [part$="button"],\n      :host([readonly]) [part$="button"] {\n        color: var(--lumo-contrast-20pct);\n      }\n\n      [part$="button"]::before {\n        font-family: "lumo-icons";\n        display: block;\n      }\n    </style>\n  </template>\n</dom-module>',document.head.appendChild(mr.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class gr{constructor(e){this.value=e.toString()}toString(){return this.value}}function br(e){if(e instanceof HTMLTemplateElement)return e.innerHTML;if(e instanceof gr)return function(e){if(e instanceof gr)return e.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${e}`)}(e);throw new Error(`non-template value passed to Polymer's html function: ${e}`)}const fr=function(e,...t){const i=document.createElement("template");return i.innerHTML=t.reduce(((t,i,o)=>t+br(i)+e[o+1]),e[0]),i},vr=fr`<dom-module id="lumo-button" theme-for="vaadin-button">
  <template>
    <style>
      :host {
        /* Sizing */
        --lumo-button-size: var(--lumo-size-m);
        min-width: calc(var(--lumo-button-size) * 2);
        height: var(--lumo-button-size);
        padding: 0 calc(var(--lumo-button-size) / 3 + var(--lumo-border-radius) / 2);
        margin: var(--lumo-space-xs) 0;
        box-sizing: border-box;
        /* Style */
        font-family: var(--lumo-font-family);
        font-size: var(--lumo-font-size-m);
        font-weight: 500;
        color: var(--_lumo-button-color, var(--lumo-primary-text-color));
        background-color: var(--_lumo-button-background-color, var(--lumo-contrast-5pct));
        border-radius: var(--lumo-border-radius);
        cursor: default;
        -webkit-tap-highlight-color: transparent;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Set only for the internal parts so we don’t affect the host vertical alignment */
      [part="label"],
      [part="prefix"],
      [part="suffix"] {
        line-height: var(--lumo-line-height-xs);
      }

      [part="label"] {
        padding: calc(var(--lumo-button-size) / 6) 0;
      }

      :host([theme~="small"]) {
        font-size: var(--lumo-font-size-s);
        --lumo-button-size: var(--lumo-size-s);
      }

      :host([theme~="large"]) {
        font-size: var(--lumo-font-size-l);
        --lumo-button-size: var(--lumo-size-l);
      }

      /* This needs to be the last selector for it to take priority */
      :host([disabled][disabled]) {
        pointer-events: none;
        color: var(--lumo-disabled-text-color);
        background-color: var(--lumo-contrast-5pct);
      }

      /* For interaction states */
      :host::before,
      :host::after {
        content: "";
        /* We rely on the host always being relative */
        position: absolute;
        z-index: 1;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background-color: currentColor;
        border-radius: inherit;
        opacity: 0;
        transition: opacity 0.2s;
        pointer-events: none;
      }

      /* Hover */

      :host(:hover)::before {
        opacity: 0.05;
      }

      /* Disable hover for touch devices */
      @media (pointer: coarse) {
        :host(:not([active]):hover)::before {
          opacity: 0;
        }
      }

      /* Active */

      :host::after {
        transition: opacity 1.4s, transform 0.1s;
        filter: blur(8px);
      }

      :host([active])::before {
        opacity: 0.1;
        transition-duration: 0s;
      }

      :host([active])::after {
        opacity: 0.1;
        transition-duration: 0s, 0s;
        transform: scale(0);
      }

      /* Keyboard focus */

      :host([focus-ring]) {
        box-shadow: 0 0 0 2px var(--lumo-primary-color-50pct);
      }

      /* Types (primary, tertiary, tertiary-inline */

      :host([theme~="tertiary"]),
      :host([theme~="tertiary-inline"]) {
        background-color: transparent !important;
        transition: opacity 0.2s;
        min-width: 0;
      }

      :host([theme~="tertiary"])::before,
      :host([theme~="tertiary-inline"])::before {
        display: none;
      }

      :host([theme~="tertiary"]) {
        padding: 0 calc(var(--lumo-button-size) / 6);
      }

      @media (hover: hover) {
        :host([theme*="tertiary"]:not([active]):hover) {
          opacity: 0.8;
        }
      }

      :host([theme~="tertiary"][active]),
      :host([theme~="tertiary-inline"][active]) {
        opacity: 0.5;
        transition-duration: 0s;
      }

      :host([theme~="tertiary-inline"]) {
        margin: 0;
        height: auto;
        padding: 0;
        line-height: inherit;
        font-size: inherit;
      }

      :host([theme~="tertiary-inline"]) [part="label"] {
        padding: 0;
        overflow: visible;
        line-height: inherit;
      }

      :host([theme~="primary"]) {
        background-color: var(--_lumo-button-primary-background-color, var(--lumo-primary-color));
        color: var(--_lumo-button-primary-color, var(--lumo-primary-contrast-color));
        font-weight: 600;
        min-width: calc(var(--lumo-button-size) * 2.5);
      }

      :host([theme~="primary"][disabled]) {
        background-color: var(--lumo-primary-color-50pct);
        color: var(--lumo-primary-contrast-color);
      }

      :host([theme~="primary"]:hover)::before {
        opacity: 0.1;
      }

      :host([theme~="primary"][active])::before {
        background-color: var(--lumo-shade-20pct);
      }

      @media (pointer: coarse) {
        :host([theme~="primary"][active])::before {
          background-color: var(--lumo-shade-60pct);
        }

        :host([theme~="primary"]:not([active]):hover)::before {
          opacity: 0;
        }
      }

      :host([theme~="primary"][active])::after {
        opacity: 0.2;
      }

      /* Colors (success, error, contrast) */

      :host([theme~="success"]) {
        color: var(--lumo-success-text-color);
      }

      :host([theme~="success"][theme~="primary"]) {
        background-color: var(--lumo-success-color);
        color: var(--lumo-success-contrast-color);
      }

      :host([theme~="success"][theme~="primary"][disabled]) {
        background-color: var(--lumo-success-color-50pct);
      }

      :host([theme~="error"]) {
        color: var(--lumo-error-text-color);
      }

      :host([theme~="error"][theme~="primary"]) {
        background-color: var(--lumo-error-color);
        color: var(--lumo-error-contrast-color);
      }

      :host([theme~="error"][theme~="primary"][disabled]) {
        background-color: var(--lumo-error-color-50pct);
      }

      :host([theme~="contrast"]) {
        color: var(--lumo-contrast);
      }

      :host([theme~="contrast"][theme~="primary"]) {
        background-color: var(--lumo-contrast);
        color: var(--lumo-base-color);
      }

      :host([theme~="contrast"][theme~="primary"][disabled]) {
        background-color: var(--lumo-contrast-50pct);
      }

      /* Icons */

      [part] ::slotted(iron-icon) {
        display: inline-block;
        width: var(--lumo-icon-size-m);
        height: var(--lumo-icon-size-m);
      }

      /* Vaadin icons are based on a 16x16 grid (unlike Lumo and Material icons with 24x24), so they look too big by default */
      [part] ::slotted(iron-icon[icon^="vaadin:"]) {
        padding: 0.25em;
        box-sizing: border-box !important;
      }

      [part="prefix"] {
        margin-left: -0.25em;
        margin-right: 0.25em;
      }

      [part="suffix"] {
        margin-left: 0.25em;
        margin-right: -0.25em;
      }

      /* Icon-only */

      :host([theme~="icon"]:not([theme~="tertiary-inline"])) {
        min-width: var(--lumo-button-size);
        padding-left: calc(var(--lumo-button-size) / 4);
        padding-right: calc(var(--lumo-button-size) / 4);
      }

      :host([theme~="icon"]) [part="prefix"],
      :host([theme~="icon"]) [part="suffix"] {
        margin-left: 0;
        margin-right: 0;
      }

      /* RTL specific styles */

      :host([dir="rtl"]) [part="prefix"] {
        margin-left: 0.25em;
        margin-right: -0.25em;
      }

      :host([dir="rtl"]) [part="suffix"] {
        margin-left: -0.25em;
        margin-right: 0.25em;
      }

      :host([dir="rtl"][theme~="icon"]) [part="prefix"],
      :host([dir="rtl"][theme~="icon"]) [part="suffix"] {
        margin-left: 0;
        margin-right: 0;
      }
    </style>
  </template>
</dom-module>`;document.head.appendChild(vr.content);
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let yr=0;const _r=function(e){let t=e.__mixinApplications;t||(t=new WeakMap,e.__mixinApplications=t);let i=yr++;return function(o){let a=o.__mixinSet;if(a&&a[i])return o;let n=t,r=n.get(o);if(!r){r=e(o),n.set(o,r);let t=Object.create(r.__mixinSet||a||null);t[i]=!0,r.__mixinSet=t}return r}},xr=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?e=>ShadyDOM.patch(e):e=>e
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/function wr(e){return e.indexOf(".")>=0}function Ar(e){let t=e.indexOf(".");return-1===t?e:e.slice(0,t)}function Er(e,t){return 0===e.indexOf(t+".")}function Sr(e,t){return 0===t.indexOf(e+".")}function Cr(e,t,i){return t+i.slice(e.length)}function Nr(e){if(Array.isArray(e)){let t=[];for(let i=0;i<e.length;i++){let o=e[i].toString().split(".");for(let e=0;e<o.length;e++)t.push(o[e])}return t.join(".")}return e}function Tr(e){return Array.isArray(e)?Nr(e).split("."):e.toString().split(".")}function kr(e,t,i){let o=e,a=Tr(t);for(let e=0;e<a.length;e++){if(!o)return;o=o[a[e]]}return i&&(i.path=a.join(".")),o}function Or(e,t,i){let o=e,a=Tr(t),n=a[a.length-1];if(a.length>1){for(let e=0;e<a.length-1;e++){if(o=o[a[e]],!o)return}o[n]=i}else o[t]=i;return a.join(".")}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/const Pr={},Lr=/-[a-z]/g,Br=/([A-Z])/g;function Mr(e){return Pr[e]||(Pr[e]=e.indexOf("-")<0?e:e.replace(Lr,(e=>e[1].toUpperCase())))}function Hr(e){return Pr[e]||(Pr[e]=e.replace(Br,"-$1").toLowerCase())}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Dr=0,Rr=0,zr=[],Ir=0,$r=!1,jr=document.createTextNode("");new window.MutationObserver((function(){$r=!1;const e=zr.length;for(let t=0;t<e;t++){let e=zr[t];if(e)try{e()}catch(e){setTimeout((()=>{throw e}))}}zr.splice(0,e),Rr+=e})).observe(jr,{characterData:!0});const Fr={after:e=>({run:t=>window.setTimeout(t,e),cancel(e){window.clearTimeout(e)}}),run:(e,t)=>window.setTimeout(e,t),cancel(e){window.clearTimeout(e)}},Vr={run:e=>window.requestIdleCallback?window.requestIdleCallback(e):window.setTimeout(e,16),cancel(e){window.cancelIdleCallback?window.cancelIdleCallback(e):window.clearTimeout(e)}},Ur={run:e=>($r||($r=!0,jr.textContent=Ir++),zr.push(e),Dr++),cancel(e){const t=e-Rr;if(t>=0){if(!zr[t])throw new Error("invalid async handle: "+e);zr[t]=null}}},qr=Ur,Gr=_r((e=>class extends e{static createProperties(e){const t=this.prototype;for(let i in e)i in t||t._createPropertyAccessor(i)}static attributeNameForProperty(e){return e.toLowerCase()}static typeForProperty(e){}_createPropertyAccessor(e,t){this._addPropertyToAttributeMap(e),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[e]||(this.__dataHasAccessor[e]=!0,this._definePropertyAccessor(e,t))}_addPropertyToAttributeMap(e){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let t=this.__dataAttributes[e];return t||(t=this.constructor.attributeNameForProperty(e),this.__dataAttributes[t]=e),t}_definePropertyAccessor(e,t){Object.defineProperty(this,e,{get(){return this.__data[e]},set:t?function(){}:function(t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}})}constructor(){super(),this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let e in this.__dataHasAccessor)this.hasOwnProperty(e)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[e]=this[e],delete this[e])}_initializeInstanceProperties(e){Object.assign(this,e)}_setProperty(e,t){this._setPendingProperty(e,t)&&this._invalidateProperties()}_getProperty(e){return this.__data[e]}_setPendingProperty(e,t,i){let o=this.__data[e],a=this._shouldPropertyChange(e,t,o);return a&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(e in this.__dataOld)&&(this.__dataOld[e]=o),this.__data[e]=t,this.__dataPending[e]=t),a}_isPropertyPending(e){return!(!this.__dataPending||!this.__dataPending.hasOwnProperty(e))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,qr.run((()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())})))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;const e=this.__data,t=this.__dataPending,i=this.__dataOld;this._shouldPropertiesChange(e,t,i)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(e,t,i)),this.__dataCounter--}_shouldPropertiesChange(e,t,i){return Boolean(t)}_propertiesChanged(e,t,i){}_shouldPropertyChange(e,t,i){return i!==t&&(i==i||t==t)}attributeChangedCallback(e,t,i,o){t!==i&&this._attributeToProperty(e,i),super.attributeChangedCallback&&super.attributeChangedCallback(e,t,i,o)}_attributeToProperty(e,t,i){if(!this.__serializing){const o=this.__dataAttributes,a=o&&o[e]||e;this[a]=this._deserializeValue(t,i||this.constructor.typeForProperty(a))}}_propertyToAttribute(e,t,i){this.__serializing=!0,i=arguments.length<3?this[e]:i,this._valueToNodeAttribute(this,i,t||this.constructor.attributeNameForProperty(e)),this.__serializing=!1}_valueToNodeAttribute(e,t,i){const o=this._serializeValue(t);"class"!==i&&"name"!==i&&"slot"!==i||(e=xr(e)),void 0===o?e.removeAttribute(i):e.setAttribute(i,o)}_serializeValue(e){return"boolean"==typeof e?e?"":void 0:null!=e?e.toString():void 0}_deserializeValue(e,t){switch(t){case Boolean:return null!==e;case Number:return Number(e);default:return e}}})),Xr={};let Wr=HTMLElement.prototype;for(;Wr;){let e=Object.getOwnPropertyNames(Wr);for(let t=0;t<e.length;t++)Xr[e[t]]=!0;Wr=Object.getPrototypeOf(Wr)}const Yr=_r((e=>{const t=Gr(e);return class extends t{static createPropertiesForAttributes(){let e=this.observedAttributes;for(let t=0;t<e.length;t++)this.prototype._createPropertyAccessor(Mr(e[t]))}static attributeNameForProperty(e){return Hr(e)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(e){for(let t in e)this._setProperty(t,e[t])}_ensureAttribute(e,t){const i=this;i.hasAttribute(e)||this._valueToNodeAttribute(i,t,e)}_serializeValue(e){if("object"==typeof e){if(e instanceof Date)return e.toString();if(e)try{return JSON.stringify(e)}catch(e){return""}}return super._serializeValue(e)}_deserializeValue(e,t){let i;switch(t){case Object:try{i=JSON.parse(e)}catch(t){i=e}break;case Array:try{i=JSON.parse(e)}catch(t){i=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${e}`)}break;case Date:i=isNaN(e)?String(e):Number(e),i=new Date(i);break;default:i=super._deserializeValue(e,t)}return i}_definePropertyAccessor(e,t){!function(e,t){if(!Xr[t]){let i=e[t];void 0!==i&&(e.__data?e._setPendingProperty(t,i):(e.__dataProto?e.hasOwnProperty(JSCompiler_renameProperty("__dataProto",e))||(e.__dataProto=Object.create(e.__dataProto)):e.__dataProto={},e.__dataProto[t]=i))}}(this,e),super._definePropertyAccessor(e,t)}_hasAccessor(e){return this.__dataHasAccessor&&this.__dataHasAccessor[e]}_isPropertyPending(e){return Boolean(this.__dataPending&&e in this.__dataPending)}}})),Jr={"dom-if":!0,"dom-repeat":!0};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/let Kr=!1,Qr=!1;function Zr(e){(function(){if(!Kr){Kr=!0;const e=document.createElement("textarea");e.placeholder="a",Qr=e.placeholder===e.textContent}return Qr})()&&"textarea"===e.localName&&e.placeholder&&e.placeholder===e.textContent&&(e.textContent=null)}function es(e){let t=e.getAttribute("is");if(t&&Jr[t]){let i=e;for(i.removeAttribute("is"),e=i.ownerDocument.createElement(t),i.parentNode.replaceChild(e,i),e.appendChild(i);i.attributes.length;)e.setAttribute(i.attributes[0].name,i.attributes[0].value),i.removeAttribute(i.attributes[0].name)}return e}function ts(e,t){let i=t.parentInfo&&ts(e,t.parentInfo);if(!i)return e;for(let e=i.firstChild,o=0;e;e=e.nextSibling)if(t.parentIndex===o++)return e}function is(e,t,i,o){o.id&&(t[o.id]=i)}function os(e,t,i){if(i.events&&i.events.length)for(let o,a=0,n=i.events;a<n.length&&(o=n[a]);a++)e._addMethodEventListenerToNode(t,o.name,o.value,e)}function as(e,t,i,o){i.templateInfo&&(t._templateInfo=i.templateInfo,t._parentTemplateInfo=o)}const ns=_r((e=>class extends e{static _parseTemplate(e,t){if(!e._templateInfo){let i=e._templateInfo={};i.nodeInfoList=[],i.nestedTemplate=Boolean(t),i.stripWhiteSpace=t&&t.stripWhiteSpace||e.hasAttribute("strip-whitespace"),this._parseTemplateContent(e,i,{parent:null})}return e._templateInfo}static _parseTemplateContent(e,t,i){return this._parseTemplateNode(e.content,t,i)}static _parseTemplateNode(e,t,i){let o=!1,a=e;return"template"!=a.localName||a.hasAttribute("preserve-content")?"slot"===a.localName&&(t.hasInsertionPoint=!0):o=this._parseTemplateNestedTemplate(a,t,i)||o,Zr(a),a.firstChild&&this._parseTemplateChildNodes(a,t,i),a.hasAttributes&&a.hasAttributes()&&(o=this._parseTemplateNodeAttributes(a,t,i)||o),o||i.noted}static _parseTemplateChildNodes(e,t,i){if("script"!==e.localName&&"style"!==e.localName)for(let o,a=e.firstChild,n=0;a;a=o){if("template"==a.localName&&(a=es(a)),o=a.nextSibling,a.nodeType===Node.TEXT_NODE){let i=o;for(;i&&i.nodeType===Node.TEXT_NODE;)a.textContent+=i.textContent,o=i.nextSibling,e.removeChild(i),i=o;if(t.stripWhiteSpace&&!a.textContent.trim()){e.removeChild(a);continue}}let r={parentIndex:n,parentInfo:i};this._parseTemplateNode(a,t,r)&&(r.infoIndex=t.nodeInfoList.push(r)-1),a.parentNode&&n++}}static _parseTemplateNestedTemplate(e,t,i){let o=e,a=this._parseTemplate(o,t);return(a.content=o.content.ownerDocument.createDocumentFragment()).appendChild(o.content),i.templateInfo=a,!0}static _parseTemplateNodeAttributes(e,t,i){let o=!1,a=Array.from(e.attributes);for(let n,r=a.length-1;n=a[r];r--)o=this._parseTemplateNodeAttribute(e,t,i,n.name,n.value)||o;return o}static _parseTemplateNodeAttribute(e,t,i,o,a){return"on-"===o.slice(0,3)?(e.removeAttribute(o),i.events=i.events||[],i.events.push({name:o.slice(3),value:a}),!0):"id"===o&&(i.id=a,!0)}static _contentForTemplate(e){let t=e._templateInfo;return t&&t.content||e.content}_stampTemplate(e,t){e&&!e.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(e);let i=(t=t||this.constructor._parseTemplate(e)).nodeInfoList,o=t.content||e.content,a=document.importNode(o,!0);a.__noInsertionPoint=!t.hasInsertionPoint;let n=a.nodeList=new Array(i.length);a.$={};for(let e,o=0,r=i.length;o<r&&(e=i[o]);o++){let i=n[o]=ts(a,e);is(0,a.$,i,e),as(0,i,e,t),os(this,i,e)}return a=a,a}_addMethodEventListenerToNode(e,t,i,o){let a=function(e,t,i){return e=e._methodHost||e,function(t){e[i]?e[i](t,t.detail):console.warn("listener method `"+i+"` not defined")}}(o=o||e,0,i);return this._addEventListenerToNode(e,t,a),a}_addEventListenerToNode(e,t,i){e.addEventListener(t,i)}_removeEventListenerFromNode(e,t,i){e.removeEventListener(t,i)}}));
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */let rs=0;const ss=[],ls={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},ds=/[A-Z]/;function cs(e,t,i){let o=e[t];if(o){if(!e.hasOwnProperty(t)&&(o=e[t]=Object.create(e[t]),i))for(let e in o){let t=o[e],i=o[e]=Array(t.length);for(let e=0;e<t.length;e++)i[e]=t[e]}}else o=e[t]={};return o}function hs(e,t,i,o,a,n){if(t){let r=!1;const s=rs++;for(let l in i){let d=t[a?Ar(l):l];if(d)for(let t,c=0,h=d.length;c<h&&(t=d[c]);c++)t.info&&t.info.lastRun===s||a&&!ps(l,t.trigger)||(t.info&&(t.info.lastRun=s),t.fn(e,l,i,o,t.info,a,n),r=!0)}return r}return!1}function us(e,t,i,o,a,n,r,s){let l=!1,d=t[r?Ar(o):o];if(d)for(let t,c=0,h=d.length;c<h&&(t=d[c]);c++)t.info&&t.info.lastRun===i||r&&!ps(o,t.trigger)||(t.info&&(t.info.lastRun=i),t.fn(e,o,a,n,t.info,r,s),l=!0);return l}function ps(e,t){if(t){let i=t.name;return i==e||!(!t.structured||!Er(i,e))||!(!t.wildcard||!Sr(i,e))}return!0}function ms(e,t,i,o,a){let n="string"==typeof a.method?e[a.method]:a.method,r=a.property;n?n.call(e,e.__data[r],o[r]):a.dynamicFn||console.warn("observer method `"+a.method+"` not defined")}function gs(e,t,i){let o=Ar(t);if(o!==t){return bs(e,Hr(o)+"-changed",i[t],t),!0}return!1}function bs(e,t,i,o){let a={value:i,queueProperty:!0};o&&(a.path=o),xr(e).dispatchEvent(new CustomEvent(t,{detail:a}))}function fs(e,t,i,o,a,n){let r=(n?Ar(t):t)!=t?t:null,s=r?kr(e,r):e.__data[t];r&&void 0===s&&(s=i[t]),bs(e,a.eventName,s,r)}function vs(e,t,i,o,a){let n=e.__data[t];Mn&&(n=Mn(n,a.attrName,"attribute",e)),e._propertyToAttribute(t,a.attrName,n)}function ys(e,t,i,o){let a=e[ls.COMPUTE];if(a)if(Fn){rs++;const n=function(e){let t=e.constructor.__orderedComputedDeps;if(!t){t=new Map;const i=e[ls.COMPUTE];let o,{counts:a,ready:n,total:r}=function(e){const t=e.__computeInfo,i={},o=e[ls.COMPUTE],a=[];let n=0;for(let e in t){const o=t[e];n+=i[e]=o.args.filter((e=>!e.literal)).length+(o.dynamicFn?1:0)}for(let e in o)t[e]||a.push(e);return{counts:i,ready:a,total:n}}(e);for(;o=n.shift();){t.set(o,t.size);const e=i[o];e&&e.forEach((e=>{const t=e.info.methodInfo;--r,0==--a[t]&&n.push(t)}))}if(0!==r){const t=e;console.warn(`Computed graph for ${t.localName} incomplete; circular?`)}e.constructor.__orderedComputedDeps=t}return t}(e),r=[];for(let e in t)xs(e,a,r,n,o);let s;for(;s=r.shift();)ws(e,"",t,i,s)&&xs(s.methodInfo,a,r,n,o);Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),e.__dataPending=null}else{let n=t;for(;hs(e,a,n,i,o);)Object.assign(i,e.__dataOld),Object.assign(t,e.__dataPending),n=e.__dataPending,e.__dataPending=null}}const _s=(e,t,i)=>{let o=0,a=t.length-1,n=-1;for(;o<=a;){const r=o+a>>1,s=i.get(t[r].methodInfo)-i.get(e.methodInfo);if(s<0)o=r+1;else{if(!(s>0)){n=r;break}a=r-1}}n<0&&(n=a+1),t.splice(n,0,e)},xs=(e,t,i,o,a)=>{const n=t[a?Ar(e):e];if(n)for(let t=0;t<n.length;t++){const r=n[t];r.info.lastRun===rs||a&&!ps(e,r.trigger)||(r.info.lastRun=rs,_s(r.info,i,o))}};function ws(e,t,i,o,a){let n=ks(e,t,i,o,a);if(n===ss)return!1;let r=a.methodInfo;return e.__dataHasAccessor&&e.__dataHasAccessor[r]?e._setPendingProperty(r,n,!0):(e[r]=n,!1)}function As(e,t,i,o,a,n,r){i.bindings=i.bindings||[];let s={kind:o,target:a,parts:n,literal:r,isCompound:1!==n.length};if(i.bindings.push(s),function(e){return Boolean(e.target)&&"attribute"!=e.kind&&"text"!=e.kind&&!e.isCompound&&"{"===e.parts[0].mode}(s)){let{event:e,negate:t}=s.parts[0];s.listenerEvent=e||Hr(a)+"-changed",s.listenerNegate=t}let l=t.nodeInfoList.length;for(let i=0;i<s.parts.length;i++){let o=s.parts[i];o.compoundIndex=i,Es(e,t,s,o,l)}}function Es(e,t,i,o,a){if(!o.literal)if("attribute"===i.kind&&"-"===i.target[0])console.warn("Cannot set attribute "+i.target+' because "-" is not a valid attribute starting character');else{let n=o.dependencies,r={index:a,binding:i,part:o,evaluator:e};for(let i=0;i<n.length;i++){let o=n[i];"string"==typeof o&&(o=Ms(o),o.wildcard=!0),e._addTemplatePropertyEffect(t,o.rootProperty,{fn:Ss,info:r,trigger:o})}}}function Ss(e,t,i,o,a,n,r){let s=r[a.index],l=a.binding,d=a.part;if(n&&d.source&&t.length>d.source.length&&"property"==l.kind&&!l.isCompound&&s.__isPropertyEffectsClient&&s.__dataHasAccessor&&s.__dataHasAccessor[l.target]){let o=i[t];t=Cr(d.source,l.target,t),s._setPendingPropertyOrPath(t,o,!1,!0)&&e._enqueueClient(s)}else{let r=a.evaluator._evaluateBinding(e,d,t,i,o,n);r!==ss&&function(e,t,i,o,a){a=function(e,t,i,o){if(i.isCompound){let a=e.__dataCompoundStorage[i.target];a[o.compoundIndex]=t,t=a.join("")}"attribute"!==i.kind&&("textContent"!==i.target&&("value"!==i.target||"input"!==e.localName&&"textarea"!==e.localName)||(t=null==t?"":t));return t}(t,a,i,o),Mn&&(a=Mn(a,i.target,i.kind,t));if("attribute"==i.kind)e._valueToNodeAttribute(t,a,i.target);else{let o=i.target;t.__isPropertyEffectsClient&&t.__dataHasAccessor&&t.__dataHasAccessor[o]?t[ls.READ_ONLY]&&t[ls.READ_ONLY][o]||t._setPendingProperty(o,a)&&e._enqueueClient(t):e._setUnmanagedPropertyToNode(t,o,a)}}(e,s,l,d,r)}}function Cs(e,t){if(t.isCompound){let i=e.__dataCompoundStorage||(e.__dataCompoundStorage={}),o=t.parts,a=new Array(o.length);for(let e=0;e<o.length;e++)a[e]=o[e].literal;let n=t.target;i[n]=a,t.literal&&"property"==t.kind&&("className"===n&&(e=xr(e)),e[n]=t.literal)}}function Ns(e,t,i){if(i.listenerEvent){let o=i.parts[0];e.addEventListener(i.listenerEvent,(function(e){!function(e,t,i,o,a){let n,r=e.detail,s=r&&r.path;s?(o=Cr(i,o,s),n=r&&r.value):n=e.currentTarget[i],n=a?!n:n,t[ls.READ_ONLY]&&t[ls.READ_ONLY][o]||!t._setPendingPropertyOrPath(o,n,!0,Boolean(s))||r&&r.queueProperty||t._invalidateProperties()}(e,t,i.target,o.source,o.negate)}))}}function Ts(e,t,i,o,a,n){n=t.static||n&&("object"!=typeof n||n[t.methodName]);let r={methodName:t.methodName,args:t.args,methodInfo:a,dynamicFn:n};for(let a,n=0;n<t.args.length&&(a=t.args[n]);n++)a.literal||e._addPropertyEffect(a.rootProperty,i,{fn:o,info:r,trigger:a});return n&&e._addPropertyEffect(t.methodName,i,{fn:o,info:r}),r}function ks(e,t,i,o,a){let n=e._methodHost||e,r=n[a.methodName];if(r){let o=e._marshalArgs(a.args,t,i);return o===ss?ss:r.apply(n,o)}a.dynamicFn||console.warn("method `"+a.methodName+"` not defined")}const Os=[],Ps=new RegExp("(\\[\\[|{{)\\s*(?:(!)\\s*)?((?:[a-zA-Z_$][\\w.:$\\-*]*)\\s*(?:\\(\\s*(?:(?:(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*)(?:,\\s*(?:((?:[a-zA-Z_$][\\w.:$\\-*]*)|(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)|(?:(?:'(?:[^'\\\\]|\\\\.)*')|(?:\"(?:[^\"\\\\]|\\\\.)*\")))\\s*))*)?)\\)\\s*)?)(?:]]|}})","g");function Ls(e){let t="";for(let i=0;i<e.length;i++){t+=e[i].literal||""}return t}function Bs(e){let t=e.match(/([^\s]+?)\(([\s\S]*)\)/);if(t){let e={methodName:t[1],static:!0,args:Os};if(t[2].trim()){return function(e,t){return t.args=e.map((function(e){let i=Ms(e);return i.literal||(t.static=!1),i}),this),t}(t[2].replace(/\\,/g,"&comma;").split(","),e)}return e}return null}function Ms(e){let t=e.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),i={name:t,value:"",literal:!1},o=t[0];switch("-"===o&&(o=t[1]),o>="0"&&o<="9"&&(o="#"),o){case"'":case'"':i.value=t.slice(1,-1),i.literal=!0;break;case"#":i.value=Number(t),i.literal=!0}return i.literal||(i.rootProperty=Ar(t),i.structured=wr(t),i.structured&&(i.wildcard=".*"==t.slice(-2),i.wildcard&&(i.name=t.slice(0,-2)))),i}function Hs(e,t,i){let o=kr(e,i);return void 0===o&&(o=t[i]),o}function Ds(e,t,i,o){const a={indexSplices:o};jn&&!e._overrideLegacyUndefined&&(t.splices=a),e.notifyPath(i+".splices",a),e.notifyPath(i+".length",t.length),jn&&!e._overrideLegacyUndefined&&(a.indexSplices=[])}function Rs(e,t,i,o,a,n){Ds(e,t,i,[{index:o,addedCount:a,removed:n,object:t,type:"splice"}])}const zs=_r((e=>{const t=ns(Yr(e));return class extends t{constructor(){super(),this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return ls}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(Is.length){let e=Is[Is.length-1];e._enqueueClient(this),this.__dataHost=e}}_initializeProtoProperties(e){this.__data=Object.create(e),this.__dataPending=Object.create(e),this.__dataOld={}}_initializeInstanceProperties(e){let t=this[ls.READ_ONLY];for(let i in e)t&&t[i]||(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[i]=this.__dataPending[i]=e[i])}_addPropertyEffect(e,t,i){this._createPropertyAccessor(e,t==ls.READ_ONLY);let o=cs(this,t,!0)[e];o||(o=this[t][e]=[]),o.push(i)}_removePropertyEffect(e,t,i){let o=cs(this,t,!0)[e],a=o.indexOf(i);a>=0&&o.splice(a,1)}_hasPropertyEffect(e,t){let i=this[t];return Boolean(i&&i[e])}_hasReadOnlyEffect(e){return this._hasPropertyEffect(e,ls.READ_ONLY)}_hasNotifyEffect(e){return this._hasPropertyEffect(e,ls.NOTIFY)}_hasReflectEffect(e){return this._hasPropertyEffect(e,ls.REFLECT)}_hasComputedEffect(e){return this._hasPropertyEffect(e,ls.COMPUTE)}_setPendingPropertyOrPath(e,t,i,o){if(o||Ar(Array.isArray(e)?e[0]:e)!==e){if(!o){let i=kr(this,e);if(!(e=Or(this,e,t))||!super._shouldPropertyChange(e,t,i))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(e,t,i))return function(e,t,i){let o=e.__dataLinkedPaths;if(o){let a;for(let n in o){let r=o[n];Sr(n,t)?(a=Cr(n,r,t),e._setPendingPropertyOrPath(a,i,!0,!0)):Sr(r,t)&&(a=Cr(r,n,t),e._setPendingPropertyOrPath(a,i,!0,!0))}}}(this,e,t),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[e])return this._setPendingProperty(e,t,i);this[e]=t}return!1}_setUnmanagedPropertyToNode(e,t,i){i===e[t]&&"object"!=typeof i||("className"===t&&(e=xr(e)),e[t]=i)}_setPendingProperty(e,t,i){let o=this.__dataHasPaths&&wr(e),a=o?this.__dataTemp:this.__data;return!!this._shouldPropertyChange(e,t,a[e])&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),e in this.__dataOld||(this.__dataOld[e]=this.__data[e]),o?this.__dataTemp[e]=t:this.__data[e]=t,this.__dataPending[e]=t,(o||this[ls.NOTIFY]&&this[ls.NOTIFY][e])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[e]=i),!0)}_setProperty(e,t){this._setPendingProperty(e,t,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(e){this.__dataPendingClients=this.__dataPendingClients||[],e!==this&&this.__dataPendingClients.push(e)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let e=this.__dataPendingClients;if(e){this.__dataPendingClients=null;for(let t=0;t<e.length;t++){let i=e[t];i.__dataEnabled?i.__dataPending&&i._flushProperties():i._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(e,t){for(let i in e)!t&&this[ls.READ_ONLY]&&this[ls.READ_ONLY][i]||this._setPendingPropertyOrPath(i,e[i],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(e,t,i){let o,a=this.__dataHasPaths;this.__dataHasPaths=!1,ys(this,t,i,a),o=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(t,i,a),this._flushClients(),hs(this,this[ls.REFLECT],t,i,a),hs(this,this[ls.OBSERVE],t,i,a),o&&function(e,t,i,o,a){let n,r,s=e[ls.NOTIFY],l=rs++;for(let r in t)t[r]&&(s&&us(e,s,l,r,i,o,a)||a&&gs(e,r,i))&&(n=!0);n&&(r=e.__dataHost)&&r._invalidateProperties&&r._invalidateProperties()}(this,o,t,i,a),1==this.__dataCounter&&(this.__dataTemp={})}_propagatePropertyChanges(e,t,i){this[ls.PROPAGATE]&&hs(this,this[ls.PROPAGATE],e,t,i),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,e,t,i)}_runEffectsForTemplate(e,t,i,o){const a=(t,o)=>{hs(this,e.propertyEffects,t,i,o,e.nodeList);for(let a=e.firstChild;a;a=a.nextSibling)this._runEffectsForTemplate(a,t,i,o)};e.runEffects?e.runEffects(a,t,o):a(t,o)}linkPaths(e,t){e=Nr(e),t=Nr(t),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[e]=t}unlinkPaths(e){e=Nr(e),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[e]}notifySplices(e,t){let i={path:""};Ds(this,kr(this,e,i),i.path,t)}get(e,t){return kr(t||this,e)}set(e,t,i){i?Or(i,e,t):this[ls.READ_ONLY]&&this[ls.READ_ONLY][e]||this._setPendingPropertyOrPath(e,t,!0)&&this._invalidateProperties()}push(e,...t){let i={path:""},o=kr(this,e,i),a=o.length,n=o.push(...t);return t.length&&Rs(this,o,i.path,a,t.length,[]),n}pop(e){let t={path:""},i=kr(this,e,t),o=Boolean(i.length),a=i.pop();return o&&Rs(this,i,t.path,i.length,0,[a]),a}splice(e,t,i,...o){let a,n={path:""},r=kr(this,e,n);return t<0?t=r.length-Math.floor(-t):t&&(t=Math.floor(t)),a=2===arguments.length?r.splice(t):r.splice(t,i,...o),(o.length||a.length)&&Rs(this,r,n.path,t,o.length,a),a}shift(e){let t={path:""},i=kr(this,e,t),o=Boolean(i.length),a=i.shift();return o&&Rs(this,i,t.path,0,0,[a]),a}unshift(e,...t){let i={path:""},o=kr(this,e,i),a=o.unshift(...t);return t.length&&Rs(this,o,i.path,0,t.length,[]),a}notifyPath(e,t){let i;if(1==arguments.length){let o={path:""};t=kr(this,e,o),i=o.path}else i=Array.isArray(e)?Nr(e):e;this._setPendingPropertyOrPath(i,t,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(e,t){var i;this._addPropertyEffect(e,ls.READ_ONLY),t&&(this["_set"+(i=e,i[0].toUpperCase()+i.substring(1))]=function(t){this._setProperty(e,t)})}_createPropertyObserver(e,t,i){let o={property:e,method:t,dynamicFn:Boolean(i)};this._addPropertyEffect(e,ls.OBSERVE,{fn:ms,info:o,trigger:{name:e}}),i&&this._addPropertyEffect(t,ls.OBSERVE,{fn:ms,info:o,trigger:{name:t}})}_createMethodObserver(e,t){let i=Bs(e);if(!i)throw new Error("Malformed observer expression '"+e+"'");Ts(this,i,ls.OBSERVE,ks,null,t)}_createNotifyingProperty(e){this._addPropertyEffect(e,ls.NOTIFY,{fn:fs,info:{eventName:Hr(e)+"-changed",property:e}})}_createReflectedProperty(e){let t=this.constructor.attributeNameForProperty(e);"-"===t[0]?console.warn("Property "+e+" cannot be reflected to attribute "+t+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(e,ls.REFLECT,{fn:vs,info:{attrName:t}})}_createComputedProperty(e,t,i){let o=Bs(t);if(!o)throw new Error("Malformed computed expression '"+t+"'");const a=Ts(this,o,ls.COMPUTE,ws,e,i);cs(this,"__computeInfo")[e]=a}_marshalArgs(e,t,i){const o=this.__data,a=[];for(let n=0,r=e.length;n<r;n++){let{name:r,structured:s,wildcard:l,value:d,literal:c}=e[n];if(!c)if(l){const e=Sr(r,t),a=Hs(o,i,e?t:r);d={path:e?t:r,value:a,base:e?kr(o,r):a}}else d=s?Hs(o,i,r):o[r];if(jn&&!this._overrideLegacyUndefined&&void 0===d&&e.length>1)return ss;a[n]=d}return a}static addPropertyEffect(e,t,i){this.prototype._addPropertyEffect(e,t,i)}static createPropertyObserver(e,t,i){this.prototype._createPropertyObserver(e,t,i)}static createMethodObserver(e,t){this.prototype._createMethodObserver(e,t)}static createNotifyingProperty(e){this.prototype._createNotifyingProperty(e)}static createReadOnlyProperty(e,t){this.prototype._createReadOnlyProperty(e,t)}static createReflectedProperty(e){this.prototype._createReflectedProperty(e)}static createComputedProperty(e,t,i){this.prototype._createComputedProperty(e,t,i)}static bindTemplate(e){return this.prototype._bindTemplate(e)}_bindTemplate(e,t){let i=this.constructor._parseTemplate(e),o=this.__preBoundTemplateInfo==i;if(!o)for(let e in i.propertyEffects)this._createPropertyAccessor(e);if(t)if(i=Object.create(i),i.wasPreBound=o,this.__templateInfo){const t=e._parentTemplateInfo||this.__templateInfo,o=t.lastChild;i.parent=t,t.lastChild=i,i.previousSibling=o,o?o.nextSibling=i:t.firstChild=i}else this.__templateInfo=i;else this.__preBoundTemplateInfo=i;return i}static _addTemplatePropertyEffect(e,t,i){(e.hostProps=e.hostProps||{})[t]=!0;let o=e.propertyEffects=e.propertyEffects||{};(o[t]=o[t]||[]).push(i)}_stampTemplate(e,t){t=t||this._bindTemplate(e,!0),Is.push(this);let i=super._stampTemplate(e,t);if(Is.pop(),t.nodeList=i.nodeList,!t.wasPreBound){let e=t.childNodes=[];for(let t=i.firstChild;t;t=t.nextSibling)e.push(t)}return i.templateInfo=t,function(e,t){let{nodeList:i,nodeInfoList:o}=t;if(o.length)for(let t=0;t<o.length;t++){let a=o[t],n=i[t],r=a.bindings;if(r)for(let t=0;t<r.length;t++){let i=r[t];Cs(n,i),Ns(n,e,i)}n.__dataHost=e}}(this,t),this.__dataClientsReady&&(this._runEffectsForTemplate(t,this.__data,null,!1),this._flushClients()),i}_removeBoundDom(e){const t=e.templateInfo,{previousSibling:i,nextSibling:o,parent:a}=t;i?i.nextSibling=o:a&&(a.firstChild=o),o?o.previousSibling=i:a&&(a.lastChild=i),t.nextSibling=t.previousSibling=null;let n=t.childNodes;for(let e=0;e<n.length;e++){let t=n[e];xr(xr(t).parentNode).removeChild(t)}}static _parseTemplateNode(e,i,o){let a=t._parseTemplateNode.call(this,e,i,o);if(e.nodeType===Node.TEXT_NODE){let t=this._parseBindings(e.textContent,i);t&&(e.textContent=Ls(t)||" ",As(this,i,o,"text","textContent",t),a=!0)}return a}static _parseTemplateNodeAttribute(e,i,o,a,n){let r=this._parseBindings(n,i);if(r){let t=a,n="property";ds.test(a)?n="attribute":"$"==a[a.length-1]&&(a=a.slice(0,-1),n="attribute");let s=Ls(r);return s&&"attribute"==n&&("class"==a&&e.hasAttribute("class")&&(s+=" "+e.getAttribute(a)),e.setAttribute(a,s)),"attribute"==n&&"disable-upgrade$"==t&&e.setAttribute(a,""),"input"===e.localName&&"value"===t&&e.setAttribute(t,""),e.removeAttribute(t),"property"===n&&(a=Mr(a)),As(this,i,o,n,a,r,s),!0}return t._parseTemplateNodeAttribute.call(this,e,i,o,a,n)}static _parseTemplateNestedTemplate(e,i,o){let a=t._parseTemplateNestedTemplate.call(this,e,i,o);const n=e.parentNode,r=o.templateInfo,s="dom-if"===n.localName,l="dom-repeat"===n.localName;Vn&&(s||l)&&(n.removeChild(e),(o=o.parentInfo).templateInfo=r,o.noted=!0,a=!1);let d=r.hostProps;if(Un&&s)d&&(i.hostProps=Object.assign(i.hostProps||{},d),Vn||(o.parentInfo.noted=!0));else{let e="{";for(let t in d){As(this,i,o,"property","_host_"+t,[{mode:e,source:t,dependencies:[t],hostProp:!0}])}}return a}static _parseBindings(e,t){let i,o=[],a=0;for(;null!==(i=Ps.exec(e));){i.index>a&&o.push({literal:e.slice(a,i.index)});let n=i[1][0],r=Boolean(i[2]),s=i[3].trim(),l=!1,d="",c=-1;"{"==n&&(c=s.indexOf("::"))>0&&(d=s.substring(c+2),s=s.substring(0,c),l=!0);let h=Bs(s),u=[];if(h){let{args:e,methodName:i}=h;for(let t=0;t<e.length;t++){let i=e[t];i.literal||u.push(i)}let o=t.dynamicFns;(o&&o[i]||h.static)&&(u.push(i),h.dynamicFn=!0)}else u.push(s);o.push({source:s,mode:n,negate:r,customEvent:l,signature:h,dependencies:u,event:d}),a=Ps.lastIndex}if(a&&a<e.length){let t=e.substring(a);t&&o.push({literal:t})}return o.length?o:null}static _evaluateBinding(e,t,i,o,a,n){let r;return r=t.signature?ks(e,i,o,0,t.signature):i!=t.source?kr(e,t.source):n&&wr(i)?kr(e,i):e.__data[i],t.negate&&(r=!r),r}}})),Is=[];const $s=_r((e=>{const t=Gr(e);function i(e){const t=Object.getPrototypeOf(e);return t.prototype instanceof a?t:null}function o(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",e))){let t=null;if(e.hasOwnProperty(JSCompiler_renameProperty("properties",e))){const i=e.properties;i&&(t=
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function(e){const t={};for(let i in e){const o=e[i];t[i]="function"==typeof o?{type:o}:o}return t}(i))}e.__ownProperties=t}return e.__ownProperties}class a extends t{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){this.prototype;const e=this._properties;this.__observedAttributes=e?Object.keys(e).map((e=>this.prototype._addPropertyToAttributeMap(e))):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){const e=i(this);e&&e.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){const e=o(this);e&&this.createProperties(e)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){const e=i(this);this.__properties=Object.assign({},e&&e._properties,o(this))}return this.__properties}static typeForProperty(e){const t=this._properties[e];return t&&t.type}_initializeProperties(){this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return a})),js=window.ShadyCSS&&window.ShadyCSS.cssBuild,Fs=_r((e=>{const t=$s(zs(e));function i(e,t,i,o){i.computed&&(i.readOnly=!0),i.computed&&(e._hasReadOnlyEffect(t)?console.warn(`Cannot redefine computed property '${t}'.`):e._createComputedProperty(t,i.computed,o)),i.readOnly&&!e._hasReadOnlyEffect(t)?e._createReadOnlyProperty(t,!i.computed):!1===i.readOnly&&e._hasReadOnlyEffect(t)&&console.warn(`Cannot make readOnly property '${t}' non-readOnly.`),i.reflectToAttribute&&!e._hasReflectEffect(t)?e._createReflectedProperty(t):!1===i.reflectToAttribute&&e._hasReflectEffect(t)&&console.warn(`Cannot make reflected property '${t}' non-reflected.`),i.notify&&!e._hasNotifyEffect(t)?e._createNotifyingProperty(t):!1===i.notify&&e._hasNotifyEffect(t)&&console.warn(`Cannot make notify property '${t}' non-notify.`),i.observer&&e._createPropertyObserver(t,i.observer,o[i.observer]),e._addPropertyToAttributeMap(t)}function o(e,t,i,o){if(!js){const a=t.content.querySelectorAll("style"),n=ir(t),r=function(e){let t=Qn(e);return t?or(t):[]}(i),s=t.content.firstElementChild;for(let i=0;i<r.length;i++){let a=r[i];a.textContent=e._processStyleText(a.textContent,o),t.content.insertBefore(a,s)}let l=0;for(let t=0;t<n.length;t++){let i=n[t],r=a[l];r!==i?(i=i.cloneNode(!0),r.parentNode.insertBefore(i,r)):l++,i.textContent=e._processStyleText(i.textContent,o)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(t,i),Gn&&js&&Ln){const i=t.content.querySelectorAll("style");if(i){let t="";Array.from(i).forEach((e=>{t+=e.textContent,e.parentNode.removeChild(e)})),e._styleSheet=new CSSStyleSheet,e._styleSheet.replaceSync(t)}}}return class extends t{static get polymerElementVersion(){return"3.4.1"}static _finalizeClass(){t._finalizeClass.call(this);const e=((i=this).hasOwnProperty(JSCompiler_renameProperty("__ownObservers",i))||(i.__ownObservers=i.hasOwnProperty(JSCompiler_renameProperty("observers",i))?i.observers:null),i.__ownObservers);var i;e&&this.createObservers(e,this._properties),this._prepareTemplate()}static _prepareTemplate(){let e=this.template;e&&("string"==typeof e?(console.error("template getter must return HTMLTemplateElement"),e=null):zn||(e=e.cloneNode(!0))),this.prototype._template=e}static createProperties(e){for(let t in e)i(this.prototype,t,e[t],e)}static createObservers(e,t){const i=this.prototype;for(let o=0;o<e.length;o++)i._createMethodObserver(e[o],t)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){const e=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=void 0!==e?e:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&function(e){let t=null;if(e&&(!Dn||Rn)&&(t=Kn.import(e,"template"),Dn&&!t))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${e}`);return t}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(e){this._template=e}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const e=this.importMeta;if(e)this._importPath=On(e.url);else{const e=Kn.import(this.is);this._importPath=e&&e.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=Bn,this.importPath=this.constructor.importPath;let e=function(e){if(!e.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",e))){e.__propertyDefaults=null;let t=e._properties;for(let i in t){let o=t[i];"value"in o&&(e.__propertyDefaults=e.__propertyDefaults||{},e.__propertyDefaults[i]=o)}}return e.__propertyDefaults}(this.constructor);if(e)for(let t in e){let i=e[t];if(this._canApplyPropertyDefault(t)){let e="function"==typeof i.value?i.value.call(this):i.value;this._hasAccessor(t)?this._setPendingProperty(t,e,!0):this[t]=e}}}_canApplyPropertyDefault(e){return!this.hasOwnProperty(e)}static _processStyleText(e,t){return kn(e,t)}static _finalizeTemplate(e){const t=this.prototype._template;if(t&&!t.__polymerFinalized){t.__polymerFinalized=!0;const i=this.importPath;o(this,t,e,i?Tn(i):""),this.prototype._bindTemplate(t)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(e){const t=xr(this);if(t.attachShadow)return e?(t.shadowRoot||(t.attachShadow({mode:"open",shadyUpgradeFragment:e}),t.shadowRoot.appendChild(e),this.constructor._styleSheet&&(t.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),$n&&window.ShadyDOM&&window.ShadyDOM.flushInitial(t.shadowRoot),t.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(e){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,e)}resolveUrl(e,t){return!t&&this.importPath&&(t=Tn(this.importPath)),Tn(e,t)}static _parseTemplateContent(e,i,o){return i.dynamicFns=i.dynamicFns||this._properties,t._parseTemplateContent.call(this,e,i,o)}static _addTemplatePropertyEffect(e,i,o){return!In||i in this._properties||o.info.part.signature&&o.info.part.signature.static||o.info.part.hostProp||e.nestedTemplate||console.warn(`Property '${i}' used in template but not declared in 'properties'; attribute will not be observed.`),t._addTemplatePropertyEffect.call(this,e,i,o)}}})),Vs=Fs(HTMLElement);
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
class Us{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,t){this._asyncModule=e,this._callback=t,this._timer=this._asyncModule.run((()=>{this._timer=null,qs.delete(this),this._callback()}))}cancel(){this.isActive()&&(this._cancelAsync(),qs.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return null!=this._timer}static debounce(e,t,i){return e instanceof Us?e._cancelAsync():e=new Us,e.setConfig(t,i),e}}let qs=new Set;const Gs=function(e){qs.add(e)},Xs=function(){const e=Boolean(qs.size);return qs.forEach((e=>{try{e.flush()}catch(e){setTimeout((()=>{throw e}))}})),e};
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let Ws="string"==typeof document.head.style.touchAction,Ys="__polymerGestures",Js="__polymerGesturesHandled",Ks="__polymerGesturesTouchAction",Qs=["mousedown","mousemove","mouseup","click"],Zs=[0,1,4,2],tl=function(){try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}();function il(e){return Qs.indexOf(e)>-1}let ol=!1;function al(e){if(!il(e)&&"touchend"!==e)return Ws&&ol&&Hn?{passive:!0}:void 0}!function(){try{let e=Object.defineProperty({},"passive",{get(){ol=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){}}();let nl=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/);const rl=[],sl={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},ll={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function dl(e){return sl[e.localName]||!1}function cl(e){let t=Array.prototype.slice.call(e.labels||[]);if(!t.length){t=[];let i=e.getRootNode();if(e.id){let o=i.querySelectorAll(`label[for = ${e.id}]`);for(let e=0;e<o.length;e++)t.push(o[e])}}return t}let hl=function(e){let t=e.sourceCapabilities;if((!t||t.firesTouchEvents)&&(e[Js]={skip:!0},"click"===e.type)){let t=!1,i=fl(e);for(let e=0;e<i.length;e++){if(i[e].nodeType===Node.ELEMENT_NODE)if("label"===i[e].localName)rl.push(i[e]);else if(dl(i[e])){let o=cl(i[e]);for(let e=0;e<o.length;e++)t=t||rl.indexOf(o[e])>-1}if(i[e]===ml.mouse.target)return}if(t)return;e.preventDefault(),e.stopPropagation()}};function ul(e){let t=nl?["click"]:Qs;for(let i,o=0;o<t.length;o++)i=t[o],e?(rl.length=0,document.addEventListener(i,hl,!0)):document.removeEventListener(i,hl,!0)}function pl(e){let t=e.type;if(!il(t))return!1;if("mousemove"===t){let t=void 0===e.buttons?1:e.buttons;return e instanceof window.MouseEvent&&!tl&&(t=Zs[e.which]||0),Boolean(1&t)}return 0===(void 0===e.button?0:e.button)}let ml={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function gl(e,t,i){e.movefn=t,e.upfn=i,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i)}function bl(e){document.removeEventListener("mousemove",e.movefn),document.removeEventListener("mouseup",e.upfn),e.movefn=null,e.upfn=null}document.addEventListener("touchend",(function(e){ml.mouse.mouseIgnoreJob||ul(!0),ml.mouse.target=fl(e)[0],ml.mouse.mouseIgnoreJob=Us.debounce(ml.mouse.mouseIgnoreJob,Fr.after(2500),(function(){ul(),ml.mouse.target=null,ml.mouse.mouseIgnoreJob=null}))}),!!ol&&{passive:!0});const fl=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:e=>e.composedPath&&e.composedPath()||[],vl={},yl=[];function _l(e){const t=fl(e);return t.length>0?t[0]:e.target}function xl(e){let t,i=e.type,o=e.currentTarget.__polymerGestures;if(!o)return;let a=o[i];if(a){if(!e[Js]&&(e[Js]={},"touch"===i.slice(0,5))){let t=(e=e).changedTouches[0];if("touchstart"===i&&1===e.touches.length&&(ml.touch.id=t.identifier),ml.touch.id!==t.identifier)return;Ws||"touchstart"!==i&&"touchmove"!==i||function(e){let t=e.changedTouches[0],i=e.type;if("touchstart"===i)ml.touch.x=t.clientX,ml.touch.y=t.clientY,ml.touch.scrollDecided=!1;else if("touchmove"===i){if(ml.touch.scrollDecided)return;ml.touch.scrollDecided=!0;let i=function(e){let t="auto",i=fl(e);for(let e,o=0;o<i.length;o++)if(e=i[o],e[Ks]){t=e[Ks];break}return t}(e),o=!1,a=Math.abs(ml.touch.x-t.clientX),n=Math.abs(ml.touch.y-t.clientY);e.cancelable&&("none"===i?o=!0:"pan-x"===i?o=n>a:"pan-y"===i&&(o=a>n)),o?e.preventDefault():Cl("track")}}(e)}if(t=e[Js],!t.skip){for(let i,o=0;o<yl.length;o++)i=yl[o],a[i.name]&&!t[i.name]&&i.flow&&i.flow.start.indexOf(e.type)>-1&&i.reset&&i.reset();for(let o,n=0;n<yl.length;n++)o=yl[n],a[o.name]&&!t[o.name]&&(t[o.name]=!0,o[i](e))}}}function wl(e,t,i){return!!vl[t]&&(function(e,t,i){let o=vl[t],a=o.deps,n=o.name,r=e[Ys];r||(e[Ys]=r={});for(let t,i,o=0;o<a.length;o++)t=a[o],nl&&il(t)&&"click"!==t||(i=r[t],i||(r[t]=i={_count:0}),0===i._count&&e.addEventListener(t,xl,al(t)),i[n]=(i[n]||0)+1,i._count=(i._count||0)+1);e.addEventListener(t,i),o.touchAction&&function(e,t){Ws&&e instanceof HTMLElement&&Ur.run((()=>{e.style.touchAction=t}));e[Ks]=t}(e,o.touchAction)}(e,t,i),!0)}function Al(e,t,i){return!!vl[t]&&(function(e,t,i){let o=vl[t],a=o.deps,n=o.name,r=e[Ys];if(r)for(let t,i,o=0;o<a.length;o++)t=a[o],i=r[t],i&&i[n]&&(i[n]=(i[n]||1)-1,i._count=(i._count||1)-1,0===i._count&&e.removeEventListener(t,xl,al(t)));e.removeEventListener(t,i)}(e,t,i),!0)}function El(e){yl.push(e);for(let t=0;t<e.emits.length;t++)vl[e.emits[t]]=e}function Sl(e,t,i){let o=new Event(t,{bubbles:!0,cancelable:!0,composed:!0});if(o.detail=i,xr(e).dispatchEvent(o),o.defaultPrevented){let e=i.preventer||i.sourceEvent;e&&e.preventDefault&&e.preventDefault()}}function Cl(e){let t=function(e){for(let t,i=0;i<yl.length;i++){t=yl[i];for(let i,o=0;o<t.emits.length;o++)if(i=t.emits[o],i===e)return t}return null}(e);t.info&&(t.info.prevent=!0)}function Nl(e,t,i,o){t&&Sl(t,e,{x:i.clientX,y:i.clientY,sourceEvent:i,preventer:o,prevent:function(e){return Cl(e)}})}function Tl(e,t,i){if(e.prevent)return!1;if(e.started)return!0;let o=Math.abs(e.x-t),a=Math.abs(e.y-i);return o>=5||a>=5}function kl(e,t,i){if(!t)return;let o,a=e.moves[e.moves.length-2],n=e.moves[e.moves.length-1],r=n.x-e.x,s=n.y-e.y,l=0;a&&(o=n.x-a.x,l=n.y-a.y),Sl(t,"track",{state:e.state,x:i.clientX,y:i.clientY,dx:r,dy:s,ddx:o,ddy:l,sourceEvent:i,hover:function(){return function(e,t){let i=document.elementFromPoint(e,t),o=i;for(;o&&o.shadowRoot&&!window.ShadyDOM;){let a=o;if(o=o.shadowRoot.elementFromPoint(e,t),a===o)break;o&&(i=o)}return i}(i.clientX,i.clientY)}})}function Ol(e,t,i){let o=Math.abs(t.clientX-e.x),a=Math.abs(t.clientY-e.y),n=_l(i||t);!n||ll[n.localName]&&n.hasAttribute("disabled")||(isNaN(o)||isNaN(a)||o<=25&&a<=25||function(e){if("click"===e.type){if(0===e.detail)return!0;let t=_l(e);if(!t.nodeType||t.nodeType!==Node.ELEMENT_NODE)return!0;let i=t.getBoundingClientRect(),o=e.pageX,a=e.pageY;return!(o>=i.left&&o<=i.right&&a>=i.top&&a<=i.bottom)}return!1}(t))&&(e.prevent||Sl(n,"tap",{x:t.clientX,y:t.clientY,sourceEvent:t,preventer:i}))}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/El({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){bl(this.info)},mousedown:function(e){if(!pl(e))return;let t=_l(e),i=this;gl(this.info,(function(e){pl(e)||(Nl("up",t,e),bl(i.info))}),(function(e){pl(e)&&Nl("up",t,e),bl(i.info)})),Nl("down",t,e)},touchstart:function(e){Nl("down",_l(e),e.changedTouches[0],e)},touchend:function(e){Nl("up",_l(e),e.changedTouches[0],e)}}),El({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(e){this.moves.length>2&&this.moves.shift(),this.moves.push(e)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,bl(this.info)},mousedown:function(e){if(!pl(e))return;let t=_l(e),i=this,o=function(e){let o=e.clientX,a=e.clientY;Tl(i.info,o,a)&&(i.info.state=i.info.started?"mouseup"===e.type?"end":"track":"start","start"===i.info.state&&Cl("tap"),i.info.addMove({x:o,y:a}),pl(e)||(i.info.state="end",bl(i.info)),t&&kl(i.info,t,e),i.info.started=!0)};gl(this.info,o,(function(e){i.info.started&&o(e),bl(i.info)})),this.info.x=e.clientX,this.info.y=e.clientY},touchstart:function(e){let t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchmove:function(e){let t=_l(e),i=e.changedTouches[0],o=i.clientX,a=i.clientY;Tl(this.info,o,a)&&("start"===this.info.state&&Cl("tap"),this.info.addMove({x:o,y:a}),kl(this.info,t,i),this.info.state="track",this.info.started=!0)},touchend:function(e){let t=_l(e),i=e.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:i.clientX,y:i.clientY}),kl(this.info,t,i))}}),El({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(e){pl(e)&&(this.info.x=e.clientX,this.info.y=e.clientY)},click:function(e){pl(e)&&Ol(this.info,e)},touchstart:function(e){const t=e.changedTouches[0];this.info.x=t.clientX,this.info.y=t.clientY},touchend:function(e){Ol(this.info,e.changedTouches[0],e)}});const Pl=_r((e=>class extends e{_addEventListenerToNode(e,t,i){wl(e,t,i)||super._addEventListenerToNode(e,t,i)}_removeEventListenerFromNode(e,t,i){Al(e,t,i)||super._removeEventListenerFromNode(e,t,i)}})),Ll=e=>class extends e{static get properties(){return{theme:{type:String,readOnly:!0}}}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),"theme"===e&&this._setTheme(i)}},Bl=e=>class extends(Ll(e)){static finalize(){super.finalize();const e=this.prototype._template,t=this.template&&this.template.parentElement&&this.template.parentElement.id===this.is,i=Object.getPrototypeOf(this.prototype)._template;i&&!t&&Array.from(i.content.querySelectorAll("style[include]")).forEach((t=>{this._includeStyle(t.getAttribute("include"),e)})),this._includeMatchingThemes(e)}static _includeMatchingThemes(e){const t=Kn.prototype.modules;let i=!1;const o=this.is+"-default-theme";Object.keys(t).sort(((e,t)=>{const i=0===e.indexOf("vaadin-"),o=0===t.indexOf("vaadin-"),a=["lumo-","material-"],n=a.filter((t=>0===e.indexOf(t))).length>0,r=a.filter((e=>0===t.indexOf(e))).length>0;return i!==o?i?-1:1:n!==r?n?-1:1:0})).forEach((a=>{if(a!==o){const o=t[a].getAttribute("theme-for");o&&o.split(" ").forEach((t=>{new RegExp("^"+t.split("*").join(".*")+"$").test(this.is)&&(i=!0,this._includeStyle(a,e))}))}})),!i&&t[o]&&this._includeStyle(o,e)}static _includeStyle(e,t){if(t&&!t.content.querySelector(`style[include="${e}"]`)){const i=document.createElement("style");i.setAttribute("include",e),t.content.appendChild(i)}}}
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/;let Ml=!1;window.addEventListener("keydown",(()=>{Ml=!0}),{capture:!0}),window.addEventListener("mousedown",(()=>{Ml=!1}),{capture:!0});const Hl=e=>class extends((e=>class extends e{static get properties(){var e={tabindex:{type:Number,value:0,reflectToAttribute:!0,observer:"_tabindexChanged"}};return window.ShadyDOM&&(e.tabIndex=e.tabindex),e}})(e)){static get properties(){return{autofocus:{type:Boolean},_previousTabIndex:{type:Number},disabled:{type:Boolean,observer:"_disabledChanged",reflectToAttribute:!0},_isShiftTabbing:{type:Boolean}}}get _keyboardActive(){return Ml}ready(){this.addEventListener("focusin",(e=>{e.composedPath()[0]===this?this.contains(e.relatedTarget)||this._focus():-1===e.composedPath().indexOf(this.focusElement)||this.disabled||this._setFocused(!0)})),this.addEventListener("focusout",(e=>this._setFocused(!1))),super.ready();const e=e=>{e.composed||e.target.dispatchEvent(new CustomEvent(e.type,{bubbles:!0,composed:!0,cancelable:!1}))};this.shadowRoot.addEventListener("focusin",e),this.shadowRoot.addEventListener("focusout",e),this.addEventListener("keydown",(e=>{if(!e.defaultPrevented&&9===e.keyCode)if(e.shiftKey)this._isShiftTabbing=!0,HTMLElement.prototype.focus.apply(this),this._setFocused(!1),setTimeout((()=>this._isShiftTabbing=!1),0);else{const e=window.navigator.userAgent.match(/Firefox\/(\d\d\.\d)/);if(e&&parseFloat(e[1])>=63&&parseFloat(e[1])<66&&this.parentNode&&this.nextSibling){const e=document.createElement("input");e.style.position="absolute",e.style.opacity="0",e.tabIndex=this.tabIndex,this.parentNode.insertBefore(e,this.nextSibling),e.focus(),e.addEventListener("focusout",(()=>this.parentNode.removeChild(e)))}}})),this.autofocus&&!this.disabled&&window.requestAnimationFrame((()=>{this._focus(),this._setFocused(!0),this.setAttribute("focus-ring","")}))}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("focused")&&this._setFocused(!1)}_setFocused(e){e?this.setAttribute("focused",""):this.removeAttribute("focused"),e&&Ml?this.setAttribute("focus-ring",""):this.removeAttribute("focus-ring")}get focusElement(){return window.console.warn(`Please implement the 'focusElement' property in <${this.localName}>`),this}_focus(){this.focusElement&&!this._isShiftTabbing&&(this.focusElement.focus(),this._setFocused(!0))}focus(){this.focusElement&&!this.disabled&&(this.focusElement.focus(),this._setFocused(!0))}blur(){this.focusElement&&(this.focusElement.blur(),this._setFocused(!1))}_disabledChanged(e){this.focusElement.disabled=e,e?(this.blur(),this._previousTabIndex=this.tabindex,this.tabindex=-1,this.setAttribute("aria-disabled","true")):(void 0!==this._previousTabIndex&&(this.tabindex=this._previousTabIndex),this.removeAttribute("aria-disabled"))}_tabindexChanged(e){void 0!==e&&(this.focusElement.tabIndex=e),this.disabled&&this.tabindex&&(-1!==this.tabindex&&(this._previousTabIndex=this.tabindex),this.tabindex=e=void 0),window.ShadyDOM&&this.setProperties({tabIndex:e,tabindex:e})}click(){this.disabled||super.click()}}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/;
/**
@license
Copyright (c) 2020 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
class Dl{static detectScrollType(){const e=document.createElement("div");e.textContent="ABCD",e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e);let t="reverse";return e.scrollLeft>0?t="default":(e.scrollLeft=2,e.scrollLeft<2&&(t="negative")),document.body.removeChild(e),t}static getNormalizedScrollLeft(e,t,i){const{scrollLeft:o}=i;if("rtl"!==t||!e)return o;switch(e){case"negative":return i.scrollWidth-i.clientWidth+o;case"reverse":return i.scrollWidth-i.clientWidth-o}return o}static setNormalizedScrollLeft(e,t,i,o){if("rtl"===t&&e)switch(e){case"negative":i.scrollLeft=i.clientWidth-i.scrollWidth+o;break;case"reverse":i.scrollLeft=i.scrollWidth-i.clientWidth-o;break;default:i.scrollLeft=o}else i.scrollLeft=o}}const Rl=[];let zl;new MutationObserver((function(){const e=$l();Rl.forEach((t=>{Il(t,e)}))})).observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]});const Il=function(e,t){t?e.setAttribute("dir",t):e.removeAttribute("dir")},$l=function(){return document.documentElement.getAttribute("dir")},jl=e=>class extends e{static get properties(){return{dir:{type:String,readOnly:!0}}}static finalize(){super.finalize(),zl||(zl=Dl.detectScrollType())}connectedCallback(){super.connectedCallback(),this.hasAttribute("dir")||(this.__subscribe(),Il(this,$l()))}attributeChangedCallback(e,t,i){if(super.attributeChangedCallback(e,t,i),"dir"!==e)return;const o=i===$l()&&-1===Rl.indexOf(this),a=!i&&t&&-1===Rl.indexOf(this),n=i!==$l()&&t===$l();o||a?(this.__subscribe(),Il(this,$l())):n&&this.__subscribe(!1)}disconnectedCallback(){super.disconnectedCallback(),this.__subscribe(!1),this.removeAttribute("dir")}__subscribe(e=!0){e?-1===Rl.indexOf(this)&&Rl.push(this):Rl.indexOf(this)>-1&&Rl.splice(Rl.indexOf(this),1)}__getNormalizedScrollLeft(e){return Dl.getNormalizedScrollLeft(zl,this.getAttribute("dir")||"ltr",e)}__setNormalizedScrollLeft(e,t){return Dl.setNormalizedScrollLeft(zl,this.getAttribute("dir")||"ltr",e,t)}},Fl=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,Vl=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function Ul(e,t){if("function"!=typeof e)return;const i=Fl.exec(e.toString());if(i)try{e=new Function(i[1])}catch(e){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",e)}return e(t)}window.Vaadin=window.Vaadin||{};const ql=function(e,t){if(window.Vaadin.developmentMode)return Ul(e,t)};function Gl(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!!localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&(Vl?!(Vl&&Object.keys(Vl).map((e=>Vl[e])).filter((e=>e.productionMode)).length>0):!Ul((function(){return!0})))}catch(e){return!1}}());const Xl=function(){return ql(Gl)};let Wl;window.Vaadin||(window.Vaadin={}),window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.developmentModeCallback=window.Vaadin.developmentModeCallback||{},window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]=function(){Xl&&Xl()};const Yl=new Set,Jl=e=>class extends(jl(e)){static finalize(){super.finalize();const{is:e}=this;e&&!Yl.has(e)&&(window.Vaadin.registrations.push(this),Yl.add(e),window.Vaadin.developmentModeCallback&&(Wl=Us.debounce(Wl,Vr,(()=>{window.Vaadin.developmentModeCallback["vaadin-usage-statistics"]()})),Gs(Wl)))}constructor(){super(),null===document.doctype&&console.warn('Vaadin components require the "standards mode" declaration. Please add <!DOCTYPE html> to the HTML document.')}}
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/;class Kl extends(Jl(Hl(Bl(Pl(Vs))))){static get template(){return fr`
    <style>
      :host {
        display: inline-block;
        position: relative;
        outline: none;
        white-space: nowrap;
      }

      :host([hidden]) {
        display: none !important;
      }

      /* Ensure the button is always aligned on the baseline */
      .vaadin-button-container::before {
        content: "\\2003";
        display: inline-block;
        width: 0;
      }

      .vaadin-button-container {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        width: 100%;
        height: 100%;
        min-height: inherit;
        text-shadow: inherit;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      [part="prefix"],
      [part="suffix"] {
        flex: none;
      }

      [part="label"] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      #button {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
        opacity: 0;
        cursor: inherit;
      }
    </style>
    <div class="vaadin-button-container">
      <div part="prefix">
        <slot name="prefix"></slot>
      </div>
      <div part="label">
        <slot></slot>
      </div>
      <div part="suffix">
        <slot name="suffix"></slot>
      </div>
    </div>
    <button id="button" type="button"></button>
`}static get is(){return"vaadin-button"}static get version(){return"2.4.0"}ready(){super.ready(),this.setAttribute("role","button"),this.$.button.setAttribute("role","presentation"),this._addActiveListeners(),window.ShadyDOM&&window.ShadyDOM.flush()}disconnectedCallback(){super.disconnectedCallback(),this.hasAttribute("active")&&this.removeAttribute("active")}_addActiveListeners(){wl(this,"down",(()=>!this.disabled&&this.setAttribute("active",""))),wl(this,"up",(()=>this.removeAttribute("active"))),this.addEventListener("keydown",(e=>!this.disabled&&[13,32].indexOf(e.keyCode)>=0&&this.setAttribute("active",""))),this.addEventListener("keyup",(()=>this.removeAttribute("active"))),this.addEventListener("blur",(()=>this.removeAttribute("active")))}get focusElement(){return this.$.button}}customElements.define(Kl.is,Kl);const Ql=fr`<dom-module id="lumo-progress-bar" theme-for="vaadin-progress-bar">
  <template>
    <style>
      :host {
        height: calc(var(--lumo-size-l) / 10);
        margin: var(--lumo-space-s) 0;
      }

      [part="bar"] {
        border-radius: var(--lumo-border-radius);
        background-color: var(--lumo-contrast-10pct);
      }

      [part="value"] {
        border-radius: var(--lumo-border-radius);
        background-color: var(--lumo-primary-color);
        /* Use width instead of transform to preserve border radius */
        transform: none;
        width: calc(var(--vaadin-progress-value) * 100%);
        will-change: width;
        transition: 0.1s width linear;
      }

      /* Indeterminate mode */

      :host([indeterminate]) [part="value"] {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        width: 100%;
        background-color: transparent !important;
        background-image: var(--lumo-progress-indeterminate-progress-bar-background);
        opacity: 0.75;
        will-change: transform;
        animation: vaadin-progress-indeterminate 1.6s infinite cubic-bezier(.645, .045, .355, 1);
      }

      @keyframes vaadin-progress-indeterminate {
        0% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
        }

        25% {
          transform: scaleX(0.4);
        }

        50% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background);
        }

        50.1% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }

        75% {
          transform: scaleX(0.4);
        }

        100% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }
      }

      :host(:not([aria-valuenow])) [part="value"]::before,
      :host([indeterminate]) [part="value"]::before {
        content: "";
        display: block;
        width: 100%;
        height: 100%;
        border-radius: inherit;
        background-color: var(--lumo-primary-color);
        will-change: opacity;
        animation: vaadin-progress-pulse3 1.6s infinite cubic-bezier(.645, .045, .355, 1);
      }

      @keyframes vaadin-progress-pulse3 {
        0% { opacity: 1; }
        10% { opacity: 0; }
        40% { opacity: 0; }
        50% { opacity: 1; }
        50.1% { opacity: 1; }
        60% { opacity: 0; }
        90% { opacity: 0; }
        100% { opacity: 1; }
      }

      /* Contrast color */

      :host([theme~="contrast"]) [part="value"],
      :host([theme~="contrast"]) [part="value"]::before {
        background-color: var(--lumo-contrast-80pct);
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-80pct));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-60pct));
      }

      /* Error color */

      :host([theme~="error"]) [part="value"],
      :host([theme~="error"]) [part="value"]::before {
        background-color: var(--lumo-error-color);
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
      }

      /* Primary color */

      :host([theme~="success"]) [part="value"],
      :host([theme~="success"]) [part="value"]::before {
        background-color: var(--lumo-success-color);
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to right, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to left, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
      }

      /* RTL specific styles */

      :host([indeterminate][dir="rtl"]) [part="value"] {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-primary-color-10pct) 10%, var(--lumo-primary-color));
        animation: vaadin-progress-indeterminate-rtl 1.6s infinite cubic-bezier(.355, .045, .645, 1);
      }

      :host(:not([aria-valuenow])[dir="rtl"]) [part="value"]::before,
      :host([indeterminate][dir="rtl"]) [part="value"]::before {
        animation: vaadin-progress-pulse3 1.6s infinite cubic-bezier(.355, .045, .645, 1);
      }

      @keyframes vaadin-progress-indeterminate-rtl {
        0% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
        }

        25% {
          transform: scaleX(0.4);
        }

        50% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background);
        }

        50.1% {
          transform: scaleX(0.015);
          transform-origin: 0% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }

        75% {
          transform: scaleX(0.4);
        }

        100% {
          transform: scaleX(0.015);
          transform-origin: 100% 0%;
          background-image: var(--lumo-progress-indeterminate-progress-bar-background-reverse);
        }
      }

      /* Contrast color */

      :host([theme~="contrast"][dir="rtl"]) [part="value"],
      :host([theme~="contrast"][dir="rtl"]) [part="value"]::before {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-80pct));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-contrast-5pct) 10%, var(--lumo-contrast-60pct));
      }

      /* Error color */

      :host([theme~="error"][dir="rtl"]) [part="value"],
      :host([theme~="error"][dir="rtl"]) [part="value"]::before {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-error-color-10pct) 10%, var(--lumo-error-color));
      }

      /* Primary color */

      :host([theme~="success"][dir="rtl"]) [part="value"],
      :host([theme~="success"][dir="rtl"]) [part="value"]::before {
        --lumo-progress-indeterminate-progress-bar-background: linear-gradient(to left, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
        --lumo-progress-indeterminate-progress-bar-background-reverse: linear-gradient(to right, var(--lumo-success-color-10pct) 10%, var(--lumo-success-color));
      }
    </style>
  </template>
</dom-module><custom-style>
  <style>
    @keyframes vaadin-progress-pulse3 {
      0% { opacity: 1; }
      10% { opacity: 0; }
      40% { opacity: 0; }
      50% { opacity: 1; }
      50.1% { opacity: 1; }
      60% { opacity: 0; }
      90% { opacity: 0; }
      100% { opacity: 1; }
    }
  </style>
</custom-style>`;document.head.appendChild(Ql.content);
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
const Zl=e=>class extends e{static get properties(){return{value:{type:Number,observer:"_valueChanged"},min:{type:Number,value:0,observer:"_minChanged"},max:{type:Number,value:1,observer:"_maxChanged"},indeterminate:{type:Boolean,value:!1,reflectToAttribute:!0}}}static get observers(){return["_normalizedValueChanged(value, min, max)"]}ready(){super.ready(),this.setAttribute("role","progressbar")}_normalizedValueChanged(e,t,i){const o=this._normalizeValue(e,t,i);this.style.setProperty("--vaadin-progress-value",o),this.updateStyles({"--vaadin-progress-value":String(o)})}_valueChanged(e,t){this.setAttribute("aria-valuenow",e)}_minChanged(e,t){this.setAttribute("aria-valuemin",e)}_maxChanged(e,t){this.setAttribute("aria-valuemax",e)}_normalizeValue(e,t,i){let o;return e||0==e?t>=i?o=1:(o=(e-t)/(i-t),o=Math.min(Math.max(o,0),1)):o=0,o}}
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/;class ed extends(Jl(Bl(Zl(Vs)))){static get template(){return fr`
    <style>
      :host {
        display: block;
        width: 100%; /* prevent collapsing inside non-stretching column flex */
        height: 8px;
      }

      :host([hidden]) {
        display: none !important;
      }

      [part="bar"] {
        height: 100%;
      }

      [part="value"] {
        height: 100%;
        transform-origin: 0 50%;
        transform: scaleX(var(--vaadin-progress-value));
      }

      /* RTL specific styles */

      :host([dir="rtl"]) [part="value"] {
        transform-origin: 100% 50%;
      }
    </style>

    <div part="bar">
      <div part="value"></div>
    </div>
`}static get is(){return"vaadin-progress-bar"}static get version(){return"1.3.0"}}customElements.define(ed.is,ed);const td=fr`<dom-module id="lumo-upload" theme-for="vaadin-upload">
  <template>
    <style>
      :host {
        line-height: var(--lumo-line-height-m);
      }

      :host(:not([nodrop])) {
        overflow: hidden;
        border: 1px dashed var(--lumo-contrast-20pct);
        border-radius: var(--lumo-border-radius);
        padding: var(--lumo-space-m);
        transition: background-color 0.6s, border-color 0.6s;
      }

      [part="primary-buttons"] > * {
        display: inline-block;
        white-space: nowrap;
      }

      [part="drop-label"] {
        display: inline-block;
        white-space: normal;
        padding: 0 var(--lumo-space-s);
        color: var(--lumo-secondary-text-color);
        font-family: var(--lumo-font-family);
      }

      :host([dragover-valid]) {
        border-color: var(--lumo-primary-color-50pct);
        background: var(--lumo-primary-color-10pct);
        transition: background-color 0.1s, border-color 0.1s;
      }

      :host([dragover-valid]) [part="drop-label"] {
        color: var(--lumo-primary-text-color);
      }

      :host([max-files-reached]) [part='drop-label'] {
        color: var(--lumo-disabled-text-color);
      }

      [part="drop-label-icon"] {
        display: inline-block;
      }

      [part="drop-label-icon"]::before {
        content: var(--lumo-icons-upload);
        font-family: lumo-icons;
        font-size: var(--lumo-icon-size-m);
        line-height: 1;
        vertical-align: -.25em;
      }
    </style>
  </template>
</dom-module><dom-module id="lumo-upload-file" theme-for="vaadin-upload-file">
  <template>
    <style include="lumo-field-button">
      :host {
        padding: var(--lumo-space-s) 0;
      }

      :host(:not(:first-child)) {
        border-top: 1px solid var(--lumo-contrast-10pct);
      }

      [part="row"] {
        display: flex;
        align-items: baseline;
        justify-content: space-between;
      }

      [part="status"],
      [part="error"] {
        color: var(--lumo-secondary-text-color);
        font-size: var(--lumo-font-size-s);
      }

      [part="info"] {
        display: flex;
        align-items: baseline;
        flex: auto;
      }

      [part="meta"] {
        width: 0.001px;
        flex: 1 1 auto;
      }

      [part="name"] {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      [part="commands"] {
        display: flex;
        align-items: baseline;
        flex: none;
      }

      [part="done-icon"],
      [part="warning-icon"] {
        margin-right: var(--lumo-space-xs);
      }

      /* When both icons are hidden, let us keep space for one */
      [part="done-icon"][hidden] + [part="warning-icon"][hidden] {
        display: block !important;
        visibility: hidden;
      }

      [part="done-icon"],
      [part="warning-icon"] {
        font-size: var(--lumo-icon-size-m);
        font-family: 'lumo-icons';
        line-height: 1;
      }

      [part="start-button"],
      [part="retry-button"],
      [part="clear-button"] {
        flex: none;
        margin-left: var(--lumo-space-xs);
      }

      [part="done-icon"]::before,
      [part="warning-icon"]::before,
      [part="start-button"]::before,
      [part="retry-button"]::before,
      [part="clear-button"]::before {
        vertical-align: -.25em;
      }

      [part="done-icon"]::before {
        content: var(--lumo-icons-checkmark);
        color: var(--lumo-primary-text-color);
      }

      [part="warning-icon"]::before {
        content: var(--lumo-icons-error);
        color: var(--lumo-error-text-color);
      }

      [part="start-button"]::before {
        content: var(--lumo-icons-play);
      }

      [part="retry-button"]::before {
        content: var(--lumo-icons-reload);
      }

      [part="clear-button"]::before {
        content: var(--lumo-icons-cross);
      }

      [part="error"] {
        color: var(--lumo-error-text-color);
      }

      [part="progress"] {
        width: auto;
        margin-left: calc(var(--lumo-icon-size-m) + var(--lumo-space-xs));
        margin-right: calc(var(--lumo-icon-size-m) + var(--lumo-space-xs));
      }

      [part="progress"][complete],
      [part="progress"][error] {
        display: none;
      }

    </style>
  </template>
</dom-module>`;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
function id(e,t,i,o,a){let n;a&&(n="object"==typeof i&&null!==i,n&&(o=e.__dataTemp[t]));let r=o!==i&&(o==o||i==i);return n&&r&&(e.__dataTemp[t]=i),r}document.head.appendChild(td.content);const od=_r((e=>class extends e{_shouldPropertyChange(e,t,i){return id(this,e,t,i,!0)}})),ad=_r((e=>class extends e{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(e,t,i){return id(this,e,t,i,this.mutableData)}}));od._mutablePropertyChange=id;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let nd=null;function rd(){return nd}rd.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:rd,writable:!0}});const sd=zs(rd),ld=od(sd);const dd=zs(class{});class cd extends dd{constructor(e){super(),this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let t=[];this.children=t;for(let e=this.root.firstChild;e;e=e.nextSibling)t.push(e),e.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let i=this.__templatizeOptions;(e&&i.instanceProps||!i.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let e in this.__hostProps)this._setPendingProperty(e,this.__dataHost["_host_"+e]);for(let t in e)this._setPendingProperty(t,e[t])}forwardHostProp(e,t){this._setPendingPropertyOrPath(e,t,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,t,i){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,t,(e=>{e.model=this,i(e)}));else{let o=this.__dataHost.__dataHost;o&&o._addEventListenerToNode(e,t,i)}}_showHideChildren(e){!function(e,t){for(let i=0;i<t.length;i++){let o=t[i];if(Boolean(e)!=Boolean(o.__hideTemplateChildren__))if(o.nodeType===Node.TEXT_NODE)e?(o.__polymerTextContent__=o.textContent,o.textContent=""):o.textContent=o.__polymerTextContent__;else if("slot"===o.localName)if(e)o.__polymerReplaced__=document.createComment("hidden-slot"),xr(xr(o).parentNode).replaceChild(o.__polymerReplaced__,o);else{const e=o.__polymerReplaced__;e&&xr(xr(e).parentNode).replaceChild(o,e)}else o.style&&(e?(o.__polymerDisplay__=o.style.display,o.style.display="none"):o.style.display=o.__polymerDisplay__);o.__hideTemplateChildren__=e,o._showHideChildren&&o._showHideChildren(e)}}(e,this.children)}_setUnmanagedPropertyToNode(e,t,i){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&"textContent"==t?e.__polymerTextContent__=i:super._setUnmanagedPropertyToNode(e,t,i)}get parentModel(){let e=this.__parentModel;if(!e){let t;e=this;do{e=e.__dataHost.__dataHost}while((t=e.__templatizeOptions)&&!t.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}}cd.prototype.__dataHost,cd.prototype.__templatizeOptions,cd.prototype._methodHost,cd.prototype.__templatizeOwner,cd.prototype.__hostProps;const hd=od(cd);function ud(e){let t=e.__dataHost;return t&&t._methodHost||t}function pd(e,t,i){let o=i.mutableData?hd:cd;fd.mixin&&(o=fd.mixin(o));let a=class extends o{};return a.prototype.__templatizeOptions=i,a.prototype._bindTemplate(e),function(e,t,i,o){let a=i.hostProps||{};for(let t in o.instanceProps){delete a[t];let i=o.notifyInstanceProp;i&&e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:bd(t,i)})}if(o.forwardHostProp&&t.__dataHost)for(let t in a)i.hasHostProps||(i.hasHostProps=!0),e.prototype._addPropertyEffect(t,e.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:function(e,t,i){e.__dataHost._setPendingPropertyOrPath("_host_"+t,i[t],!0,!0)}})}(a,e,t,i),a}function md(e,t,i,o){let a=i.forwardHostProp;if(a&&t.hasHostProps){const s="template"==e.localName;let l=t.templatizeTemplateClass;if(!l){if(s){let e=i.mutableData?ld:sd;class o extends e{}l=t.templatizeTemplateClass=o}else{const i=e.constructor;class o extends i{}l=t.templatizeTemplateClass=o}let n=t.hostProps;for(let e in n)l.prototype._addPropertyEffect("_host_"+e,l.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:gd(e,a)}),l.prototype._createNotifyingProperty("_host_"+e);In&&o&&function(e,t,i){const o=i.constructor._properties,{propertyEffects:a}=e,{instanceProps:n}=t;for(let e in a)if(!(o[e]||n&&n[e])){const t=a[e];for(let i=0;i<t.length;i++){const{part:o}=t[i].info;if(!o.signature||!o.signature.static){console.warn(`Property '${e}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}(t,i,o)}if(e.__dataProto&&Object.assign(e.__data,e.__dataProto),s)r=l,nd=n=e,Object.setPrototypeOf(n,r.prototype),new r,nd=null,e.__dataTemp={},e.__dataPending=null,e.__dataOld=null,e._enableProperties();else{Object.setPrototypeOf(e,l.prototype);const i=t.hostProps;for(let t in i)if(t="_host_"+t,t in e){const i=e[t];delete e[t],e.__data[t]=i}}}var n,r}function gd(e,t){return function(e,i,o){t.call(e.__templatizeOwner,i.substring("_host_".length),o[i])}}function bd(e,t){return function(e,i,o){t.call(e.__templatizeOwner,e,i,o[i])}}function fd(e,t,i){if(Dn&&!ud(e))throw new Error("strictTemplatePolicy: template owner not trusted");if(i=i||{},e.__templatizeOwner)throw new Error("A <template> can only be templatized once");e.__templatizeOwner=t;let o=(t?t.constructor:cd)._parseTemplate(e),a=o.templatizeInstanceClass;a||(a=pd(e,o,i),o.templatizeInstanceClass=a);const n=ud(e);md(e,o,i,n);let r=class extends a{};return r.prototype._methodHost=n,r.prototype.__dataHost=e,r.prototype.__templatizeOwner=t,r.prototype.__hostProps=o.hostProps,r=r,r}
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
let vd=!1;
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
const yd=ad(Vs);class _d extends yd{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!qn,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super(),this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),function(){if(zn&&!Pn){if(!vd){vd=!0;const e=document.createElement("style");e.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(e)}return!0}return!1}()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=xr(xr(this).parentNode);for(let t=0;t<this.__instances.length;t++)this.__attachInstance(t,e)}}__ensureTemplatized(){if(!this.__ctor){const e=this;let t=this.template=e._templateInfo?e:this.querySelector("template");if(!t){let e=new MutationObserver((()=>{if(!this.querySelector("template"))throw new Error("dom-repeat requires a <template> child");e.disconnect(),this.__render()}));return e.observe(this,{childList:!0}),!1}let i={};i[this.as]=!0,i[this.indexAs]=!0,i[this.itemsIndexAs]=!0,this.__ctor=fd(t,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:i,forwardHostProp:function(e,t){let i=this.__instances;for(let o,a=0;a<i.length&&(o=i[a]);a++)o.forwardHostProp(e,t)},notifyInstanceProp:function(e,t,i){if((o=this.as)===(a=t)||Er(o,a)||Sr(o,a)){let o=e[this.itemsIndexAs];t==this.as&&(this.items[o]=i);let a=Cr(this.as,`${JSCompiler_renameProperty("items",this)}.${o}`,t);this.notifyPath(a,i)}var o,a}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if("string"==typeof e){let t=e,i=this.__getMethodHost();return function(){return i[t].apply(i,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn)if(e){if(this.__observePaths){let t=this.__observePaths;for(let i=0;i<t.length;i++)0===e.indexOf(t[i])&&this.__debounceRender(this.__render,this.delay)}}else this.__debounceRender(this.__render,this.delay)}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||("items"===e.path&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(e,t=0){this.__renderDebouncer=Us.debounce(this.__renderDebouncer,t>0?Fr.after(t):Ur,e.bind(this)),Gs(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),function(){let e,t;do{e=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),t=Xs()}while(e||t)}()}__render(){if(!this.__ensureTemplatized())return;let e=this.items||[];const t=this.__sortAndFilterItems(e),i=this.__calculateLimit(t.length);this.__updateInstances(e,i,t),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame((()=>this.__continueChunking()))),this._setRenderedItemCount(this.__instances.length),qn&&!this.notifyDomChange||this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(e){let t=new Array(e.length);for(let i=0;i<e.length;i++)t[i]=i;return this.__filterFn&&(t=t.filter(((t,i,o)=>this.__filterFn(e[t],i,o)))),this.__sortFn&&t.sort(((t,i)=>this.__sortFn(e[t],e[i]))),t}__calculateLimit(e){let t=e;const i=this.__instances.length;if(this.initialCount){let o;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(t=Math.min(e,this.initialCount),o=Math.max(t-i,0),this.__chunkCount=o||1):(o=Math.min(Math.max(e-i,0),this.__chunkCount),t=Math.min(i+o,e)),this.__shouldMeasureChunk=o===this.__chunkCount,this.__shouldContinueChunking=t<e,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,t}__continueChunking(){if(this.__shouldMeasureChunk){const e=performance.now()-this.__renderStartTime,t=this._targetFrameTime/e;this.__chunkCount=Math.round(this.__chunkCount*t)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(e,t,i){const o=this.__itemsIdxToInstIdx={};let a;for(a=0;a<t;a++){let t=this.__instances[a],n=i[a],r=e[n];o[n]=a,t?(t._setPendingProperty(this.as,r),t._setPendingProperty(this.indexAs,a),t._setPendingProperty(this.itemsIndexAs,n),t._flushProperties()):this.__insertInstance(r,a,n)}for(let e=this.__instances.length-1;e>=a;e--)this.__detachAndRemoveInstance(e)}__detachInstance(e){let t=this.__instances[e];const i=xr(t.root);for(let e=0;e<t.children.length;e++){let o=t.children[e];i.appendChild(o)}return t}__attachInstance(e,t){let i=this.__instances[e];t.insertBefore(i.root,this)}__detachAndRemoveInstance(e){this.__detachInstance(e),this.__instances.splice(e,1)}__stampInstance(e,t,i){let o={};return o[this.as]=e,o[this.indexAs]=t,o[this.itemsIndexAs]=i,new this.__ctor(o)}__insertInstance(e,t,i){const o=this.__stampInstance(e,t,i);let a=this.__instances[t+1],n=a?a.children[0]:this;return xr(xr(this).parentNode).insertBefore(o.root,n),this.__instances[t]=o,o}_showHideChildren(e){for(let t=0;t<this.__instances.length;t++)this.__instances[t]._showHideChildren(e)}__handleItemPath(e,t){let i=e.slice(6),o=i.indexOf("."),a=o<0?i:i.substring(0,o);if(a==parseInt(a,10)){let e=o<0?"":i.substring(o+1);this.__handleObservedPaths(e);let n=this.__itemsIdxToInstIdx[a],r=this.__instances[n];if(r){let i=this.as+(e?"."+e:"");r._setPendingPropertyOrPath(i,t,!1,!0),r._flushProperties()}return!0}}itemForElement(e){let t=this.modelForElement(e);return t&&t[this.as]}indexForElement(e){let t=this.modelForElement(e);return t&&t[this.indexAs]}modelForElement(e){return function(e,t){let i;for(;t;)if(i=t.__dataHost?t:t.__templatizeInstance){if(i.__dataHost==e)return i;t=i.__dataHost}else t=xr(t).parentNode;return null}(this.template,e)}}customElements.define(_d.is,_d);const xd=document.createElement("template");xd.innerHTML="<custom-style>\n  <style>\n    @font-face {\n      font-family: 'vaadin-upload-icons';\n      src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAABmAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgDxIF5mNtYXAAAAFoAAAAVAAAAFQXVtKMZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAfQAAAH0bBJxYWhlYWQAAAO4AAAANgAAADYPD267aGhlYQAAA/AAAAAkAAAAJAfCA8tobXR4AAAEFAAAACgAAAAoHgAAx2xvY2EAAAQ8AAAAFgAAABYCSgHsbWF4cAAABFQAAAAgAAAAIAAOADVuYW1lAAAEdAAAAhYAAAIWmmcHf3Bvc3QAAAaMAAAAIAAAACAAAwAAAAMDtwGQAAUAAAKZAswAAACPApkCzAAAAesAMwEJAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QUDwP/AAEADwABAAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkF//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAgAA/8AEAAPAABkAMgAAEz4DMzIeAhczLgMjIg4CBycRIScFIRcOAyMiLgInIx4DMzI+AjcXphZGWmo6SH9kQwyADFiGrmJIhXJbIEYBAFoDWv76YBZGXGw8Rn5lRQyADFmIrWBIhHReIkYCWjJVPSIyVnVDXqN5RiVEYTxG/wBa2loyVT0iMlZ1Q16jeUYnRWE5RgAAAAABAIAAAAOAA4AAAgAAExEBgAMAA4D8gAHAAAAAAwAAAAAEAAOAAAIADgASAAAJASElIiY1NDYzMhYVFAYnETMRAgD+AAQA/gAdIyMdHSMjXYADgPyAgCMdHSMjHR0jwAEA/wAAAQANADMD5gNaAAUAACUBNwUBFwHT/jptATMBppMzAU2a4AIgdAAAAAEAOv/6A8YDhgALAAABJwkBBwkBFwkBNwEDxoz+xv7GjAFA/sCMAToBOoz+wAL6jP7AAUCM/sb+xowBQP7AjAE6AAAAAwAA/8AEAAPAAAcACwASAAABFSE1IREhEQEjNTMJAjMRIRECwP6A/sAEAP0AgIACQP7A/sDAAQABQICA/oABgP8AgAHAAUD+wP6AAYAAAAABAAAAAQAAdhiEdV8PPPUACwQAAAAAANX4FR8AAAAA1fgVHwAA/8AEAAPAAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAQAAAEAAAAAAAAAAAAAAAAAAAAKBAAAAAAAAAAAAAAAAgAAAAQAAAAEAACABAAAAAQAAA0EAAA6BAAAAAAAAAAACgAUAB4AagB4AJwAsADSAPoAAAABAAAACgAzAAMAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAADgCuAAEAAAAAAAEAEwAAAAEAAAAAAAIABwDMAAEAAAAAAAMAEwBaAAEAAAAAAAQAEwDhAAEAAAAAAAUACwA5AAEAAAAAAAYAEwCTAAEAAAAAAAoAGgEaAAMAAQQJAAEAJgATAAMAAQQJAAIADgDTAAMAAQQJAAMAJgBtAAMAAQQJAAQAJgD0AAMAAQQJAAUAFgBEAAMAAQQJAAYAJgCmAAMAAQQJAAoANAE0dmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzVmVyc2lvbiAxLjAAVgBlAHIAcwBpAG8AbgAgADEALgAwdmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzdmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzUmVndWxhcgBSAGUAZwB1AGwAYQBydmFhZGluLXVwbG9hZC1pY29ucwB2AGEAYQBkAGkAbgAtAHUAcABsAG8AYQBkAC0AaQBjAG8AbgBzRm9udCBnZW5lcmF0ZWQgYnkgSWNvTW9vbi4ARgBvAG4AdAAgAGcAZQBuAGUAcgBhAHQAZQBkACAAYgB5ACAASQBjAG8ATQBvAG8AbgAuAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==) format('woff');\n      font-weight: normal;\n      font-style: normal;\n    }\n  </style>\n</custom-style>",document.head.appendChild(xd.content);
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
class wd extends(Bl(Vs)){static get template(){return fr`
    <style>
      :host {
        display: block;
      }

      [hidden] {
        display: none;
      }
    </style>

    <div part="row">
      <div part="info">
        <div part="done-icon" hidden\$="[[!file.complete]]"></div>
        <div part="warning-icon" hidden\$="[[!file.error]]"></div>

        <div part="meta">
          <div part="name" id="name">[[file.name]]</div>
          <div part="status" hidden\$="[[!file.status]]" id="status">[[file.status]]</div>
          <div part="error" id="error" hidden\$="[[!file.error]]">[[file.error]]</div>
        </div>
      </div>
      <div part="commands">
        <div part="start-button" file-event="file-start" on-click="_fireFileEvent" hidden\$="[[!file.held]]"></div>
        <div part="retry-button" file-event="file-retry" on-click="_fireFileEvent" hidden\$="[[!file.error]]"></div>
        <div part="clear-button" file-event="file-abort" on-click="_fireFileEvent"></div>
      </div>
    </div>

    <vaadin-progress-bar part="progress" id="progress" value\$="[[_formatProgressValue(file.progress)]]" error\$="[[file.error]]" indeterminate\$="[[file.indeterminate]]" uploading\$="[[file.uploading]]" complete\$="[[file.complete]]">
    </vaadin-progress-bar>
`}static get is(){return"vaadin-upload-file"}static get properties(){return{file:Object}}static get observers(){return["_fileAborted(file.abort)",'_toggleHostAttribute(file.error, "error")','_toggleHostAttribute(file.indeterminate, "indeterminate")','_toggleHostAttribute(file.uploading, "uploading")','_toggleHostAttribute(file.complete, "complete")']}_fileAborted(e){e&&this._remove()}_remove(){this.dispatchEvent(new CustomEvent("file-remove",{detail:{file:this.file},bubbles:!0,composed:!0}))}_formatProgressValue(e){return e/100}_fireFileEvent(e){return e.preventDefault(),this.dispatchEvent(new CustomEvent(e.target.getAttribute("file-event"),{detail:{file:this.file},bubbles:!0,composed:!0}))}_toggleHostAttribute(e,t){const i=Boolean(e);this.hasAttribute(t)!==i&&(i?this.setAttribute(t,""):this.removeAttribute(t))}}customElements.define(wd.is,wd);
/**
@license
Copyright (c) 2017 Vaadin Ltd.
This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
*/
class Ad extends(Jl(Bl(Vs))){static get template(){return fr`
    <style>
      :host {
        display: block;
        position: relative;
      }

      :host([hidden]) {
        display: none !important;
      }

      [hidden] {
        display: none !important;
      }
    </style>

    <div part="primary-buttons">
      <div id="addFiles" on-touchend="_onAddFilesTouchEnd" on-click="_onAddFilesClick">
        <slot name="add-button">
          <vaadin-button part="upload-button" id="addButton" disabled="[[maxFilesReached]]">
            [[_i18nPlural(maxFiles, i18n.addFiles, i18n.addFiles.*)]]
          </vaadin-button>
        </slot>
      </div>
      <div part="drop-label" hidden\$="[[nodrop]]" id="dropLabelContainer">
        <slot name="drop-label-icon">
          <div part="drop-label-icon"></div>
        </slot>
        <slot name="drop-label" id="dropLabel">
          [[_i18nPlural(maxFiles, i18n.dropFiles, i18n.dropFiles.*)]]
        </slot>
      </div>
    </div>
    <slot name="file-list">
      <div id="fileList" part="file-list">
        <template is="dom-repeat" items="[[files]]" as="file">
          <vaadin-upload-file file="[[file]]"></vaadin-upload-file>
        </template>
      </div>
    </slot>
    <slot></slot>
    <input type="file" id="fileInput" on-change="_onFileInputChange" hidden="" accept\$="{{accept}}" multiple\$="[[_isMultiple(maxFiles)]]" capture\$="[[capture]]">
`}static get is(){return"vaadin-upload"}static get version(){return"4.4.3"}static get properties(){return{nodrop:{type:Boolean,reflectToAttribute:!0,value:function(){try{return!!document.createEvent("TouchEvent")}catch(e){return!1}}},target:{type:String,value:""},method:{type:String,value:"POST"},headers:{type:Object,value:{}},timeout:{type:Number,value:0},_dragover:{type:Boolean,value:!1,observer:"_dragoverChanged"},files:{type:Array,notify:!0,value:function(){return[]}},maxFiles:{type:Number,value:1/0},maxFilesReached:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0,computed:"_maxFilesAdded(maxFiles, files.length)"},accept:{type:String,value:""},maxFileSize:{type:Number,value:1/0},_dragoverValid:{type:Boolean,value:!1,observer:"_dragoverValidChanged"},formDataName:{type:String,value:"file"},noAuto:{type:Boolean,value:!1},withCredentials:{type:Boolean,value:!1},capture:String,i18n:{type:Object,value:function(){return{dropFiles:{one:"Drop file here",many:"Drop files here"},addFiles:{one:"Upload File...",many:"Upload Files..."},cancel:"Cancel",error:{tooManyFiles:"Too Many Files.",fileIsTooBig:"File is Too Big.",incorrectFileType:"Incorrect File Type."},uploading:{status:{connecting:"Connecting...",stalled:"Stalled.",processing:"Processing File...",held:"Queued"},remainingTime:{prefix:"remaining time: ",unknown:"unknown remaining time"},error:{serverUnavailable:"Server Unavailable",unexpectedServerError:"Unexpected Server Error",forbidden:"Forbidden"}},units:{size:["B","kB","MB","GB","TB","PB","EB","ZB","YB"]}}}}}}ready(){super.ready(),this.addEventListener("dragover",this._onDragover.bind(this)),this.addEventListener("dragleave",this._onDragleave.bind(this)),this.addEventListener("drop",this._onDrop.bind(this)),this.addEventListener("file-retry",this._onFileRetry.bind(this)),this.addEventListener("file-abort",this._onFileAbort.bind(this)),this.addEventListener("file-remove",this._onFileRemove.bind(this)),this.addEventListener("file-start",this._onFileStart.bind(this))}_formatSize(e){if("function"==typeof this.i18n.formatSize)return this.i18n.formatSize(e);const t=this.i18n.units.sizeBase||1e3,i=~~(Math.log(e)/Math.log(t)),o=Math.max(0,Math.min(3,i-1));return parseFloat((e/Math.pow(t,i)).toFixed(o))+" "+this.i18n.units.size[i]}_splitTimeByUnits(e){const t=[60,60,24,1/0],i=[0];for(var o=0;o<t.length&&e>0;o++)i[o]=e%t[o],e=Math.floor(e/t[o]);return i}_formatTime(e,t){if("function"==typeof this.i18n.formatTime)return this.i18n.formatTime(e,t);for(;t.length<3;)t.push(0);return t.reverse().map((e=>(e<10?"0":"")+e)).join(":")}_formatFileProgress(e){return e.totalStr+": "+e.progress+"% ("+(e.loaded>0?this.i18n.uploading.remainingTime.prefix+e.remainingStr:this.i18n.uploading.remainingTime.unknown)+")"}_maxFilesAdded(e,t){return e>=0&&t>=e}_onDragover(e){e.preventDefault(),this.nodrop||this._dragover||(this._dragoverValid=!this.maxFilesReached,this._dragover=!0),e.dataTransfer.dropEffect=!this._dragoverValid||this.nodrop?"none":"copy"}_onDragleave(e){e.preventDefault(),this._dragover&&!this.nodrop&&(this._dragover=this._dragoverValid=!1)}_onDrop(e){this.nodrop||(e.preventDefault(),this._dragover=this._dragoverValid=!1,this._addFiles(e.dataTransfer.files))}_createXhr(){return new XMLHttpRequest}_configureXhr(e){if("string"==typeof this.headers)try{this.headers=JSON.parse(this.headers)}catch(e){this.headers=void 0}for(var t in this.headers)e.setRequestHeader(t,this.headers[t]);this.timeout&&(e.timeout=this.timeout),e.withCredentials=this.withCredentials}_setStatus(e,t,i,o){e.elapsed=o,e.elapsedStr=this._formatTime(e.elapsed,this._splitTimeByUnits(e.elapsed)),e.remaining=Math.ceil(o*(t/i-1)),e.remainingStr=this._formatTime(e.remaining,this._splitTimeByUnits(e.remaining)),e.speed=~~(t/o/1024),e.totalStr=this._formatSize(t),e.loadedStr=this._formatSize(i),e.status=this._formatFileProgress(e)}uploadFiles(e){e&&!Array.isArray(e)&&(e=[e]),e=(e=e||this.files).filter((e=>!e.complete)),Array.prototype.forEach.call(e,this._uploadFile.bind(this))}_uploadFile(e){if(e.uploading)return;const t=Date.now(),i=e.xhr=this._createXhr();let o,a;i.upload.onprogress=n=>{clearTimeout(o),a=Date.now();const r=(a-t)/1e3,s=n.loaded,l=n.total,d=~~(s/l*100);e.loaded=s,e.progress=d,e.indeterminate=s<=0||s>=l,e.error?e.indeterminate=e.status=void 0:e.abort||(d<100?(this._setStatus(e,l,s,r),o=setTimeout((()=>{e.status=this.i18n.uploading.status.stalled,this._notifyFileChanges(e)}),2e3)):(e.loadedStr=e.totalStr,e.status=this.i18n.uploading.status.processing)),this._notifyFileChanges(e),this.dispatchEvent(new CustomEvent("upload-progress",{detail:{file:e,xhr:i}}))},i.onreadystatechange=()=>{if(4==i.readyState){if(clearTimeout(o),e.indeterminate=e.uploading=!1,e.abort)return void this._notifyFileChanges(e);e.status="";if(!this.dispatchEvent(new CustomEvent("upload-response",{detail:{file:e,xhr:i},cancelable:!0})))return;0===i.status?e.error=this.i18n.uploading.error.serverUnavailable:i.status>=500?e.error=this.i18n.uploading.error.unexpectedServerError:i.status>=400&&(e.error=this.i18n.uploading.error.forbidden),e.complete=!e.error,this.dispatchEvent(new CustomEvent("upload-"+(e.error?"error":"success"),{detail:{file:e,xhr:i}})),this._notifyFileChanges(e)}};const n=new FormData;e.uploadTarget=e.uploadTarget||this.target||"",e.formDataName=this.formDataName;if(!this.dispatchEvent(new CustomEvent("upload-before",{detail:{file:e,xhr:i},cancelable:!0})))return;n.append(e.formDataName,e,e.name),i.open(this.method,e.uploadTarget,!0),this._configureXhr(i),e.status=this.i18n.uploading.status.connecting,e.uploading=e.indeterminate=!0,e.complete=e.abort=e.error=e.held=!1,i.upload.onloadstart=()=>{this.dispatchEvent(new CustomEvent("upload-start",{detail:{file:e,xhr:i}})),this._notifyFileChanges(e)};this.dispatchEvent(new CustomEvent("upload-request",{detail:{file:e,xhr:i,formData:n},cancelable:!0}))&&i.send(n)}_retryFileUpload(e){this.dispatchEvent(new CustomEvent("upload-retry",{detail:{file:e,xhr:e.xhr},cancelable:!0}))&&this._uploadFile(e)}_abortFileUpload(e){this.dispatchEvent(new CustomEvent("upload-abort",{detail:{file:e,xhr:e.xhr},cancelable:!0}))&&(e.abort=!0,e.xhr&&e.xhr.abort(),this._notifyFileChanges(e))}_notifyFileChanges(e){var t="files."+this.files.indexOf(e)+".";for(var i in e)e.hasOwnProperty(i)&&this.notifyPath(t+i,e[i])}_addFiles(e){Array.prototype.forEach.call(e,this._addFile.bind(this))}_addFile(e){if(this.maxFilesReached)return void this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:e,error:this.i18n.error.tooManyFiles}}));if(this.maxFileSize>=0&&e.size>this.maxFileSize)return void this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:e,error:this.i18n.error.fileIsTooBig}}));const t=e.name.match(/\.[^\.]*$|$/)[0],i=new RegExp("^("+this.accept.replace(/[, ]+/g,"|").replace(/\/\*/g,"/.*")+")$","i");!this.accept||i.test(e.type)||i.test(t)?(e.loaded=0,e.held=!0,e.status=this.i18n.uploading.status.held,this.unshift("files",e),this.noAuto||this._uploadFile(e)):this.dispatchEvent(new CustomEvent("file-reject",{detail:{file:e,error:this.i18n.error.incorrectFileType}}))}_removeFile(e){this.files.indexOf(e)>-1&&this.splice("files",this.files.indexOf(e),1)}_onAddFilesTouchEnd(e){e.preventDefault(),this.__resetMouseCanceller(),this._onAddFilesClick()}__resetMouseCanceller(){ml.mouse.mouseIgnoreJob&&ml.mouse.mouseIgnoreJob.flush()}_onAddFilesClick(){this.maxFilesReached||(this.$.fileInput.value="",this.$.fileInput.click())}_onFileInputChange(e){this._addFiles(e.target.files)}_onFileStart(e){this._uploadFile(e.detail.file)}_onFileRetry(e){this._retryFileUpload(e.detail.file)}_onFileAbort(e){this._abortFileUpload(e.detail.file)}_onFileRemove(e){this._removeFile(e.detail.file)}_dragoverChanged(e){e?this.setAttribute("dragover",e):this.removeAttribute("dragover")}_dragoverValidChanged(e){e?this.setAttribute("dragover-valid",e):this.removeAttribute("dragover-valid")}_i18nPlural(e,t){return 1==e?t.one:t.many}_isMultiple(e){return 1!=e}}customElements.define(Ad.is,Ad);class Ed extends(R(M(p))){static get tag(){return"simple-fields-upload"}static get styles(){return[...super.styles,...D,i`:host{pointer-events:all;overflow:visible;transition:.3s all ease;--simple-login-camera-aspect:1.777777777777;--simple-camera-snap-color:var(--simple-fields-color, currentColor);--simple-camera-snap-background:var(
            --simple-fields-background-color,
            unset
          );--simple-camera-snap-border-radius:2px;--lumo-font-family:var(--simple-fields-font-family, sans-serif);--lumo-error-color:var(--simple-fields-error-color, #b40000);--lumo-primary-font-color:var(--simple-fields-color, currentColor);--lumo-base-color:var(--simple-fields-background-color, transparent)}:host([responsive-size=xs]),div[part=description]{font-size:10px;--simple-fields-font-size:10px;--simple-fields-button-font-size:11px;--simple-fields-legend-font-size:11px;--simple-fields-detail-font-size:10px}fieldset{padding:0;max-width:100%}#upload,div[slot=drop-label]{display:flex;align-items:center;justify-content:center;flex-wrap:wrap;width:100%}#upload{border-radius:var(--simple-fields-border-radius,2px);border:1px dashed var(--simple-fields-border-color-light,#ccc)}#url{flex:1 1 100%;margin:var(--simple-fields-margin-small,8px) 0;background-color:transparent}#upload-options{position:relative;transition:height .3s linear}div[slot=drop-label]>*{flex:0 1 auto}simple-fields-url-combo[always-expanded]::part(listbox){background-color:transparent}simple-toolbar-button{font-family:var(--simple-fields-font-family,sans-serif);color:var(--simple-fields-color,currentColor);margin:calc(.5 * var(--simple-fields-margin-small,8px)) calc(.25 * var(--simple-fields-margin-small,8px))}simple-toolbar-button[part=cancel-media]{position:absolute;right:0;top:0;z-index:2;--simple-fields-button-padding-sm:0;background-color:var(--simple-fields-background-color,#fff);opacity:.7}span[part=drop-area-text]{font-family:var(--simple-fields-button-font-family,sans-serif);font-size:var(--simple-fields-button-font-size,14px);white-space:nowrap;margin:calc(.5 * var(--simple-fields-margin-small,8px)) calc(.25 * var(--simple-fields-margin-small,8px))}vaadin-upload{padding:var(--simple-fields-margin-small,8px);position:relative;overflow:visible;border:none!important}vaadin-upload[dragover]{border-color:var(--simple-fields-secondary-accent-color,var(--simple-colors-default-theme-accent-3,#77e2ff))}vaadin-upload::part(drop-label){font-family:var(--simple-fields-font-family,sans-serif);color:var(--simple-fields-color,currentColor);display:flex;align-items:center;justify-content:center;flex-wrap:wrap;padding:0;width:100%;margin-top:-16px}vaadin-upload.option-selfie::part(drop-label){display:block}vaadin-upload::part(drop-label-icon){display:none}vaadin-upload-file{--disabled-text-color:#var(--simple-fields-border-color, #999)}simple-camera-snap{--simple-camera-snap-button-container-bottom:2px;--simple-camera-snap-button-container-z-index:5;--simple-camera-snap-button-border-radius:100%;--simple-camera-snap-button-opacity:0.7}`]}constructor(){super(),this.t=this.t||{},this.t={...this.t,dropMediaHereOr:"drop media here or",upload:"Upload",takePhoto:"Take photo",recordAudio:"Record audio",cancel:"Cancel",uploadMedia:"Upload media"},this.registerLocalization({context:this,namespace:"simple-fields",localesPath:new URL("../locales",import.meta.url).href,locales:["es"]}),this.itemsList=[],this.autocomplete="off",this.noCamera=!1,this.noVoiceRecord=!0,this.responsiveSize="sm"}render(){return o` <fieldset part="fieldset">${this.legend} ${this.fields}</fieldset> `}get fields(){return o` <div id="upload-options"> <vaadin-upload capture="" class="option-${this.option}" form-data-name="file-upload" id="fileupload" @upload-before="${this._fileAboutToUpload}" @upload-response="${this._fileUploadResponse}" part="upload" ?nodrop="${this.disabled}"> <button ?disabled="${this.disabled}" id="add-hidden" slot="add-button" hidden></button> <div slot="drop-label" part="browse-area" ?hidden="${"selfie"==this.option||"audio"==this.option}"> <simple-fields-url-combo id="url" ?autofocus="${this.autofocus}" autocomplete="both" value="${this.value||""}" label="URL" type="url" auto-validate="" part="url" ?disabled="${this.disabled}" ?always-expanded="${this.responsiveSize.indexOf("s")<0}" display-as="${this.responsiveSize.indexOf("l")>-1?"grid":""}" .itemsList="${this.itemsList}" @click="${e=>e.stopImmediatePropagation()}" @mousedown="${e=>e.stopImmediatePropagation()}" @focus="${e=>e.stopImmediatePropagation()}" @value-changed="${this.valueChanged}"> </simple-fields-url-combo> </div> <div id="upload"> <span part="drop-area-text">${this.t.dropMediaHereOr}</span> <simple-toolbar-button id="browse" ?disabled="${this.disabled}" label="${this.t.upload}.." ?show-text-label="${this.responsiveSize.indexOf("s")<0}" icon="icons:file-upload" show-text-label @click="${this._handleBrowse}" controls="fieldset" part="browse"> </simple-toolbar-button> <simple-toolbar-button icon="image:camera-alt" ?disabled="${this.disabled}" label="${this.t.takePhoto}.." ?show-text-label="${this.responsiveSize.indexOf("s")<0}" @mousedown="${e=>e.preventDefault()}" @focus="${e=>e.preventDefault()}" @click="${this._handleCameraOption}" controls="fieldset" part="take-photo" ?hidden="${!navigator.mediaDevices||this.noCamera}"> </simple-toolbar-button> <simple-toolbar-button icon="image:camera-alt" ?disabled="${this.disabled}" label="${this.t.recordAudio}.." ?show-text-label="${this.responsiveSize.indexOf("s")<0}" @mousedown="${e=>e.preventDefault()}" @focus="${e=>e.preventDefault()}" @click="${this._handleAudioOption}" controls="fieldset" part="record-audio" ?hidden="${!navigator.mediaDevices||this.noVoiceRecord}"> </simple-toolbar-button> </div> <simple-toolbar-button id="cancel" icon="icons:clear" ?disabled="${this.disabled}" label="${this.t.cancel}" @mousedown="${e=>e.preventDefault()}" @focus="${e=>e.preventDefault()}" @click="${this._handleCancel}" controls="fieldset" slot="drop-label" part="cancel-media" ?hidden="${"selfie"!==this.option&&"audio"!==this.option}"> </simple-toolbar-button> <div id="camerahole" ?hidden="${"selfie"!==this.option}" part="camera" slot="drop-label" part="camera-preview"></div> <div id="voicerecorder" ?hidden="${"audio"!==this.option}" slot="drop-label" part="voice-preview"></div> ${this.desc} </vaadin-upload> </div> `}_handleCameraOption(e){e.preventDefault(),this.option="selfie",this._takeSelfie(e)}_handleAudioOption(e){e.preventDefault(),this.option="voice",this._voiceRecorder(e)}_handleCancel(e){e.preventDefault(),this.option="fileupload"}_handleBrowse(e){e.preventDefault(),this.shadowRoot.querySelector("#add-hidden").dispatchEvent(new CustomEvent("click",e))}valueChanged(e){this.value=e.detail.value}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"value"==t&&this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:this[t]}}))})),this.field&&this.__delayedFocus&&this.focus()}static get properties(){return{...super.properties,accept:{type:String},autocomplete:{type:String},autofocus:{type:Boolean},value:{type:String},option:{type:String},noCamera:{type:Boolean,attribute:"no-camera"},noVoiceRecord:{type:Boolean,attribute:"no-voice-record"},responsiveSize:{type:String,attribute:"responsive-size",reflect:!0},itemsList:{type:Object,attribute:"items-list"}}}get field(){if(this.shadowRoot)return"selfie"==this.option&&this.shadowRoot.querySelector("#cancel")||"audio"==this.option&&this.shadowRoot.querySelector("#cancel")?this.shadowRoot.querySelector("#cancel"):!!this.shadowRoot.querySelector("#url")&&this.shadowRoot.querySelector("#url")}focus(){this.field?(this.field.focus(),this.__delayedFocus=!1):this.__delayedFocus=!0}_fileAboutToUpload(e){this.dispatchEvent(new CustomEvent("upload-before",{bubbles:!0,cancelable:!0,composed:!1,detail:e.detail}))}_fileUploadResponse(e){this.dispatchEvent(new CustomEvent("upload-response",{bubbles:!0,cancelable:!0,composed:!1,detail:e.detail}))}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.value?this.option="url":this.option="fileupload",window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"responsive-size",relativeToParent:!0,sm:150,md:300,lg:600,xl:1200}}))}__newPhotoShowedUp(e){let t=new File([e.detail.raw],"headshot"+e.timeStamp+".jpg");this.shadowRoot.querySelector("#fileupload")._addFile(t)}__newAudioShowedUp(e){let t=new File([e.detail.value],"voice-memo"+e.timeStamp+".mp3");this.shadowRoot.querySelector("#fileupload")._addFile(t)}_takeSelfie(e){this.camera||(import("./8d86f75e.js"),this.camera=document.createElement("simple-camera-snap"),this.camera.autoplay=!0,this.camera.addEventListener("simple-camera-snap-image",this.__newPhotoShowedUp.bind(this)),this.shadowRoot.querySelector("#camerahole").appendChild(this.camera))}_voiceRecorder(e){this.voice||(import("./20f80c85.js"),this.voice=document.createElement("voice-recorder"),this.voice.addEventListener("voice-recorder-recording",this.__newAudioShowedUp.bind(this)),this.shadowRoot.querySelector("#voicerecorder").appendChild(this.voice))}_resolveObjectPath(e,t){return e.split(".").reduce((function(e,t){return e?e[t]:null}),t||self)}}window.customElements.define(Ed.tag,Ed);class Sd extends(n(R(Ed))){constructor(){super(),this.autocomplete="on",this.__winEvents={"hax-app-picker-selection":"_haxAppPickerSelection"},this.t={whereUpload:"Where would you like to upload this",cantHandle:"Sorry, you don't have a storage location that can handle",uploads:"uploads"},this.registerLocalization({context:this,namespace:"hax"})}static get tag(){return"hax-upload-field"}_canUpload(){return!this.__allowUpload&&Zo}_fileAboutToUpload(e){if(this._canUpload()){e.preventDefault(),e.stopPropagation();let i={source:e.detail.file.name,type:e.detail.file.type};var t=Zo.guessGizmoType(i);let o=Zo.getHaxAppStoreTargets(t);1===o.length?this._haxAppPickerSelection({detail:o[0]}):0!==o.length?Zo.haxAppPicker.presentOptions(o,t,`${this.t.whereUpload} ${t}?`,"app"):Zo.toast(`${this.t.cantHandle} ${t} ${this.t.uploads}!`,5e3)}else this.__allowUpload=!1}_haxAppPickerSelection(e){let t=e.detail.connection;this.__appUsed=e.detail,this.shadowRoot.querySelector("#fileupload").method=t.operations.add.method;let i=t.protocol+"://"+t.url;"/"!=i.substr(i.length-1)&&(i+="/"),void 0!==t.operations.add.endPoint&&(i+=t.operations.add.endPoint),null!=Zo.connectionRewrites.appendUploadEndPoint&&(i+="?"+Zo.connectionRewrites.appendUploadEndPoint),null!=Zo.connectionRewrites.appendJwt&&(i+="&"+Zo.connectionRewrites.appendJwt+"="+function(e){try{return localStorage.getItem(e)}catch(e){return!1}}(Zo.connectionRewrites.appendJwt)),this.shadowRoot.querySelector("#fileupload").headers=t.headers,this.shadowRoot.querySelector("#fileupload").target=i,this.__allowUpload=!0,this.shadowRoot.querySelector("#fileupload").uploadFiles()}_fileUploadResponse(e){let t=JSON.parse(e.detail.xhr.response),i=this.__appUsed.connection.operations.add.resultMap,o={},a={};for(var n in void 0!==this._resolveObjectPath(i.item,t)&&(o=this._resolveObjectPath(i.item,t)),a.type=i.defaultGizmoType,i.gizmo)a[n]=this._resolveObjectPath(i.gizmo[n],o);void 0===a.url&&void 0!==a.source&&(a.url=a.source),void 0!==i.gizmo.type&&(a.type=this._resolveObjectPath(i.gizmo.type,o)),this.shadowRoot.querySelector("#url").value=a.url}}customElements.define(Sd.tag,Sd);class Cd extends Sd{static get tag(){return"hax-tray-upload"}constructor(){super(),this.__winEvents={"hax-app-picker-selection":"_haxAppPickerSelection","place-holder-file-drop":"_placeHolderFileDrop"}}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"t"===t&&(this.label=this.t.uploadMedia)}))}_fileUploadResponse(e){super._fileUploadResponse(e),this.newAssetConfigure()}_canUpload(){return!this.__allowUpload}newAssetConfigure(){let e={source:this.shadowRoot.querySelector("#url").value,title:this.shadowRoot.querySelector("#url").value};Zo.insertLogicFromValues(e,this)}_placeHolderFileDrop(e){Zo.activePlaceHolder=e.detail.placeHolderElement,this.shadowRoot.querySelector("#fileupload")._onDrop(e.detail)}}window.customElements.define(Cd.tag,Cd);class Nd extends(Xa(p)){static get tag(){return"hax-tray-button"}constructor(){super(),this.eventData=null}static get properties(){return{...super.properties,voiceCommand:{type:String,attribute:"voice-command"},wide:{type:Boolean,reflect:!0},index:{type:Number},eventData:{type:String,attribute:"event-data"}}}_voiceEvent(e){this._handleClick(e),this.click()}_handleClick(e){this.dispatchEvent(new CustomEvent("hax-tray-button-click",{bubbles:!0,cancelable:!0,composed:!0,detail:{eventName:this.eventName,index:this.index,value:this.eventData}}))}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"voiceCommand"==t&&this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: "+this[t],context:this,callback:"_voiceEvent"}}))}))}}customElements.define(Nd.tag,Nd);class Td extends p{static get styles(){return[i`:host{overflow-y:auto;position:relative}simple-button-grid{overflow:auto}simple-button-grid.collapse-hide{max-height:0!important;transition:all .5s}.visibility-hidden{z-index:-1;visibility:hidden;opacity:0;height:0;transition:all .5s}`]}constructor(){super(),this.addEventListener("hax-tray-button-click",(e=>{"search-selected"===e.detail.eventName?(this.searching=!0,Zo.activeApp=Ii(this.appList[e.detail.index])):"cancel-search"===e.detail.eventName&&(this.searching=!1)})),this.searching=!1,this.appList=[],this.activeApp=null,this.hasActive=!1,import("./6c37e0f2.js"),Promise.resolve().then((function(){return Pd})),Ai((()=>{this.appList=Ii(Zo.appList)})),Ai((()=>{this.activeApp=Ii(Zo.activeApp)}))}render(){return o` <simple-button-grid class="${this.searching?"collapse-hide":""}" always-expanded columns="3"> ${this.appList.map((e=>o` <hax-tray-button class="${this.searching?"visibility-hidden":""}" show-text-label icon-position="top" index="${e.index}" label="${e.details.title}" icon="${e.details.icon}" color="${e.details.color}" event-name="search-selected" event-data="${e.index}"> </hax-tray-button> `))} </simple-button-grid> <hax-app-search id="haxappsearch" class="${this.searching?"":"visibility-hidden"}"></hax-app-search> <slot></slot> `}static get tag(){return"hax-app-browser"}static get properties(){return{search:{type:String},searching:{type:Boolean,reflect:!0},activeApp:{type:Object},hasActive:{reflect:!0,type:Boolean,attribute:"has-active"},appList:{type:Array}}}updated(e){e.forEach(((e,t)=>{"activeApp"==t&&this[t]&&this._activeAppChanged(this[t],e),"appList"==t&&this[t]&&this.shadowRoot&&(this.searching=!1)}))}_activeAppChanged(e,t){this.hasActive=void 0!==t&&null!=e}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.searching=!1}}window.customElements.define(Td.tag,Td);
/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const kd=function(e){return class extends(g(e)){tag(){return"simple-toolbar-grid"}static get baseStyles(){return[i`:host{padding:0;margin:0;max-width:100%;display:flex;overflow:hidden;flex-direction:column;align-items:stretch;overflow:hidden!important;--simple-button-grid-cols:var(
              --simple-toolbar-button-min-width,
              var(
                --simple-toolbar-button-width,
                var(--simple-toolbar-button-height, 24px)
              )
            );transition:all .5s;transition:z-index 0s}:host([hidden]){z-index:-1;visibility:hidden;opacity:0;height:0}#grid{flex:1 1 auto;max-width:100%;overflow:auto}#buttons{flex:0 1 100%;max-width:100%;display:flex;flex-wrap:wrap;--simple-toolbar-button-flex:var(
              --simple-toolbar-button-grid-flex,
              1 1 100%
            )}#buttons{display:grid;overflow:visible;grid-gap:var(--simple-button-grid-margin,4px);grid-template-columns:repeat(auto-fill,minmax(calc(var(--simple-button-grid-cols) - 2 * var(--simple-button-grid-margin,4px)),1fr))}:host([collapsed]:not([always-expanded])) ::slotted([collapse-hide]){display:none!important}`]}static get properties(){return{...super.properties,columns:{type:Number,attribute:"columns"},rows:{type:Number,attribute:"rows"},disableAutogrow:{type:Boolean,attribute:"disable-autogrow",reflect:!0}}}get gridStyles(){let e=[];return this.columns&&e.push(`--simple-button-grid-cols:${100/this.columns}%`),e.join(";")}get toolbarTemplate(){return o` <div id="grid"> <div id="buttons" class="${!this.alwaysExpanded&&this.collapsed?"collapsed":""}" style="${this.gridStyles}" part="buttons"> <slot></slot> ${this.alwaysExpanded?"":this.moreButton} </div> </div> `}_bottom(e){return e&&e.offsetTop&&e.clientHeight?e.offsetTop+e.clientHeight:void 0}resizeToolbar(){if(this.alwaysExpanded)return;let e=this.shadowRoot?this.shadowRoot.querySelector("#morebutton"):void 0;this._bottom(e);let t,i=this._bottom(this),o=[...this.children||[]],a=!0,n=[];o.forEach((e=>{if(e.removeAttribute&&e.removeAttribute("collapse-hide"),0==n.length)n.unshift(e.offsetTop);else{let o=e.offsetTop>n[0];o&&n.unshift(e.offsetTop),this.rows&&n.length>this.rows||!this.rows&&o&&this._bottom(e)>i?(e.setAttribute("collapse-hide",!0),a=!1):a?t=e:e.setAttribute("collapse-hide",!0)}})),this.collapseDisabled=a&&!(e&&t&&this._bottom(e)>i),!this.collapseDisabled&&t&&t.setAttribute("collapse-hide",!0)}constructor(){super()}}};
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class Od extends(kd(p)){}customElements.define("simple-button-grid",Od);var Pd=Object.freeze({__proto__:null,SimpleButtonGrid:Od,SimpleButtonGridBehaviors:kd});class Ld extends(R(function(e){return class extends e{constructor(){super(),this.caseSensitive=!1,this.filtered=[],this.resetList()}resetList(e=[]){this.items=[...e],this.where="title",this.value="",this.like=""}static get properties(){return{...super.properties,items:{type:Array},like:{type:String},where:{type:String},caseSensitive:{type:Boolean,attribute:"case-sensitive",reflect:!0},filtered:{type:Array}}}update(e){super.update(e),e.forEach(((e,t)=>{["items","where","like","caseSensitive"].includes(t)&&this.shadowRoot&&(clearTimeout(this.__debounce),this.__debounce=setTimeout((()=>{this.filtered=this._computeFiltered(this.items,this.where,this.like,this.caseSensitive)}),0)),"filtered"==t&&this.shadowRoot&&(this.dispatchEvent(new CustomEvent("filter",{bubbles:!0,cancelable:!0,composed:!0,detail:!0})),this.dispatchEvent(new CustomEvent("filtered-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:{value:this.filtered}})))}))}filter(){this.where=""}_computeFiltered(e,t,i,o){"\\"!==i[0]&&"\\"!==i||(i="\\"+i);var a=null;a=o?new RegExp(i):new RegExp(i,"i");var n=this._decomposeWhere.bind(this);return e.filter((function(e){if("object"==typeof e){var i=n(t,e);return void 0===i&&""!=t&&console.warn("grafitto-filter was unable to find a property in '"+t+"'"),a.test(i)}return"string"==typeof e?a.test(e):"number"==typeof e?a.test(e.toString()):void 0}))}_decomposeWhere(e,t){return e.split(".").reduce((function(e,t){return e&&e[t]}),t)}}}(p))){static get styles(){return[i`:host{display:flex;flex-direction:column;align-items:stretch;flex:0 1 auto;overflow-y:auto}:host>*{max-width:100%}.toolbar-inner{display:flex;flex-direction:column;align-items:stretch;width:100%;flex:0 0 auto}hax-tray-button::part(button){font-size:var(hax-ui-font-size-xs)}simple-fields-field{margin-top:0}`]}constructor(){super(),this.where="title",this.t={filterContentTypes:"Filter Content Types"},this.registerLocalization({context:this,namespace:"hax"})}render(){return o` <div class="toolbar-inner" part="toolbar"> <simple-fields-field id="inputfilter" @value-changed="${this.inputfilterChanged}" aria-controls="filter" label="${this.t.filterContentTypes}" type="text" auto-validate="" part="filter"></simple-fields-field> </div> <simple-button-grid columns="3" always-expanded part="grid"> ${this.filtered.map(((e,t)=>o` <hax-tray-button show-text-label voice-command="insert ${e.title}" draggable="true" @dragstart="${this._dragStart}" index="${t}" label="${e.title}" event-name="insert-tag" event-data="${e.tag}" data-demo-schema="true" icon-position="top" icon="${e.icon}" part="grid-button"></hax-tray-button> `))} </simple-button-grid> `}static get tag(){return"hax-gizmo-browser"}_dragStart(e){let t=Zo.haxSchemaFromTag(e.target.eventData);var i;i=t.gizmo.tag&&t.demoSchema&&t.demoSchema[0]?a(t.demoSchema[0]):document.createElement(e.target.eventData),Zo.__dragTarget=i,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move"),e.stopPropagation(),e.stopImmediatePropagation()}inputfilterChanged(e){this.like=e.target.value}updated(e){e.forEach(((e,t)=>{"activeApp"==t&&this._activeAppChanged(this[t],e),"filtered"==t&&this.requestUpdate()}))}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),Ai((()=>{this.resetList(Ii(Zo.gizmoList))}))}resetList(e){super.resetList(e),e&&(this.items=[...e.filter(((e,t)=>!(e&&e.meta&&(e.meta.inlineOnly||e.meta.hidden||e.requiresParent))))])}}window.customElements.define(Ld.tag,Ld);
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Bd{constructor(){this.imports={},this.webpack=!1,this.import=(e,t,i=!1)=>this.load(e,t,i),this.load=(e,t,i=!1)=>{let o=this.imports[e],a=!i&&this.webpack&&this.webpack[e];return new Promise(a||o?(t,i)=>{t(this.imports[e])}:(i,o)=>{const a=document.createElement("script");a.src=t,a.setAttribute("data-name",e),this.imports[e]=t,a.onload=()=>{i(this.imports[e]),this.imports[e]=!0,setTimeout((()=>{const i=new CustomEvent(`es-bridge-${e}-loaded`,{bubbles:!0,cancelable:!0,detail:{name:e,location:t}});document.dispatchEvent(i)}),100)},a.onerror=()=>{o(new Error(`Failed to load ${e} script with location ${t}.`)),delete this.imports[e],this.imports[e]=!1},document.documentElement.appendChild(a)})}}}window.ESGlobalBridge=window.ESGlobalBridge||{},window.ESGlobalBridge.requestAvailability=()=>(window.ESGlobalBridge.instance||(window.ESGlobalBridge.instance=new Bd),window.ESGlobalBridge.instance);const Md=window.ESGlobalBridge.requestAvailability();
/**
 * Copyright 2021 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class Hd extends HTMLElement{constructor(){super(),this.dirHandler=null,this.fileHandler=null,this.files=[]}static get tag(){return"file-system-broker"}async loadFile(e,t=!1,i=!0){let o,a=this.typeToAccept(e),n=`${e} file`;return[o]=await window.showOpenFilePicker({types:[{description:n,accept:a}],excludeAcceptAllOption:i,multiple:t}),this.fileHandler=await o.getFile(),this.fileHandler}async getFileContents(e,t=!1,i=!0){return await this.loadFile(e,t,i),await this.fileHandler.text()}typeToAccept(e){let t={};switch(e){case"xls":case"xlsx":case"ods":t={"text/csv":[".csv"],"application/*":[".xls",".xlsx",".ods"]};break;case"csv":t={"text/*":[".csv",".txt"]};break;case"image":t={"image/*":[".jpg",".jpeg",".gif",".png"]};break;case"video":t={"video/*":[".mp4"]};break;case"markdown":t={"text/*":[".txt",".md"]}}return t}async saveFile(e,t){const i={types:[{description:`Save ${e} file`,accept:this.typeToAccept(e)}]};this.fileHandler=await window.showSaveFilePicker(i);const o=await this.fileHandler.createWritable();await o.write(t),await o.close()}async openDir(e=!0){try{this.dirHandler=await window.showDirectoryPicker()}catch(e){console.log(e)}return this.files=[],this.files=await this.__readDir(this.dirHandler,e,this.dirHandler.name||"",this.dirHandler),this.files}async readFileInDir(e){try{this.dirHandler=await window.showDirectoryPicker();for await(const t of this.dirHandler.values())if(e&&"function"==typeof t.getFile&&t.name===e){const e=await t.getFile();return await e.text()}}catch(e){console.log(e)}return""}async writeFileInDir(e,t=""){try{this.dirHandler=await window.showDirectoryPicker();for await(const o of this.dirHandler.values())if(e&&"function"==typeof o.getFile&&o.name===e){var i=await this.dirHandler.getFileHandle(o.name);const e=await i.createWritable();return await e.write(t),await e.close(),!0}}catch(e){console.log(e)}return!1}async __readDir(e,t,i,o){const a=[];for await(let[n,r]of e){const{kind:e}=r;"directory"===r.kind?(a.push({name:n,kind:e,handle:r,folder:i,parentHandler:o}),".git"!==n&&t&&a.push(...await this.__readDir(r,t,i+"/"+n,r))):a.push({name:n,kind:e,handle:r,folder:i,parentHandler:o})}return a}}window.FileSystemBroker=window.FileSystemBroker||{},window.FileSystemBroker.requestAvailability=()=>(window.FileSystemBroker.instance||(window.FileSystemBroker.instance=document.createElement("file-system-broker"),document.body.appendChild(window.FileSystemBroker.instance)),window.FileSystemBroker.instance);const Dd=window.FileSystemBroker.requestAvailability();customElements.define(Hd.tag,Hd);class Rd extends Hd{static get tag(){return"docx-file-system-broker"}constructor(){super(),this.libPath=new URL("./",import.meta.url).href,this.libPath+="mammoth/",Md.load("mammoth",this.libPath+"mammoth.browser.min.js").then((()=>{window.mammoth&&(this.docx=window.mammoth,this.dispatchEvent(new CustomEvent("docx-reader-ready",{bubbles:!0,composed:!0,cancelable:!1,detail:this})))}))}__toHTML(e,t){window.dispatchEvent(new CustomEvent("docx-file-system-data",{composed:!1,bubbles:!1,cancelable:!0,detail:{name:t,value:e.value}}))}HTMLToDOCX(e,t,i=!0){const o=`<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>\n      <head>\n        <meta charset='utf-8'>\n        <title>${t}</title>\n      </head>\n      <body>\n      ${e}\n      </body>\n    </html>`;if(i){let e=document.createElement("a");document.body.appendChild(e),e.href="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(o),e.download=`${t}.docx`,e.click(),document.body.removeChild(e)}return o}fileToHTML(e,t="filepicked"){var i=new FileReader;i.onload=async e=>{await this.docx.convertToHtml({arrayBuffer:e.target.result}).then((e=>this.__toHTML(e,t))).done()},i.readAsBinaryString(e)}}customElements.define(Rd.tag,Rd),window.DOCXFileSystemBroker=window.DOCXFileSystemBroker||{},window.DOCXFileSystemBroker.requestAvailability=()=>(window.DOCXFileSystemBroker.instance||(window.DOCXFileSystemBroker.instance=document.createElement("docx-file-system-broker"),document.body.appendChild(window.DOCXFileSystemBroker.instance)),window.DOCXFileSystemBroker.instance);const zd=window.DOCXFileSystemBroker.requestAvailability();var Id=Object.freeze({__proto__:null,DOCXFileSystemBrokerSingleton:zd,DOCXFileSystemBroker:Rd,FileSystemBroker:Hd,FileSystemBrokerSingleton:Dd});class $d extends(R(function(e){return class extends e{static get properties(){return super.properties?Object.assign({fileTypes:{type:Object,value:()=>({CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"})}},super.properties):{fileTypes:{type:Object,value:()=>({CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"})}}}downloadFromData(e,t,i="download",o=!0){const a=this.fileTypes[t.toUpperCase()],n=new Blob([decodeURIComponent(encodeURI(e))],{type:a}),r=i+"."+t.toLowerCase();if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n,r);else{const e=document.createElement("a");e.href=(window.URL||window.webkitURL).createObjectURL(n),e.download=r,e.target=o?"_blank":"_self",this.appendChild(e),e.click(),this.removeChild(e)}}downloadFromURI(e,t=!0){return window.open(e,t?"_blank":"_self"),!0}}}(p))){static get styles(){return[...Va,i`#wrapper,:host{margin:0;padding:0;display:flex;flex-direction:column;align-items:stretch;position:relative;flex:1 1 100%}#spacer{flex:1 1 100%;z-index:-1}#textarea{position:absolute;top:0;bottom:0;margin:0;padding:0}hax-toolbar{flex:0 0 auto;background-color:var(--hax-ui-background-color)}hax-toolbar::part(buttons){display:flex;justify-content:center;align-items:stretch;margin:0 auto}hax-tray-button{flex:1 1 auto}@media screen and (max-width:800px){hax-tray-button{flex:0 1 auto}}`]}render(){return o` <div id="wrapper"> <div id="spacer"></div> <textarea id="hiddentextarea" hidden></textarea> <code-editor id="textarea" theme="${"hax"==this.haxUiTheme?"vs":"haxdark"==this.haxUiTheme?"vs-dark":"auto"}" language="html" font-size="13" word-wrap></code-editor> </div> <hax-toolbar always-expanded> <hax-tray-button label="${this.t.refresh}" tooltip="${this.t.refreshTooltip}" icon="icons:refresh" @click="${this.refreshHTMLEditor.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button label="${this.t.updatePage}" tooltip="${this.t.updatePageTooltip}" icon="editor:insert-drive-file" @click="${this.importContent.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.scrubContent.bind(this)}" icon="editor:format-clear" label="${this.t.cleanFormatting}" tooltip="${this.t.cleanFormattingTooltip}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.selectBody.bind(this)}" icon="icons:content-copy" label="${this.t.copyHTML}" tooltip="${this.t.copyHTMLTooltip}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button label="${this.t.downloadHTML}" tooltip="${this.t.downloadHTMLTooltip}" icon="icons:file-download" @click="${this.download.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button label="${this.t.downloadDOCX}" tooltip="${this.t.downloadDOCXTooltip}" icon="editor:insert-drive-file" @click="${this.downloadDOCX.bind(this)}" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.importDOCX.bind(this)}" label="${this.t.importDOCX}" tooltip="${this.t.importDOCXTooltip}" icon="icons:file-upload" show-text-label icon-position="top"> </hax-tray-button> <hax-tray-button @click="${this.htmlToHaxElements.bind(this)}" label="${this.t.schema}" tooltip="${this.t.schemaTooltip}" icon="hax:code-json" show-text-label icon-position="top"> </hax-tray-button> </hax-toolbar> `}static get tag(){return"hax-view-source"}refreshHTMLEditor(e){this.updateEditor()}importDOCX(e){Promise.resolve().then((function(){return Id})).then((async e=>{const t=window.FileSystemBroker.requestAvailability(),i=await t.loadFile("docx");window.DOCXFileSystemBroker.requestAvailability().fileToHTML(i,"hax-view-source")}))}insertDOCXFileContents(e){if("hax-view-source"===e.detail.name){let i=document.createElement("div");i.innerHTML=e.detail.value;let o=!1;Zo.activeNode.hasAttribute("slot")&&(o=Zo.activeNode.getAttribute("slot"));for(var t=i.children.length-1;t>0;t--)o&&i.children[t].setAttribute("slot",o),Zo.activeNode.parentNode.insertBefore(i.children[t],Zo.activeNode.nextSibling);Zo.toast(this.t.fileImported),this.close()}}connectedCallback(){super.connectedCallback(),window.addEventListener("docx-file-system-data",this.insertDOCXFileContents.bind(this))}disconnectedCallback(){window.removeEventListener("docx-file-system-data",this.insertDOCXFileContents.bind(this)),super.disconnectedCallback()}download(e){const t=this.contentToFile(!1);this.downloadFromData(t,"html","my-new-code"),Zo.toast("HTML content downloaded"),this.close()}async downloadDOCX(e){let t=await Zo.activeHaxBody.haxToContent();window.DOCXFileSystemBroker.requestAvailability().HTMLToDOCX(t,document.title),Zo.toast("docx file downloaded"),this.close()}downloadfull(e){const t=this.contentToFile(!0);this.downloadFromData(t,"html","my-new-webpage"),Zo.toast("Working offline copy downloaded"),this.close()}importContent(e){const t=this.shadowRoot.querySelector("#textarea").value;Zo.activeHaxBody.importContent(t),Zo.haxTray.trayDetail=""}scrubContent(e){const t=this.shadowRoot.querySelector("#textarea").value;Zo.toast("Scrubbed, Content updated"),Zo.activeHaxBody.importContent(s(t)),this.close()}openSource(){import("./2232432d.js").then((()=>{this.updateEditor()}))}selectBody(e){let t=this.shadowRoot.querySelector("#hiddentextarea");t.value=this.shadowRoot.querySelector("#textarea").value,t.removeAttribute("hidden"),t.focus(),t.select(),document.execCommand("copy"),t.setAttribute("hidden","hidden"),Zo.toast(this.t.copiedToClipboard)}async htmlToHaxElements(e){let t=await Zo.htmlToHaxElements(this.shadowRoot.querySelector("#textarea").value);var i=JSON.stringify(t,null,2);let o=this.shadowRoot.querySelector("#textarea").value,a=this.shadowRoot.querySelector("#hiddentextarea");a.removeAttribute("hidden"),a.value=i,a.focus(),a.select(),document.execCommand("copy"),a.value=o,a.setAttribute("hidden","hidden"),Zo.toast(this.t.copiedToClipboard),this.close()}close(){Zo.haxTray.trayDetail=""}async firstUpdated(e){super.firstUpdated&&(super.firstUpdated(e),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxViewSource",object:this}})))}updateEditor(){Zo.activeHaxBody&&this.shadowRoot&&this.shadowRoot.querySelector("#textarea")&&(this.shadowRoot.querySelector("#textarea").editorValue="",setTimeout((async()=>{this.shadowRoot.querySelector("#textarea").editorValue=N(await Zo.activeHaxBody.haxToContent())}),0))}async contentToFile(e){let t=await Zo.activeHaxBody.haxToContent();var i=t;return e&&(i=`\n        <!DOCTYPE html>\n        <html lang="en">\n          <head>\n            <meta charset="utf-8" />\n            <meta\n              name="viewport"\n              content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes"\n            />\n            <title>hax-body demo</title>\n            <script>window.WCGlobalCDNPath="https://cdn.webcomponents.psu.edu/cdn/"; <\/script> <script src="https://cdn.webcomponents.psu.edu/cdn/build.js"><\/script> \n            <style>\n              body {\n                padding: 32px;\n              }\n            </style>\n          </head>\n          <body>\n          ${t}\n          </body>\n        </html>\n      `),i}static get properties(){return{...super.properties,globalPreferences:{type:Object},theme:{type:String}}}constructor(){super(),this.t={updatePage:"Update",updatePageTooltip:"Update Page HTML",copyHTML:"Copy",copyHTMLTooltip:"Copy HTML to clipboard",downloadHTML:"Download",downloadHTMLTooltip:"Download HTML format",downloadDOCX:"Download DOCX",downloadDOCXTooltip:"Download .docx format",cleanFormatting:"Clean",cleanFormattingTooltip:"Clean HTML Formatting",cleanFormatting:"Clean",schema:"Schema",schemaTooltip:"HAX Schema",refresh:"Refresh",refreshTooltip:"Refresh HTML source",importDOCX:"Import DOCX",importDOCXTooltip:"Import .docx content into body",fileImported:"File imported"},this.registerLocalization({context:this,namespace:"hax"}),this.fileTypes={CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain",HTML:"text/html"},Ai((()=>{this.globalPreferences=Ii(Zo.globalPreferences),this.haxUiTheme=(this.globalPreferences||{}).haxUiTheme||"hax"}))}}window.customElements.define($d.tag,$d);class jd extends p{static get styles(){return[i`:host{display:flex;flex-direction:column;align-items:stretch;flex:0 0 auto;overflow-y:auto}simple-button-grid{overflow:auto}`]}constructor(){super(),this.staxList=[]}render(){return o` <simple-button-grid columns="3" rows="1" always-expanded> ${this.staxList.map((e=>o` <hax-tray-button icon-position="top" show-text-label index="${e.index}" label="${e.details.title}" .stax="${e.stax}" icon="hax:templates" color="green" event-name="insert-stax"></hax-tray-button> `))} </simple-button-grid> `}static get tag(){return"hax-stax-browser"}static get properties(){return{staxList:{type:Array}}}}window.customElements.define(jd.tag,jd);class Fd extends(R(p)){static get styles(){return[...qa,i`:host{display:block}.container{text-align:left}.stats{display:flex;align-items:stretch;flex-wrap:wrap}.stat{flex:1 1 auto;text-align:center;border:1px solid var(--hax-ui-border-color);font-weight:400;font-size:var(--hax-ui-font-size-xs);line-height:140%;padding:var(--hax-ui-spacing-sm)}.stat>*{display:block}.stat :first-child{font-weight:700;font-size:150%}ul{list-style:none;padding:0;margin:0}ul li{margin:0;padding:0}li>hax-toolbar-item{width:100%}hax-toolbar-item[data-active-item]::part(button){color:var(--hax-ui-color);background-color:var(--hax-ui-background-color-accent);border-color:var(--hax-ui-color-accent)}li>hax-toolbar-item.heading-level-page-break::part(button),li>hax-toolbar-item::part(button),li>hax-toolbar-item[icon="hax:h2"].heading-level-h2::part(button){width:100%;margin-left:0}li>hax-toolbar-item.heading-level-h2::part(button),li>hax-toolbar-item[icon="hax:h3"].heading-level-h3::part(button){width:calc(100% - 26px);margin-left:26px}li>hax-toolbar-item.heading-level-h3::part(button),li>hax-toolbar-item[icon="hax:h4"].heading-level-h4::part(button){width:calc(100% - calc(2 * 26px));margin-left:calc(2 * 26px)}li>hax-toolbar-item.heading-level-h4::part(button),li>hax-toolbar-item[icon="hax:h5"].heading-level-h5::part(button){width:calc(100% - calc(3 * 26px));margin-left:calc(3 * 26px)}li>hax-toolbar-item.heading-level-h5::part(button),li>hax-toolbar-item[icon="hax:h6"].heading-level-h6::part(button){width:calc(100% - calc(4 * 26px));margin-left:calc(4 * 26px)}li>hax-toolbar-item.heading-level-h6::part(button){width:calc(100% - calc(5 * 26px));margin-left:calc(5 * 26px)}`]}constructor(){super(),this.elementList=[],this.t={contentStatistics:"Content Statistics",words:"Words",headings:"Headings",pageBreaks:"Page breaks",paragraphs:"Paragraphs",widgets:"Widgets",characters:"Characters",listView:"List view"},this.registerLocalization({context:this,namespace:"hax"}),Ai((()=>{this.activeNodeIndex=Ii(Zo.activeNodeIndex)}))}async updateHAXMap(e){let t=[];for(var i=0;i<Zo.activeHaxBody.childNodes.length;i++){const e=Zo.activeHaxBody.childNodes[i];t.push(await c(e,null))}this.calcStats(t);let o=[];for(i=0;i<t.length;i++){let e=Zo.haxSchemaFromTag(t[i].tag);e.gizmo?o.push({tag:t[i].tag,icon:e.gizmo.icon,name:e.gizmo.title}):t[i].tag&&t[i].tag.includes("-")?o.push({tag:t[i].tag,icon:"hax:templates",name:"Widget"}):o.push({tag:t[i].tag,icon:"hax:paragraph",name:"HTML block"})}this.elementList=[...o]}calcStats(e){if(e&&Zo.activeHaxBody.innerText){let i={c:Zo.activeHaxBody.innerText.length,w:parseInt(Zo.activeHaxBody.innerText.split(/\s+/g).length-1),h:0,b:0,p:0,e:0};for(var t in e.forEach((e=>{switch(e.tag){case"blockquote":case"div":case"span":case"p":case"ul":case"ol":case"strong":case"em":i.p++;break;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":i.h++;break;case"page-break":i.b++;break;default:i.e++}})),i)this[`${t}Count`]=i[t]}}render(){return o` <h5>${this.t.contentStatistics}</h5> <div class="stats"> <div class="stat"> <span>${this.wCount}</span> <span>${this.t.words}</span> </div> <div class="stat"> <span>${this.pCount}</span> <span>${this.t.paragraphs}</span> </div> <div class="stat"> <span>${this.cCount}</span> <span>${this.t.characters}</span> </div> <div class="stat"> <span>${this.bCount}</span> <span>${this.t.pageBreaks}</span> </div> <div class="stat"> <span>${this.hCount}</span> <span>${this.t.headings}</span> </div> <div class="stat"> <span>${this.eCount}</span> <span>${this.t.widgets}</span> </div> </div> <h5>${this.t.listView}</h5> <ul> ${this.indentedElements.map(((e,t)=>o` <li> <hax-toolbar-item align-horizontal="left" class="heading-level-${e.parent||"h1"}" @click="${e=>this.goToItem(t)}" data-index="${t}" ?data-active-item="${t===this.activeNodeIndex}" icon="${e.icon}" label="${e.name}" show-text-label> </hax-toolbar-item> </li> `))} </ul> `}get indentedElements(){let e="h1";return this.elementList.map((t=>{let i=t;return i.parent=e,"page-break"===i.tag?(i.parent="page-break",e="page-break"):["h1","h2","h3","h4","h5","h6"].includes(i.tag)&&(i.parent=i.tag,e=i.tag),i}))}goToItem(e){if(!1!==e){let t=Zo.activeHaxBody.children[parseInt(e)];Zo.activeNode=t,t.classList.add("blinkfocus"),"function"==typeof t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded(!0):t.scrollIntoView({behavior:"smooth",inline:"center"}),setTimeout((()=>{t.classList.remove("blinkfocus")}),500)}}scrollInMap(){var t=b(e)[0];this.goToItem(t.getAttribute("data-index"))}static get tag(){return"hax-map"}static get properties(){return{opened:{type:Boolean},elementList:{type:Array},cCount:{type:String},wCount:{type:String},bCount:{type:String},hCount:{type:String},pCount:{type:String},eCount:{type:String},activeNodeIndex:{type:Number}}}}customElements.define(Fd.tag,Fd);
/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Vd extends(T(t)){static get tag(){return"simple-icon-button"}constructor(){super(),this.accentColor="grey",this.contrast=4,this.dark=!1}render(){return o` <button ?autofocus="${this.autofocus}" .aria-labelledby="${this.ariaLabelledby}" .aria-pressed="${this.toggles||this.toggled?"true":this.toggles?"false":void 0}" controls="${this.controls}" part="button" ?disabled="${this.disabled}" form="${this.form}" label="${this.label}" aria-label="${this.label}" name="${this.fieldName}" .type="${this.type}" value="${this.value}"> <simple-icon part="icon" icon="${this.icon}" accent-color="${this.accentColor}" contrast="${this.contrast}" ?dark="${this.dark}"></simple-icon> </button> `}static get properties(){return{...super.properties,contrast:{type:Number,reflect:!0}}}}customElements.define(Vd.tag,Vd);class Ud extends(R(p)){static get styles(){return[i`:host{display:block}.pref-container{text-align:left}simple-icon-lite{--simple-icon-height:36px;--simple-icon-width:36px}`]}constructor(){super(),this.hideLink=!1,this.t={learnAboutHAXTheWeb:"Learn about HAXTheWeb",voiceCommands:"Voice commands",haxUITheme:"HAX UI Theme",language:"Language",english:"English",spanish:"Spanish"},this.udpateSchema(),this.registerLocalization({context:this,namespace:"hax",updateCallback:"udpateSchema"}),Ai((()=>{this.globalPreferences=Ii(Zo.globalPreferences),this.globalPreferences.haxLang&&z.lang!=this.globalPreferences.haxLang&&(z.lang=this.globalPreferences.haxLang||"en",this.udpateSchema())}))}udpateSchema(){let e=z.lang;e.indexOf("-")&&(e=e.split("-")[0]),this.schema=[{property:"haxVoiceCommands",title:this.t.voiceCommands,description:"Experimental: Voice based control system",inputMethod:"boolean",value:!1},{property:"haxUiTheme",title:this.t.haxUITheme,description:"Change the theme of the HAX interface (not the site's content).",inputMethod:"radio",options:{hax:"Default (light)",haxdark:"Dark",system:"System Default"},value:"hax"},{property:"haxLang",title:this.t.language,description:"Toggle between supported languages for internationalization",inputMethod:"radio",options:{en:this.t.english,es:this.t.spanish},value:e}],this.schemaValues={haxVoiceCommands:!1,haxUiTheme:"hax",haxLang:e},this.shadowRoot&&this.shadowRoot.querySelector("#settingsform")&&this.reloadPreferencesForm()}closeBtn(e){this.dispatchEvent(new CustomEvent("hax-tray-button-click",{bubbles:!0,cancelable:!0,composed:!0,detail:{eventName:"open-preferences",index:0,value:!0}}))}render(){return o` <div style="height:100%;overflow:auto" class="pref-container"> <simple-fields id="settingsform" .schematizer="${$o}" .elementizer="${jo}"> </simple-fields> </div> <hr> <br> ${this.hideLink?"":o`<a href="https://haxtheweb.org/" rel="noopener" id="link" target="_blank" part="haxlink"><simple-icon-lite icon="hax:hax2022"></simple-icon-lite> ${this.t.learnAboutHAXTheWeb}</a>`} `}static get tag(){return"hax-preferences-dialog"}static get properties(){return{hideLink:{type:Boolean},schema:{type:Object},globalPreferences:{type:Object}}}firstUpdated(e){this.reloadPreferencesForm(),this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this))}__valueChangedEvent(e){e.detail.value&&(Zo.globalPreferences={...e.detail.value},this.schemaValues={...e.detail.value})}reloadPreferencesForm(){this.shadowRoot.querySelector("#settingsform").fields=[...this.schema],this.shadowRoot.querySelector("#settingsform").value={...this.schemaValues}}}window.customElements.define(Ud.tag,Ud);class qd extends p{static get styles(){return i`:host{display:block}.progress-line,.progress-line:before{height:5px;width:100%;margin:auto}:host([full]) .progress-line{--loading-indicator-width:100%}.progress-line{background-color:var(--loading-indicator-background-color,rgba(0,0,0,.05));display:-webkit-flex;display:flex;width:var(--loading-indicator-width,300px)}.progress-line:before{background-color:var(--loading-indicator-color,#000);content:"";animation:running-progress 2s cubic-bezier(.4,0,.2,1) infinite}@keyframes running-progress{0%{margin-left:0;margin-right:100%}50%{margin-left:25%;margin-right:0}100%{margin-left:100%;margin-right:0}}@keyframes fade-out{0%{opacity:1}99%{opacity:0}100%{opacity:0}}`}static get properties(){return{full:{type:Boolean,reflect:!0},loading:{type:Boolean,reflect:!0}}}constructor(){super(),this.full=!1,this.loading=!1}render(){return this.loading?o`<div class="progress-line"></div>`:k}static get tag(){return"loading-indicator"}}customElements.define(qd.tag,qd);class Gd extends(R(f(n(p)))){static get tag(){return"hax-tray"}constructor(){super(),this.tourName="hax",this.__winEvents={"can-redo-changed":"_redoChanged","can-undo-changed":"_undoChanged","hax-drop-focus-event":"_expandSettingsPanel"},this.t={structure:"Outline",structureTip:"View Page Structure",editSelected:"Edit selected",edit:"Edit",save:"Save",move:"Move",close:"Close",moveMenu:"Toggles Menu Aligmnent",menuAlignment:"Menu Alignment",menuLeft:"Move",menuRight:"Move",menuPosition:"Menu position",changeSideVisually:"Change which side of the screen the menu is affixed to visually.",expand:"Expand",collapse:"Collapse",menuSize:"Menu size",menuSizeDescription:"Expand or collapse the menu visually.",takeATour:"Help",settings:"Settings",source:"Source",undo:"Undo",redo:"Redo",media:"Media",blocks:"Blocks",cancel:"Cancel",cancelWithoutSaving:"Cancel without saving",configure:"Configure",advanced:"Advanced",layout:"Layout",alignment:"Alignment",left:"Left",center:"Center",right:"Right",search:"Search",templates:"Templates",width:"Width"},this.registerLocalization({context:this,namespace:"hax",updateCallback:"_updateTrayDetail"}),this._initial=!0,this.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},this.collapsed=!0,this.activeTab="item-0",this.activeSchema=[],this.canUndo=!1,this.canRedo=!1,this.trayDetail="content-edit",this.activeTagName="",this.traySizeIcon="hax:arrow-expand-right",this.__setup=!1,setTimeout((()=>{this.addEventListener("hax-tray-button-click",this._processTrayEvent.bind(this))}),0),Ai((()=>{this.activeGizmo=Ii(Zo.activeGizmo)})),Ai((()=>{this.activeNode=Ii(Zo.activeNode)})),Ai((()=>{this.elementAlign=Ii(Zo.elementAlign)})),Ai((()=>{this.tourOpened=Ii(Zo.tourOpened)})),Ai((()=>{this.appStoreLoaded=Ii(Zo.appStoreLoaded)})),Ai((()=>{this.globalPreferences=Ii(Zo.globalPreferences),this.haxUiTheme=(this.globalPreferences||{}).haxUiTheme||"hax",document.body.setAttribute("hax-ui-theme",this.haxUiTheme)})),Ai((()=>{this.editMode=Ii(Zo.editMode)}))}_expandSettingsPanel(e){this.shadowRoot.querySelector("#content-edit").click()}_redoChanged(e){this.canRedo=e.detail.value}_undoChanged(e){this.canUndo=e.detail.value}static get styles(){return[...super.styles||[],...Ua,...Va,i`:host{z-index:var(--hax-ui-focus-z-index - 1);top:0;font-family:var(--hax-ui-font-family);font-size:var(--hax-ui-font-size);color:var(--hax-ui-color);transition:0s color linear 0s}:host(:focus-within),:host(:hover){z-index:var(--hax-ui-focus-z-index)}.wrapper{position:fixed;display:none;align-items:stretch;flex-direction:row-reverse;opacity:0;visibility:visible;pointer-events:none;overflow:hidden;top:0;bottom:0;width:var(--hax-tray-width);height:100vh;max-height:100vh;transition:.2s opacity ease-in-out 0s;z-index:var(--hax-ui-focus-z-index)}:host([element-align=left]) .wrapper{left:-1000px;flex-direction:row}:host([edit-mode]) .wrapper{opacity:1;visibility:visible;pointer-events:all;display:flex}:host([edit-mode][element-align=left]) .wrapper{left:0}:host([edit-mode][element-align=right]) .wrapper{right:0}:host([edit-mode][collapsed]) .wrapper{width:unset}:host([edit-mode]) .wrapper.full-panel{width:unset;left:0;right:0}:host([edit-mode]) .wrapper.full-panel .detail{max-width:unset}#menubar{display:inline-flex;flex-direction:column;align-items:stretch;width:var(--hax-tray-menubar-min-width);overflow:visible;flex:0 0 auto;z-index:6;background-color:var(--hax-ui-background-color)}:host([collapsed]) #menubar{width:unset}#menubar>*{background-color:var(--hax-ui-background-color)}#menubar>::part(button){padding:var(--hax-ui-spacing-xs)}#menubar>::part(label){opacity:0;margin:0;width:0%;font-size:10px;padding:0;visibility:hidden;overflow:hidden;display:inline-block;text-align:left;transition:.2s width ease-in-out 0s,.2s margin ease-in-out 0s,.2s padding ease-in-out 0s,0s opacity linear .2s,0s visibility linear .2s}:host([collapsed]) #menubar>::part(label){opacity:1;width:100%;visibility:visible;padding:0 var(--hax-ui-spacing-sm);overflow:unset;transition:.2s width ease-in-out 0s,.2s margin ease-in-out 0s,.2s padding ease-in-out 0s,0s opacity linear 0s,0s visibility linear 0s,0s overflow linear .2s}loading-indicator{--loading-indicator-background-color:var(
            --simple-colors-default-theme-accent-2,
            grey
          );--loading-indicator-color:var(
            --simple-colors-default-theme-accent-10,
            black
          )}#tray-detail,.detail{flex:1 1 auto;display:flex;flex-direction:column;align-items:stretch}.detail{opacity:1;visibility:visible;pointer-events:all;transition:.2s opacity ease-in-out 0s,.2s width ease-in-out 0s,.2s visibility ease-in-out 0s,0s border linear;border:1px solid var(--hax-ui-border-color);background-color:var(--hax-ui-background-color);transition:.2s width ease-in-out 0s;max-height:100vh;max-width:calc(var(--hax-tray-width) - var(--hax-tray-menubar-min-width));overflow-x:auto}:host([collapsed]) .detail{width:0;overflow:hidden;opacity:0;visibility:hidden;pointer-events:none;max-height:100vh;overflow-y:auto}#tray-detail{width:auto;padding:0 var(--hax-ui-spacing) var(--hax-ui-spacing);overflow-y:auto}#haxcancelbutton::part(dropdown-icon){display:none}.tray-detail-titlebar{background-color:var(--hax-ui-color-accent);padding:var(--hax-ui-spacing-sm) var(--hax-ui-spacing);margin:0 calc(0px - var(--hax-ui-spacing)) var(--hax-ui-spacing);display:flex;align-items:center;justify-content:space-between;height:var(--simple-modal-titlebar-height,unset);line-height:var(--simple-modal-titlebar-line-height,unset);position:sticky;z-index:2;top:0}.tray-detail-titlebar h4{flex:1 1 auto;font-size:var(--hax-ui-font-size);font-family:var(--hax-ui-font-family)}#toggle-tray-size{flex:0 0 auto}hax-app-browser,hax-gizmo-browser,hax-tray-button{transition:.2s all ease-in-out;transition:0s color linear!important;transition:0s background-color linear!important;transition:0s border-color linear!important;visibility:visible}hax-app-browser:not(:defined),hax-gizmo-browser:not(:defined),hax-tray-button:not(:defined){visibility:hidden}hax-tray-upload{flex:0 0 auto}[hidden]{display:none}:host([element-align=right]) #button{right:0}:host([element-align=left]) #button{left:0}#button{position:fixed;top:0;visibility:visible;margin:var(--hax-ui-spacing-xs)}:host([edit-mode]) #button{visibility:hidden;opacity:0}#button:hover{opacity:1}@media screen and (max-width:800px){:host{width:100%;z-index:calc(var(--hax-ui-focus-z-index) + 3)}.wrapper{width:unset;top:-1000px;left:0;right:0;flex-direction:column}:host([edit-mode]) .wrapper{top:0}:host([collapsed]) .wrapper{height:var(--hax-tray-menubar-min-height);overflow-y:visible}:host([element-align=left]) .wrapper{left:-1000px;flex-direction:column}#menubar{position:sticky;flex-direction:row;left:0;top:0;height:auto;flex:0 0 auto;width:100%}#menubar>*{flex:1 0 auto;min-width:var(--hax-tray-menubar-min-width)}#menubar>::part(button){min-width:var(--hax-tray-menubar-min-width);justify-content:space-around}#menubar>::part(label){display:none}#haxMenuAlign{display:none}.detail{width:100%;position:relative;flex:1 1 100%}:host([collapsed]) .detail{flex:0 0 0px}}@media screen and (max-width:600px){:host([edit-mode]) .hide-small{display:none}}`]}get trayStatus(){let e=this.collapsed?"collapsed":"view-source"==this.trayDetail?"full-panel":"side-panel";return Zo.trayStatus=e,Zo.trayDetail=this.trayDetail,e}render(){return o` ${this.panelOpsTemplate} <div class="wrapper ${this.trayStatus}"> ${this.menuToolbarTemplate} <div class="detail"> <loading-indicator ?loading="${!this.appStoreLoaded}"></loading-indicator> ${this.trayDetailTemplate} </div> </div> `}get panelOpsTemplate(){return this.hidePanelOps?"":o` <hax-tray-button large voice-command="edit page" .data-opened="${this.editMode}" @click="${this._clickEditButton}" icon="create" id="button" feature show-text-label show-tooltip label="${this.editMode?this.t.save:this.t.edit}"></hax-tray-button> `}get toolbarsTemplate(){return o`${this.opsToolbarTemplate}${this.trayToolbarTemplate}`}get menuToolbarTemplate(){return o` <div id="menubar" class="collapse-menu"> ${this.saveButtons} ${this.doButtons} ${this.contentButtons} <slot name="tray-buttons-pre"></slot> ${this.moreButtons}${this.menuButtons} </div>`}get menuButtons(){return o` <hax-tray-button show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}" id="haxMenuAlign" event-name="toggle-element-align" icon="arrow-${"left"==this.elementAlign?"forward":"back"}" label="${"left"==this.elementAlign?this.t.menuRight:this.t.menuLeft}" index="${"left"==this.elementAlign?"1":"0"}" tooltip="${this.t.moveMenu} ${"left"==this.elementAlign?this.t.right:this.t.left}"> </hax-tray-button> `}get saveButtons(){return this.hidePanelOps?"":o` <hax-tray-button @click="${this._clickSaveButton}" icon="save" icon-position="left" id="haxsavebutton" label="${this.editMode?this.t.save:this.t.edit}" event-name="save" voice-command="save page" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"></hax-tray-button> <hax-tray-button icon="cancel" id="haxcancelbutton" label="${this.t.cancel}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"></hax-tray-button> `}get doButtons(){return o` <hax-tray-button icon="icons:undo" ?disabled="${!this.canUndo}" label="${this.t.undo}" event-name="undo" voice-command="undo" data-simple-tour-stop data-stop-title="label" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> Undo the previous operation in the content, whether typing or adding a widget. </div> </hax-tray-button> <hax-tray-button icon="icons:redo" ?disabled="${!this.canRedo}" label="${this.t.redo}" event-name="redo" voice-command="redo" data-simple-tour-stop data-stop-title="label" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> Redo the last action that you hit Undo on. </div> </hax-tray-button>`}get contentButtons(){return o` <hax-tray-button event-name="content-add" icon="add-box" id="content-add" label="${this.t.blocks}" voice-command="select blocks (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"content-add"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> When you want to add any content to the page from text, to images, to anything more advanced; you can always find items to add under the Add content menu. Click to expand, then either drag and drop items into the page or click and have them placed near whatever you are actively working on. </div> </hax-tray-button> <hax-tray-button event-name="media-add" icon="image:collections" id="media-add" label="${this.t.media}" voice-command="select media (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"media-add"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> Search for media and content anywhere that your copy of HAX has access to. Pick what to search, perform the search and then click or drag the item into the contnet. </div> </hax-tray-button> <hax-tray-button event-name="content-edit" icon="build" id="content-edit" label="${this.t.edit}" ?disabled="${!this.activeTagName||""==this.activeTagName||!this.activeNode||!this.activeNode.tagName}" voice-command="(modify)(configure)(edit) selected" data-simple-tour-stop data-stop-title="label" controls="tray-detail" tooltip="${this.t.editSelected} ${this.activeTagName}" toggles ?toggled="${!this.collapsed&&"content-edit"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div slot="tour" data-stop-content> When you want to add any content to the page from text, to images, to anything more advanced; you can always find items to add under the Add content menu. Click to expand, then either drag and drop items into the page or click and have them placed near whatever you are actively working on. </div> </hax-tray-button> <hax-tray-button event-name="content-map" icon="icons:toc" id="content-map" label="${this.t.structure}" voice-command="select structure (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"content-map"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div data-stop-content> This is a simple list of all the block areas of the page that are clickable to jump through items quickly as well as review some simple overview stats. </div> </hax-tray-button>`}get moreButtons(){return o`<hax-tray-button id="exportbtn" icon="code" label="${this.t.source}" event-name="view-source" voice-command="view (page) source" data-simple-tour-stop data-stop-title="label" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div data-stop-content> Every change you make in HAX is ultimately writing HTML. Know HTML? Awesome, pop open the source view and make any changes you like. HTML is always behind the scenes ensuring that content is portable, well formatted and easy to read. </div> </hax-tray-button> <hax-tray-button ?hidden="${this.hidePreferencesButton}" id="advanced-settings" event-name="advanced-settings" icon="settings" label="${this.t.settings}" voice-command="select settings (menu)" data-simple-tour-stop data-stop-title="label" controls="tray-detail" toggles ?toggled="${!this.collapsed&&"advanced-settings"===this.trayDetail}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"> <div data-stop-content>User preferences for customizing HAX</div> </hax-tray-button> <hax-tray-button event-name="${this.tourOpened?"stop-tour":"start-tour"}" icon="help" label="${this.t.takeATour}" voice-command="start tour" toggles ?toggled="${!this.collapsed&&this.tourOpened}" icon-position="left" show-text-label show-tooltip align-horizontal="${this.collapsed?"left":"center"}"></hax-tray-button> `}get trayDetailTemplate(){return o` <div id="tray-detail" aria-live="polite" aria-disabled="${this.collapsed?"true":"false"}" tabindex="${this.collapsed?"-1":"0"}" selected-detail="${this.trayDetail}"> <div class="tray-detail-titlebar"> <h4> ${this.trayLabel||`${this.t.editSelected} ${this.activeTagName}`} </h4> <hax-tray-button voice-command="collapse menu" id="toggle-tray-size" event-name="toggle-tray-size" icon="close" label="${this.t.close}"> </hax-tray-button> </div> ${this.viewSourceTemplate} ${this.advancedSettingsTemplate} ${this.contentMapTemplate} ${this.contentEditTemplate} ${this.contentAddTemplate} ${this.mediaTemplate} </div>`}get viewSourceTemplate(){return o` <hax-view-source id="view-source" ?hidden="${"view-source"!==this.trayDetail}"></hax-view-source>`}get advancedSettingsTemplate(){return o` <hax-preferences-dialog ?hidden="${"advanced-settings"!==this.trayDetail}"></hax-preferences-dialog>`}get contentEditTemplate(){return o` <simple-fields id="settingsform" disable-responsive code-theme="${"system"==this.haxUiTheme?"auto":"haxdark"==this.haxUiTheme?"vs-dark":"vs"}" ?hidden="${"content-edit"!==this.trayDetail}"></simple-fields>`}get contentAddTemplate(){let e="content-add"!==this.trayDetail;return o` <hax-gizmo-browser id="gizmobrowser" ?hidden="${e}"></hax-gizmo-browser> <h5 ?hidden="${e}">${this.t.templates}</h5> <hax-stax-browser id="staxbrowser" ?hidden="${e}"></hax-stax-browser>`}get contentMapTemplate(){return o`<hax-map controls="content-map" ?hidden="${"content-map"!==this.trayDetail}"></hax-map>`}get mediaTemplate(){let e="media-add"!==this.trayDetail;return o` <hax-tray-upload ?hidden="${e}"></hax-tray-upload> <h5 ?hidden="${e}">${this.t.search}</h5> <hax-app-browser id="appbrowser" ?hidden="${e}"></hax-app-browser>`}__simpleFieldsClick(e){try{this.activeTab=this.shadowRoot.querySelector("#settingsform").shadowRoot.querySelector("simple-fields").activeTab}catch(e){this.activeTab="item-0"}}_refreshAddData(){this.shadowRoot.querySelector("#gizmobrowser").resetList(Ii(Zo.gizmoList)),this.shadowRoot.querySelector("#staxbrowser").staxList=[...Ii(Zo.staxList)]}_processTrayEvent(e){var t=b(e)[0],i=e.detail.eventName;switch(this.collapsed||this.trayDetail!==i||(i="toggle-tray-size"),i){case"insert-stax":this.dispatchEvent(new CustomEvent("hax-insert-content-array",{bubbles:!0,cancelable:!0,composed:!0,detail:t.stax}));break;case"insert-tag":let i,o={tag:e.detail.value},a=Zo.haxSchemaFromTag(e.detail.value);if(t.getAttribute("data-demo-schema")&&a&&a.demoSchema&&a.demoSchema[0])i=a.demoSchema[0];else{let e=JSON.parse(t.getAttribute("event-properties")),a=t.getAttribute("event-content");null==e&&(e={}),null==a&&(a=""),i=Zo.haxElementPrototype(o,e,a)}this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:i}));break;case"advanced-settings":case"content-map":case"content-edit":case"content-add":case"media-add":this.trayDetail=e.detail.eventName,this.collapsed=!1;break;case"toggle-element-align":let n=["left","right"],r=n[e.detail.index]?n[e.detail.index]:"right";e.detail.index>1&&(this.collapsed=!0),this.style.setProperty("--hax-tray-custom-y",null),this.style.setProperty("--hax-tray-custom-x",null),Zo.elementAlign=r,localStorage.setItem("hax-tray-elementAlign",r);break;case"toggle-tray-size":this.collapsed=!this.collapsed;break;case"start-tour":this.startTour();break;case"stop-tour":window.SimpleTourManager.requestAvailability().stopTour("hax");break;case"undo":Zo.activeHaxBody.undo();break;case"redo":Zo.activeHaxBody.redo();break;case"view-source":this.trayDetail=e.detail.eventName,Zo.haxViewSource.openSource(),this.collapsed=!1}}startTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),window.addEventListener("tour-changed",this._handleTourChanged.bind(this)),this.__tour.startTour("hax")}stopTour(){this.__tour=this.__tour||window.SimpleTourManager.requestAvailability(),this.__tour.stopTour("hax"),window.removeEventListener("tour-changed",this._handleTourChanged.bind(this))}_handleTourChanged(e){this.tourOpened=e.detail.active==this.tourName}static get properties(){return{...super.properties,offsetMargin:{type:String,attribute:"offset-margin"},collapsed:{type:Boolean,reflect:!0},traySizeIcon:{type:String},appStoreLoaded:{type:Boolean},activeValue:{type:Object},activeSchema:{type:Object},elementAlign:{type:String,reflect:!0,attribute:"element-align"},light:{type:Boolean,reflect:!0},canUndo:{type:Boolean,attribute:"can-undo"},canRedo:{type:Boolean,attribute:"can-redo"},haxUiTheme:{type:String},hidePreferencesButton:{type:Boolean,reflect:!0,attribute:"hide-preferences-button"},hidePanelOps:{type:Boolean,reflect:!0,attribute:"hide-panel-ops"},globalPreferences:{type:Object},activeNode:{type:Object},activeTagName:{type:String},activeGizmo:{type:Object},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},trayDetail:{type:String,reflect:!0,attribute:"tray-detail"},trayLabel:{type:String},tourOpened:{type:String},__tour:{type:Object}}}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this.__setup||(this.shadowRoot.querySelector("#settingsform").schematizer=$o,this.shadowRoot.querySelector("#settingsform").elementizer=jo,setTimeout((()=>{this.shadowRoot.querySelector(".wrapper").style.margin=this.offsetMargin}),1e3),this.__setup=!0,this.shadowRoot.querySelector("#settingsform").addEventListener("click",this.__simpleFieldsClick.bind(this)),this.shadowRoot.querySelector("#settingsform").addEventListener("value-changed",this.__valueChangedEvent.bind(this)),this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxTray",object:this}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) Blocks (menu)",context:this.shadowRoot.querySelector("#content-add"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) element settings (menu)",context:this.shadowRoot.querySelector("#advanced-settings"),callback:"click"}})),this.dispatchEvent(new CustomEvent("hax-add-voice-command",{bubbles:!0,composed:!0,cancelable:!1,detail:{command:":name: (collapse)(open)(expand)(toggle) search (menu)",context:this.shadowRoot.querySelector("#media-add"),callback:"click"}})))}async updated(e){super.updated&&super.updated(e),e.forEach((async(e,t)=>{"editMode"==t&&(this.editMode&&await Zo.refreshActiveNodeForm(),this._editModeChanged(this.editMode)),"offsetMargin"==t&&setTimeout((()=>{this.shadowRoot.querySelector(".wrapper").style.margin=this.offsetMargin}),0),"trayDetail"==t&&this._updateTrayDetail(this[t]),"collapsed"==t&&this[t]&&this._editModeChanged(this.editMode),"activeGizmo"==t&&"view-source"!==this.trayDetail&&(this.activeGizmo?(this.activeTagName=this.activeGizmo.title,e&&"content-edit"===this.trayDetail||"content-map"===this.trayDetail||(this.trayDetail="content-edit")):["content-add","content-map"].includes(this.trayDetail)||(this.trayDetail="content-add")),"activeNode"==t&&this.activeNode&&this.activeNode.tagName&&this.editMode&&await Zo.refreshActiveNodeForm()}))}async _setupForm(){let e=this.activeNode;if(this._initial=!0,this.activeValue={settings:{layout:{__position:"hax-align-left",__scale:100},configure:{},advanced:{}}},this.shadowRoot.querySelector("#settingsform").fields=[],this.shadowRoot.querySelector("#settingsform").value={},e&&e.tagName&&Zo.elementList[e.tagName.toLowerCase()]){let i={...Zo.elementList[e.tagName.toLowerCase()]};for(var t in void 0===i.gizmo.title?this.humanName=e.tagName.replace("-"," ").toLowerCase():this.humanName=i.gizmo.title,this.activeHaxElement.properties)i.settings.configure.forEach((e=>{e.property===t&&(this.activeValue.settings.configure[t]=this.activeHaxElement.properties[t]),e.attribute===t&&(this.activeValue.settings.configure[t]=this.activeHaxElement.properties[t]),e.slot===t&&(this.activeValue.settings.configure[t]=this.activeHaxElement.properties[t])})),i.settings.advanced.forEach((e=>{e.property===t&&(this.activeValue.settings.advanced[t]=this.activeHaxElement.properties[t]),e.attribute===t&&(this.activeValue.settings.advanced[t]=this.activeHaxElement.properties[t]),e.slot===t&&(this.activeValue.settings.advanced[t]=this.activeHaxElement.properties[t])}));let o=document.createElement("div");o.innerHTML=this.activeHaxElement.content,o.childNodes.forEach((e=>{1===e.nodeType&&"undefined"!==e.innerHTML&&(i.settings.configure.forEach((t=>{t.slot===e.getAttribute("slot")?this.activeValue.settings.configure[t.slot]=e.innerHTML:""!=t.slot||null!=e.getAttribute("slot")&&"null"!=e.getAttribute("slot")||(this.activeValue.settings.configure[t.slot]=e.innerHTML)})),i.settings.advanced.forEach((t=>{t.slot===e.getAttribute("slot")?this.activeValue.settings.advanced[t.slot]=e.innerHTML:""!=t.slot||null!=e.getAttribute("slot")&&"null"!=e.getAttribute("slot")||(this.activeValue.settings.advanced[t.slot]=e.innerHTML)})))})),""!=e.style.width?this.activeValue.settings.layout.__scale=e.style.width.replace("%",""):this.activeValue.settings.layout.__scale=100,"block"==e.style.display&&"0px auto"==e.style.margin&&"right"==e.style.float?this.activeValue.settings.layout.__position="hax-align-right":"block"==e.style.display&&"0px auto"==e.style.margin?this.activeValue.settings.layout.__position="hax-align-center":this.activeValue.settings.layout.__position="hax-align-left",this.activeHaxElement.properties.__scale=this.activeValue.settings.layout.__scale,this.activeHaxElement.properties.__position=this.activeValue.settings.layout.__position;let a=!!i.type&&"grid"===i.type;i.settings.configure.forEach(((e,t)=>{i.settings.configure[t].attribute&&(i.settings.configure[t].property=i.settings.configure[t].attribute),i.settings.configure[t].slot&&(i.settings.configure[t].property=i.settings.configure[t].slot)})),i.settings.advanced.forEach(((e,t)=>{i.settings.advanced[t].attribute&&(i.settings.advanced[t].property=i.settings.advanced[t].attribute),i.settings.advanced[t].slot&&(i.settings.advanced[t].property=i.settings.advanced[t].slot)})),i.settings.layout=[],i.canPosition&&i.settings.layout.push({property:"__position",title:this.t.alignment,inputMethod:"select",value:this.activeValue.settings.layout.__position,options:{"hax-align-left":this.t.left,"hax-align-center":this.t.center,"hax-align-right":this.t.right}}),i.canScale&&i.settings.layout.push({property:"__scale",title:this.t.width,inputMethod:"slider",value:this.activeValue.settings.layout.__scale,min:i.canScale.min?i.canScale.min:12.5,max:i.canScale.max?i.canScale.max:100,step:i.canScale.step?i.canScale.step:12.5}),this.activeSchema=[{property:"settings",inputMethod:"tabs",properties:[]}];let n=(e,t,i=[])=>{let o=a?i.filter((e=>!(""===e.slot||e.slot||e.attribute&&"slot"==e.attribute))):i;this.activeSchema[0].properties.push({property:e,title:t,properties:o.length>0?o:void 0,disabled:o.length<1})};Zo.testHook(e,"setupActiveElementForm")&&await Zo.runHook(e,"setupActiveElementForm",[i]),n("configure",this.t.configure,i.settings.configure),n("layout",this.t.layout,i.settings.layout),n("advanced",this.t.advanced,i.settings.advanced),this.__activePropSchema=i,this.shadowRoot.querySelector("#settingsform").fields=this.activeSchema,this.shadowRoot.querySelector("#settingsform").value=this.activeValue}}_toArray(e){return null==e?[]:Object.keys(e).map((function(t){return e[t]}))}updateMap(){this.shadowRoot&&this.shadowRoot.querySelector("hax-map")&&"content-map"==this.trayDetail&&this.shadowRoot.querySelector("hax-map").updateHAXMap()}_updateTrayDetail(e){"content-add"==e?(this.trayLabel=this.t.blocks,this._refreshAddData()):"media-add"==e?this.trayLabel=this.t.media:"content-map"==e?(this.trayLabel=this.t.structure,this.shadowRoot.querySelector("hax-map").updateHAXMap()):"advanced-settings"==e?(this.trayLabel=this.t.settings,this.shadowRoot.querySelector("hax-preferences-dialog").reloadPreferencesForm()):"content-edit"!=e||this.activeTagName&&""!=this.activeTagName&&this.activeNode&&this.activeNode.tagName?e&&""!=e?this.trayLabel=void 0:this.trayDetail="content-edit":this.trayDetail="content-add",this.requestUpdate()}__valueChangedEvent(e){if(this.editMode&&e.detail.value&&e.detail.value.settings){let i=e.detail.value.settings,o="grid"=={...Zo.elementList[this.activeNode.tagName.toLowerCase()]}.type,a={advanced:"advanced",configure:"configure",layout:"layout"};var t;clearTimeout(this.__contextPropDebounce),this.__contextPropDebounce=setTimeout((()=>{for(let s in a)for(let a in i[s])if(t=!1,null==i[s][a]||i[s][a].readOnly)"data-hax-lock"===a&&(this.dispatchEvent(new CustomEvent("hax-toggle-active-node-lock",{bubbles:!0,composed:!0,cancelable:!0,detail:{lock:!1,node:this.activeNode}})),this.__lockAllSettings(!1)),this.activeNode.removeAttribute(O(a));else{if("prefix"===a&&""!=i[s][a])this.activeNode.setAttribute("prefix",i[s][a]),t=!0;else if("data-hax-lock"===a)this.dispatchEvent(new CustomEvent("hax-toggle-active-node-lock",{bubbles:!0,composed:!0,cancelable:!0,detail:{lock:i[s][a],node:this.activeNode}})),this.__lockAllSettings(i[s][a]);else if("innerText"===a)this.activeNode.innerText=i[s][a],t=!0;else if("layout"===s&&"__position"===a)t=!0,this._initial||(clearTimeout(this.__contextValueDebounce),this.__contextValueDebounce=setTimeout((()=>{this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:i[s][a],value:i[s][a]}}))}),50));else if("layout"===s&&"__scale"===a)t=!0,this._initial||(clearTimeout(this.__contextSizeDebounce),this.__contextSizeDebounce=setTimeout((()=>{this.dispatchEvent(new CustomEvent("hax-context-item-selected",{bubbles:!0,composed:!0,detail:{eventName:"hax-size-change",value:i[s][a]}}))}),50));else if(this.activeNode.hasOwnProperty(a)||this.activeNode.properties&&this.activeNode.properties.hasOwnProperty(a)||null!=i[s][a]&&i[s][a].constructor===Array||null!=i[s][a]&&i[s][a].constructor===Object)try{i[s][a].constructor===Array?this.activeNode[a]=[...i[s][a]]:i[s][a].constructor===Object?this.activeNode[a]={...i[s][a]}:this.activeNode[a]=i[s][a],t=!0}catch(e){console.warn(e),t=!1}else if(!o)for(var e in this.__activePropSchema.settings[s])if(this.__activePropSchema.settings[s][e].slot==a){let o="span";if(this.__activePropSchema.settings[s][e].slotWrapper)o=this.__activePropSchema.settings[s][e].slotWrapper;else if(this.__activePropSchema.settings[s][e].allowedSlotWrappers&&this.__activePropSchema.settings[s][e].allowedSlotWrappers[0])o=this.__activePropSchema.settings[s][e].allowedSlotWrappers[0];else if("code-editor"===this.activeNode.tagName.toLowerCase())o="template";else{let t=["span","div","p"],i=this.__activePropSchema.settings[s][e].excludedSlotWrappers||[];i&&(t=t.filter((e=>!i.includes(e))))}var n=document.createElement(o);if(this.__activePropSchema.settings[s][e].slotAttributes)for(var r in this.__activePropSchema.settings[s][e].slotAttributes)n.setAttribute(r,this.__activePropSchema.settings[s][e].slotAttributes[r]);""!==this.__activePropSchema.settings[s][e].slot&&(n.slot=this.__activePropSchema.settings[s][e].slot),n.innerHTML=i[s][a];const l=n.cloneNode(!0);t=!0,Zo.isTextElement(this.activeNode)?this.activeNode.innerHTML=n.innerHTML:(v(this.activeNode,this.__activePropSchema.settings[s][e].slot),this.activeNode.appendChild(l))}if(!t)try{!0===i[s][a]?this.activeNode.setAttribute(O(a),O(a)):!1===i[s][a]||""===i[s][a]?this.activeNode.removeAttribute(O(a)):this.activeNode.setAttribute(O(a),i[s][a])}catch(e){console.warn(e),console.warn(a,i[s][a])}}}),100)}setTimeout((()=>{this._initial&&(this._initial=!1)}),51)}__lockAllSettings(e){this.shadowRoot.querySelectorAll("simple-fields-tab *[is-simple-field-type]:not([name='settings.advanced.data-hax-lock'])").forEach((t=>{t.disabled=e}))}_editModeChanged(e){!this.hidePanelOps&&this.shadowRoot&&this.shadowRoot.querySelector("#button")&&(this.shadowRoot.querySelector("#button").icon=e?"save":"create")}_clickEditButton(e){Zo.editMode=!0,window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}_clickSaveButton(e){Zo.editMode=!1,this.dispatchEvent(new CustomEvent("hax-save",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail})),window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}window.customElements.define(Gd.tag,Gd);class Xd extends(Vo(p)){static get styles(){return[i`:host{display:none}`]}render(){return o`<slot></slot>`}static get tag(){return"hax-autoloader"}static get properties(){return{...super.properties,processedList:{type:Object}}}constructor(){super(),this.processedList={}}firstUpdated(e){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxAutoloader",object:this}}))}connectedCallback(){super.connectedCallback(),this.observer=new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{this.processNewElements(e)}))}))})),this.observer.observe(this,{childList:!0})}disconnectedCallback(){this.observer.disconnect(),super.disconnectedCallback()}processNewElements(e){let t=this.childNodes;for(var i=0;i<t.length;i++){if(void 0!==t[i].tagName&&void 0===this.processedList[t[i].tagName])try{let a=t[i].tagName.toLowerCase();if("function"==typeof t[i].getHaxProperties){const e=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:a,properties:t[i].getHaxProperties(),polymer:!0}});context.dispatchEvent(e)}else if("function"==typeof t[i].HAXWiring){const e=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,composed:!0,detail:{tag:a,properties:t[i].HAXWiring.getHaxProperties(),polymer:!1}});context.dispatchEvent(e)}else if(window.customElements.get(a)){let t=window.customElements.get(a);if(t)if("function"==typeof t.getHaxProperties)this.setHaxProperties(t.getHaxProperties(),a);else if("function"==typeof t.HAXWiring)this.setHaxProperties(t.HAXWiring.getHaxProperties(),a);else if(t.haxProperties)this.setHaxProperties(t.haxProperties,a);else{console.warn(`${a} didn't have hax wiring so HAX guessed as best it can. See https://haxtheweb.org/documentation-1/hax-development/hax-schema for documentation on adding custom wiring for better UX.`);try{let e,t=new Fo,n=t.prototypeHaxProperties();if(n.gizmo.title=a,n.gizmo.handles=[],n.settings.configure=[],n.settings.advanced=[],n=t.standardAdvancedProps(n),n.saveOptions={},n.demoSchema=[],customElements.get(a)&&(e=customElements.get(a).properties),e){for(var o in e)if(e[o].type&&e[o].type.name)switch(e[o].type.name){case"String":n.settings.configure.push({property:o,title:o,description:"",inputMethod:"textfield"});break;case"Number":n.settings.configure.push({property:o,title:o,description:"",inputMethod:"number"});break;case"Boolean":n.settings.configure.push({property:o,title:o,description:"",inputMethod:"boolean"})}}else{let e=document.createElement(a).getAttributeNames();for(i=0;i<e.length;i++)n.settings.configure.push({attribute:e[i],title:e[i],description:"",inputMethod:"textfield"})}t.readyToFireHAXSchema(a,n,this)}catch(e){console.warn("HAX failed to create wiring that worked")}}else console.error(`${a} was not a valid custom element yet a load was attempted`)}else{let e=P(Zo,`__appStoreData.autoloader.${a}.import`,P(Zo,`__appStoreData.autoloader.${a}`,`@lrnwebcomponents/${a}/${a}.js`));import(`${new URL("./../../../",import.meta.url).href}${e}`).then((e=>{let t=window.customElements.get(a);t?"function"==typeof t.getHaxProperties?this.setHaxProperties(t.getHaxProperties(),a):"function"==typeof t.HAXWiring?this.setHaxProperties(t.HAXWiring.getHaxProperties(),a):t.haxProperties?this.setHaxProperties(t.haxProperties,a):P(Zo,`__appStoreData.autoloader.${a}.haxProperties`,!1)?this.setHaxProperties(P(Zo,`__appStoreData.autoloader.${a}.haxProperties`,!1),a):console.warn(`${a} didn't have hax wiring in the end`):console.error(`${a} was not a valid custom element yet a load was attempted`)})).catch((e=>{console.warn(e)}))}this.processedList[a]=a}catch(e){}t[i].remove()}}}window.customElements.define(Xd.tag,Xd);
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class Wd extends p{static get styles(){return[i`:host{display:none}`]}static get tag(){return"simple-modal-template"}constructor(){super(),this.title="",this.modal=window.SimpleModal.requestAvailability()}static get properties(){return{modal:{type:Object},title:{type:String},mode:{type:String}}}render(){return o` <slot name="header"></slot> <slot name="content"></slot> <slot name="buttons"></slot> `}associateEvents(e,t="click",i=!0,o=!0){return e.addEventListener(t,(t=>{this.openModal(e,i,o)})),this.modal}openModal(e,t=!0,i=!0){let o=getComputedStyle(this),a={};I.forEach((e=>{a[e]=o.getPropertyValue(e),"--simple-modal-z-index"==e&&(a[e]=Number(a[e]))}));const n=new CustomEvent("simple-modal-show",{bubbles:t,cancelable:i,composed:!0,detail:{id:this.getAttribute("modal-id"),elements:{header:this._getSlot("header"),content:this._getSlot("content"),buttons:this._getSlot("buttons"),custom:this._getCustom()},resize:this.resize,invokedBy:e,modalClass:this.getAttribute("class"),styles:a,clone:!1,mode:null!==this.mode&&this.mode,title:null!==this.title&&this.title}});window.dispatchEvent(n)}_getCustom(){let e=this.querySelectorAll('[slot="custom"]');return 1==e.length?e[0].cloneNode(!0):this._getSlot("custom")}_getSlot(e){let t=this.querySelectorAll('[slot="'+e+'"]');t&&t[0]&&"SLOT"==t[0].tagName&&(t=t[0].assignedNodes({flatten:!0}));let i=document.createElement("div");return t.forEach((e=>{i.appendChild(e.cloneNode(!0))})),null!==t&&i.cloneNode(!0)}}window.customElements.define(Wd.tag,Wd);class Yd extends p{static get styles(){return[...Va,i`simple-button-grid{overflow-y:auto;margin:var(--hax-ui-spacing-sm);--simple-button-grid-cols:100px}#filters{min-height:24px}simple-icon-button-lite{float:right;margin-left:-24px}simple-fields-field::part(fieldset-legend){line-height:24px}simple-fields-field::part(fieldset-options){display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}simple-fields-field::part(option){display:flex;flex-wrap:no-wrap;align-items:center;justify-content:space-between;margin:0 var(--simple-fields-margin-small,8px);flex-direction:row-reverse}simple-fields-field::part(option-inner){flex:0 0 auto;margin:0 calc(var(--simple-fields-margin-small,8px) * .5) 0 0}simple-fields-field::part(option-label){flex:1 1 auto;margin:0;font-size:var(--hax-ui-font-size-sm,13px)}:host([filter-on]) simple-button-grid{margin-bottom:var(--simple-fields-margin-small,8px)}:host([filter-on]) #hax-gizmo-filters{margin-bottom:0}:host([filter-on]) ::part(fieldset-options){padding-bottom:var(--simple-fields-margin-small,8px)}`]}constructor(){super(),this._elements=[],this.selectionList=[],this.pickerType="gizmo"}render(){return o` ${this.keywords?o` <div id="filters"> <simple-icon-button-lite icon="editable-table:filter${this.filterOn?"-off":""}" label="Toggle Filters" tooltip-position="right" @click="${e=>this.filterOn=!this.filterOn}"> </simple-icon-button-lite> <simple-fields-field ?hidden="${!this.filterOn}" id="hax-gizmo-filters" label="Filters" type="checkbox" .options="${this.keywords}" @value-changed="${this._handleFilters}"> </simple-fields-field> </div>`:""} <simple-button-grid cols="100px"> ${this.selectionList.map(((e,t)=>this._isFiltered(e.keywords)?o` <hax-tray-button show-text-label id="picker-item-${t}" @click="${this._selected}" data-selected="${t}" ?disabled="${Zo.activeGizmo&&Zo.activeGizmo.tag==e.tag}" label="${e.title}" icon="${e.icon}" icon-position="top"></hax-tray-button> `:""))} </simple-button-grid> `}static get tag(){return"hax-picker"}static get properties(){return{_elements:{type:Array},keywords:{type:Object},selectionList:{type:Array},pickerType:{type:String,attribute:"picker-type"},filters:{type:Array},filterOn:{type:Boolean,attribute:"filter-on",reflect:!0}}}buildOptions(e,t="element",i="Select an option",o="gizmo"){this.pickerType=o;var a=[],n=t=>{"gizmo"===o?e[t].gizmo.keywords.forEach((e=>{(e=(e||"").toLowerCase()).replace(/[\s\W]*/,"").length>0&&(this.keywords[e]=e)})):"app"===o&&e[t].details.tag.forEach((e=>{(e=(e||"").toLowerCase()).replace(/[\s\W]*/,"").length>0&&(this.keywords[e]=e)}))};switch(this.keywords={},o){case"gizmo":for(var r in e)e[r].__type=t,a.push({icon:e[r].gizmo.icon,title:e[r].gizmo.title,color:e[r].gizmo.color,tag:e[r].gizmo.tag,keywords:e[r].gizmo.keywords}),n(r);break;case"app":for(var r in e)a.push({icon:e[r].details.icon,title:e[r].details.title,color:e[r].details.color,tag:e[r].details.tags||[],keywords:e[r].details.tags||[]}),n(r);break;default:a=e}this._elements=e,this.selectionList=[...a],setTimeout((()=>{this.shadowRoot.querySelector("#picker-item-0").focus()}),50)}_handleFilters(e){let t=this.shadowRoot&&this.shadowRoot.querySelector("#hax-gizmo-filters")?this.shadowRoot.querySelector("#hax-gizmo-filters"):void 0;t&&(this.filters=t.value)}_isFiltered(e){let t=0,i=!this.filterOn||!this.filters||this.filters.length<1;for(;!i&&t<this.filters.length;)e.includes(this.filters[t])&&(i=!0),t++;return i}_selected(e){let t=e.target.getAttribute("data-selected");e.preventDefault(),e.stopPropagation(),void 0!==this._elements[t]&&("gizmo"==this.pickerType?(this._elements[t].replace=!0,this.dispatchEvent(new CustomEvent("hax-insert-content",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))):this.dispatchEvent(new CustomEvent("hax-app-picker-selection",{bubbles:!0,cancelable:!0,composed:!0,detail:this._elements[t]}))),this.close()}close(){window.dispatchEvent(new CustomEvent("simple-modal-hide",{bubbles:!0,cancelable:!0,detail:{}}))}}window.customElements.define(Yd.tag,Yd);class Jd extends p{static get styles(){return[...Va,i`:host{display:none}`]}constructor(){super(),this.title="Select an option"}connectedCallback(){super.connectedCallback(),window.addEventListener("simple-modal-show",this.modalToggle.bind(this))}disconnectedCallback(){window.removeEventListener("simple-modal-show",this.modalToggle.bind(this)),super.disconnectedCallback()}modalToggle(e){"hax-picker"==e.detail.id&&e.detail.elements.content.children[0].buildOptions(this.elements,this.type,this.title,this.pickerType,this.target)}static get properties(){return{title:{type:String}}}presentOptions(e,t="element",i="Select an option",o="gizmo",a=window){this.elements=e,this.type=t,this.title=i,this.pickerType=o,this.target=a,setTimeout((()=>{this.shadowRoot.querySelector('[modal-id="hax-picker"]').openModal(a)}),0)}render(){return o` <simple-modal-template .title="${this.title}" modal-id="hax-picker" mode="hax-ui"> <hax-picker slot="content"></hax-picker> </simple-modal-template> `}static get tag(){return"hax-app-picker"}firstUpdated(){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxAppPicker",object:this}}))}}window.customElements.define(Jd.tag,Jd);class Kd extends(R(p)){static get styles(){return[...Va,i`:host{display:none;--simple-modal-resize:none;--simple-modal-width:200px;--simple-modal-height:auto;margin:0;padding:0}`]}render(){return o` <simple-modal-template modal-id="hax-cancel" mode="hax-ui" id="dialog" .title="${this.t.cancelTitle}"> <div slot="content">${this.t.cancelWithoutSaving}</div> <hax-toolbar id="hax-cancel-buttons" always-expanded slot="buttons"> <hax-tray-button id="hax-cancel-no" label="${this.t.cancelNo}" dialog-dismiss show-text-label> </hax-tray-button> <hax-tray-button id="hax-cancel-yes" dialog-confirm @click="${e=>console.log(e)}" label="${this.t.cancelYes}" show-text-label> </hax-tray-button> </hax-toolbar> </simple-modal-template> `}static get tag(){return"hax-cancel-dialog"}firstUpdated(){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxCancel",object:this}}))}constructor(){super(),this.t={cancelTitle:"Confirm Cancel",cancelWithoutSaving:"Any changes since your last save will be lost. Cancel anyway?",cancelYes:"Yes",cancelNo:"No"},this.registerLocalization({context:this,namespace:"hax"})}}window.customElements.define(Kd.tag,Kd);class Qd extends HTMLElement{get html(){return`\n    <style>\n    ${["red","blue","green","orange","purple"].map((e=>`\n        [data-style-decoration~="highlight"] {\n          color: var(--haxcms-style-element-color, white);\n          background-color: var(--haxcms-style-element-background-color, black);\n          font-weight: 400;\n          word-wrap: break-word;\n          padding: 4px 8px;\n          text-transform: uppercase;\n          text-decoration: none;\n        }\n        [data-style-decoration~="${e}"] {\n          --haxcms-style-element-background-color: var(--simple-colors-default-theme-${e}-7, ${e});\n        }\n        `)).join("\n")}\n\n    :host,h-a-x {\n      display: block;\n      font-size: var(--haxcms-base-styles-body-font-size);\n      font-family: var(--haxcms-base-styles-body-font-family);\n      line-height: var(--haxcms-base-styles-body-line-height);\n      letter-spacing: var(--haxcms-base-styles-body-letter-spacing);\n    }\n\n    :host([hidden]),h-a-x([hidden]) {\n      display: none;\n    }\n\n    :host hax-body, h-a-x hax-body {\n      font-size: var(--haxcms-base-styles-body-font-size);\n      font-family: var(--haxcms-base-styles-body-font-family);\n      line-height: var(--haxcms-base-styles-body-line-height);\n      letter-spacing: var(--haxcms-base-styles-body-letter-spacing);\n    }\n\n    :host img, h-a-x img {\n      max-width: 100%;\n      max-width: -moz-available;\n      max-width: -webkit-fill-available;\n      max-width: fill-available;\n    }\n\n    hax-body h1 {\n      font-size: var(--hax-base-styles-h1-font-size);\n      line-height: var(--hax-base-styles-h1-line-height);\n    }\n\n    hax-body h2 {\n      font-size: var(--hax-base-styles-h2-font-size);\n    }\n\n    hax-body h3 {\n      font-size: var(--hax-base-styles-h3-font-size);\n    }\n\n    hax-body h4 {\n      font-size: var(--hax-base-styles-h4-font-size);\n    }\n\n    hax-body h5 {\n      font-size: var(--hax-base-styles-h5-font-size);  \n    }\n\n    hax-body h6 {\n      font-size: var(--hax-base-styles-h6-font-size);\n    }\n\n    hax-body p {\n      min-height: var(--hax-base-styles-p-min-height);\n      font-size: var(--hax-base-styles-p-font-size);\n      line-height: var(--hax-base-styles-p-line-height);\n      letter-spacing: var(--hax-base-styles-p-letter-spacing);\n    }\n    hax-body p code {\n      padding: 0.2em 0.4em;\n      margin: 0;\n      font-size: 12px;\n      background-color: var(--hax-base-styles-code-background-color,rgba(175, 184, 193, 0.2));\n      border-radius: 6px;\n      font-family: var(--hax-base-styles-code-font-family, ui-monospace,monospace);\n    }\n    hax-body pre {\n      padding: 16px;\n      overflow: auto;\n      line-height: 1.45;\n      background-color: var(--hax-base-styles-pre-background-color,rgba(175, 184, 193, 0.2));\n      border-radius: 6px;\n      margin-bottom: 0;\n      word-break: normal;\n      word-wrap: normal;\n      margin-top: 0;\n      font-family: var(--hax-base-styles-pre-font-family, ui-monospace,monospace);\n      font-size: 12px;\n    }\n\n    hax-body a,\n    hax-body a:-webkit-any-link,\n    hax-body a,\n    hax-body a:-webkit-any-link    {\n      font-size: var(--hax-base-styles-a-font-size,var(--hax-base-styles-p-font-size));\n    }\n\n    hax-body ol,\n    hax-body ul\n    hax-body ol li,\n    hax-body ul li,\n    hax-body li {\n      line-height: var(--hax-base-styles-list-line-height,var(--hax-base-styles-p-line-height));\n      font-size: var(--hax-base-styles-list-font-size,var(--hax-base-styles-p-font-size));\n    }\n\n    hax-body  ul,\n    hax-body  ul ol,\n    hax-body  ol ul,\n    hax-body  ol ol {\n      padding-bottom: unset;\n    }\n    hax-body table {\n      min-width: 300px;\n      border-collapse: collapse;\n      margin: 0 0 15px;\n      display: table!important;\n    }\n    hax-body table caption,\n    hax-body table th,\n    hax-body table td {\n      border: 1px solid #888;\n      padding: 5px 10px;\n      text-align: left;\n      vertical-align: middle;\n    }\n    figure {\n      margin-left: 0;\n      margin-right: 0;\n    }\n    figure > *:first-child, \n    figcaption > *:first-child{\n      margin-top: 0;\n    }\n    figure > *:last-child.\n    figcaption > *:last-child {\n      margin-bottom: 0;\n    }\n    </style>\n    <hax-body>\n        <slot></slot>\n    </hax-body>`}static get tag(){return"h-a-x"}constructor(e=!1){super(),this.__rendered=!1,this.tag=Qd.tag,this.template=document.createElement("template"),this.attachShadow({mode:"open"}),e||this.render(),window.addEventListener("hax-store-ready",this.storeReady.bind(this),{once:!0,passive:!0}),window.addEventListener("hax-store-app-store-loaded",this.appStoreReady.bind(this),{once:!0,passive:!0}),window.addEventListener("hax-cancel",this.cancelEvent.bind(this)),window.addEventListener("hax-save",this.saveEvent.bind(this))}cancelEvent(e){this.importSlotToHaxBody()}async saveEvent(e){const t=await Zo.activeHaxBody.haxToContent();this.innerHTML=t,this.dispatchEvent(new CustomEvent("hax-save-body-value",{composed:!0,bubbles:!0,cancelable:!0,detail:{value:t}}))}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this.__HAXApplied||window.__HAXApplied||(window.__HAXApplied=this.__HAXApplied=this.applyHAX())}storeReady(e){e.detail&&(setTimeout((()=>{try{let e={...JSON.parse(this.getAttribute("app-store"))};"object"==typeof e&&(Zo.appStore=e)}catch(e){console.warn(e)}"hide-panel-ops"===this.hidePanelOps&&(this.hidePanelOps=!0),Zo.haxTray.hidePanelOps=this.hidePanelOps,Zo.haxTray.offsetMargin=this.offsetMargin,Zo.elementAlign=this.elementAlign}),0),window.removeEventListener("hax-store-ready",this.storeReady.bind(this),{once:!0,passive:!0}))}importSlotToHaxBody(){var e=[];e=this.shadowRoot.querySelector("slot")?this.shadowRoot.querySelector("slot").assignedNodes():this.children;let t="";for(let i in e)void 0!==e[i].outerHTML&&(t+=e[i].outerHTML);Zo.activeHaxBody.importContent(t)}appStoreReady(e){e.detail&&(this.importSlotToHaxBody(),window.removeEventListener("hax-store-app-store-loaded",this.appStoreReady.bind(this),{once:!0,passive:!0}))}render(){this.__rendered=!0,this.shadowRoot.innerHTML=null,this.template.innerHTML=this.html,this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}applyHAX(){let e=window.HaxStore.requestAvailability(),t=document.createElement("hax-tray");return t.hidePanelOps=this.hidePanelOps,this.elementAlign=
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
function(e){try{return localStorage.getItem(e)}catch(e){return!1}}("hax-tray-elementAlign"),this.elementAlign&&null!=this.elementAlign||(this.elementAlign="right"),e.elementAlign=this.elementAlign,document.body.appendChild(t),document.body.appendChild(document.createElement("hax-app-picker")),document.body.appendChild(document.createElement("hax-export-dialog")),document.body.appendChild(document.createElement("hax-autoloader")),document.body.appendChild(document.createElement("hax-cancel-dialog")),!0}disconnectedCallback(){window.removeEventListener("hax-store-ready",this.storeReady.bind(this),{once:!0,passive:!0}),window.removeEventListener("hax-store-app-store-loaded",this.appStoreReady.bind(this),{once:!0,passive:!0}),window.removeEventListener("hax-cancel",this.cancelEvent.bind(this)),window.removeEventListener("hax-save",this.saveEvent.bind(this)),super.disconnectedCallback&&super.disconnectedCallback()}static get observedAttributes(){return["element-align","offset-margin","app-store","hide-panel-ops"]}get elementAlign(){return this.getAttribute("element-align")}set elementAlign(e){this.__rendered&&(this.setAttribute("element-align",e),Zo.elementAlign=e)}get offsetMargin(){return this.getAttribute("offset-margin")}set offsetMargin(e){this.setAttribute("offset-margin",e),this.__rendered&&(Zo.haxTray.offsetMargin=e)}get hidePanelOps(){return this.getAttribute("hide-panel-ops")}set hidePanelOps(e){e&&(this.setAttribute("hide-panel-ops","hide-panel-ops"),this.__rendered&&(Zo.haxTray.hidePanelOps=e))}get appStore(){return this.getAttribute("app-store")}set appStore(e){this.setAttribute("app-store",e),this.__rendered&&(Zo.appStore={...JSON.parse(this.getAttribute("app-store"))})}attributeChangedCallback(e,t,i){}}window.customElements.define("h-a-x",Qd);var Zd=Object.freeze({__proto__:null,HAX:Qd});export{Zo as H,Na as R,sa as a,da as b,la as c,Ai as d,ca as e,ka as f,qa as g,$o as h,jo as i,Ya as j,Zd as k,Pd as s,Ii as t};
