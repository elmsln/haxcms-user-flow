import{r as e,$ as t,s as i,c as o,S as s,y as r,n as a}from"./433c249e.js";import"./bd8a50e6.js";const l=[e`:host{visibility:visible;box-sizing:border-box;display:block;margin:0 0 var(--simple-fields-margin,16px);padding:0;font-size:var(--simple-fields-font-size);font-family:var(--simple-fields-font-family,sans-serif);line-height:var(--simple-fields-line-height);font-size:var(--simple-fields-detail-font-size,12px);font-family:var(--simple-fields-detail-font-family,sans-serif);line-height:var(--simple-fields-detail-line-height,130%);background-color:var(--simple-fields-background-color,#fff);color:var(--simple-fields-color,currentColor);margin:0 0 var(--simple-fields-field-margin,var(--simple-fields-margin,16px));--simple-picker-options-border:1px solid var(
          --simple-fields-button-border-color,
          var(--simple-fields-border-color, #999)
        );--simple-picker-options-focus-border:1px solid var(--simple-fields-accent-color, #3f51b5)}::slotted([slot=field]){--simple-picker-options-left:0;--simple-picker-options-right:0;--simple-picker-options-border:1px var(
          --simple-fields-button-border-color,
          var(--simple-fields-border-color, #999)
        ) solid;--simple-picker-options-focus-border:1px var(--simple-fields-accent-color, #3f51b5) solid}:host [hidden],:host([hidden]),:host([type=hidden]){display:none!important}ul[role=listbox]{z-index:2;opacity:0;margin:0;padding:0;top:100%;background-color:var(--simple-fields-background-color,#fff);color:var(--simple-fields-color,currentColor);border:1px var(--simple-fields-button-border-color,var(--simple-fields-border-color,#999)) solid;overflow:auto}ul[role=listbox].focus,ul[role=listbox]:focus,ul[role=listbox]:focus-within{border-color:var(--simple-fields-accent-color,#3f51b5)}:host([disabled]),[disabled]{pointer-events:none!important}`],n=[e`:host .label-main:after{content:var(--simple-fields-label-flag, "")}:host(:focus-within) .label-main,:host([focused]) .label-main{color:var(--simple-fields-accent-color,#3f51b5);transition:color .3s ease-in-out}.inline{--simple-fields-radio-option-display:flex;--simple-fields-radio-option-flex-wrap:wrap}label{margin:0}.inline label,.option label{margin:0 var(--simple-fields-margin-small,8px) 0 0;flex:0 1 var(--simple-fields-label-width,auto)}.field,.field-main>div,.inline label,.option label,::slotted([slot=field]){font-size:var(--simple-fields-font-size,16px);text-align:var(--simple-fields-text-align);font-family:var(--simple-fields-font-family,sans-serif);line-height:var(--simple-fields-line-height,22px)}`],d=[...[e`simple-toolbar-button::part(tooltip),simple-tooltip{text-transform:var(--simple-fields-tooltip-text-transform,unset);font-family:var(--simple-fields-detail-font-family,var(--simple-fields-font-family,sans-serif));font-size:var(--simple-fields-tooltip-font-size,var(--simple-fields-detail-font-size,12px));line-height:var(--simple-fields-tooltip-line-height,var(--simple-fields-detail-line-height,22px));border-radius:var(--simple-fields-border-radius,var(--simple-fields-tooltip-border-radius,2px))}`],e`button,button[aria-selected],simple-toolbar-button::part(button),simple-toolbar-menu::part(button){color:var(--simple-fields-button-color,var(--simple-fields-color));background-color:var(--simple-fields-button-background-color,var(--simple-fields-background-color));border-width:1px;border-style:solid;border-color:var(--simple-fields-button-border-color,var(--simple-fields-border-color,#999));opacity:var(--simple-fields-button-focus-opacity,1);font-family:var(--simple-fields-button-font-family,var(--simple-fields-font-family,sans-serif));font-size:var(--simple-fields-button-font-size,14px);line-height:var(--simple-fields-button-line-height 22px);text-transform:var(--simple-fields-button-text-transform,unset);border-radius:var(--simple-fields-border-radius,2px);padding:var(--simple-fields-button-padding-sm,1px) var(--simple-fields-button-padding,2px);min-height:calc(24px + 2 * var(--simple-fields-button-padding-sm,2px) + 2px)}simple-toolbar-menu-item>simple-toolbar-button::part(button){border-color:transparent;border-radius:0!important}simple-toolbar-button.danger::part(button),simple-toolbar-menu.danger::part(button){background-color:var(--simple-fields-button-danger-color,var(--simple-fields-error-color,#b40000));color:var(--simple-fields-button-danger-background-color,#fff)}button[aria-pressed=true],button[aria-selected=true],simple-toolbar-button[toggled]::part(button){color:var(--simple-fields-button-toggled-color,var(--simple-fields-accent-color,#3f51b5));background-color:var(--simple-fields-button-toggled-background-color,unset);border-color:var(--simple-fields-button-toggled-border-color,var(--simple-fields-color,currentColor));opacity:var(--simple-fields-button-toggled-opacity,1)}simple-toolbar-menu-item>simple-toolbar-button.danger:focus-within::part(button[aria-pressed=true]),simple-toolbar-menu-item>simple-toolbar-button.danger:hover::part(button[aria-pressed=true]){background-color:var(--simple-fields-button-danger-color,var(--simple-fields-error-color,#b40000));color:var(--simple-fields-button-danger-background-color,#fff);border-color:var(--simple-fields-button-danger-focus-color,#8a0000)}button:focus,button:hover,button[aria-selected=false]:not([disabled]):focus,button[aria-selected=false]:not([disabled]):hover,simple-toolbar-button:focus-within::part(button),simple-toolbar-button:hover::part(button),simple-toolbar-menu-item>simple-toolbar-button:focus-within::part(button),simple-toolbar-menu-item>simple-toolbar-button:hover::part(button),simple-toolbar-menu:focus-within::part(button),simple-toolbar-menu:hover::part(button){color:var(--simple-fields-button-focus-color,unset);background-color:var(--simple-fields-button-focus-background-color,var(--simple-fields-accent-color-light,#d9eaff));border-color:var(--simple-fields-button-focus-border-color,var(--simple-fields-accent-color,#3f51b5));opacity:var(--simple-fields-button-focus-opacity,1);text-decoration:var(--simple-fields-button-focus-text-decoration,unset)}simple-toolbar-menu-item>simple-toolbar-button.danger:focus-within::part(button),simple-toolbar-menu-item>simple-toolbar-button.danger:hover::part(button),simple-toolbar-menu.danger:focus-within::part(button),simple-toolbar-menu.danger:hover::part(button){background-color:var(--simple-fields-button-danger-focus-color,#8a0000);color:var(--simple-fields-button-danger-background-color,#fff);border-color:var(--simple-fields-button-danger-focus-color,#8a0000)}button:disabled,button[disabled],simple-toolbar-button[disabled],simple-toolbar-menu[disabled]{color:var(--simple-fields-button-disabled-color,unset);background-color:var(--simple-fields-button-disabled-background-color,unset);border-color:var(--simple-fields-button-disabled-border-color,unset);opacity:var(--simple-fields-button-disabled-opacity,var(--simple-fields-disabled-opacity,.7))}`],p=[e`[part=error-desc],[part=error-meta],[part=field-desc]{color:var(--simple-fields-meta-color);font-size:var(--simple-fields-meta-font-size,10px);line-height:var(--simple-fields-meta-line-height,110%);opacity:var(--simple-fields-meta-opacity,unset);text-transform:none}:host:hover [part=error-desc],:host:hover [part=error-meta],:host:hover [part=field-desc],:host:hover-within [part=error-desc],:host:hover-within [part=error-meta]{color:var(--simple-fields-focus-meta-color);opacity:var(--simple-fields-focus-meta-opacity,unset)}`],u=[e`fieldset{padding:var(--simple-fields-margin-small,8px) var(--simple-fields-margin,16px);margin:var(--simple-fields-margin-small,8px) 0 var(--simple-fields-margin,16px);border-width:1px;border-style:solid;border-color:var(--simple-fields-fieldset-border-color,var(--simple-fields-border-color-light,#ccc));border-radius:var(--simple-fields-border-radius,2px);transition:all .3s ease-in-out;max-width:calc(100% - 2 * var(--simple-fields-margin,16px) - 2px)}:host(:last-of-type){margin-bottom:0}[part=legend]{font-family:var(--simple-fields-font-family,sans-serif);font-size:var(--simple-fields-legend-font-size,var(--simple-fields-font-size,16px));line-height:var(--simple-fields-line-height,22px);text-transform:var(--simple-fields-legend-text-transform,unset)}:host([error]) [part=legend]{color:var(--simple-fields-error-color,#b40000);transition:all .3s ease-in-out}`],h=function(i){return class extends i{static get tag(){return"simple-fields-container"}static get styles(){return[...l,...n,...p,e`:host{display:block}:host([error]){color:var(--simple-fields-error-color,#b40000);transition:color .3s ease-in-out}:host([disabled]){color:var(--simple-fields-disabled-color,#999)}#field-bottom,.field-main.inline,.field-main>div{display:flex;align-items:stretch;justify-content:flex-start}*{flex:1 1 auto}#fieldmeta{text-align:right}.field,::slotted([slot=field]){width:auto;border:none;color:var(--simple-fields-color,currentColor);background-color:var(--simple-fields-background-color,transparent);transition:opacity ease-in-out;flex:1 0 auto}::slotted([slot=field]:focus){outline:0}::slotted([type=checkbox][slot=field]:focus),::slotted([type=checkbox][slot=radio]:focus),:host[inline] ::slotted([slot=field]:focus){outline:unset}.field-main.inline .field,.field-main.inline ::slotted([slot=field]){min-width:var(--simple-fields-detail-line-height,22px);height:var(--simple-fields-detail-line-height,22px);margin:0 var(--simple-fields-margin-small,8px) 0 0}.field[disabled],:host([readonly]) ::slotted([slot=field]){opacity:var(--simple-fields-disabled-opacity,.7);transition:opacity ease-in-out}.field[disabled],.field[readonly],:host([disabled]) ::slotted([slot=field]),:host([readonly]) ::slotted([slot=field]){cursor:not-allowed;pointer-events:none}.border-bottom{height:0}:host([disabled]) .border-bottom{border-bottom:var(--simple-fields-border-bottom-disabled-size,var(--simple-fields-border-bottom-size,1px)) dashed var(--simple-fields-border-color,#999)}.border-bottom.blur{border-bottom:var(--simple-fields-border-bottom-size,1px) solid var(--simple-fields-border-color,#999);width:100%}.border-bottom.focus{margin:-1px auto 0;width:0;border-bottom:var(--simple-fields-border-bottom-focus-size,2px) solid var(--simple-fields-accent-color,#3f51b5);transition:width .5s ease-in-out}:host(:focus-within) .border-bottom.focus{width:100%;transition:width .5s ease-in-out}:host([type=checkbox]) .border-bottom,:host([type=color]) .border-bottom,:host([type=file]) .border-bottom,:host([type=radio]) .border-bottom,:host([type=range]) .border-bottom{display:none}::slotted(label:focus),::slotted(label:focus-within),::slotted(label:hover){color:var(--simple-fields-accent-color,#3f51b5);transition:background-color .3s ease-in-out}::slotted(input){padding:0}::slotted(textarea[slot=field]){margin:0;transition:height .5s ease-in-out;box-sizing:border-box;vertical-align:bottom}::slotted(fieldset[slot=field]){margin:0;padding:0;border:none;font-size:var(--simple-fields-font-size,16px);font-family:var(--simple-fields-font-family,sans-serif);line-height:var(--simple-fields-line-height,22px);display:var(--simple-fields-radio-option-display,block);flex-wrap:var(--simple-fields-radio-option-flex-wrap,wrap);transition:color .3s ease-in-out}::slotted(fieldset[slot=field]:focus),::slotted(fieldset[slot=field]:focus-within),::slotted(fieldset[slot=field]:hover){color:var(--simple-fields-accent-color,#3f51b5)}`]}render(){return t` ${this.fieldMainTemplate} ${this.fieldBottom} `}static get properties(){return{autovalidate:{type:Boolean},counter:{type:String},description:{type:String},disabled:{type:Boolean,reflect:!0},defaultErrorMessage:{type:String},defaultRequiredMessage:{type:String},error:{type:Boolean,reflect:!0},errorMessage:{type:String},hidden:{type:Boolean,reflect:!0},field:{type:Object},id:{type:String,reflect:!0},inline:{type:Boolean,reflect:!0},label:{type:String},minchecked:{type:Number},maxchecked:{type:Number},maxwords:{type:Number},name:{type:String,reflect:!0},numberMessage:{type:String},pattern:{type:String},patternMessage:{type:String},prefix:{type:String},readonly:{type:Boolean,reflect:!0},required:{type:Boolean,reflect:!0},requiredMessage:{type:String},suffix:{type:String},type:{type:String},validTypes:{type:Array},isSimpleFieldType:{type:Boolean,reflect:!0,attribute:"is-simple-field-type"},value:{type:Object},__delayedFocus:{type:Boolean}}}constructor(){super(),this.isSimpleFieldType=!0,this.counter="none",this.autovalidate=!1,this.disabled=!1,this.hidden=!1,this.error=!1,this.id=this._generateUUID(),this.inline=!1,this.blockList=!1,this.validTypes=["checkbox","color","date","datetime-local","email","file","fieldset","hidden","month","number","password","radio","range","search","select","tel","text","textarea","time","url","week"],this._observeAndListen(),this.addEventListener("click",this.focus)}disconnectedCallback(){this.removeEventListener("click",this.focus),super.disconnectedCallback()}autoGrow(e=this.field){this.field&&(this.field.style.height="auto",this.field.style.height=`${this.field.scrollHeight}px`,this.field.style.overflowY="hidden")}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),this._updateField()}updated(e){let t=!1;e.forEach(((e,i)=>{"error"===i&&this.error!==e&&(t=!0),"errorMessage"===i&&this.errorMessage!==e&&(t=!0),"error"===i&&this.field&&this.field.setAttribute("aria-invalid",this.error?"true":"false")})),t&&this._fireErrorChanged()}get descriptionTemplate(){return t` <div id="description" part="field-desc"> <slot name="description"></slot> ${this.description} </div> `}get errorTemplate(){return t` <div id="error-message" ?hidden="${!this.error}" role="alert" part="error-msg"> ${this.errorMessage} </div> `}get fieldBottom(){return t` <div class="border-bottom blur"></div> <div class="border-bottom focus"></div> <div id="field-bottom" part="field-bottom"> <div id="error-desc" part="field-bottom-inner"> ${this.descriptionTemplate} ${this.errorTemplate} </div> ${this.fieldMeta} </div> `}get fieldId(){return`${this.id||"field"}.input`}get fieldMainTemplate(){return t` <div class="${this.inline||["checkbox","color","radio"].includes(this.type||"text")?"field-main inline":"field-main"}" part="field-main"> ${this.labelTemplate} <div part="field-inner"> ${this.prefixTemplate} <slot name="field"></slot> ${this.suffixTemplate} </div> </div> `}get fieldMeta(){return t` <div id="fieldmeta" aria-live="polite" part="field-meta"> <slot name="field-meta"></slot> </div> `}get hasFieldset(){return"fieldset"===this.type}get labelTemplate(){return t` <label id="${this.fieldId}-label" for="${this.fieldId}" class="label-main" ?hidden="${"fieldset"===this.type}" part="label"> <slot name="label-prefix"></slot> <slot name="label"></slot> ${this.label}${this.error||this.required?"*":""} </label> `}get multicheck(){return this.hasFieldset&&this.field.querySelector("input[type=checkbox]")}get numberError(){let e=!!this._getFieldValue()&&this._getFieldValue().length,t="select"===this.type?this.min:!!this.multicheck&&this.minchecked,i="select"===this.type?this.max:!!this.multicheck&&this.maxchecked;return i&&e&&i<e?i-e:!!(t&&e&&t>e)&&t-e}get numeric(){return["date","month","week","time","datetime-local","number","range"].includes(this.type)}get patternError(){return this.pattern&&""!==this.pattern&&this._getFieldValue()&&(this.field.multiple?this._getFieldValue().filter((e=>!e.match(this.pattern))):!this._getFieldValue().match(this.pattern))}get prefixTemplate(){return t` <slot name="prefix"></slot> ${this.prefix} `}get requiredError(){return!this._getFieldValue()&&this.required}get slottedFieldObserver(){return new MutationObserver(this._updateField)}get suffixTemplate(){return t` <slot name="suffix"></slot> ${this.suffix} `}focus(){this.field?(this.field.focus(),this.__delayedFocus=!1):this.__delayedFocus=!0}select(){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.select()}setRangeText(e,t,i,o){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.setRangeText(e,t,i,o)}setSelectionRange(e,t,i){!this.field||"text"!==this.type&&"textarea"!==this.type||this.field.setSelectionRange(e,t,i)}stepDown(e=1){this.field&&this.numeric&&this.field.stepDown()}stepUp(e=1){this.field&&this.numeric&&this.field.stepUp()}validate(){let e=this.field.querySelector("legend");return this.requiredError?(this.error=!0,this.errorMessage=this.requiredMessage||"required"):this.numberError?(this.error=!0,this.errorMessage=this.numberMessage||(this.numberError>0?`select ${this.numberError} more`:`select ${0-this.numberError} fewer`)):this.patternError&&(this.error=!0,this.errorMessage=this.patternMessage||"invalid format"),this.hasFieldset&&e&&(e.innerHTML=e.innerHTML.replace(/\**\s*$/,this.error?"*":""),e.style.color=this.error?"var(--simple-fields-error-color, #b40000)":""),!this.error}_fireErrorChanged(){this.dispatchEvent(new CustomEvent("error-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_generateUUID(){return"ss-s-s-s-sss".replace(/s/g,Math.floor(65536*(1+Math.random())).toString(16).substring(1))}_getFieldsetValue(){let e,t;return this.field.querySelector("input[type=radio]")?(e=this.field.querySelector("input:checked"),t=e?e.value:void 0):this.field.querySelector("input[type=checkbox]")&&(t=[],e=this.field.querySelectorAll("input:checked"),e.forEach((e=>t.push(e.value)))),t}_getFieldValue(){let e;return this.field&&(e=this.hasFieldset?this._getFieldsetValue():"checkbox"===this.type||"radio"===this.type?!!this.field.checked:"select"===this.type?this.multiple?Object.keys(this.field.selectedOptions).map((e=>this.field.selectedOptions[e].value)):this.field.selectedOptions[0].value:this.field.value),e}_getValidType(e){return"datetime"===e&&this.validTypes.includes(e)?"datetime-local":this.validTypes.includes(e)?e:"text"}_handleFieldChange(){"text"!==this.type&&"textarea"!==this.type||this._updateCount(),this.autovalidate&&this.validate(),this.value=this._getFieldValue(),"textarea"===this.type&&this.autoGrow()}_observeAndListen(e=!0){e?(this.slottedFieldObserver.observe(this,{attributeFilter:["disabled","readonly","required","slot"],childlist:!0}),this._updateField(),this.addEventListener("click",this.focus),this.addEventListener("focusout",this._onFocusout),this.addEventListener("focusin",this._onFocusin)):(this.slottedFieldObserver.disconnect(),this.removeEventListener("click",this.focus),this.removeEventListener("focusout",this._onFocusout),this.removeEventListener("focusin",this._onFocusin))}_onFocusin(){this.error=!1}_onFocusout(){this.autovalidate&&this.validate()}_updateField(){let e=this.field;if(this.field=this.querySelector&&this.querySelector("[slot=field]")?this.querySelector("[slot=field]"):void 0,this.id=`${this.fieldId||""}-wrapper`,this.field){let e=this.field.tagName.toLowerCase(),t=this.field.getAttribute("type")||"text";if(this.type=this._getValidType("input"===e?t:e),this.required=this.field.required,this.disabled=this.field.disabled,this.readonly=this.field.readonly,this.field.setAttribute("aria-describedby","field-bottom"),this.addEventListener("change",this._handleFieldChange),this.addEventListener("input",this._handleFieldChange),"select"===this.type&&(this.multiple=this.field.multiple),"textarea"===this.type&&(this.field.getAttribute("rows")||this.field.setAttribute("rows",1),this.field.addEventListener("keydown",(e=>e.stopPropagation()))),"fieldset"===this.type){let e=this.querySelector("legend");e&&(e.style.fontSize="var(--simple-fields-detail-font-size, 12px)",e.style.fontFamily="var(--simple-fields-detail-font-family, sans-serif)",e.style.lineHeight="var(--simple-fields-detail-line-height, 22px)",e.style.paddingInlineStart=0,e.style.paddingInlineEnd=0),this.querySelectorAll("label, input").forEach((e=>e.style.marginRight="var(--simple-fields-margin, 16px)")),this.querySelectorAll("label input").forEach((e=>e.style.marginLeft="calc(0 - var(--simple-fields-margin, 16px))"))}}else this.disabled=!1,this.readonly=!1,this.required=!1,this.type=void 0,e&&("textarea"===e.tagName.toLowerCase()&&e.addEventListener("keydown",(e=>e.stopPropagation())),e.removeEventListener("change",this._handleFieldChange),e.removeEventListener("input",this._handleFieldChange));this.field&&this.__delayedFocus&&this.focus()}_updateCount(){let e="",t="[\\w\\-\\']+",i=new RegExp(t,"gim"),o=this.field.getAttribute("maxlength")||this.maxlength||!1,s=this.maxwords||!1,r="word"===this.counter?s:o,a=new RegExp(`.{0,${o||1}}`,"g"),l=new RegExp(`(${t}\\W*){0,${s||1}}`,"g"),n=e=>((this.field||{}).value||"").match(e),d=()=>this.field.value?this.field.value.length:0,p=()=>this.field&&this.field.value&&n(i)?n(i).length:0,u=(e,t,i)=>{e&&t&&t<e&&this.field.value.match(i)&&(this.field.value=n(i)[0].trim())};u(d(),o,a),u(p(),s,l),e="word"===this.counter?p():d(),"none"!==this.counter&&this.shadowRoot&&this.shadowRoot.querySelector("#fieldmeta")&&(this.shadowRoot.querySelector("#fieldmeta").innerHTML=r?`${e}/${r}`:e)}}};class c extends(h(i)){}window.customElements.define(c.tag,c);var m=Object.freeze({__proto__:null,SimpleFieldsContainer:c,SimpleFieldsContainerBehaviors:h});const b=function(i){return class extends i{constructor(){super(),this.isSimpleFieldType=!0}static get tag(){return"simple-fields-fieldset"}static get styles(){return[...l,...u,...p,e`:host(:last-of-type){margin-bottom:0}`]}render(){return t` <fieldset part="fieldset"> ${this.legend} ${this.desc} ${this.fields} </fieldset> `}get legend(){return t` <legend id="label" ?hidden="${!this.label}" part="legend"> ${this.label}${this.error?"*":""} </legend> `}get desc(){return t` <div id="description" ?hidden="${!this.description}" part="description"> ${this.description} </div> `}get fields(){return t` <div id="item-fields" part="fields" exportparts="option, option-inner, option-label, option-input"> <slot></slot> </div> `}static get properties(){return{disabled:{type:Boolean,reflect:!0},isSimpleFieldType:{type:Boolean,reflect:!0,attribute:"is-simple-field-type"},error:{type:Boolean,reflect:!0},hidden:{type:Boolean,reflect:!0},inline:{type:Boolean,reflect:!0},readonly:{type:Boolean,reflect:!0},label:{type:String,reflect:!0},name:{type:String,reflect:!0,attribute:"name"},description:{type:String}}}}};class f extends(b(i)){}window.customElements.define(f.tag,f);
/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class g extends i{static get styles(){return[e`:host{display:block;position:absolute;outline:0;z-index:1002;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none;user-select:none;cursor:default}#tooltip{display:block;outline:0;font-size:var(--simple-tooltip-font-size,10px);line-height:1;background-color:var(--simple-tooltip-background,#616161);color:var(--simple-tooltip-text-color,#fff);padding:8px;border-radius:var(--simple-tooltip-border-radius,2px);width:var(--simple-tooltip-width)}@keyframes keyFrameScaleUp{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes keyFrameScaleDown{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes keyFrameFadeInOpacity{0%{opacity:0}100%{opacity:var(--simple-tooltip-opacity,.9)}}@keyframes keyFrameFadeOutOpacity{0%{opacity:var(--simple-tooltip-opacity,.9)}100%{opacity:0}}@keyframes keyFrameSlideDownIn{0%{transform:translateY(-2000px);opacity:0}10%{opacity:.2}100%{transform:translateY(0);opacity:var(--simple-tooltip-opacity,.9)}}@keyframes keyFrameSlideDownOut{0%{transform:translateY(0);opacity:var(--simple-tooltip-opacity,.9)}10%{opacity:.2}100%{transform:translateY(-2000px);opacity:0}}.fade-in-animation{opacity:0;animation-delay:var(--simple-tooltip-delay-in,500ms);animation-name:keyFrameFadeInOpacity;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-in,500ms);animation-fill-mode:forwards}.fade-out-animation{opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-out,0ms);animation-name:keyFrameFadeOutOpacity;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.scale-up-animation{transform:scale(0);opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-in,500ms);animation-name:keyFrameScaleUp;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-in,500ms);animation-fill-mode:forwards}.scale-down-animation{transform:scale(1);opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-out,500ms);animation-name:keyFrameScaleDown;animation-iteration-count:1;animation-timing-function:ease-in;animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.slide-down-animation{transform:translateY(-2000px);opacity:0;animation-delay:var(--simple-tooltip-delay-out,500ms);animation-name:keyFrameSlideDownIn;animation-iteration-count:1;animation-timing-function:cubic-bezier(0,0,.2,1);animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.slide-down-animation-out{transform:translateY(0);opacity:var(--simple-tooltip-opacity,.9);animation-delay:var(--simple-tooltip-delay-out,500ms);animation-name:keyFrameSlideDownOut;animation-iteration-count:1;animation-timing-function:cubic-bezier(.4,0,1,1);animation-duration:var(--simple-tooltip-duration-out,500ms);animation-fill-mode:forwards}.cancel-animation{animation-delay:-30s!important}.hidden{position:absolute;left:-10000px;top:auto;width:1px;height:1px;overflow:hidden}`]}render(){return t` <div id="tooltip" class="hidden" @animationend="${this._onAnimationEnd}"> <slot></slot> </div>`}static get properties(){return{...super.properties,for:{type:String},manualMode:{type:Boolean,attribute:"manual-mode"},position:{type:String},fitToVisibleBounds:{type:Boolean,attribute:"fit-to-visible-bounds"},offset:{type:Number},marginTop:{type:Number,attribute:"margin-top"},animationDelay:{type:Number,attribute:"animation-delay"},animationEntry:{type:String,attribute:"animation-entry"},animationExit:{type:String,attribute:"animation-exit"},_showing:{type:Boolean}}}static get tag(){return"simple-tooltip"}constructor(){super(),this.manualMode=!1,this.position="bottom",this.fitToVisibleBounds=!1,this.offset=14,this.marginTop=14,this.animationEntry="",this.animationExit="",this.animationConfig={entry:[{name:"fade-in-animation",node:this,timing:{delay:0}}],exit:[{name:"fade-out-animation",node:this}]},setTimeout((()=>{this.addEventListener("webkitAnimationEnd",this._onAnimationEnd.bind(this)),this.addEventListener("mouseenter",this.hide.bind(this))}),0)}get target(){var e=this.parentNode,t=this.getRootNode();return this.for?t.querySelector("#"+this.for):e.nodeType==Node.DOCUMENT_FRAGMENT_NODE?t.host:e}disconnectedCallback(){this.manualMode||this._removeListeners(),super.disconnectedCallback()}playAnimation(e){"entry"===e?this.show():"exit"===e&&this.hide()}cancelAnimation(){this.shadowRoot.querySelector("#tooltip").classList.add("cancel-animation")}show(){if(!this._showing){if(""===this.textContent.trim()){for(var e=!0,t=this.children,i=0;i<t.length;i++)if(""!==t[i].textContent.trim()){e=!1;break}if(e)return}this._showing=!0,this.shadowRoot.querySelector("#tooltip").classList.remove("hidden"),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.updatePosition(),this._animationPlaying=!0,this.shadowRoot.querySelector("#tooltip").classList.add(this._getAnimationType("entry"))}}hide(){if(this._showing){if(this._animationPlaying)return this._showing=!1,void this._cancelAnimation();this._onAnimationFinish(),this._showing=!1,this._animationPlaying=!0,clearTimeout(this.__debounceCancel),this.__debounceCancel=setTimeout((()=>{this._cancelAnimation()}),5e3)}}updatePosition(){if(this._target&&this.offsetParent){var e=this.offset;14!=this.marginTop&&14==this.offset&&(e=this.marginTop);var t,i,o=this.offsetParent.getBoundingClientRect(),s=this._target.getBoundingClientRect(),r=this.getBoundingClientRect(),a=(s.width-r.width)/2,l=(s.height-r.height)/2,n=s.left-o.left,d=s.top-o.top;switch(this.position){case"top":t=n+a,i=d-r.height-e;break;case"bottom":t=n+a,i=d+s.height+e;break;case"left":t=n-r.width-e,i=d+l;break;case"right":t=n+s.width+e,i=d+l}this.fitToVisibleBounds?(o.left+t+r.width>window.innerWidth?(this.style.right="0px",this.style.left="auto"):(this.style.left=Math.max(0,t)+"px",this.style.right="auto"),o.top+i+r.height>window.innerHeight?(this.style.bottom=o.height-d+e+"px",this.style.top="auto"):(this.style.top=Math.max(-o.top,i)+"px",this.style.bottom="auto")):(this.style.left=t+"px",this.style.top=i+"px")}}_addListeners(){this._target&&(this._target.addEventListener("mouseenter",this.show.bind(this)),this._target.addEventListener("focus",this.show.bind(this)),this._target.addEventListener("mouseleave",this.hide.bind(this)),this._target.addEventListener("blur",this.hide.bind(this)),this._target.addEventListener("tap",this.hide.bind(this)))}_findTarget(){this.manualMode||this._removeListeners(),this._target=this.target,this.manualMode||this._addListeners()}_manualModeChanged(){this.manualMode?this._removeListeners():this._addListeners()}_cancelAnimation(){this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("entry")),this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.add("hidden")}_onAnimationFinish(){this._showing&&(this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("entry")),this.shadowRoot.querySelector("#tooltip").classList.remove("cancel-animation"),this.shadowRoot.querySelector("#tooltip").classList.add(this._getAnimationType("exit")))}_onAnimationEnd(){this._animationPlaying=!1,this._showing||(this.shadowRoot.querySelector("#tooltip").classList.remove(this._getAnimationType("exit")),this.shadowRoot.querySelector("#tooltip").classList.add("hidden"))}_getAnimationType(e){if("entry"===e&&""!==this.animationEntry)return this.animationEntry;if("exit"===e&&""!==this.animationExit)return this.animationExit;if(this.animationConfig[e]&&"string"==typeof this.animationConfig[e][0].name){if(this.animationConfig[e][0].timing&&this.animationConfig[e][0].timing.delay&&0!==this.animationConfig[e][0].timing.delay){var t=this.animationConfig[e][0].timing.delay;"entry"===e?document.documentElement.style.setProperty("--simple-tooltip-delay-in",t+"ms"):"exit"===e&&document.documentElement.style.setProperty("--simple-tooltip-delay-out",t+"ms")}return this.animationConfig[e][0].name}}_removeListeners(){this._target&&(this._target.removeEventListener("mouseover",this.show.bind(this)),this._target.removeEventListener("focusin",this.show.bind(this)),this._target.removeEventListener("mouseout",this.hide.bind(this)),this._target.removeEventListener("focusout",this.hide.bind(this)),this._target.removeEventListener("click",this.hide.bind(this)))}firstUpdated(e){this.setAttribute("role","tooltip"),this.setAttribute("tabindex",-1),this._findTarget()}updated(e){e.forEach(((e,t)=>{"for"==t&&this._findTarget(this[t],e),"manualMode"==t&&this._manualModeChanged(this[t],e),"animationDelay"==t&&this._delayChange(this[t],e)}))}_delayChange(e){500!==e&&document.documentElement.style.setProperty("--simple-tooltip-delay-in",e+"ms")}}customElements.define(g.tag,g);
/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
const y={alignHorizontal:{attribute:"align-horizontal",reflect:!0,type:String},alignVertical:{attribute:"align-vertical",reflect:!0,type:String},disabled:{name:"disabled",type:Boolean,attribute:"disabled",reflect:!0},hidden:{name:"hidden",type:Boolean,attribute:"hidden",reflect:!0},iconPosition:{type:String,attribute:"icon-position",reflect:!0},showTextLabel:{name:"showTextLabel",type:Boolean,attribute:"more-show-text-label"},tooltipDirection:{type:String,attribute:"tooltip-direction",reflect:!0}},v=function(i){return class extends i{static get tag(){return"simple-toolbar-button"}static get properties(){return{...y,controls:{type:String,attribute:"controls",reflect:!0},describedby:{type:String,attribute:"describedby"},icon:{type:String,attribute:"icon",reflect:!0},isCurrentItem:{type:Boolean,attribute:"is-current-item",reflect:!0},label:{type:String},radio:{attribute:"radio",type:Boolean,reflect:!0},shortcutKeys:{attribute:"shortcut-keys",type:String},showTextLabel:{attribute:"show-text-label",type:Boolean,reflect:!0},showTooltip:{attribute:"show-tooltip",type:Boolean,reflect:!0},target:{type:Object},toggledIcon:{attribute:"toggled-icon",type:String},toggledLabel:{attribute:"toggled-label",type:String},toggles:{type:Boolean},toggled:{attribute:"toggled",type:Boolean},toggledTooltip:{attribute:"toggled-tooltip",type:String}}}constructor(){super(),this.iconPosition="left",this.alignVertical="center",this.alignHorizontal="center",this.disabled=!1,this.showTextLabel=!1,this.toggles=!1,this.radio=!1,this.shortcutKeys="",this.isCurrentItem=!0}get button(){return this.__button||(this.__button=this.shadowRoot&&this.shadowRoot.querySelector("button[part=button]")?this.shadowRoot.querySelector("button[part=button]"):void 0),this.__button}get currentLabel(){return this._defaultOrToggled(this.label,this.toggledLabel,this.isToggled)}get currentIcon(){return this._defaultOrToggled(this.icon,this.toggledIcon,this.isToggled)}get currentTooltip(){return this._defaultOrToggled(this.tooltip,this.toggledTootip,this.isToggled)||this.currentLabel}get isToggled(){return(!!this.toggles||!!this.radio)&!!this.toggled}updated(e){super.updated(e),e.forEach(((e,t)=>{}))}connectedCallback(){super.connectedCallback(),this.dispatchEvent(new CustomEvent("register-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}disconnectedCallback(){this.dispatchEvent(new CustomEvent("deregister-button",{bubbles:!0,cancelable:!0,composed:!0,detail:this})),super.disconnectedCallback()}focus(){this.focusableElement&&(this.isCurrentItem=!0,this.focusableElement.focus())}_defaultOrToggled(e,t){return this._uniqueText(t)&&this.isToggled?t:e}_handleClick(e){this.toggle()}_handleBlur(e){}_handleFocus(e){}_handleKeydown(e){}_handleKeys(e){}_handleShortcutKeys(e,t){}toggle(){(this.toggles||this.radio)&&(this.toggled=!this.toggled),this.dispatchEvent(new CustomEvent("button-toggled",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}click(e){this._handleClick(e)}updateButtonRegistry(){this.dispatchEvent(new CustomEvent("update-button-registry",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}get focusableElement(){return this.shadowRoot&&this.shadowRoot.querySelector("#button")?this.shadowRoot.querySelector("#button"):void 0}get hasLabel(){return this._uniqueText(this.currentLabel)}get hasIcon(){return this._uniqueText(this.currentIcon)}get hasTooltip(){return this._uniqueText(this.currentTooltip)}get labelVisible(){return(!this.hasIcon||this.showTextLabel)&&this.hasLabel}get tooltipVisible(){return(this.hasTooltip||this.hasLabel)&&(this.showTooltip||!this.labelVisible||this._uniqueText(this.currentLabel,this.currentTooltip))}_uniqueText(e="",t=""){return String(e||"").trim()!==String(t||"").trim()}get iconTemplate(){return this.hasIcon?t`<simple-icon-lite id="icon" aria-hidden="true" icon="${this.currentIcon}" part="icon"></simple-icon-lite>`:""}get labelTemplate(){return this.hasLabel?t`<span id="label" class="${this.labelVisible?"":"offscreen"}" part="label">${this.currentLabel}</span>`:""}get tooltipTemplate(){return this.tooltipVisible?t`<simple-tooltip id="tooltip" for="button" position="${this.tooltipDirection||"bottom"}" part="tooltip" fit-to-visible-bounds>${this.currentTooltip||this.currentLabel}</simple-tooltip>`:""}get buttonInnerTemplate(){return"right"!==this.iconPosition||"bottom"!==this.iconPosition?t`${this.labelTemplate} ${this.iconTemplate}`:t`${this.iconTemplate} ${this.labelTemplate}`}get buttonTemplate(){return this.radio?t` <button id="button" aria-checked="${this.isToggled?"true":"false"}" aria-describedby="${this.describedby&&""!==this.describedby?this.describedby:void 0}" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keypress="${this._handleKeys}" @keydown="${this._handleKeydown}" @blur="${this._handleBlur}" @focus="${this._handleFocus}" part="button" role="radio" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`:this.toggles?t` <button id="button" aria-pressed="${this.isToggled?"true":"false"}" aria-describedby="${this.describedby&&""!==this.describedby?this.describedby:void 0}" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keypress="${this._handleKeys}" @blur="${this._handleBlur}" @focus="${this._handleFocus}" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`:t` <button id="button" aria-describedby="${this.describedby&&""!==this.describedby?this.describedby:void 0}" class="simple-toolbar-button" ?disabled="${this.disabled}" ?controls="${this.controls}" @click="${this._handleClick}" @keypress="${this._handleKeys}" @blur="${this._handleBlur}" @focus="${this._handleFocus}" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} </button> ${this.tooltipTemplate}`}render(){return t`${this.buttonTemplate}`}static get labelStyles(){return[e`#label{padding:0 var(--simple-toolbar-button-label-padding,2px);white-space:var(--simple-toolbar-button-label-white-space,normal)}.offscreen{position:absolute;left:-999999px;top:0;height:0;width:0;overflow:hidden}`]}static get iconStyles(){return[e`#icon:not([icon]){display:none}#icon[icon]{width:var(--simple-toolbar-button-width,var(--simple-toolbar-button-height,24px));height:var(--simple-toolbar-button-height,24px);flex:0 0 auto}`]}static get tooltipStyles(){return[e`simple-tooltip{z-index:-1}:host(:focus-within),:host(:hover){z-index:var(--simple-toolbar-button-z-index,2)}:host(:focus-within) simple-tooltip,:host(:hover) simple-tooltip{z-index:var(--simple-toolbar-button-z-index,2)}`]}static get simpleButtonCoreStyles(){return[e`:host{display:inline-flex;white-space:nowrap;transition:all .5s;z-index:1;transition:z-index 0s}:host(:focus-wthin),:host(:hover){z-index:var(--simple-toolbar-focus-z-index,100)!important}:host([hidden]){z-index:-1;visibility:hidden;opacity:0;height:0;overflow:hidden}:host([disabled]){pointer-events:none}[part=button]{display:flex;margin:0;white-space:nowrap;width:100%;height:100%}`]}static get simpleButtonLayoutStyles(){return[e`:host{font-family:sans-serif;font-size:13px;flex:0 1 auto;min-width:var(--simple-toolbar-button-min-width,var(--simple-toolbar-button-width,var(--simple-toolbar-button-height,24px)));z-index:1}:host(:hover){z-index:2}:host(:focus),:host(:focus-within){z-index:3}[part=button]{font-family:inherit;font-size:inherit;min-width:var(--simple-toolbar-button-min-width,var(--simple-toolbar-button-width,var(--simple-toolbar-button-height,24px)));min-height:var(--simple-toolbar-button-height,24px);padding:var(--simple-toolbar-button-padding,1px);flex:var(--simple-toolbar-button-flex,0 0 auto);transition:all .5s;align-items:var(--simple-toolbar-button-align,center);justify-content:var(--simple-toolbar-button-justify,center)}:host([icon-position=bottom]) [part=button],:host([icon-position=top]) [part=button]{flex-direction:column}:host([align-horizontal=left][icon-position=bottom]) [part=button],:host([align-horizontal=left][icon-position=top]) [part=button],:host([align-vertical=top][icon-position=left]) [part=button],:host([align-vertical=top][icon-position=right]) [part=button]{align-items:flex-start}:host([align-horizontal=right][icon-position=bottom]),:host([align-horizontal=right][icon-position=top]) [part=button],:host([align-vertical=bottom][icon-position=left]) [part=button],:host([align-vertical=bottom][icon-position=right]) [part=button]{align-items:flex-end}:host([align-horizontal=left][icon-position=left]) [part=button],:host([align-horizontal=left][icon-position=right]) [part=button],:host([align-vertical=top][icon-position=bottom]),:host([align-vertical=top][icon-position=top]) [part=button]{justify-content:flex-start}:host([align-horizontal=right][icon-position=left]) [part=button],:host([align-horizontal=right][icon-position=right]) [part=button],:host([align-vertical=bottom][icon-position=bottom]),:host([align-vertical=bottom][icon-position=top]) [part=button]{justify-content:flex-end}`]}static get simpleButtonThemeStyles(){return[e`[part=button]{color:var(--simple-toolbar-button-color);border-color:var(--simple-toolbar-button-border-color,var(--simple-toolbar-border-color,transparent));background-color:var(--simple-toolbar-button-bg,transparent);opacity:var(--simple-toolbar-button-opacity,1);border-width:var(--simple-toolbar-button-border-width,var(--simple-toolbar-border-width,1px));border-radius:var(--simple-toolbar-border-radius,3px);border-style:solid;text-transform:unset}:host([radio]) [part=button]{border-radius:var(--simple-toolbar-radio-border-radius,0)}:host([radio]:last-of-type) [part=button]{border-top-right-radius:var(--simple-toolbar-border-radius,3px);border-bottom-right-radius:var(--simple-toolbar-border-radius,3px)}:host([radio]:first-of-type) [part=button]{border-top-left-radius:var(--simple-toolbar-border-radius,3px);border-bottom-left-radius:var(--simple-toolbar-border-radius,3px)}[part=button][aria-checked=true],[part=button][aria-pressed=true]{color:var(--simple-toolbar-button-toggled-color);border-color:var(--simple-toolbar-button-toggled-border-color);background-color:var(--simple-toolbar-button-toggled-bg);opacity:var(--simple-toolbar-button-toggled-opacity,.8)}[part=button]:focus,[part=button]:hover{color:var(--simple-toolbar-button-hover-color);background-color:var(--simple-toolbar-button-hover-bg);border-color:var(--simple-toolbar-button-hover-border-color);opacity:var(--simple-toolbar-button-hover-opacity,.8)}[part=button][disabled]{cursor:not-allowed;color:var(--simple-toolbar-button-disabled-color,unset);background-color:var(--simple-toolbar-button-disabled-bg,unset);border-color:var(--simple-toolbar-button-disabled-border-color,unset);opacity:var(--simple-toolbar-button-disabled-opacity,.5)}`]}static get styles(){return[...this.iconStyles,...this.labelStyles,...this.tooltipStyles,...this.simpleButtonCoreStyles,...this.simpleButtonLayoutStyles,...this.simpleButtonThemeStyles]}}};class x extends(v(i)){}window.customElements.define(x.tag,x);
/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class _ extends(o(s)){static get tag(){return"simple-icon"}static get styles(){return[...super.styles,e`feFlood{flood-color:var(--simple-icon-color,var(--simple-colors-default-theme-accent-8,#000))}feFlood.contrast-1{flood-color:var(--simple-icon-color,var(--simple-colors-default-theme-accent-9,#000))}feFlood.contrast-2{flood-color:var(--simple-icon-color,var(--simple-colors-default-theme-accent-10,#000))}feFlood.contrast-3{flood-color:var(--simple-icon-color,var(--simple-colors-default-theme-accent-11,#000))}feFlood.contrast-4{flood-color:var(--simple-icon-color,var(--simple-colors-default-theme-accent-12,#000))}`]}get feFlood(){return this.noColorize?"":r`<feFlood class="contrast-${this.contrast}" result="COLOR" />`}get useSafariPolyfill(){return!1}static get properties(){return{...super.properties,contrast:{type:Number,attribute:"contrast",reflect:!0}}}constructor(){super(),this.contrast=0}}customElements.define(_.tag,_);
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const w=function(i){return class extends i{static get styles(){return[e`:host{margin:0;padding:0;display:block}:host([hidden]){display:none}[role=menuitem][disabled]{cursor:not-allowed}[role=menuitem],[role=menuitem]:visited{display:block;margin:0;border-radius:0;font-family:inherit;font-size:inherit;text-decoration:var(--a11y-menu-button-item-text-decoration,none);color:var(--a11y-menu-button-item-color,var(--a11y-menu-button-color,currentColor));width:calc(100% - 2 * var(--a11y-menu-button-item-horizontal-padding,var(--a11y-menu-button-horizontal-padding,5px)));text-align:var(--a11y-menu-button-item-text-align,left);padding:var(--a11y-menu-button-item-vertical-padding,var(--a11y-menu-button-vertical-padding,0)) var(--a11y-menu-button-item-horizontal-padding,var(--a11y-menu-button-horizontal-padding,5px));background-color:var(--a11y-menu-button-item-bg-color,var(--a11y-menu-button-bg-color,#fff));border-left:var(--a11y-menu-button-item-border-left,none);border-right:var(--a11y-menu-button-item-border-right,none);border-top:var(--a11y-menu-button-item-border-top,none);border-bottom:var(--a11y-menu-button-item-border-bottom,none);border:var(--a11y-menu-button-item-border,none);transition:all .25s ease-in-out}button[role=menuitem],button[role=menuitem]:visited{width:100%}:host(:focus-within) [role=button],[role=menuitem]:focus,[role=menuitem]:hover{text-decoration:var(--a11y-menu-button-item-focus-text-decoration,none);color:var(--a11y-menu-button-item-focus-color,currentColor);background-color:var(--a11y-menu-button-item-focus-bg-color,#e0e0ff);border-left:var(--a11y-menu-button-item-focus-border-left,unset);border-right:var(--a11y-menu-button-item-focus-border-right,unset);border-top:var(--a11y-menu-button-item-focus-border-top,unset);border-bottom:var(--a11y-menu-button-item-focus-border-bottom,unset);border:var(--a11y-menu-button-item-focus-border,unset)}`]}render(){return this.href&&""!==this.href.trim()?this.linkTemplate:this.buttonTemplate}static get tag(){return"a11y-menu-button-item"}static get properties(){return{disabled:{attribute:"disabled",type:Boolean},hidden:{attribute:"hidden",type:Boolean,reflect:!0},href:{attribute:"href",type:String},controls:{attribute:"controls",type:String},slot:{type:String,attribute:"slot",reflect:!0}}}constructor(){super(),this.slot="menuitem"}get linkTemplate(){return t` <li role="none"> <a role="menuitem" href="${this.href}" ?disabled="${this.disabled}" part="button"> <slot></slot> </a> </li>`}get buttonTemplate(){return t` <li role="none"> <button role="menuitem" controls="${this.controls}" ?disabled="${this.disabled}" part="button"> <slot></slot> </button> </li> `}get menuItem(){return this.shadowRoot&&this.shadowRoot.querySelector("[role=menuitem]")?this.shadowRoot.querySelector("[role=menuitem]"):void 0}focus(){this.menuItem&&this.menuItem.focus()}connectedCallback(){super.connectedCallback(),this.dispatchEvent(new CustomEvent("add-a11y-menu-button-item",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}disconnectedCallback(){super.disconnectedCallback(),this.dispatchEvent(new CustomEvent("remove-a11y-menu-button-item",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}}};class k extends(w(i)){}window.customElements.define(k.tag,k),
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
window.AbsolutePositionStateManager=window.AbsolutePositionStateManager||{},window.AbsolutePositionStateManager.requestAvailability=()=>{if(!window.AbsolutePositionStateManager.instance){window.AbsolutePositionStateManager.instance=document.createElement("absolute-position-state-manager");let e=window.AbsolutePositionStateManager.instance;document.body.appendChild(e)}return window.AbsolutePositionStateManager.instance};class S extends i{static get tag(){return"absolute-position-state-manager"}static get properties(){return{elements:{type:Array},__observer:{type:Object},__timeout:{type:Object},__timeout2:{type:Object}}}constructor(){super(),this.elements=[],this.__timeout=!1,this.__observer=new MutationObserver((e=>this.checkMutations(e)))}loadElement(e){this.elements.length<1&&(this.__observer.observe(document,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),this.updateElements(),document.addEventListener("load",this.updateElements),window.addEventListener("resize",this._handleResize)),this.elements.filter((t=>t===e)).length<1&&(this.elements.push(e),e.style.top=0,e.style.left=0),this.positionElement(e)}unloadElement(e){this.elements=this.elements.filter((t=>t!==e)),this.elements.length<1&&this.removeEventListeners()}_handleScroll(){this.__timeout2&&clearTimeout(this.__timeout2),this.__timeout2=setTimeout(window.AbsolutePositionStateManager.instance.updateStickyElements(),1e3)}_handleResize(){this.__timeout&&clearTimeout(this.__timeout),this.__timeout=setTimeout(window.AbsolutePositionStateManager.instance.updateElements(),250)}checkMutations(e){let t=!1;e.forEach((e=>{t||(t=t||!("attributes"===e.type&&"style"===e.attributeName&&this.elements.includes(e.target)))})),t&&(this.__timeout&&clearTimeout(this.__timeout),this.__timeout=setTimeout(window.AbsolutePositionStateManager.instance.updateElements(),250))}findTarget(e){let t="#"+e.for,i=e.target,o=e;for(;e.for&&!i&&o&&o.parentNode&&o!==document;)o=o.parentNode,i=o?o.querySelector(t):void 0,11===o.nodeType&&(o=o.host),i=!i&&o?o.querySelector(t):i;return i}removeEventListeners(){this.__observer&&this.__observer.disconnect&&this.__observer.disconnect(),document.removeEventListener("load",this.updateElements),window.removeEventListener("resize",this._handleResize),this.__watchSticky&&window.removeEventListener("scroll",this._handleScroll)}updateElements(){this.elements.forEach((e=>this.positionElement(e))),this.loadSticky()}updateStickyElements(){this.elements.forEach((e=>{e.sticky&&this.positionElement(e)}))}loadSticky(){!this.__watchSticky&&this.elements.filter((e=>e.sticky)).length>0?(this.__watchSticky=!0,window.addEventListener("scroll",this._handleScroll)):this.__watchSticky&&this.elements.filter((e=>e.sticky)).length<1&&(window.removeEventListener("scroll",this._handleScroll),this.__watchSticky=!1)}_getParentNode(e){let t=e.parentNode;return null!=t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(t=t.host),t}positionElement(e){e.position||(e.position="bottom"),e.style.position="absolute",e.style.top||(e.style.top="0px"),e.style.left||(e.style.left="0px");let t=this.findTarget(e),i=e.offsetParent,o=!t||t.getBoundingClientRect();if(!t||!i)return;e.justify&&(e.style.width=`${o.width}px`);let s=document.body.getBoundingClientRect(),r=i.getBoundingClientRect(),a=e.getBoundingClientRect(),l=parseFloat(e.offset),n=e=>parseFloat(e.replace("px","")),d=(t=e.position)=>"left"!==t&&"right"!==t,p=(t=d(e.position))=>{let i,r=t?n(e.style.left)-a.left:n(e.style.top)-a.top,l=t?"left":"top",p=e=>t?e.width:e.height,u=r+p(s)-p(a),h=r;return"end"===e.positionAlign?h+=o[l]-p(a)+p(o):"start"===e.positionAlign?h+=o[l]:h+=o[l]-p(a)/2+p(o)/2,i=e.fitToVisibleBounds?Math.max(r,Math.min(u,h)):h,i},u=(t=e.position)=>{let i,s=d(t)?n(e.style.top)-a.top:n(e.style.left)-a.left,r=e.allowOverlap||"visible"!=window.getComputedStyle(e,null).overflowY?a.height:Math.max(a.height,e.scrollHeight),p=e.allowOverlap||"visible"!=window.getComputedStyle(e,null).overflowX?a.width:Math.max(a.width,e.scrollWidth);return i="top"===t?o.top+s-r-l:"left"===t?o.left+s-p-l:o[t]+s+l,i},h=(t=e.position)=>{let i=e=>d(t)?a.height+l:a.width+l;return((t=e.position)=>"left"===t||"top"===t)(t)?o[t]-s[t]>i:s[t]-o[t]>i},c=!1!==e.fitToVisibleBounds&&!h(e.position),m={top:["bottom","left","right"],left:["right","top","bottom"],bottom:["top","right","left"],right:["left","bottom","top"]};c&&h(m[e.position][0])?e.position=m[e.position][0]:c&&h(m[e.position][1])?e.position=m[e.position][1]:c&&h(m[e.position][2])&&(e.position=m[e.position][2]);let b=d(e.position)?u():p(),f=d(e.position)?p():u();if(e.sticky){let t=window.pageYOffset||(document.documentElement||document.body.parentNode||document.body).scrollTop,s=window.innerHeight,r=0===a.height&&e.children&&e.children[0]?e.children[0].offsetHeight:a.height,l=o.top-a.height<0&&o.top+o.height>20+r,n=o.top+o.height+a.height>s&&o.top<s-r;"top"===e.position&&l&&(b=t-i.offsetTop+(r-a.height)),"bottom"===e.position&&n&&(b=t+s-i.offsetTop-r)}e.style.top=b+"px",e.style.left=f+"px",e.__positions={self:a,parent:r,target:o}}disconnectedCallback(){this.removeEventListeners(),super.disconnectedCallback()}}window.customElements.define(S.tag,S);class E extends(function(i){return class extends i{static get styles(){return[e`:host{display:inline-block;z-index:99999999999;position:absolute}:host([hidden]){display:none}`]}render(){return t` <slot></slot>`}static get properties(){return{...super.properties,allowOverlap:{type:Boolean,attribute:"allow-overlap"},auto:{type:Boolean,attribute:"auto"},fitToVisibleBounds:{type:Boolean,attribute:"fit-to-visible-bounds"},hidden:{type:Boolean,reflect:!0,attribute:"hidden"},for:{type:String,attribute:"for",reflect:!0},offset:{type:Number,attribute:"offset"},sticky:{type:Boolean,attribute:"sticky",reflect:!0},position:{type:String,attribute:"position",reflect:!0},positionAlign:{type:String,attribute:"position-align",reflect:!0},justify:{type:Boolean,reflect:!0,attribute:"justify"},target:{type:Object},__positions:{type:Object}}}static get tag(){return"absolute-position-behavior"}constructor(){super(),this.auto=!1,this.fitToVisibleBounds=!1,this.for=null,this.offset=0,this.position="bottom",this.target=null,this.sticky=!1,this.hidden=!1,this.__positions={},this.__observe=!1}updated(e){let t=!1;this.shadowRoot&&!this.hidden&&(e.forEach(((e,i)=>{"auto"===i&&this.auto&&this.setPosition(),"auto"!==i||this.auto||this.unsetPosition(),["allowOverlap","fitToVisibleBounds","for","offset","position","justify","positionAlign","target","hidden","sticky"].includes(i)&&this[i]!==e&&(t=!0)})),t&&this.updatePosition())}setPosition(){this.__observe=!0,window.AbsolutePositionStateManager.requestAvailability().loadElement(this)}unsetPosition(){this.__observe=!1,window.AbsolutePositionStateManager.requestAvailability().unloadElement(this)}updatePosition(){!this.hidden&&this.auto&&0==this.__observe&&window.AbsolutePositionStateManager.requestAvailability().loadElement(this),this.auto&&!0!==this.__observe||window.AbsolutePositionStateManager.requestAvailability().positionElement(this)}disconnectedCallback(){this.unsetPosition(),super.disconnectedCallback()}}}(i)){}window.customElements.define(E.tag,E);
/**
 * Copyright 2018 Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
const $=function(i){return class extends i{static get menuButtonCoreStyles(){return[e`:host{padding:0;display:inline-flex;position:relative;z-index:1}:host([expanded]){z-index:var(--a11y-menu-button-focus-z-index,1000)}button[part=button]{display:block;text-decoration:inherit;font-family:inherit;font-size:inherit;margin:0;width:100%}absolute-position-behavior{z-index:-1;overflow:hidden;transition:z-index 0s}:host([expanded]) absolute-position-behavior{z-index:var(--a11y-menu-button-focus-z-index,1000);transition:z-index 0s}:host(:not([expanded])) absolute-position-behavior{border-color:none!important}ul{margin:0;padding:0;list-style:none}`]}static get menuButtonThemeStyles(){return[e`button[part=button]{padding:var(--a11y-menu-button-vertical-padding,2px) var(--a11y-menu-button-horizontal-padding,5px);text-align:var(--a11y-menu-button-text-align,center);background-color:var(--a11y-menu-button-bg-color,#fff);color:var(--a11y-menu-button-color,currentColor);background-color:var(--a11y-menu-button-bg-color,#fff);border-radius:var(--a11y-menu-button-border-radius,0);border-left:var(--a11y-menu-button-border-left,unset);border-top:var(--a11y-menu-button-border-top,unset);border-right:var(--a11y-menu-button-border-right,unset);border-bottom:var(--a11y-menu-button-border-bottom,unset);border:var(--a11y-menu-button-border,1px solid #ddd);box-shadow:var(--a11y-menu-button-box-shadow,unset);transition:all .25s ease-in-out}button[part=button]:focus,button[part=button]:hover{color:var(--a11y-menu-button-focus-color,var(--a11y-menu-button-color,currentColor));background-color:var(--a11y-menu-button-focus-bg-color,var(--a11y-menu-button-bg-color,#fff));border-left:var(--a11y-menu-button-focus-border-left,var(--a11y-menu-button-border-left,unset));border-top:var(--a11y-menu-button-focus-border-top,var(--a11y-menu-button-border-top,unset));border-right:var(--a11y-menu-button-focus-border-right,var(--a11y-menu-button-border-right,unset));border-bottom:var(--a11y-menu-button-focus-border-bottom,var(--a11y-menu-button-border-bottom,unset));border:var(--a11y-menu-button-focus-border,var(--a11y-menu-button-border,1px solid #ddd));box-shadow:var(--a11y-menu-button-box-shadow,var(--a11y-menu-button-focus-box-shadow,unset))}:host([expanded]) absolute-position-behavior{width:var(--a11y-menu-button-list-width,unset);height:var(--a11y-menu-button-list-height,unset);border:var(--a11y-menu-button-list-border,var(--a11y-menu-button-border,1px solid #ddd));background-color:var(--a11y-menu-button-bg-color,var(--a11y-menu-button-list-bg-color,#fff));box-shadow:var(--a11y-menu-button-list-box-shadow,unset)}`]}static get styles(){return[...this.menuButtonCoreStyles,...this.menuButtonThemeStyles]}render(){return t` ${this.buttonTemplate} ${this.menuTemplate} `}static get tag(){return"a11y-menu-button"}static get properties(){return{currentItem:{type:Object},disabled:{attribute:"disabled",type:Boolean},expanded:{attribute:"expanded",type:Boolean,reflect:!0},focused:{attribute:"focused",type:Boolean},hovered:{attribute:"hovered",type:Boolean},keepOpenOnClick:{attribute:"keep-open-on-click",type:Boolean},menuItems:{type:Array},noOpenOnHover:{attribute:"no-open-on-hover",type:Boolean},offset:{type:Number,attribute:"offset"},position:{type:String,attribute:"position",reflect:!0},positionAlign:{type:String,attribute:"position-align",reflect:!0}}}constructor(){super(),this.position="bottom",this.positionAlign="start",this.offset=0,this.menuItems=[],this.keepOpenOnClick=!1,this.noOpenOnHover=!1,[...this.children].filter((e=>"menuitem"===e.slot)).forEach((e=>this.addItem(e))),this.addEventListener("keydown",this._handleKeydown),this.addEventListener("click",this._handleClick),this.addEventListener("focus",this._handleFocus),this.addEventListener("blur",this._handleBlur),this.addEventListener("mouseover",this._handleMouseover),this.addEventListener("mouseout",this._handleMouseout),this.addEventListener("add-a11y-menu-button-item",this._handleAddItem),this.addEventListener("remove-a11y-menu-button-item",this._handleRemoveItem)}get menuTemplate(){return t` <absolute-position-behavior ?auto="${this.expanded}" for="menubutton" position="${this.position}" position-align="${this.positionAlign}" .offset="${this.offset}" fit-to-visible-bounds part="menu-outer"> <ul id="menu" role="menu" aria-labelledby="menubutton" ?hidden="${!this.expanded}" @mousover="${e=>this.hover=!0}" @mousout="${e=>this.hover=!1}" part="menu"> ${this.listItemTemplate} </ul> </absolute-position-behavior> `}get buttonTemplate(){return t` <button id="menubutton" aria-haspopup="true" aria-controls="menu" aria-expanded="${this.expanded?"true":"false"}" part="button"> <slot name="button"></slot> </button> `}get listItemTemplate(){return t`<slot name="menuitem"></slot><slot></slot>`}get keyCode(){return{TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}}close(e=!1){(e||!this.focused&&!this.hovered)&&(this.expanded=!1,this.dispatchEvent(new CustomEvent("close",{bubbles:!0,cancelable:!0,composed:!0,detail:this})))}open(){this.expanded=!0,this.dispatchEvent(new CustomEvent("open",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}focus(){this.shadowRoot&&this.shadowRoot.querySelector("#menubutton")&&this.shadowRoot.querySelector("#menubutton").focus()}focusOn(e){(e=e||this.firstItem)&&(this.open(),this.focused=!0,this.currentItem=e,e.focus())}focusByCharacter(e){e=e.toLowerCase();var t,i,o=(e,t)=>{for(var i=e;i<this.firstChars.length;i++)if(t===this.firstChars[i])return i;return-1};(t=this.menuItems.indexOf(this.currentItem)+1)===this.menuItems.length&&(t=0),-1===(i=o(t,e))&&(i=o(0,e)),i>-1&&this.menuItems[i].focus()}get firstItem(){return this.menuItems[0]}get previousItem(){return this.getItem(-1)}get nextItem(){return this.getItem()}get lastItem(){return this.menuItems[this.menuItems.length-1]}get firstChars(){return this.menuItems.map((e=>((e.textContent||"").trim()||" ").substring(0,1).toLowerCase()))}getItemIndex(){let e=-1;return this.menuItems.forEach(((t,i)=>{t===this.currentItem&&(e=i)})),e}getItem(e=1){let t=this.getItemIndex(this.currentItem)+e;return!this.menuItems||t<0||this.menuItems.length<=t?void 0:this.menuItems[t]}get itemListeners(){return{click:this._handleItemClick,focus:this._handleFocus,blur:this._handleBlur,mouseover:this._handleMouseover,mouseout:this._handleMouseout,keydown:this._handleItemKeydown}}addItem(e){let t=this.itemListeners;this.menuItems=this.menuItems||[],Object.keys(t).forEach((i=>e.addEventListener(i,t[i].bind(this)))),this.menuItems.push(e)}removeItem(e){let t=this.itemListeners;this.menuItems&&(this.menuItems=[...this.menuItems.filter((t=>e!==t))]),Object.keys(t).forEach((i=>e.removeEventListener(i,t[i].bind(this))))}_handleAddItem(e){e.stopPropagation&&e.stopPropagation(),e.detail&&this.addItem(e.detail)}_handleRemoveItem(e){e.stopPropagation(),e.detail&&this.addItem(e.detail)}_handleItemClick(e){this.keepOpenOnClick||(this.focus(),this.close(!0)),this.dispatchEvent(new CustomEvent("item-click",{bubbles:!0,cancelable:!0,composed:!0,detail:e})),e.stopPropagation()}_excludeEvent(e){return!1}_handleItemKeydown(e){let t=!1,i=e.key,o=e=>1===e.length&&e.match(/\S/),s=(a(e)||[])[0];if((o(i)||!["INPUT","TEXTAREA","SELECT"].includes(s.tagName)&&!this._excludeEvent(e))&&!(e.ctrlKey||e.altKey||e.metaKey||e.keyCode===this.keyCode.SPACE||e.keyCode===this.keyCode.RETURN)){if(e.shiftKey)o(i)&&(this.focusByCharacter(i),t=!0),e.keyCode===this.keyCode.TAB&&(this.focus(),this.close(!0));else switch(e.keyCode){case this.keyCode.ESC:this.focus(),this.close(!0),t=!0;break;case this.keyCode.UP:this.focusOn(this.previousItem||this.lastItem),t=!0;break;case this.keyCode.DOWN:this.focusOn(this.nextItem||this.firstItem),t=!0;break;case this.keyCode.HOME:case this.keyCode.PAGEUP:this.currentItem=this.firstItem,t=!0;break;case this.keyCode.END:case this.keyCode.PAGEDOWN:this.currentItem=this.lastItem,t=!0;break;case this.keyCode.TAB:this.focus(),this.close(!0);break;default:o(i)&&this.focusByCharacter(i)}t&&(e.stopPropagation(),e.preventDefault())}}_handleKeydown(e){var t=!1;switch(e.keyCode){case this.keyCode.SPACE:case this.keyCode.RETURN:case this.keyCode.DOWN:this.focusOn(this.firstItem),t=!0;break;case this.keyCode.UP:this.popupMenu&&(this.focusOn(this.lastItem),t=!0)}t&&(e.stopPropagation(),e.preventDefault())}_handleClick(e){this.expanded?this.close(!0):this.focusOn(this.firstItem)}_handleFocus(e){this.focused=!0}_handleBlur(e){this.focused=!1}_handleMouseover(e){this.hovered=!0,this.noOpenOnHover||this.open()}_handleMouseout(e){this.hovered=!1,setTimeout(this.close(),300)}}};class C extends($(i)){}window.customElements.define(C.tag,C);class T extends(w(i)){constructor(){super()}static get styles(){return[...super.styles,e`:host{--simple-toolbar-button-min-width:100%!important}::slotted(*){--simple-toolbar-border-radius:0px;display:flex}`]}render(){return t` <li role="none"> <slot></slot> </li> `}static get tag(){return"simple-toolbar-menu-item"}get menuItem(){return this.querySelector("[role=menuitem]")||super.menuItem}}window.customElements.define(T.tag,T);const A=function(i){return class extends($(v(i))){static get simpleButtonCoreStyles(){return[...super.simpleButtonCoreStyles,e`#menubutton{display:flex;flex-wrap:none;align-items:center;min-width:42px}.label{padding:0 5px}#dropdownicon{--simple-icon-height:18px;--simple-icon-width:18px;margin-left:-2px}#icon+#dropdownicon{margin-left:-6px}`]}constructor(){super(),this.tooltipDirection="top"}static get simpleButtonLayoutStyles(){return[...super.simpleButtonLayoutStyles,e`#menu{width:var(--simple-toolbar-button-width);min-width:var(--simple-toolbar-button-min-width)}`]}static get simpleButtonThemeStyles(){return[...super.simpleButtonThemeStyles,e`:host([expanded]) absolute-position-behavior{border-style:solid;border-width:var(--simple-toolbar-button-border-width,var(--simple-toolbar-border-width,1px));border-color:var(--simple-toolbar-button-border-color,var(--simple-toolbar-border-color,inherit));background-color:var(--simple-toolbar-button-bg,#fff);box-shadow:var(--simple-toolbar-menu-list-box-shadow,unset)}`]}static get styles(){return[...super.menuButtonCoreStyles,...this.simpleButtonCoreStyles,...this.iconStyles,...this.labelStyles,...this.tooltipStyles,...this.simpleButtonLayoutStyles,...this.simpleButtonThemeStyles]}get buttonTemplate(){return t` <button id="menubutton" aria-haspopup="true" aria-controls="menu" aria-expanded="${this.expanded?"true":"false"}" @blur="${this._handleBlur}" part="button" tabindex="${this.isCurrentItem?1:-1}"> ${this.buttonInnerTemplate} <simple-icon-lite id="dropdownicon" icon="arrow-drop-down" aria-hidden="true" part="dropdown-icon"></simple-icon-lite> </button> ${this.tooltipTemplate} `}get tooltipTemplate(){return this.tooltipVisible?t`<simple-tooltip id="tooltip" for="menubutton" position="${this.tooltipDirection||"top"}" part="tooltip" fit-to-visible-bounds>${this.currentTooltip||this.currentLabel}</simple-tooltip>`:""}static get tag(){return"simple-toolbar-menu"}static get properties(){return{...super.properties}}get focusableElement(){return this.shadowRoot&&this.shadowRoot.querySelector("#menubutton")?this.shadowRoot.querySelector("#menubutton"):void 0}_excludeEvent(e){let t=(a(e)||[])[0];return!(!t.closest("simple-toolbar-field")||"BUTTON"!==t.tagName)}_handleFocus(e){v._handleFocus&&v._handleFocus(e),$._handleFocus&&$._handleFocus(e)}_handleBlur(e){v._handleBlur&&v._handleBlur(e),$._handleBlur&&$._handleBlur(e),this.isCurrentItem||setTimeout(this.close(),300)}addItem(e){if(this.getItemIndex(e)<0){let t=this.itemListeners;this.__menuItems=this.__menuItems||[],this.__menuItems.push(e),Object.keys(t).forEach((i=>(e.focusableElement||e).addEventListener(i,t[i].bind(this))))}}removeItem(e){if(this.getItemIndex(e)<0){let t=this.itemListeners;Object.keys(t).forEach((i=>(e.focusableElement||e).removeEventListener(i,t[i].bind(this)))),this.__menuItems&&(this.__menuItems=[...this.menuItems.filter((t=>e!==t))])}}}};class L extends(A(i)){}window.customElements.define(L.tag,L);class I extends(b(i)){static get styles(){return[...super.styles,...d,e`:host{padding:0;border-radius:var(--simple-fields-border-radius,2px);display:block;border:none;transform:rotate(0);transition:all .5s ease;z-index:1;position:relative}:host([disabled]){opacity:.5}:host([aria-expanded=true]){padding:var(--simple-fields-margin,16px) var(--simple-fields-margin-small,8px);outline:1px solid var(--simple-fields-border-color-light,#ccc);transition:all .5s ease}:host([error]){outline:1px solid var(--simple-fields-error-color,#b40000);transition:border .5s ease}[aria-controls=content][disabled]{cursor:not-allowed}#drag-handle{flex:0 1 auto;position:relative;overflow:visible}#preview{flex:1 0 auto;margin:0;margin-right:calc(0 - var(--simple-fields-margin-small,8px)/ 2);margin-left:calc(50px + var(--simple-fields-margin-small,8px)/ 2);max-width:calc(100% - 72px - 2 * var(--simple-fields-margin-small,8px)/ 2)}#heading,.heading-inner{display:flex;justify-content:space-between;align-items:flex-start}#content{overflow:hidden;max-height:0}:host #content-inner{display:flex;align-items:flex-end;justify-content:space-between;flex-wrap:wrap;overflow:hidden;max-height:0;transition:max-height .75s ease .1s}:host([aria-expanded=true]) #content{max-height:20000vh;transition:max-height .75s ease .1s}:host([aria-expanded=true]) #content-inner{max-height:20000vh}#content-inner>*{flex:1 1 auto}#copy-delete{display:flex;flex:0 0 auto}#copy,#remove{flex:0 0 auto}#expand{margin-left:calc(var(--simple-fields-margin-small,8px)/ 2)}#drag-handle{position:absolute;left:2px;top:2px;--simple-toolbar-button-white-space:normal!important}:host([aria-expanded=true]) #drag-handle{top:var(--simple-fields-margin,16px);left:var(--simple-fields-margin-small,8px)}#dropzone{height:0}:host(.dragging) #heading{opacity:.5}:host(.dragging) #content,:host(.dragging) #expand{display:none}#content:focus-within,#content:focus-within #content-inner,#content:hover,#content:hover #content-inner{overflow:visible}:host(.dragging) #preview,:host(.droppable) #preview{margin-left:calc(var(--simple-fields-margin-small,8px)/ 2)}:host(.dropzone) #dropzone{background-color:var(--simple-fields-button-focus-background-color,var(--simple-fields-accent-color-light,#d9eaff));height:80px}:host([aria-expanded=true]) #expand::part(icon){transform:rotate(90deg);transition:all .5s ease}::slotted(:first-child),::slotted([slot=preview]){margin-top:0}::slotted(:last-child),::slotted([slot=preview]){margin-bottom:0}:host(:focus),:host(:focus-within),:host(:hover){z-index:100000}:host(.dropzone){z-index:1}:host(:first-child) #move-up-outer,:host(:first-child):last-child #drag-handle,:host(:last-child) #move-down-outer,[hidden]{display:none}`]}render(){return t` <div id="dropzone"></div> <simple-toolbar-menu id="drag-handle" controls="${this.id}" icon="icons:reorder" label="Reorder this item" ?disabled="${this.disabled}" ?hidden="${this.__dropAccepts||this.__dragging}" part="drag" tooltip-direction="right" @mousedown="${e=>this.draggable="true"}" @mouseup="${e=>this.draggable="false"}"> <simple-toolbar-menu-item id="move-up-outer"> <simple-toolbar-button id="move-up" align-horizontal="left" role="menuitem" icon="arrow-upward" show-text-label label="Up" @click="${this._moveUp}"> </simple-toolbar-button> </simple-toolbar-menu-item> <simple-toolbar-menu-item id="move-down-outer"> <simple-toolbar-button align-horizontal="left" id="move-up" role="menuitem" icon="arrow-downward" show-text-label label="Down" @click="${this._moveDown}"> </simple-toolbar-button> </simple-toolbar-menu-item> </simple-toolbar-menu> <div id="heading" part="heading" .item="${this}"> <div id="preview" part="preview"><slot name="preview"></slot></div> <simple-toolbar-button id="expand" controls="${this.id}" ?hidden="${"xs"!==this.responsiveSize}" icon="more-vert" label="Toggle expand" ?disabled="${this.disabled}" @click="${this.toggle}" toggles ?toggled="${this.expanded}" part="expand" tooltip-direction="left"> </simple-toolbar-button> </div> <div id="content" part="content"> <div id="content-inner" part="content-inner"> <div><slot></slot></div> <div id="copy-delete"> <simple-toolbar-button id="copy" controls="${(this.parentNode||{}).id}" icon="content-copy" label="Copy this item" ?disabled="${this.disabled}" @click="${this._handleCopy}" part="copy" tooltip-direction="left"> </simple-toolbar-button> <simple-toolbar-menu id="remove" icon="delete" label="Remove this item" ?disabled="${this.disabled}" fit-to-visible-bounds part="remove" position-align="end" tooltip-direction="left"> <simple-toolbar-menu-item> <simple-toolbar-button id="confirm-remove" class="danger" align-horizontal="left" role="menuitem" show-text-label controls="${this.id}" icon="delete" label="Remove" ?disabled="${this.disabled}" @click="${this._handleRemove}" part="confirm-remove"> </simple-toolbar-button> </simple-toolbar-menu-item> </simple-toolbar-menu> </div> </div> </div> `}static get tag(){return"simple-fields-array-item"}static get properties(){return{expanded:{type:Boolean,reflect:!0},disabled:{type:Boolean,reflect:!0,attribute:"disabled"},draggable:{type:String,reflect:!0},preview:{type:Boolean},previewBy:{type:Array,reflect:!0,attribute:"preview-by"},responsiveSize:{type:String,attribute:"responsive-size",reflect:!0},__dragging:{type:Boolean},__dropAccepts:{type:Object},__prev:{type:Object},__next:{type:Object}}}constructor(){super(),this.disabled=!1,this.draggable="truest",this.previewBy=[],this.expanded=!0,this.responsiveSize="sm",this.addEventListener("dragenter",this._dragEnter),this.addEventListener("dragleave",this._dragLeave),this.addEventListener("dragover",this._dragMoving),this.addEventListener("dragstart",this._dragStart),this.addEventListener("dragend",this._dragEnd),this.addEventListener("drop",this._dragDrop)}get isArrayItem(){return!0}_dragMoving(e){this.__dragMoving=!0,e.preventDefault()}_dragEnd(e){[...this.parentNode.childNodes].forEach((e=>{e.isArrayItem&&e._setDropzone(!1)})),this._setDragging(!1)}_dragStart(e){let t=this.shadowRoot.querySelector("#heading");e.dataTransfer.setDragImage(t,0,0),this._setDragging(),e.stopPropagation(),e.stopImmediatePropagation()}_dragEnter(e){this._setDropzone()}_dragLeave(e){this._setDropzone(!1)}_dragDrop(e){this._moveBefore(e,this.__dropAccepts,this)}_moveUp(e){let t=this.previousElementSibling;t&&this._moveBefore(e,this,t)}_moveDown(e){let t=this.nextElementSibling;t&&this._moveBefore(e,this,t.nextElementSibling)}_moveBefore(e,t,i){!this.parentNode.disabled&&t&&(i?this.parentNode.insertBefore(t,i):this.parentNode.append(t),[...this.parentNode.childNodes].forEach((e=>{e.isArrayItem&&e._setDragging(!1)})),this.dispatchEvent(new CustomEvent("reorder",{bubbles:!0,cancelable:!0,composed:!1,detail:this.parentNode})))}_setDragging(e=!0){this.parentNode.disabled||(this.__dragging=e),e?([...this.parentNode.childNodes].forEach((e=>{e!==this&&e.isArrayItem&&(e.__dropAccepts=this,e.classList.add("droppable"))})),this.classList.add("dragging")):([...this.parentNode.childNodes].forEach((e=>{e!==this&&e.isArrayItem&&(e.__dropAccepts=void 0,e.classList.remove("droppable"))})),this.classList.remove("dragging"))}_setDropzone(e=!0){e&&!this.__dragging&&this.__dropAccepts?this.classList.add("dropzone"):this.classList.remove("dropzone")}connectedCallback(){super.connectedCallback(),setTimeout((()=>{this.dispatchEvent(new CustomEvent("added",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}),0)}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"responsive-size",relativeToParent:!0,sm:250,md:500,lg:1e3,xl:2e3}}))}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"error"!==t&&"expanded"!==t||this.setAttribute("aria-expanded",this.error||this.expanded)}))}get slots(){let e={};return this.previewBy.forEach((t=>e[t]="preview")),e}toggle(){this.expanded=!this.expanded}_handleCopy(){this.dispatchEvent(new CustomEvent("copy",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}_handleRemove(){this.dispatchEvent(new CustomEvent("remove",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}disconnectedCallback(){this.dispatchEvent(new CustomEvent("removed",{bubbles:!0,cancelable:!0,composed:!1,detail:this})),super.disconnectedCallback()}}window.customElements.define(I.tag,I);class B extends(b(i)){static get tag(){return"simple-fields-array"}static get styles(){return[...super.styles,...d,e`:host([expanded]) #expand::part(icon){transform:rotate(90deg);transition:all .5s ease}#item-fields{margin:var(--simple-fields-margin-small,8px) 0;clear:both;z-index:3}#top{display:flex;align-items:flex-end;justify-content:flex-end}#add{float:right}`]}static get properties(){return{...super.properties,count:{type:Number},disableAdd:{type:Boolean,attribute:"disable-add"},expanded:{type:Boolean,reflect:!0},responsiveSize:{type:String,attribute:"responsive-size",reflect:!0},__dragging:{type:Boolean}}}render(){return t` <fieldset part="fieldset">${this.legend}${this.fields}</fieldset> `}get fields(){return t` <div id="top" part="top"> ${this.descriptionTemplate} <simple-toolbar-button id="expand" controls="item-fields" icon="more-vert" ?disabled="${this.disabled}" @click="${e=>this.toggle()}" ?toggled="${this.expanded}" toggles ?show-text-label="${"xs"!==this.responsiveSize}" label="${this.expanded?"Collapse All":"Expand All"}" part="expand"> </simple-toolbar-button> </div> <div id="item-fields" aria-live="polite" part="items"> <slot></slot> <simple-toolbar-button id="add" icon="add" ?disabled="${this.disabled||this.disableAdd}" controls="item-fields" @click="${e=>this._handleAdd()}" part="add" icon="more-vert" ?toggled="${this.expanded}" toggles ?show-text-label="${"xs"!==this.responsiveSize}" label="Add Item"> </simple-toolbar-button> </div> `}constructor(){super(),this.count=0,this.expanded=!0,this.disableAdd=!1,this.responsiveSize="sm"}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"responsive-size",relativeToParent:!0,sm:250,md:500,lg:1e3,xl:2e3}}))}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"expanded"===t&&this.querySelectorAll("simple-fields-array-item").forEach((e=>e.setAttribute("aria-expanded",this.expanded)))}))}buildItem(e){let t=document.createElement("simple-fields-array-item");return t.id=e,t.expanded=this.expanded,t.innerHTML='\n      <slot name="sort"></slot>\n      <slot name="preview"></slot>\n      <slot></slot>',this.appendChild(t),t.addEventListener("remove",(e=>this._handleRemove(e))),t}_handleAdd(){this.dispatchEvent(new CustomEvent("add",{detail:this}))}_handleRemove(e){e.stopPropagation(),e.stopImmediatePropagation(),this.dispatchEvent(new CustomEvent("remove",{detail:e.detail}))}collapse(){this.toggle(!1)}expand(){this.toggle(!0)}focus(e){if(this.childNodes&&e)this.childNodes.length<e&&(e=this.childNodes.length-1),-1==e&&(e=0),0!=this.childNodes.length&&this.childNodes[e].focus();else if(this.shadowRoot){let e=this.childNodes?"expand":"add";this.shadowRoot.getElementById(e).focus()}}toggle(e=!this.expanded){this.expanded=e,this._handleToggle()}_handleToggle(){this.dispatchEvent(new CustomEvent("toggle",{detail:this})),this.expanded?this.dispatchEvent(new CustomEvent("expand",{detail:this})):this.dispatchEvent(new CustomEvent("collapse",{detail:this}))}}window.customElements.define(B.tag,B);
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class z extends i{static get styles(){return[e`:host{display:block;font-family:var(--simple-fields-detail-font-family,var(--simple-fields-font-family,sans-serif));font-size:var(--simple-fields-detail-font-size,var(--simple-fields-font-size,12px));background:var(--simple-fields-background-color,transparent)}:host([hidden]){display:none}`]}render(){return t` <div id="schema-fields" aria-live="polite" part="fields-list"> <slot></slot> </div> `}static get properties(){return{...super.properties,disableAutofocus:{type:Boolean},error:{type:Object},language:{type:String,attribute:"lang",reflect:!0},resources:{type:Object},schema:{type:Object},elementizer:{type:Object},value:{type:Object},__delayedFocus:{type:Boolean},__formElements:{type:Object},__formElementsArray:{type:Array}}}static get tag(){return"simple-fields-lite"}constructor(){super(),window.WCGlobalBasePath?this.basePath=window.WCGlobalBasePath:this.basePath=new URL("./../../../",import.meta.url).href,this.disableAutofocus=!1,this.language="en",this.resources={},this.schemaConversion,this.__formElements={},this.__formElementsArray=[],this.schema={},this.value={}}disconnectedCallback(){this._clearForm(),super.disconnectedCallback()}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{"error"===t&&this.error!==e&&this._errorChanged(),["schema","schemaConversion"].includes(t)&&this._schemaChanged(this.schema,e),"value"===t&&this._valueChanged(this.value,e)}))}get formElements(){return this.__formElements}get formElementsArray(){return this.__formElementsArray}get schemaConversion(){return this.elementizer||{defaultSettings:{element:"input",attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},type:{array:{defaultSettings:{element:"simple-fields-array",invalidProperty:"invalid",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},boolean:{defaultSettings:{element:"input",valueProperty:"checked",valueChangedProperty:"click",attributes:{type:"checkbox",value:!1}}},file:{defaultSettings:{element:"input",attributes:{type:"url"}}},integer:{defaultSettings:{element:"input",attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},markup:{defaultSettings:{element:"textarea"}},number:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0,descriptionProperty:"description"}},string:{format:{"date-time":{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"datetime-local"}}},time:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"time"}}},date:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"date"}}},email:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"email"}}},uri:{defaultSettings:{element:"input",attributes:{autofocus:!0,type:"url"}}}}}}}}get valid(){return!this.error||0===Object.keys(this.error==={}).length}updateSchema(){this._formFieldsChanged()}getFormElementById(e){return(this.__formElementsArray||[]).filter((t=>t.id===e))[0]}focus(){let e=!!(this.__formElementsArray&&this.__formElementsArray[0]&&this.__formElementsArray[0].field)&&this.__formElementsArray[0].field;e?(e.focus(),this.__delayedFocus=!1):this.__delayedFocus=!0}rebuildForm(){this._clearForm(),this._addToForm();let e=!!(this.__formElementsArray&&this.__formElementsArray[0]&&this.__formElementsArray[0].field)&&this.__formElementsArray[0].field;e&&(e.autofocus=!this.disableAutofocus),!this.__delayedFocus&&this.disableAutofocus||this.focus(),this.dispatchEvent(new CustomEvent("fields-ready",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_addToForm(e=this.schema,t=this,i="",o){let s=e.properties,r=e.required;Object.keys(s||{}).forEach((a=>{let l=s[a],n=o||this._convertSchema(l);if(n&&n.element){let o=`${i}${a}`,s=document.createElement(n.element),d=l.properties||l.items||l.noWrap||n.noWrap?s:document.createElement("simple-fields-container"),p=this._getValue(`${i}${a}`),u=!(!Object.getPrototypeOf(s)&&!Object.getPrototypeOf(s).constructor)&&Object.getPrototypeOf(s).constructor.properties;Object.keys(u||{}).forEach((e=>{l[e]&&(s[e]=l[e])})),!window.customElements.get(n.element)&&n.import?import(`${this.basePath}${n.import}`):window.customElements.get(n.element)||console.warn(`missing field: ${n.element}`);let h=l.label||l.title||l.description||a,c=l.prefix,m=l.suffix,b=l.description&&(l.label||l.title)?l.description:void 0;l.onValueChanged;let f=l.onErrorChanged;n.labelSlot=e.labelSlot||n.labelSlot,n.descriptionSlot=e.descriptionSlot||n.descriptionSlot,n.errorMessageSlot=e.errorMessageSlot||n.errorMessageSlot,n.prefixSlot=e.prefixSlot||n.prefixSlot||"prefix",n.suffixSlot=e.suffixSlot||n.suffixSlot||"suffix",n.valueSlot=e.valueSlot||n.valueSlot,n.labelProperty=e.labelProperty||n.labelProperty||"label",n.descriptionProperty=e.descriptionProperty||n.descriptionProperty||"description",n.valueProperty=e.valueProperty||n.valueProperty||"value",n.setValueProperty=e.setValueProperty||n.setValueProperty||n.valueProperty,n.valueChangedProperty=e.valueChangedProperty||n.valueChangedProperty||`${n.valueProperty}-changed`,n.errorProperty=e.errorProperty||n.errorProperty||"error",n.errorChangedProperty=e.errorChangedProperty||n.errorChangedProperty||`${n.errorProperty}-changed`,n.errorMessageProperty=e.errorMessageProperty||n.errorMessageProperty||"errorMessage",s.resources=this.resources,s.id=o,s.setAttribute("name",o),s.setAttribute("language",this.language),l.options&&(s.options=l.options),l.itemsList&&(s.itemsList=l.itemsList),r&&r.includes(a)&&s.setAttribute("required",!0),l.disabled&&(d.disabled=!0),l.hidden&&(d.hidden=!0),l.readonly&&(s.hidden=!0,d.hidden=!0),this._configElement(d,h,n.labelProperty,n.labelSlot),this._configElement(d,b,n.descriptionProperty,n.descriptionSlot),this._configElement(d,c,void 0,n.prefixSlot),this._configElement(d,m,void 0,n.suffixSlot),Object.keys(n.attributes||{}).forEach((e=>{void 0!==typeof n.attributes[e]&&null!==n.attributes[e]&&s.setAttribute(e,n.attributes[e])})),Object.keys(n.properties||{}).forEach((e=>{n.properties[e]&&l[e]&&(s[e]||(s[e]=l[e]||n.properties[e]))})),Object.keys(n.slots||{}).forEach((e=>{n.slots[e]&&l[n.slots[e]]&&n.slots[e].split(/[\s,]/).forEach((t=>{let i=document.createElement("span");i.slot=e,i.innerHTML=l[t],s.appendChild(i)}))})),t.slots&&t.slots[a]&&(d.slot=t.slots[a]),t.appendChild(d),"array"===l.type?this._addArrayItems(p||[],n.child,l,s):l.properties?this._addToForm(l,s,`${s.id}.`,n.child):(s!==d&&(s.slot="field",d.appendChild(s)),void 0===p&&"boolean"!==l.type||this._configElement(s,p,n.setValueProperty,n.valueSlot),s.addEventListener(n.valueChangedProperty,(e=>this._handleChange(s,n.valueProperty,e))),d.addEventListener(n.errorChangedProperty,(e=>{let t=this._deepClone(this.error||{});d[n.errorProperty]?t[o]=d[n.errorMessageProperty]||"":t&&t[o]&&delete t[o],this.error=t,f&&f(e)}))),this.__formElementsArray.push({id:o,field:d,data:n}),this.__formElements[o]={element:s,field:d}}}))}_configElement(e,t,i,o=!1){if(o){let i=document.createElement("span");i.slot=o,t&&(i.innerHTML=t),e&&e.querySelectorAll(`[slot=${o}]`).forEach((e=>e.remove())),e.appendChild(i)}else i&&(e[i]=t)}_insertArrayItem(e,t,i,o,s,r){let a=this._getValue(o.name),l=a?a.length:0;a||this._setValue(o.name,[]),r=r||0===r?r:l;let n={properties:{}};n.properties[r]=this._addArrayItem(r,e,t),this._setValue(`${o.name}.${r}`,s),this._addToForm(n,o,`${o.id}.`,i)}_addArrayItems(e,t,i,o){let s=Object.keys(i.items.properties||{}),r=i.previewBy||(s.length>0?[s[0]]:void 0);Array.from(e).forEach(((e,s)=>{this._insertArrayItem(i,r,t,o,e,s)})),o.addEventListener("add",(e=>{this._insertArrayItem(i,r,t,o,{})})),o.addEventListener("copy",(e=>{let s=this._getValue(e.detail.name);this._insertArrayItem(i,r,t,o,s),o.insertBefore(o.lastElementChild,e.detail.nextElementSibling),this._reorderArrayItems(o)})),o.addEventListener("reorder",(e=>{this._reorderArrayItems(o)})),o.addEventListener("remove",(e=>{let s=e.detail.id,a=this._getValue(o.name)||[],l=s.replace(`${o.name}.`,"");a.splice(parseInt(l),1),this.__formElementsArray=this.__formElementsArray.filter((e=>0===e.id.indexOf(o.name))),o.innerHTML="",a.forEach(((e,s)=>this._insertArrayItem(i,r,t,o,e,s))),this._setValue(`${o.name}`,a),o.focus(parseInt(l)-1)}))}_reorderArrayItems(e){let t=[...Array.from(this._getValue(e.name))||[]],i=(e,t,o)=>{e.id&&(e.id=e.id.replace(t,o)),e.name&&(e.name=e.name.replace(t,o)),[...e.childNodes].forEach((e=>i(e,t,o)))},o=[...Array.from(e.childNodes)],s=[];o.forEach(((e,o)=>{if(!e.isArrayItem)return;let r=e.id.replace(/\.\d+$/,""),a=parseInt(e.id.replace(/.*\./g,""));i(e,e.id,`${r}.${o}`),s.push(JSON.parse(JSON.stringify(t[a])))})),this._setValue(`${e.name}`,s)}_addArrayItem(e,t,i){let o=this._deepClone(t.items);return o.label=`${parseInt(e)+1}`,o.previewBy=i,o}_clearForm(){this.innerHTML="",this.__formElementsArray=[]}_convertSchema(e,t=this.schemaConversion,i){let o=Object.keys(e||{}),s=Object.keys(t).filter((e=>o.includes(e)));return t.defaultSettings&&(i=this._deepClone(t.defaultSettings)),s.forEach((o=>{let s=e[o],r=t?t[o]:void 0,a=r?Array.isArray(s)?r[s[0]]:r[s]:void 0;a&&(i=this._convertSchema(e,a,i))})),i}_deepClone(e){return JSON.parse(JSON.stringify(e))}_errorChanged(){this.formElementsArray.forEach((e=>{let t=e.data||{},i=e.field;if(e.id&&i&&this.error){let i=this.error[e.id]||!1,o=!!this.error[e.id];o||Object.keys(this.error||{}).forEach((t=>{t.match(e.id)&&(o=!0)})),this._configElement(e.field,i,t.errorMessageProperty,t.errorMessageSlot),e.field[t.errorProperty]=o,e.field.setAttribute("aria-invalid",o)}}))}_fireValueChanged(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_formFieldsChanged(e){this.dispatchEvent(new CustomEvent("fields-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_getValue(e){let t=e.split("."),i=this.value;return t.forEach((e=>{i=i&&i[e]?i[e]:void 0})),i}_handleChange(e,t,i){i&&i.stopPropagation&&i.stopPropagation();let o=e.id||e.getAttribute("id"),s=e[t];this._setValue(o,s),this.dispatchEvent(new CustomEvent(`${o}-value-changed`,{bubbles:!0,cancelable:!0,composed:!0,detail:{id:o,element:e,value:s}})),this._fireValueChanged()}_schemaChanged(e,t){e&&e!==t&&(setTimeout((()=>{this.rebuildForm()}),10),this.dispatchEvent(new CustomEvent("schema-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this})))}_setValue(e,t){let i=this._deepClone(this.value),o=this.value,s=e?e.split("."):[],r=s.length;for(var a=0;a<r-1;a++){let e=s[a];o[e]||(o[e]={}),o=o[e]}o[s[r-1]]=t,this._valueChanged(this.value,i)}_valueChanged(e,t){e&&e!==t&&this._fireValueChanged()}}window.customElements.define(z.tag,z);const F=function(i){return class extends(h(i)){static get tag(){return"simple-fields-field"}static get styles(){return[...super.styles,e`fieldset{margin:0;padding:0;border:none;background-color:transparent}option{border-radius:0}option[selected]{background-color:var(--simple-fields-faded-background-color,rgba(0,0,0,.1))}legend{padding-inline-start:unset;padding-inline-end:unset}#field-main-inner{position:relative}#options{display:var(--simple-fields-radio-option-display,flex);flex-wrap:var(--simple-fields-radio-option-flex-wrap,wrap)}fieldset.block-options #options{display:block}.option{flex-direction:row;display:flex;flex-wrap:wrap;align-items:stretch;justify-content:space-between;margin:0 var(--simple-fields-margin-small,8px) 0 0}fieldset.block-options .option{flex-direction:row-reverse;justify-content:flex-end}.option:last-of-type{margin:0}.option:focus-within label{color:var(--simple-fields-accent-color,#003f7d);transition:color ease-in-out}:host([type]) fieldset .border-bottom{display:block}.box-input{width:calc(100% - 4px);padding:2px}.box-input:focus{outline:0}.field-main.inline{align-items:center}input{background-color:var(--simple-fields-background-color,transparent)}input[type=text]{padding:0}textarea{margin:0;transition:height .5s ease-in-out;box-sizing:border-box;vertical-align:bottom;background-color:var(--simple-fields-background-color,transparent)}select.field{width:calc(100% - 26px);padding-right:26px;border:none;background-color:var(--simple-fields-background-color,transparent);border-radius:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}:host([type=select]) simple-icon-lite{position:absolute;right:0}select:focus,select:focus-within{outline:0}:host([type=checkbox]) span,:host([type=radio]) span{position:relative;flex:1 0 auto;display:flex;align-items:center}:host([type=checkbox]) fieldset.block-options span,:host([type=radio]) fieldset.block-options span{flex:0 0 auto}.field-main-multi .option:hover,:host([hovered][type=checkbox]) .field-main-single,:host([hovered][type=radio]) .field-main-single{cursor:pointer;color:var(--simple-fields-accent-color,#003f7d)}:host([type=checkbox]) span:focus-within,:host([type=radio]) span:focus-within{color:var(--simple-fields-accent-color,#003f7d)}:host([type=checkbox]) label.checkbox-label,:host([type=radio]) label.radio-label{flex:0 0 auto}.field-main.inline input[type=checkbox].field,.field-main.inline input[type=radio].field,:host([type=checkbox]) input,:host([type=radio]) input{z-index:-1;opacity:0;min-width:0;width:0;margin:0;flex:0 1 0px}:host([type=checkbox]) simple-icon-lite,:host([type=radio]) simple-icon-lite{flex:0 0 auto}:host([type=checkbox]) simple-icon-lite:hover,:host([type=checkbox]) span:focus-within simple-icon-lite,:host([type=radio]) simple-icon-lite:hover,:host([type=radio]) span:focus-within simple-icon-lite{color:var(--simple-fields-accent-color,#003f7d)}input[type=range]{width:100%;height:calc(var(--simple-fields-font-size,16px) + var(--simple-fields-line-height,22px));padding:0;margin:0;box-sizing:border-box;-webkit-appearance:none}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{width:100%;height:16px;cursor:pointer;background:var(--simple-fields-border-color-light,#ccc);border-radius:8px;transition:all 0s ease-in-out}:host([error]) input[type=range]::-webkit-slider-runnable-track{background:var(--simple-fields-faded-error-color,#ffc0c0);transition:all 0s ease-in-out}input[type=range]::-webkit-slider-thumb{height:20px;width:20px;border-radius:50%;background-color:var(--simple-fields-background-color,transparent);box-shadow:0 1px 5px 0 rgba(0,0,0,.6);cursor:pointer;-webkit-appearance:none;margin-top:-2px;transition:all 0s ease-in-out}input[type=range][disabled]::-webkit-slider-thumb,input[type=range][readonly]::-webkit-slider-thumb{cursor:not-allowed}input[type=range]:focus::-webkit-slider-thumb{background:var(--simple-fields-accent-color,#3f51b5);transition:all 0s ease-in-out}:host([error]) input[type=range]::-webkit-slider-thumb{background:var(--simple-fields-error-color,#b40000);transition:all 0s ease-in-out}input[type=range][disabled]::-webkit-slider-thumb,input[type=range][readonly]::-webkit-slider-thumb{background:var(--simple-fields-border-color,#999);cursor:not-allowed;box-shadow:none;transition:all 0s ease-in-out}input[type=range]::-moz-range-track{width:100%;height:16px;cursor:pointer;background:var(--simple-fields-border-color-light,#ccc);border-radius:8px;transition:all 0s ease-in-out}input[type=range][disabled]::-moz-range-track,input[type=range][readonly]::-moz-range-track{cursor:not-allowed}:host([error]) input[type=range]::-moz-range-track{background:var(--simple-fields-faded-error-color,#ffc0c0);transition:all 0s ease-in-out}input[type=range]::-moz-range-thumb{height:20px;width:20px;border-radius:50%;background:var(--simple-fields-background-color,transparent);box-shadow:0 1px 5px 0 rgba(0,0,0,.6);cursor:pointer;transition:all 0s ease-in-out}input[type=range]:focus::-moz-range-thumb{background:var(--simple-fields-accent-color,#3f51b5);transition:all 0s ease-in-out}:host([error]) input[type=range]::-moz-range-thumb{background:var(--simple-fields-error-color,#b40000);transition:all 0s ease-in-out}input[type=range][disabled]::-moz-range-thumb,input[type=range][readonly]::-moz-range-thumb{background:var(--simple-fields-border-color,#999);cursor:not-allowed;box-shadow:none;transition:all 0s ease-in-out}input[type=range]::-ms-track{width:100%;height:16px;cursor:pointer;background:0 0;border-color:transparent;color:transparent;transition:all 0s ease-in-out}input[type=range][disabled]::-ms-track,input[type=range][readonly]::-ms-track{cursor:not-allowed}:host([error]) input[type=range]::-ms-track{background:var(--simple-fields-faded-error-color,#ffc0c0);transition:all 0s ease-in-out}input[type=range]::-ms-fill-lower{background:var(--simple-fields-border-color-light,#ccc);border-radius:8px}input[type=range]::-ms-fill-upper{background:var(--simple-fields-border-color-light,#ccc);border-radius:8px}input[type=range]::-ms-thumb{height:20px;width:20px;border-radius:50%;background:var(--simple-fields-background-color,transparent);box-shadow:0 1px 5px 0 rgba(0,0,0,.6);cursor:pointer}input[type=range][disabled]::-ms-thumb,input[type=range][readonly]::-ms-thumb{cursor:not-allowed}input[type=range]:focus::-ms-thumb{background:var(--simple-fields-accent-color,#3f51b5)}:host([error]) input[type=range]::-ms-thumb{background:var(--simple-fields-error-color,#b40000);transition:all 0s ease-in-out}input[type=range][disabled]::-ms-thumb,input[type=range][redonly]::-ms-thumb{background:var(--simple-fields-border-color,#999);cursor:not-allowed;box-shadow:none;transition:all 0s ease-in-out}input[type=range]:focus::-ms-fill-lower{background:var(--simple-fields-border-color-light,#ccc)}input[type=range]:focus::-ms-fill-upper{background:var(--simple-fields-border-color-light,#ccc)}`]}render(){return this.hasFieldset?this.fieldsetTemplate:super.render()}static get properties(){return{...super.properties,hovered:{type:Boolean,reflect:!0},accept:{type:String},autocomplete:{type:String},autofocus:{type:Boolean},blockOptions:{type:Boolean,attribute:"block-options"},capture:{type:String},counter:{type:String},dirname:{type:String},itemsList:{type:Array,attribute:"items-list"},list:{type:String},max:{type:Number},maxlength:{type:Number},min:{type:Number},minlength:{type:Number},multiple:{type:Boolean},options:{type:Object},placeholder:{type:String},size:{type:Number},spellcheck:{type:String},step:{type:Number},value:{reflect:!0},wrap:{type:Boolean}}}constructor(){super(),this.autocomplete="off",this.autofocus=!1,this.multiple=!1,this.readonly=!1,this.spellcheck=!1,this.itemsList=[],this.options={},this.hovered=!1,this.wrap=!1}firstUpdated(e){super.firstUpdated&&super.firstUpdated(e),["checkbox","radio"].includes(this.type)&&(this.addEventListener("click",this._selectionShortCut.bind(this)),this.addEventListener("mousedown",this._hoverState.bind(this)),this.addEventListener("mouseover",this._hoverState.bind(this)),this.addEventListener("focusin",this._hoverState.bind(this)),this.addEventListener("focusout",this._hoverStateOff.bind(this)),this.addEventListener("mouseout",this._hoverStateOff.bind(this)))}_selectionShortCut(e){let t=!!this.value;this._handleIconClick(t)}_hoverState(){this.hovered=!0}_hoverStateOff(){this.hovered=!1}updated(e){this.field||this._updateField(),e.forEach(((e,t)=>{"id"!==t||this.id||(this.id=this._generateUUID()),this._getAttributes(this.type).includes(t)&&this._updateAttribute(t),"value"===t&&this.value!==e&&this.fieldValueChanged(),["counter","maxlength","type"].includes(t)&&["text","textarea"].includes(this.type)&&this._updateCount(),("type"===t&&this.type!==e||["itemsList","options"].includes(t))&&this._updateField()}))}fieldValueChanged(){this.field.value!==this.value&&(this.field.value=this.value),this._fireValueChanged()}get hasFieldset(){return("radio"===this.type||"checkbox"===this.type)&&!this.noOptions}get fieldElementTag(){return"select"===this.type||"text"===this.type&&!this.noOptions?"select":"textarea"===this.type?"textarea":this.hasFieldset?"fieldset":"input"}get fieldMainTemplate(){return t` <div class="${this.inline||["checkbox","color","radio"].includes(this.type||"text")?"field-main inline":"field-main"} ${this.sortedOptions&&!this.sortedOptions.length>0?"field-main-multi":"field-main-single"}" part="field-main"> ${this.labelTemplate} <div id="field-main-inner" part="field-main-inner"> ${this.prefixTemplate} ${"input"===this.fieldElementTag?this.inputTemplate:"select"===this.fieldElementTag?this.selectTemplate:"textarea"===this.fieldElementTag?this.textareaTemplate:""} ${this.suffixTemplate} </div> </div> `}get fieldMeta(){return t` <div id="fieldmeta" aria-live="polite" part="field-meta"></div> `}get fieldsetTemplate(){return t` <fieldset part="fieldset" class="${this.blockOptions?"block-options":"inline-options"}"> <legend class="label-main" ?hidden="${!this.label}" part="fieldset-legend"> ${this.label}${this.error||this.required?"*":""} </legend> <div id="options" part="fieldset-options"> ${(this.sortedOptions||[]).map((e=>t` <div class="option" part="option"> <label for="${this.id}.${e.value}" class="radio-label" part="option-label">${e.text}</label>${this.getInput(e)} </div> `))} </div> ${this.fieldBottom} </fieldset> `}_handleIconClick(e,t){this.disabled||this.readonly||(this.value=t?"radio"===this.type&&e?void 0:"radio"===this.type?(t||{}).value:e?(this.value||[]).filter((e=>e!==t.value)):[...this.value||[],(t||{}).value]:!e,this.multicheck&&this.autovalidate&&(this.error=!1,this.validate()))}getOptionIcon(e){return e&&"checkbox"===this.type?"icons:check-box":"checkbox"===this.type?"icons:check-box-outline-blank":e?"icons:radio-button-checked":"icons:radio-button-unchecked"}getInput(e){let i=("radio"===this.type||"checkbox"===this.type)&&(e?"radio"===this.type?this.value===(e||{}).value:(this.value||[]).includes&&(this.value||[]).includes((e||{}).value):!!this.value),o=this.getOptionIcon(i);return t` <span class="input-option" part="option-inner"> <input ?autofocus="${this.autofocus}" aria-descrbedby="${this.describedBy||""}" .aria-invalid="${this.error?"true":"false"}" @blur="${this._onFocusout}" @change="${this._handleFieldChange}" ?checked="${i}" class="field ${["checkbox","color","file","radio","range"].includes(this.type)?"":"box-input"}" ?disabled="${this.disabled}" @focus="${this._onFocusin}" ?hidden="${this.hidden}" id="${this.id}.${e?e.value:""}" @input="${this._handleFieldChange}" name="${this.id}" .placeholder="${this.placeholder||""}" ?readonly="${this.readonly}" ?required="${this.required}" tabindex="0" type="${this.type}" value="${e?(e||{}).value:this.value}" part="option-input"> ${"checkbox"!==this.type&&"radio"!==this.type?"":t` <simple-icon-lite icon="${o}" @click="${t=>{t.preventDefault(),t.stopPropagation(),this._handleIconClick(i,e)}}" part="option-icon"> </simple-icon-lite> `} </span> `}get inputTemplate(){return this.getInput()}get multicheck(){return this.hasFieldset}get noOptions(){return this.itemsList.length<1&&Object.keys(this.options||{}).length<1}get numberError(){let e=!!this._getFieldValue()&&this._getFieldValue().length,t=!("select"!==this.type&&!this.multicheck)&&this.min,i=!("select"!==this.type&&!this.multicheck)&&this.max;return i&&e&&i<e?i-e:!!(t&&e&&t>e)&&t-e}get sortedOptions(){let e=(this.itemsList||[]).map(((e,t)=>"object"==typeof e?e:{value:e,text:e}));return Object.keys(this.options||{}).sort(((e,t)=>e>t?1:-1)).forEach((t=>e.push({value:t,text:this.options[t]}))),e}get selectTemplate(){return t` <select ?autofocus="${this.autofocus}" aria-descrbedby="${this.describedBy}" aria-invalid="${this.error?"true":"false"}" @blur="${this._onFocusout}" @change="${this._handleFieldChange}" class="field" ?disabled="${this.disabled}" @focus="${this._onFocusin}" ?hidden="${this.hidden}" id="${this.id}" ?multiple="${this.multiple}" name="${this.id}" ?readonly="${this.readonly}" ?required="${this.required}" tabindex="0" part="select"> ${(this.sortedOptions||[]).map((e=>t` <option part="select-option" .id="${this.id}.${e.value}" ?selected="${this.multiple?this.value&&this.value.includes(e.value):this.value===e.value}" .value="${e.value}"> ${e.text} </option> `))} </select> <simple-icon-lite icon="arrow-drop-down"></simple-icon-lite> `}get slottedFieldObserver(){}get textareaTemplate(){return t` <textarea aria-invalid="${this.error?"true":"false"}" ?autofocus="${this.autofocus}" @blur="${this._onFocusout}" class="field box-input" @change="${this._handleFieldChange}" @keydown="${e=>e.stopPropagation()}" ?disabled="${this.disabled}" @focus="${this._onFocusin}" ?hidden="${this.hidden}" id="${this.id}" @input="${this._handleFieldChange}" name="${this.id}" ?readonly="${this.readonly}" ?required="${this.required}" rows="1" tabindex="0" part="textarea">
  ${this.value||""}</textarea> `}_fireValueChanged(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_handleFieldChange(e){super._handleFieldChange(),this.multicheck&&this.autovalidate&&(this.error=!1,this.validate())}_getAttributes(e){return{checkbox:["autocomplete","form","list"],color:["autocomplete","form","list"],date:["autocomplete","form","list","max","min","step"],"datetime-local":["form","list","max","min","step"],email:["autocomplete","form","list","placeholder"],file:["autocomplete","accept","capture","form","list"],hidden:["autocomplete","form"],month:["autocomplete","form","list","max","min","step"],number:["autocomplete","form","list","max","min","step"],password:["autocomplete","form","list","maxlength","maxlength","pattern","placeholder"],radio:["autocomplete","form","list"],range:["autocomplete","form","list","max","min","step"],search:["autocomplete","dirname","form","list","maxlength","maxlength","placeholder"],select:["autocomplete","form","list","size"],tel:["autocomplete","form","list","maxlength","maxlength","pattern","placeholder"],text:["autocomplete","dirname","form","list","maxlength","maxlength","pattern","placeholder"],textarea:["autocomplete","autocomplete","form","maxlength","maxlength","placeholder","spellcheck","wrap"],time:["autocomplete","form","list","max","min","step"],url:["autocomplete","form","list","maxlength","maxlength","placeholder"],week:["autocomplete","form","list","max","min","step"]}[e]}_getFieldsetValue(){return this.value}_observeAndListen(e=!0){e?this.addEventListener("click",this.focus):this.removeEventListener("click",this.focus)}_updateAttribute(e){this.field&&this[e]!==this.field.getAttribute(e)&&(this[e]||0===this[e]?this.field.setAttribute(e,this[e]):this.field.removeAttribute(e,this[e]))}_updateField(){this.type=this._getValidType(this.type),this.field=this.shadowRoot&&this.shadowRoot.querySelector(this.fieldElementTag)?this.shadowRoot.querySelector(this.fieldElementTag):void 0,this._getAttributes(this.type).forEach((e=>this._updateAttribute(e))),"select"!==this.type&&this.field&&this._updateAttribute("value"),this.field&&this.__delayedFocus&&this.focus()}}};class O extends(F(i)){}window.customElements.define(O.tag,O);var P=Object.freeze({__proto__:null,SimpleFieldsField:O,SimpleFieldsFieldBehaviors:F});
/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */class j extends z{static get styles(){return[...super.styles,e`:host{display:block;--simple-picker-background-color:var(--simple-fields-background-color,transparent);--simple-picker-border-width:0;--simple-picker-focus-border-width:0;--simple-picker-display:block;--simple-picker-listbox-border-width:1px;--simple-picker-listbox-outline:none}:host([hidden]){display:none}`]}render(){return t` <div id="schema-fields" aria-live="polite" part="fields-list"> <slot></slot> </div>`}static get haxProperties(){return{}}static get properties(){return{...super.properties,disableResponsive:{type:Boolean,attribute:"disable-responsive"},fields:{type:Array},schematizer:{type:Object,attribute:"schematizer"},label:{type:String},__activeTabs:{type:Object,attribute:"active-path"},codeTheme:{type:String,attribute:"code-theme"}}}static get tag(){return"simple-fields"}constructor(){super(),this.activeTabs={},this.__codeElements=[],this.disableResponsive=!1,setTimeout((()=>{this.addEventListener("a11y-tabs-active-changed",this._handleActiveTab)}),0)}get convertedSchema(){return{$schema:"http://json-schema.org/schema#",title:this.label,type:"object",required:[],properties:this.fieldsToSchema(this.fields)}}get schemaConversion(){return this.elementizer||{defaultSettings:{element:"simple-fields-field",errorProperty:"errorMessage",invalidProperty:"invalid",noWrap:!0,attributes:{type:"text"},properties:{minLength:"minlength",maxLength:"maxlength"}},format:{radio:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"radio"},properties:{options:"options"},child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy"}}}},select:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"select"},properties:{options:"options",items:"itemsList"}}},"simple-picker":{defaultSettings:{import:"@lrnwebcomponents/simple-picker/simple-picker.js",element:"simple-picker",attributes:{autofocus:!0,justify:!0},properties:{options:"options",justify:"justify"}}}},type:{array:{defaultSettings:{element:"simple-fields-array",noWrap:!0,descriptionProperty:"description",child:{element:"simple-fields-array-item",noWrap:!0,descriptionProperty:"description",properties:{previewBy:"previewBy",sortable:!0}}}},boolean:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"checkbox",value:!1}}},file:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"},properties:{accepts:"accepts"}}},integer:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,step:1,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},"html-block":{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-html-block.js",element:"simple-fields-html-block",noWrap:!0,attributes:{autofocus:!1,required:!1}}},markup:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-code.js",element:"simple-fields-code",setValueProperty:"editorValue",noWrap:!0,properties:{theme:"theme"}},format:{"md-block":{defaultSettings:{element:"md-block",setValueProperty:"source",noWrap:!0}}}},number:{defaultSettings:{element:"simple-fields-field",noWrap:!0,type:"number",attributes:{autofocus:!0,type:"number"},properties:{minimum:"min",maximum:"max",multipleOf:"step"}}},object:{defaultSettings:{element:"simple-fields-fieldset",noWrap:!0},format:{tabs:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tabs.js",element:"simple-fields-tabs",noWrap:!0,child:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-tab.js",element:"simple-fields-tab",noWrap:!0,labelSlot:"label",descriptionSlot:""},properties:{layoutBreakpoint:"layoutBreakpoint",iconBreakpoint:"iconBreakpoint",sticky:"sticky",disableResponsive:this.disableResponsive}}},fields:{defaultSettings:{element:"simple-fields",noWrap:!0,descriptionProperty:"description",properties:{schema:"schema"}}}}},string:{format:{alt:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,required:!0}}},color:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"color"}}},colorpicker:{defaultSettings:{import:"@lrnwebcomponents/simple-colors/lib/simple-colors-picker.js",element:"simple-colors-picker",attributes:{autofocus:!0,justify:!0},properties:{justify:"justify"}}},combo:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-combo.js",element:"simple-fields-combo",noWrap:!0,attributes:{autofocus:!0,justify:!0}},properties:{autocomplete:"autocomplete",justify:"justify"}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},"date-time":{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"datetime-local"}}},date:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"date"}}},email:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"email"}}},fileupload:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-upload.js",element:"simple-fields-upload",noWrap:!0,attributes:{autofocus:!0}},properties:{autocomplete:"autocomplete"}},iconpicker:{defaultSettings:{import:"@lrnwebcomponents/simple-icon-picker/simple-icon-picker.js",element:"simple-icon-picker",attributes:{autofocus:!0,justify:!0},properties:{justify:"justify",options:"icons",exclude:"exclude",excludeSets:"excludeSets",includeSets:"includeSets"}}},month:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"month"}}},textarea:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"textarea"}}},time:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"time"}}},uri:{defaultSettings:{element:"simple-fields-field",noWrap:!0,attributes:{autofocus:!0,type:"file"}}},url:{defaultSettings:{import:"@lrnwebcomponents/simple-fields/lib/simple-fields-url-combo.js",element:"simple-fields-url-combo",noWrap:!0,attributes:{autofocus:!0,justify:!0},properties:{autocomplete:"autocomplete",alwaysExpanded:"alwaysExpanded",displayAs:"displayAs",options:"options"}}}}}}}}get fieldsConversion(){return this.schematizer||{defaultSettings:{type:"string"},format:{"simple-fields":{defaultSettings:{type:"object",format:"simple-fields"}}},inputMethod:{alt:{defaultSettings:{type:"string",format:"alt"}},array:{defaultSettings:{type:"array"},properties:{label:"itemLabel"}},boolean:{defaultSettings:{type:"boolean"}},code:{defaultSettings:{type:"markup"}},"code-editor":{defaultSettings:{type:"markup"}},color:{defaultSettings:{type:"string",format:"color"}},colorpicker:{defaultSettings:{type:"string",format:"colorpicker"}},combo:{defaultSettings:{type:"string",format:"combo"}},"date-time":{defaultSettings:{type:"string",format:"date-time"}},datepicker:{defaultSettings:{type:"string",format:"date"}},fieldset:{defaultSettings:{type:"object"}},fileupload:{defaultSettings:{type:"string",format:"fileupload"}},haxupload:{defaultSettings:{type:"string",format:"fileupload"}},"html-block":{defaultSettings:{type:"html-block"}},iconpicker:{defaultSettings:{type:"string",format:"iconpicker"}},markup:{defaultSettings:{type:"markup"}},"md-block":{defaultSettings:{type:"markup"}},monthpicker:{defaultSettings:{type:"string",format:"month"}},number:{defaultSettings:{type:"number"}},object:{defaultSettings:{type:"object"}},select:{defaultSettings:{type:"string",format:"select"}},slider:{defaultSettings:{type:"number",format:"slider"}},tabs:{defaultSettings:{type:"object",format:"tabs"}},textarea:{defaultSettings:{type:"string",format:"textarea"}},timepicker:{defaultSettings:{type:"string",format:"time"}},url:{defaultSettings:{type:"string",format:"url"}},weekpicker:{defaultSettings:{type:"string",format:"week"}}}}}updated(e){super.updated&&super.updated(e),e.forEach(((e,t)=>{["fields","fieldsConversion"].includes(t)&&(this.schema=this.convertedSchema),"__activeTabs"===t&&this.activeTabs!==e&&this._handleActiveTabs()}))}setActiveTab(e){let t=e.replace(/\.[0-9a-z]+$/,""),i=this.querySelector(`#${t}`),o=i.querySelector(`#${e}`);i&&o&&(i.activeTab=e)}setActivePath(e){e.split("/").forEach((e=>{this.setActiveTab(e)}))}_convertField(e,t=this.fieldsConversion,i={}){let o=Object.keys(e||{}),s=Object.keys(t||{}).filter((e=>o.includes(e)));return t.defaultSettings&&(i=t.defaultSettings),s.forEach((o=>{let s=e[o],r=t?t[o]:void 0,a=r?Array.isArray(s)?r[s[0]]:r[s]:void 0;a&&(i=this._convertField(e,a,r,i))})),i}_fieldToSchema(e){let t={};return Object.keys(e||{}).forEach((i=>{!e.inputMethod&&e.properties&&(e.inputMethod="object");let o=this._convertField(e);o.type&&(t.type=o.type),o.format&&(t.format=o.format),"pattern"===i?".*"!=e.validation&&(t.pattern=e.validation):"properties"===i?"array"===o.type&&Array.isArray(e.properties)?t.items={type:"object",properties:this.fieldsToSchema(e.properties)}:"array"===o.type?t.items=this._fieldToSchema(e.properties):t.properties=this.fieldsToSchema(e.properties):["items","inputMethod","property","properties","required","type","validation"].includes(i)||(t[i]=e[i])})),"markup"!=t.type||t.theme||(t.theme=this.codeTheme),t}fieldsToSchema(e){let t={};return e&&e.forEach&&e.forEach((e=>{let i=e.property?e.property:"";t[i]=this._fieldToSchema(e)})),t}_handleActiveTabs(){this.dispatchEvent(new CustomEvent("active-tabs-changed",{bubbles:!0,cancelable:!0,composed:!1,detail:this}))}_handleActiveTab(e){e&&e.detail&&e.detail.id&&(this.activeTabs[e.detail.id]=e.detail.activeTab)}}window.customElements.define(j.tag,j);var M=Object.freeze({__proto__:null,SimpleFields:j});export{E as A,v as S,y as a,j as b,A as c,b as d,F as e,d as f,P as g,M as h,m as s};
